+function(a){var b=function(b){a(b).on("click",'[data-dismiss="alert"]',this.close)};b.prototype.close=function(b){function e(){h.trigger("closed.bs.alert").remove()}var d=a(this),c=d.attr("data-target");c||(c=d.attr("href"),c=c&&c.replace(/.*(?=#[^\s]*$)/,""));var h=a(c);b&&b.preventDefault();h.length||(h=d.hasClass("alert")?d:d.parent());h.trigger(b=a.Event("close.bs.alert"));b.isDefaultPrevented()||(h.removeClass("in"),a.support.transition&&h.hasClass("fade")?h.one(a.support.transition.end,e).emulateTransitionEnd(150):
e())};var c=a.fn.alert;a.fn.alert=function(c){return this.each(function(){var e=a(this),d=e.data("bs.alert");d||e.data("bs.alert",d=new b(this));"string"==typeof c&&d[c].call(e)})};a.fn.alert.Constructor=b;a.fn.alert.noConflict=function(){return a.fn.alert=c,this};a(document).on("click.bs.alert.data-api",'[data-dismiss="alert"]',b.prototype.close)}(jQuery);
+function(a){var b=function(c,e){this.$element=a(c);this.options=a.extend({},b.DEFAULTS,e);this.isLoading=!1};b.DEFAULTS={loadingText:"loading..."};b.prototype.setState=function(b){var e=this.$element,d=e.is("input")?"val":"html",c=e.data();b+="Text";c.resetText||e.data("resetText",e[d]());e[d](c[b]||this.options[b]);setTimeout(a.proxy(function(){"loadingText"==b?(this.isLoading=!0,e.addClass("disabled").attr("disabled","disabled")):this.isLoading&&(this.isLoading=!1,e.removeClass("disabled").removeAttr("disabled"))},
this),0)};b.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var d=this.$element.find("input");"radio"==d.prop("type")&&(d.prop("checked")&&this.$element.hasClass("active")?a=!1:b.find(".active").removeClass("active"));a&&d.prop("checked",!this.$element.hasClass("active")).trigger("change")}a&&this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var e=a(this),d=e.data("bs.button"),g="object"==
typeof c&&c;d||e.data("bs.button",d=new b(this,g));"toggle"==c?d.toggle():c&&d.setState(c)})};a.fn.button.Constructor=b;a.fn.button.noConflict=function(){return a.fn.button=c,this};a(document).on("click.bs.button.data-api","[data-toggle^=button]",function(b){var e=a(b.target);e.hasClass("btn")||(e=e.closest(".btn"));e.button("toggle");b.preventDefault()})}(jQuery);
+function(a){var b=function(b,e){this.$element=a(b);this.$indicators=this.$element.find(".carousel-indicators");this.options=e;this.paused=this.sliding=this.interval=this.$active=this.$items=null;"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.DEFAULTS={interval:5E3,pause:"hover",wrap:!0};b.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&
(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this};b.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)};b.prototype.to=function(b){var e=this,d=this.getActiveIndex();if(!(b>this.$items.length-1||0>b))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(b)}):d==b?this.pause().cycle():this.slide(b>d?"next":"prev",a(this.$items[b]))};
b.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this};b.prototype.next=function(){if(!this.sliding)return this.slide("next")};b.prototype.prev=function(){if(!this.sliding)return this.slide("prev")};b.prototype.slide=function(b,e){var d=this.$element.find(".item.active"),c=e||d[b](),h=this.interval,k="next"==b?"left":"right",
m="next"==b?"first":"last",l=this;if(!c.length){if(!this.options.wrap)return;c=this.$element.find(".item")[m]()}if(c.hasClass("active"))return this.sliding=!1;m=a.Event("slide.bs.carousel",{relatedTarget:c[0],direction:k});this.$element.trigger(m);if(!m.isDefaultPrevented())return this.sliding=!0,h&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var d=a(l.$indicators.children()[l.getActiveIndex()]);d&&d.addClass("active")})),
a.support.transition&&this.$element.hasClass("slide")?(c.addClass(b),c[0].offsetWidth,d.addClass(k),c.addClass(k),d.one(a.support.transition.end,function(){c.removeClass([b,k].join(" ")).addClass("active");d.removeClass(["active",k].join(" "));l.sliding=!1;setTimeout(function(){l.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1E3*d.css("transition-duration").slice(0,-1))):(d.removeClass("active"),c.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),h&&this.cycle(),
this};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var e=a(this),d=e.data("bs.carousel"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c),h="string"==typeof c?c:g.slide;d||e.data("bs.carousel",d=new b(this,g));"number"==typeof c?d.to(c):h?d[h]():g.interval&&d.pause().cycle()})};a.fn.carousel.Constructor=b;a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this};a(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(b){var e=
a(this),d,c=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));d=a.extend({},c.data(),e.data());var h=e.attr("data-slide-to");h&&(d.interval=!1);c.carousel(d);(h=e.attr("data-slide-to"))&&c.data("bs.carousel").to(h);b.preventDefault()});a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var b=a(this);b.carousel(b.data())})})}(jQuery);
+function(a){function b(d){a(f).remove();a(e).each(function(){var b=c(a(this)),e={relatedTarget:this};b.hasClass("open")&&(b.trigger(d=a.Event("hide.bs.dropdown",e)),d.isDefaultPrevented()||b.removeClass("open").trigger("hidden.bs.dropdown",e))})}function c(d){var b=d.attr("data-target");b||(b=d.attr("href"),b=b&&/#[A-Za-z]/.test(b)&&b.replace(/.*(?=#[^\s]*$)/,""));return(b=b&&a(b))&&b.length?b:d.parent()}"use strict";var f=".dropdown-backdrop",e="[data-toggle=dropdown]",d=function(d){a(d).on("click.bs.dropdown",
this.toggle)};d.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var g=c(e);d=g.hasClass("open");b();if(!d){"ontouchstart"in document.documentElement&&!g.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var f={relatedTarget:this};g.trigger(d=a.Event("show.bs.dropdown",f));if(d.isDefaultPrevented())return;g.toggleClass("open").trigger("shown.bs.dropdown",f);e.focus()}return!1}};d.prototype.keydown=function(d){if(/(38|40|27)/.test(d.keyCode)){var b=
a(this);d.preventDefault();d.stopPropagation();if(!b.is(".disabled, :disabled")){var g=c(b),f=g.hasClass("open");if(!f||f&&27==d.keyCode)return 27==d.which&&g.find(e).focus(),b.click();b=g.find("[role=menu] li:not(.divider):visible a, [role=listbox] li:not(.divider):visible a");b.length&&(g=b.index(b.filter(":focus")),38==d.keyCode&&0<g&&g--,40==d.keyCode&&g<b.length-1&&g++,~g||(g=0),b.eq(g).focus())}}};var g=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var e=a(this),c=e.data("bs.dropdown");
c||e.data("bs.dropdown",c=new d(this));"string"==typeof b&&c[b].call(e)})};a.fn.dropdown.Constructor=d;a.fn.dropdown.noConflict=function(){return a.fn.dropdown=g,this};a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",e,d.prototype.toggle).on("keydown.bs.dropdown.data-api",e+", [role=menu], [role=listbox]",d.prototype.keydown)}(jQuery);
+function(a){var b=function(b,e){this.options=e;this.$element=a(b);this.$backdrop=this.isShown=null;this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};b.prototype.toggle=function(a){return this[this.isShown?"hide":"show"](a)};b.prototype.show=function(b){var e=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d);this.isShown||d.isDefaultPrevented()||
(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&e.$element.hasClass("fade");e.$element.parent().length||e.$element.appendTo(document.body);e.$element.show().scrollTop(0);d&&e.$element[0].offsetWidth;e.$element.addClass("in").attr("aria-hidden",!1);e.enforceFocus();var c=a.Event("shown.bs.modal",{relatedTarget:b});d?e.$element.find(".modal-dialog").one(a.support.transition.end,
function(){e.$element.focus().trigger(c)}).emulateTransitionEnd(300):e.$element.focus().trigger(c)}))};b.prototype.hide=function(b){b&&b.preventDefault();b=a.Event("hide.bs.modal");this.$element.trigger(b);this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,
this)).emulateTransitionEnd(300):this.hideModal())};b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]!==a.target&&!this.$element.has(a.target).length&&this.$element.focus()},this))};b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")};b.prototype.hideModal=
function(){var a=this;this.$element.hide();this.backdrop(function(){a.removeBackdrop();a.$element.trigger("hidden.bs.modal")})};b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};b.prototype.backdrop=function(b){var e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&e;this.$backdrop=a('<div class="modal-backdrop '+e+'" />').appendTo(document.body);this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){a.target===
a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this));d&&this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");b&&(d?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b())}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()):b&&b()};var c=a.fn.modal;a.fn.modal=
function(c,e){return this.each(function(){var d=a(this),g=d.data("bs.modal"),h=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);g||d.data("bs.modal",g=new b(this,h));"string"==typeof c?g[c](e):h.show&&g.show(e)})};a.fn.modal.Constructor=b;a.fn.modal.noConflict=function(){return a.fn.modal=c,this};a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(b){var e=a(this),d=e.attr("href"),c=a(e.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),d=c.data("bs.modal")?"toggle":
a.extend({remote:!/#/.test(d)&&d},c.data(),e.data());e.is("a")&&b.preventDefault();c.modal(d,this).one("hide",function(){e.is(":visible")&&e.focus()})});a(document).on("show.bs.modal",".modal",function(){a(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){a(document.body).removeClass("modal-open")})}(jQuery);
+function(a){var b=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null;this.init("tooltip",a,b)};b.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1};b.prototype.init=function(b,e,d){this.enabled=!0;this.type=b;this.$element=a(e);this.options=this.getOptions(d);b=this.options.trigger.split(" ");
for(e=b.length;e--;)if(d=b[e],"click"==d)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=d){var c="hover"==d?"mouseleave":"focusout";this.$element.on(("hover"==d?"mouseenter":"focusin")+"."+this.type,this.options.selector,a.proxy(this.enter,this));this.$element.on(c+"."+this.type,this.options.selector,a.proxy(this.leave,this))}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};b.prototype.getDefaults=
function(){return b.DEFAULTS};b.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b};b.prototype.getDelegateOptions=function(){var b={},e=this.getDefaults();return this._options&&a.each(this._options,function(a,c){e[a]!=c&&(b[a]=c)}),b};b.prototype.enter=function(b){var e=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);
clearTimeout(e.timeout);e.hoverState="in";if(!e.options.delay||!e.options.delay.show)return e.show();e.timeout=setTimeout(function(){"in"==e.hoverState&&e.show()},e.options.delay.show)};b.prototype.leave=function(b){var e=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);clearTimeout(e.timeout);e.hoverState="out";if(!e.options.delay||!e.options.delay.hide)return e.hide();e.timeout=setTimeout(function(){"out"==e.hoverState&&e.hide()},e.options.delay.hide)};
b.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled&&(this.$element.trigger(b),!b.isDefaultPrevented())){var e=this,b=this.tip();this.setContent();this.options.animation&&b.addClass("fade");var d="function"==typeof this.options.placement?this.options.placement.call(this,b[0],this.$element[0]):this.options.placement,c=/\s?auto?\s?/i,h=c.test(d);h&&(d=d.replace(c,"")||"top");b.detach().css({top:0,left:0,display:"block"}).addClass(d);this.options.container?
b.appendTo(this.options.container):b.insertAfter(this.$element);var c=this.getPosition(),k=b[0].offsetWidth,m=b[0].offsetHeight;if(h){var l=this.$element.parent(),h=d,p=document.documentElement.scrollTop||document.body.scrollTop,n="body"==this.options.container?window.innerWidth:l.outerWidth(),q="body"==this.options.container?window.innerHeight:l.outerHeight(),l="body"==this.options.container?0:l.offset().left,d="bottom"==d&&c.top+c.height+m-p>q?"top":"top"==d&&0>c.top-p-m?"bottom":"right"==d&&c.right+
k>n?"left":"left"==d&&c.left-k<l?"right":d;b.removeClass(h).addClass(d)}c=this.getCalculatedOffset(d,c,k,m);this.applyPlacement(c,d);this.hoverState=null;d=function(){e.$element.trigger("shown.bs."+e.type)};a.support.transition&&this.$tip.hasClass("fade")?b.one(a.support.transition.end,d).emulateTransitionEnd(150):d()}};b.prototype.applyPlacement=function(b,e){var d,c=this.tip(),h=c[0].offsetWidth,k=c[0].offsetHeight,m=parseInt(c.css("margin-top"),10),l=parseInt(c.css("margin-left"),10);isNaN(m)&&
(m=0);isNaN(l)&&(l=0);b.top+=m;b.left+=l;a.offset.setOffset(c[0],a.extend({using:function(a){c.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0);c.addClass("in");m=c[0].offsetWidth;l=c[0].offsetHeight;"top"==e&&l!=k&&(d=!0,b.top=b.top+k-l);/bottom|top/.test(e)?(k=0,0>b.left&&(k=-2*b.left,b.left=0,c.offset(b),m=c[0].offsetWidth,l=c[0].offsetHeight),this.replaceArrow(k-h+m,m,"left")):this.replaceArrow(l-k,l,"top");d&&c.offset(b)};b.prototype.replaceArrow=function(a,b,d){this.arrow().css(d,
a?50*(1-a/b)+"%":"")};b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b);a.removeClass("fade in top bottom left right")};b.prototype.hide=function(){function b(){"in"!=e.hoverState&&d.detach();e.$element.trigger("hidden.bs."+e.type)}var e=this,d=this.tip(),c=a.Event("hide.bs."+this.type);this.$element.trigger(c);if(!c.isDefaultPrevented())return d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one(a.support.transition.end,
b).emulateTransitionEnd(150):b(),this.hoverState=null,this};b.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")};b.prototype.hasContent=function(){return this.getTitle()};b.prototype.getPosition=function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())};
b.prototype.getCalculatedOffset=function(a,b,d,c){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-d/2}:"top"==a?{top:b.top-c,left:b.left+b.width/2-d/2}:"left"==a?{top:b.top+b.height/2-c/2,left:b.left-d}:{top:b.top+b.height/2-c/2,left:b.left+b.width}};b.prototype.getTitle=function(){var a,b=this.$element,d=this.options;return a=b.attr("data-original-title")||("function"==typeof d.title?d.title.call(b[0]):d.title),a};b.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)};
b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};b.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)};b.prototype.enable=function(){this.enabled=!0};b.prototype.disable=function(){this.enabled=!1};b.prototype.toggleEnabled=function(){this.enabled=!this.enabled};b.prototype.toggle=function(b){b=b?a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;b.tip().hasClass("in")?
b.leave(b):b.enter(b)};b.prototype.destroy=function(){clearTimeout(this.timeout);this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var e=a(this),d=e.data("bs.tooltip"),g="object"==typeof c&&c;if(d||"destroy"!=c)d||e.data("bs.tooltip",d=new b(this,g)),"string"==typeof c&&d[c]()})};a.fn.tooltip.Constructor=b;a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(jQuery);
+function(a){var b=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw Error("Popover requires tooltip.js");b.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype);b.prototype.constructor=b;b.prototype.getDefaults=function(){return b.DEFAULTS};b.prototype.setContent=
function(){var a=this.tip(),b=this.getTitle(),d=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b);a.find(".popover-content")[this.options.html?"string"==typeof d?"html":"append":"text"](d);a.removeClass("fade top bottom left right in");a.find(".popover-title").html()||a.find(".popover-title").hide()};b.prototype.hasContent=function(){return this.getTitle()||this.getContent()};b.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||
("function"==typeof b.content?b.content.call(a[0]):b.content)};b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};b.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var e=a(this),d=e.data("bs.popover"),g="object"==typeof c&&c;if(d||"destroy"!=c)d||e.data("bs.popover",d=new b(this,g)),"string"==typeof c&&d[c]()})};a.fn.popover.Constructor=b;a.fn.popover.noConflict=
function(){return a.fn.popover=c,this}}(jQuery);
+function(a){var b=function(b){this.element=a(b)};b.prototype.show=function(){var b=this.element,e=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,""));if(!b.parent("li").hasClass("active")){var c=e.find(".active:last a")[0],h=a.Event("show.bs.tab",{relatedTarget:c});b.trigger(h);h.isDefaultPrevented()||(d=a(d),this.activate(b.parent("li"),e),this.activate(d,d.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:c})}))}};b.prototype.activate=
function(b,e,d){function c(){h.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");b.addClass("active");k?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade");b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active");d&&d()}var h=e.find("> .active"),k=d&&a.support.transition&&h.hasClass("fade");k?h.one(a.support.transition.end,c).emulateTransitionEnd(150):c();h.removeClass("in")};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var e=a(this),
d=e.data("bs.tab");d||e.data("bs.tab",d=new b(this));"string"==typeof c&&d[c]()})};a.fn.tab.Constructor=b;a.fn.tab.noConflict=function(){return a.fn.tab=c,this};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault();a(this).tab("show")})}(jQuery);
+function(a){var b=function(c,e){this.options=a.extend({},b.DEFAULTS,e);this.$window=a(window).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this));this.$element=a(c);this.affixed=this.unpin=this.pinnedOffset=null;this.checkPosition()};b.RESET="affix affix-top affix-bottom";b.DEFAULTS={offset:0};b.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(b.RESET).addClass("affix");
var a=this.$window.scrollTop();return this.pinnedOffset=this.$element.offset().top-a};b.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)};b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var c=a(document).height(),e=this.$window.scrollTop(),d=this.$element.offset(),g=this.options.offset,h=g.top,k=g.bottom;"top"==this.affixed&&(d.top+=e);"object"!=typeof g&&(k=h=g);"function"==typeof h&&(h=g.top(this.$element));"function"==typeof k&&
(k=g.bottom(this.$element));e=null!=this.unpin&&e+this.unpin<=d.top?!1:null!=k&&d.top+this.$element.height()>=c-k?"bottom":null!=h&&e<=h?"top":!1;this.affixed!==e&&(this.unpin&&this.$element.css("top",""),d="affix"+(e?"-"+e:""),g=a.Event(d+".bs.affix"),this.$element.trigger(g),g.isDefaultPrevented()||(this.affixed=e,this.unpin="bottom"==e?this.getPinnedOffset():null,this.$element.removeClass(b.RESET).addClass(d).trigger(a.Event(d.replace("affix","affixed"))),"bottom"==e&&this.$element.offset({top:c-
k-this.$element.height()})))}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var e=a(this),d=e.data("bs.affix"),g="object"==typeof c&&c;d||e.data("bs.affix",d=new b(this,g));"string"==typeof c&&d[c]()})};a.fn.affix.Constructor=b;a.fn.affix.noConflict=function(){return a.fn.affix=c,this};a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{};c.offsetBottom&&(c.offset.bottom=c.offsetBottom);c.offsetTop&&(c.offset.top=
c.offsetTop);b.affix(c)})})}(jQuery);
+function(a){var b=function(c,e){this.$element=a(c);this.options=a.extend({},b.DEFAULTS,e);this.transitioning=null;this.options.parent&&(this.$parent=a(this.options.parent));this.options.toggle&&this.toggle()};b.DEFAULTS={toggle:!0};b.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"};b.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b=a.Event("show.bs.collapse");this.$element.trigger(b);if(!b.isDefaultPrevented()){if((b=this.$parent&&
this.$parent.find("> .panel > .in"))&&b.length){var c=b.data("bs.collapse");if(c&&c.transitioning)return;b.collapse("hide");c||b.data("bs.collapse",null)}var d=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[d](0);this.transitioning=1;b=function(){this.$element.removeClass("collapsing").addClass("collapse in")[d]("auto");this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return b.call(this);c=a.camelCase(["scroll",d].join("-"));
this.$element.one(a.support.transition.end,a.proxy(b,this)).emulateTransitionEnd(350)[d](this.$element[0][c])}}};b.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");this.$element.trigger(b);if(!b.isDefaultPrevented()){b=this.dimension();this.$element[b](this.$element[b]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse").removeClass("in");this.transitioning=1;var c=function(){this.transitioning=0;this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};
if(!a.support.transition)return c.call(this);this.$element[b](0).one(a.support.transition.end,a.proxy(c,this)).emulateTransitionEnd(350)}}};b.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var e=a(this),d=e.data("bs.collapse"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);!d&&g.toggle&&"show"==c&&(c=!c);d||e.data("bs.collapse",d=new b(this,g));"string"==typeof c&&d[c]()})};a.fn.collapse.Constructor=
b;a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this};a(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(b){var c=a(this),d;b=c.attr("data-target")||b.preventDefault()||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"");d=a(b);var g=(b=d.data("bs.collapse"))?"toggle":c.data(),h=c.attr("data-parent"),k=h&&a(h);b&&b.transitioning||(k&&k.find('[data-toggle=collapse][data-parent="'+h+'"]').not(c).addClass("collapsed"),c[d.hasClass("in")?"addClass":"removeClass"]("collapsed"));
d.collapse(g)})}(jQuery);
+function(a){function b(c,e){var d,g=a.proxy(this.process,this);this.$element=a(c).is("body")?a(window):a(c);this.$body=a("body");this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",g);this.options=a.extend({},b.DEFAULTS,e);this.selector=(this.options.target||(d=a(c).attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a";this.offsets=a([]);this.targets=a([]);this.activeTarget=null;this.refresh();this.process()}"use strict";b.DEFAULTS={offset:10};b.prototype.refresh=function(){var b=
this.$element[0]==window?"offset":"position";this.offsets=a([]);this.targets=a([]);var c=this;this.$body.find(this.selector).map(function(){var d=a(this),d=d.data("target")||d.attr("href"),g=/^#./.test(d)&&a(d);return g&&g.length&&g.is(":visible")&&[[g[b]().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),d]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]);c.targets.push(this[1])})};b.prototype.process=function(){var a=this.$scrollElement.scrollTop()+
this.options.offset,b=(this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight)-this.$scrollElement.height(),d=this.offsets,c=this.targets,h=this.activeTarget,k;if(a>=b)return h!=(k=c.last()[0])&&this.activate(k);if(h&&a<=d[0])return h!=(k=c[0])&&this.activate(k);for(k=d.length;k--;)h!=c[k]&&a>=d[k]&&(!d[k+1]||a<=d[k+1])&&this.activate(c[k])};b.prototype.activate=function(b){this.activeTarget=b;a(this.selector).parentsUntil(this.options.target,".active").removeClass("active");b=a(this.selector+
'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]').parents("li").addClass("active");b.parent(".dropdown-menu").length&&(b=b.closest("li.dropdown").addClass("active"));b.trigger("activate.bs.scrollspy")};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var e=a(this),d=e.data("bs.scrollspy"),g="object"==typeof c&&c;d||e.data("bs.scrollspy",d=new b(this,g));"string"==typeof c&&d[c]()})};a.fn.scrollspy.Constructor=b;a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=
c,this};a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(jQuery);
+function(a){"use strict";a.fn.emulateTransitionEnd=function(b){var c=!1,f=this;a(this).one(a.support.transition.end,function(){c=!0});return setTimeout(function(){c||a(f).trigger(a.support.transition.end)},b),this};a(function(){var b=a.support,c;a:{c=document.createElement("bootstrap");var f={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},e;for(e in f)if(void 0!==c.style[e]){c={end:f[e]};break a}c=!1}b.transition=
c})}(jQuery);(function(a,b){function c(){return new Date(Date.UTC.apply(Date,arguments))}function f(){var a=new Date;return c(a.getFullYear(),a.getMonth(),a.getDate())}function e(a){return function(){return this[a].apply(this,arguments)}}function d(b,d){function c(a,b){return b.toLowerCase()}var e=a(b).data(),g={},k,h=new RegExp("^"+d.toLowerCase()+"([A-Z])");d=new RegExp("^"+d.toLowerCase());for(var f in e)d.test(f)&&(k=f.replace(h,c),g[k]=e[f]);return g}function g(b){var d={};if(!r[b]&&(b=b.split("-")[0],!r[b]))return;
var c=r[b];a.each(q,function(a,b){b in c&&(d[b]=c[b])});return d}var h=a(window),k=function(){var b={get:function(a){return this.slice(a)[0]},contains:function(a){a=a&&a.valueOf();for(var b=0,d=this.length;b<d;b++)if(this[b].valueOf()===a)return b;return-1},remove:function(a){this.splice(a,1)},replace:function(b){b&&(a.isArray(b)||(b=[b]),this.clear(),this.push.apply(this,b))},clear:function(){this.splice(0)},copy:function(){var a=new k;a.replace(this);return a}};return function(){var d=[];d.push.apply(d,
arguments);a.extend(d,b);return d}}(),m=function(b,d){this.dates=new k;this.viewDate=f();this.focusDate=null;this._process_options(d);this.element=a(b);this.isInline=!1;this.isInput=this.element.is("input");this.hasInput=(this.component=this.element.is(".date")?this.element.find(".add-on, .input-group-addon, .btn"):!1)&&this.element.find("input").length;this.component&&0===this.component.length&&(this.component=!1);this.picker=a(v.template);this._buildEvents();this._attachEvents();this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):
this.picker.addClass("datepicker-dropdown dropdown-menu");this.o.rtl&&this.picker.addClass("datepicker-rtl");this.viewMode=this.o.startView;this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(a,b){return parseInt(b)+1});this._allow_update=!1;this.setStartDate(this._o.startDate);this.setEndDate(this._o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.fillDow();this.fillMonths();this._allow_update=!0;this.update();this.showMode();this.isInline&&this.show()};
m.prototype={constructor:m,_process_options:function(b){this._o=a.extend({},this._o,b);b=this.o=a.extend({},this._o);var d=b.language;r[d]||(d=d.split("-")[0],r[d]||(d=n.language));b.language=d;switch(b.startView){case 2:case "decade":b.startView=2;break;case 1:case "year":b.startView=1;break;default:b.startView=0}switch(b.minViewMode){case 1:case "months":b.minViewMode=1;break;case 2:case "years":b.minViewMode=2;break;default:b.minViewMode=0}b.startView=Math.max(b.startView,b.minViewMode);!0!==b.multidate&&
(b.multidate=Number(b.multidate)||!1,b.multidate=!1!==b.multidate?Math.max(0,b.multidate):1);b.multidateSeparator=String(b.multidateSeparator);b.weekStart%=7;b.weekEnd=(b.weekStart+6)%7;d=v.parseFormat(b.format);-Infinity!==b.startDate&&(b.startDate=b.startDate?b.startDate instanceof Date?this._local_to_utc(this._zero_time(b.startDate)):v.parseDate(b.startDate,d,b.language):-Infinity);Infinity!==b.endDate&&(b.endDate=b.endDate?b.endDate instanceof Date?this._local_to_utc(this._zero_time(b.endDate)):
v.parseDate(b.endDate,d,b.language):Infinity);b.daysOfWeekDisabled=b.daysOfWeekDisabled||[];a.isArray(b.daysOfWeekDisabled)||(b.daysOfWeekDisabled=b.daysOfWeekDisabled.split(/[,\s]*/));b.daysOfWeekDisabled=a.map(b.daysOfWeekDisabled,function(a){return parseInt(a,10)});var d=String(b.orientation).toLowerCase().split(/\s+/g),c=b.orientation.toLowerCase(),d=a.grep(d,function(a){return/^auto|left|right|top|bottom$/.test(a)});b.orientation={x:"auto",y:"auto"};if(c&&"auto"!==c)if(1===d.length)switch(d[0]){case "top":case "bottom":b.orientation.y=
d[0];break;case "left":case "right":b.orientation.x=d[0]}else c=a.grep(d,function(a){return/^left|right$/.test(a)}),b.orientation.x=c[0]||"auto",c=a.grep(d,function(a){return/^top|bottom$/.test(a)}),b.orientation.y=c[0]||"auto"},_events:[],_secondaryEvents:[],_applyEvents:function(a){for(var d=0,c,e,g;d<a.length;d++)c=a[d][0],2===a[d].length?(e=b,g=a[d][1]):3===a[d].length&&(e=a[d][1],g=a[d][2]),c.on(g,e)},_unapplyEvents:function(a){for(var d=0,c,e,g;d<a.length;d++)c=a[d][0],2===a[d].length?(g=b,
e=a[d][1]):3===a[d].length&&(g=a[d][1],e=a[d][2]),c.off(e,g)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:a.proxy(this.show,this),keyup:a.proxy(function(b){-1===a.inArray(b.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:a.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:a.proxy(this.show,this),keyup:a.proxy(function(b){-1===a.inArray(b.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:a.proxy(this.keydown,
this)}],[this.component,{click:a.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:a.proxy(this.show,this)}]];this._events.push([this.element,"*",{blur:a.proxy(function(a){this._focused_from=a.target},this)}],[this.element,{blur:a.proxy(function(a){this._focused_from=a.target},this)}]);this._secondaryEvents=[[this.picker,{click:a.proxy(this.click,this)}],[a(window),{resize:a.proxy(this.place,this)}],[a(document),{"mousedown touchstart":a.proxy(function(a){this.element.is(a.target)||
this.element.find(a.target).length||this.picker.is(a.target)||this.picker.find(a.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(b,d){var c=d||this.dates.get(-1),c=this._utc_to_local(c);
this.element.trigger({type:b,date:c,dates:a.map(this.dates,this._utc_to_local),format:a.proxy(function(a,b){0===arguments.length?(a=this.dates.length-1,b=this.o.format):"string"===typeof a&&(b=a,a=this.dates.length-1);b=b||this.o.format;var d=this.dates.get(a);return v.formatDate(d,b,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body");this.picker.show();this.place();this._attachSecondaryEvents();this._trigger("show")},hide:function(){!this.isInline&&this.picker.is(":visible")&&
(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;this.isInput||delete this.element.data().date},_utc_to_local:function(a){return a&&new Date(a.getTime()+
6E4*a.getTimezoneOffset())},_local_to_utc:function(a){return a&&new Date(a.getTime()-6E4*a.getTimezoneOffset())},_zero_time:function(a){return a&&new Date(a.getFullYear(),a.getMonth(),a.getDate())},_zero_utc_time:function(a){return a&&new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()))},getDates:function(){return a.map(this.dates,this._utc_to_local)},getUTCDates:function(){return a.map(this.dates,function(a){return new Date(a)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},
getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,b);this._trigger("changeDate");this.setValue()},setUTCDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,a.map(b,this._utc_to_local));this._trigger("changeDate");this.setValue()},setDate:e("setDates"),setUTCDate:e("setUTCDates"),setValue:function(){var a=this.getFormattedDate();this.isInput?this.element.val(a).change():
this.component&&this.element.find("input").val(a).change()},getFormattedDate:function(d){d===b&&(d=this.o.format);var c=this.o.language;return a.map(this.dates,function(a){return v.formatDate(a,d,c)}).join(this.o.multidateSeparator)},setStartDate:function(a){this._process_options({startDate:a});this.update();this.updateNavArrows()},setEndDate:function(a){this._process_options({endDate:a});this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(a){this._process_options({daysOfWeekDisabled:a});
this.update();this.updateNavArrows()},place:function(){if(!this.isInline){var b=this.picker.outerWidth(),d=this.picker.outerHeight(),c=h.width(),e=h.height(),g=h.scrollTop(),k=parseInt(this.element.parents().filter(function(){return"auto"!==a(this).css("z-index")}).first().css("z-index"))+10,f=this.component?this.component.parent().offset():this.element.offset(),n=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),m=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),
l=f.left,p=f.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left");"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(l-=b-m)):(this.picker.addClass("datepicker-orient-left"),0>f.left?l-=f.left-10:f.left+b>c&&(l=c-b-10));b=this.o.orientation.y;"auto"===b&&(b=-g+f.top-d,e=g+e-(f.top+n+d),b=Math.max(b,e)===e?"top":"bottom");this.picker.addClass("datepicker-orient-"+
b);p="top"===b?p+n:p-(d+parseInt(this.picker.css("padding-top")));this.picker.css({top:p,left:l,zIndex:k})}},_allow_update:!0,update:function(){if(this._allow_update){var b=this.dates.copy(),d=[],c=!1;arguments.length?(a.each(arguments,a.proxy(function(a,b){b instanceof Date&&(b=this._local_to_utc(b));d.push(b)},this)),c=!0):(d=(d=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val())&&this.o.multidate?d.split(this.o.multidateSeparator):[d],delete this.element.data().date);
d=a.map(d,a.proxy(function(a){return v.parseDate(a,this.o.format,this.o.language)},this));d=a.grep(d,a.proxy(function(a){return a<this.o.startDate||a>this.o.endDate||!a},this),!0);this.dates.replace(d);this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate));c?this.setValue():d.length&&String(b)!==String(this.dates)&&this._trigger("changeDate");!this.dates.length&&
b.length&&this._trigger("clearDate");this.fill()}},fillDow:function(){var a=this.o.weekStart,b="<tr>";this.o.calendarWeeks&&(b+='<th class="cw">&nbsp;</th>',this.picker.find(".datepicker-days thead tr:first-child").prepend('<th class="cw">&nbsp;</th>'));for(;a<this.o.weekStart+7;)b+='<th class="dow">'+r[this.o.language].daysMin[a++%7]+"</th>";b+="</tr>";this.picker.find(".datepicker-days thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="month">'+r[this.o.language].monthsShort[b++]+
"</span>";this.picker.find(".datepicker-months td").html(a)},setRange:function(b){b&&b.length?this.range=a.map(b,function(a){return a.valueOf()}):delete this.range;this.fill()},getClassNames:function(b){var d=[],c=this.viewDate.getUTCFullYear(),e=this.viewDate.getUTCMonth(),g=new Date;b.getUTCFullYear()<c||b.getUTCFullYear()===c&&b.getUTCMonth()<e?d.push("old"):(b.getUTCFullYear()>c||b.getUTCFullYear()===c&&b.getUTCMonth()>e)&&d.push("new");this.focusDate&&b.valueOf()===this.focusDate.valueOf()&&
d.push("focused");this.o.todayHighlight&&b.getUTCFullYear()===g.getFullYear()&&b.getUTCMonth()===g.getMonth()&&b.getUTCDate()===g.getDate()&&d.push("today");-1!==this.dates.contains(b)&&d.push("active");(b.valueOf()<this.o.startDate||b.valueOf()>this.o.endDate||-1!==a.inArray(b.getUTCDay(),this.o.daysOfWeekDisabled))&&d.push("disabled");this.range&&(b>this.range[0]&&b<this.range[this.range.length-1]&&d.push("range"),-1!==a.inArray(b.valueOf(),this.range)&&d.push("selected"));return d},fill:function(){var d=
new Date(this.viewDate),e=d.getUTCFullYear(),g=d.getUTCMonth(),d=-Infinity!==this.o.startDate?this.o.startDate.getUTCFullYear():-Infinity,k=-Infinity!==this.o.startDate?this.o.startDate.getUTCMonth():-Infinity,h=Infinity!==this.o.endDate?this.o.endDate.getUTCFullYear():Infinity,f=Infinity!==this.o.endDate?this.o.endDate.getUTCMonth():Infinity,n=r[this.o.language].today||r.en.today||"",m=r[this.o.language].clear||r.en.clear||"",l;this.picker.find(".datepicker-days thead th.datepicker-switch").text(r[this.o.language].months[g]+
" "+e);this.picker.find("tfoot th.today").text(n).toggle(!1!==this.o.todayBtn);this.picker.find("tfoot th.clear").text(m).toggle(!1!==this.o.clearBtn);this.updateNavArrows();this.fillMonths();n=c(e,g-1,28);g=v.getDaysInMonth(n.getUTCFullYear(),n.getUTCMonth());n.setUTCDate(g);n.setUTCDate(g-(n.getUTCDay()-this.o.weekStart+7)%7);m=new Date(n);m.setUTCDate(m.getUTCDate()+42);for(var m=m.valueOf(),g=[],p;n.valueOf()<m;){if(n.getUTCDay()===this.o.weekStart&&(g.push("<tr>"),this.o.calendarWeeks)){p=new Date(+n+
(this.o.weekStart-n.getUTCDay()-7)%7*864E5);p=new Date(Number(p)+(11-p.getUTCDay())%7*864E5);var q=new Date(Number(q=c(p.getUTCFullYear(),0,1))+(11-q.getUTCDay())%7*864E5);g.push('<td class="cw">'+((p-q)/864E5/7+1)+"</td>")}p=this.getClassNames(n);p.push("day");if(this.o.beforeShowDay!==a.noop){var y=this.o.beforeShowDay(this._utc_to_local(n));y===b?y={}:"boolean"===typeof y?y={enabled:y}:"string"===typeof y&&(y={classes:y});!1===y.enabled&&p.push("disabled");y.classes&&(p=p.concat(y.classes.split(/\s+/)));
y.tooltip&&(l=y.tooltip)}p=a.unique(p);g.push('<td class="'+p.join(" ")+'"'+(l?' title="'+l+'"':"")+">"+n.getUTCDate()+"</td>");n.getUTCDay()===this.o.weekEnd&&g.push("</tr>");n.setUTCDate(n.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(g.join(""));var I=this.picker.find(".datepicker-months").find("th:eq(1)").text(e).end().find("span").removeClass("active");a.each(this.dates,function(a,b){b.getUTCFullYear()===e&&I.eq(b.getUTCMonth()).addClass("active")});(e<d||e>h)&&I.addClass("disabled");
e===d&&I.slice(0,k).addClass("disabled");e===h&&I.slice(f+1).addClass("disabled");g="";e=10*parseInt(e/10,10);l=this.picker.find(".datepicker-years").find("th:eq(1)").text(e+"-"+(e+9)).end().find("td");--e;q=a.map(this.dates,function(a){return a.getUTCFullYear()});for(f=-1;11>f;f++)k=["year"],-1===f?k.push("old"):10===f&&k.push("new"),-1!==a.inArray(e,q)&&k.push("active"),(e<d||e>h)&&k.push("disabled"),g+='<span class="'+k.join(" ")+'">'+e+"</span>",e+=1;l.html(g)},updateNavArrows:function(){if(this._allow_update){var a=
new Date(this.viewDate),b=a.getUTCFullYear(),a=a.getUTCMonth();switch(this.viewMode){case 0:-Infinity!==this.o.startDate&&b<=this.o.startDate.getUTCFullYear()&&a<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});Infinity!==this.o.endDate&&b>=this.o.endDate.getUTCFullYear()&&a>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});
break;case 1:case 2:-Infinity!==this.o.startDate&&b<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),Infinity!==this.o.endDate&&b>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(b){b.preventDefault();b=a(b.target).closest("span, td, th");var d,e,g;if(1===b.length)switch(b[0].nodeName.toLowerCase()){case "th":switch(b[0].className){case "datepicker-switch":this.showMode(1);
break;case "prev":case "next":b=v.modes[this.viewMode].navStep*("prev"===b[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,b);this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,b),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case "today":b=new Date;b=c(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0);this.showMode(-2);this._setDate(b,"linked"===this.o.todayBtn?null:"view");
break;case "clear":this.isInput?d=this.element:this.component&&(d=this.element.find("input")),d&&d.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()}break;case "span":b.is(".disabled")||(this.viewDate.setUTCDate(1),b.is(".month")?(g=1,e=b.parent().find("span").index(b),d=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(e),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(c(d,e,g))):(g=1,e=0,d=parseInt(b.text(),10)||0,this.viewDate.setUTCFullYear(d),
this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(c(d,e,g))),this.showMode(-1),this.fill());break;case "td":b.is(".day")&&!b.is(".disabled")&&(g=parseInt(b.text(),10)||1,d=this.viewDate.getUTCFullYear(),e=this.viewDate.getUTCMonth(),b.is(".old")?0===e?(e=11,--d):--e:b.is(".new")&&(11===e?(e=0,d+=1):e+=1),this._setDate(c(d,e,g)))}this.picker.is(":visible")&&this._focused_from&&a(this._focused_from).focus();delete this._focused_from},_toggle_multidate:function(a){var b=
this.dates.contains(a);a?-1!==b?this.dates.remove(b):this.dates.push(a):this.dates.clear();if("number"===typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(a,b){b&&"date"!==b||this._toggle_multidate(a&&new Date(a));b&&"view"!==b||(this.viewDate=a&&new Date(a));this.fill();this.setValue();this._trigger("changeDate");var d;this.isInput?d=this.element:this.component&&(d=this.element.find("input"));d&&d.change();!this.o.autoclose||b&&"date"!==b||this.hide()},
moveMonth:function(a,d){if(!a)return b;if(!d)return a;var c=new Date(a.valueOf()),e=c.getUTCDate(),g=c.getUTCMonth(),k=Math.abs(d),h;d=0<d?1:-1;if(1===k){if(k=-1===d?function(){return c.getUTCMonth()===g}:function(){return c.getUTCMonth()!==h},h=g+d,c.setUTCMonth(h),0>h||11<h)h=(h+12)%12}else{for(var f=0;f<k;f++)c=this.moveMonth(c,d);h=c.getUTCMonth();c.setUTCDate(e);k=function(){return h!==c.getUTCMonth()}}for(;k();)c.setUTCDate(--e),c.setUTCMonth(h);return c},moveYear:function(a,b){return this.moveMonth(a,
12*b)},dateWithinRange:function(a){return a>=this.o.startDate&&a<=this.o.endDate},keydown:function(a){if(this.picker.is(":not(:visible)"))27===a.keyCode&&this.show();else{var b=!1,d,c,e,g=this.focusDate||this.viewDate;switch(a.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide();a.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;d=37===a.keyCode?-1:1;a.ctrlKey?(c=this.moveYear(this.dates.get(-1)||f(),
d),e=this.moveYear(g,d),this._trigger("changeYear",this.viewDate)):a.shiftKey?(c=this.moveMonth(this.dates.get(-1)||f(),d),e=this.moveMonth(g,d),this._trigger("changeMonth",this.viewDate)):(c=new Date(this.dates.get(-1)||f()),c.setUTCDate(c.getUTCDate()+d),e=new Date(g),e.setUTCDate(g.getUTCDate()+d));this.dateWithinRange(c)&&(this.focusDate=this.viewDate=e,this.setValue(),this.fill(),a.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;d=38===a.keyCode?-1:1;a.ctrlKey?(c=
this.moveYear(this.dates.get(-1)||f(),d),e=this.moveYear(g,d),this._trigger("changeYear",this.viewDate)):a.shiftKey?(c=this.moveMonth(this.dates.get(-1)||f(),d),e=this.moveMonth(g,d),this._trigger("changeMonth",this.viewDate)):(c=new Date(this.dates.get(-1)||f()),c.setUTCDate(c.getUTCDate()+7*d),e=new Date(g),e.setUTCDate(g.getUTCDate()+7*d));this.dateWithinRange(c)&&(this.focusDate=this.viewDate=e,this.setValue(),this.fill(),a.preventDefault());break;case 13:g=this.focusDate||this.dates.get(-1)||
this.viewDate;this._toggle_multidate(g);b=!0;this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();this.picker.is(":visible")&&(a.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(b){this.dates.length?this._trigger("changeDate"):this._trigger("clearDate");var k;this.isInput?k=this.element:this.component&&(k=this.element.find("input"));k&&k.change()}}},
showMode:function(a){a&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+a)));this.picker.find(">div").hide().filter(".datepicker-"+v.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()}};var l=function(b,d){this.element=a(b);this.inputs=a.map(d.inputs,function(a){return a.jquery?a[0]:a});delete d.inputs;a(this.inputs).datepicker(d).bind("changeDate",a.proxy(this.dateUpdated,this));this.pickers=a.map(this.inputs,function(b){return a(b).data("datepicker")});
this.updateDates()};l.prototype={updateDates:function(){this.dates=a.map(this.pickers,function(a){return a.getUTCDate()});this.updateRanges()},updateRanges:function(){var b=a.map(this.dates,function(a){return a.valueOf()});a.each(this.pickers,function(a,d){d.setRange(b)})},dateUpdated:function(b){if(!this.updating){this.updating=!0;var d=a(b.target).data("datepicker").getUTCDate();b=a.inArray(b.target,this.inputs);var c=this.inputs.length;if(-1!==b){a.each(this.pickers,function(a,b){b.getUTCDate()||
b.setUTCDate(d)});if(d<this.dates[b])for(;0<=b&&d<this.dates[b];)this.pickers[b--].setUTCDate(d);else if(d>this.dates[b])for(;b<c&&d>this.dates[b];)this.pickers[b++].setUTCDate(d);this.updateDates();delete this.updating}}},remove:function(){a.map(this.pickers,function(a){a.remove()});delete this.element.data().datepicker}};var p=a.fn.datepicker;a.fn.datepicker=function(c){var e=Array.apply(null,arguments);e.shift();var k;this.each(function(){var h=a(this),f=h.data("datepicker"),p="object"===typeof c&&
c;if(!f){var f=d(this,"date"),q=a.extend({},n,f,p),q=g(q.language),p=a.extend({},n,q,f,p);h.is(".input-daterange")||p.inputs?(f={inputs:p.inputs||h.find("input").toArray()},h.data("datepicker",f=new l(this,a.extend(p,f)))):h.data("datepicker",f=new m(this,p))}if("string"===typeof c&&"function"===typeof f[c]&&(k=f[c].apply(f,e),k!==b))return!1});return k!==b?k:this};var n=a.fn.datepicker.defaults={autoclose:!1,beforeShowDay:a.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:Infinity,
forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},q=a.fn.datepicker.locale_opts=["format","rtl","weekStart"];a.fn.datepicker.Constructor=m;var r=a.fn.datepicker.dates={en:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),daysShort:"Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),daysMin:"Su Mo Tu We Th Fr Sa Su".split(" "),
months:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),today:"Today",clear:"Clear"}},v={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return 0===a%4&&0!==a%100||0===a%400},getDaysInMonth:function(a,b){return[31,v.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,
30,31][b]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(a){var b=a.replace(this.validParts,"\x00").split("\x00");a=a.match(this.validParts);if(!b||!b.length||!a||0===a.length)throw Error("Invalid date format.");return{separators:b,parts:a}},parseDate:function(d,e,g){function k(){var a=this.slice(0,f[l].length),b=f[l].slice(0,a.length);return a===b}if(!d)return b;if(d instanceof Date)return d;"string"===typeof e&&(e=v.parseFormat(e));
var h=/([\-+]\d+)([dmwy])/,f=d.match(/([\-+]\d+)([dmwy])/g),n,l;if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(d)){d=new Date;for(l=0;l<f.length;l++)switch(e=h.exec(f[l]),n=parseInt(e[1]),e[2]){case "d":d.setUTCDate(d.getUTCDate()+n);break;case "m":d=m.prototype.moveMonth.call(m.prototype,d,n);break;case "w":d.setUTCDate(d.getUTCDate()+7*n);break;case "y":d=m.prototype.moveYear.call(m.prototype,d,n)}return c(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),0,0,0)}f=d&&d.match(this.nonpunctuation)||
[];d=new Date;var h={},p="yyyy yy M MM m mm d dd".split(" ");n={yyyy:function(a,b){return a.setUTCFullYear(b)},yy:function(a,b){return a.setUTCFullYear(2E3+b)},m:function(a,b){if(isNaN(a))return a;for(--b;0>b;)b+=12;b%=12;for(a.setUTCMonth(b);a.getUTCMonth()!==b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)}};var q;n.M=n.MM=n.mm=n.m;n.dd=n.d;d=c(d.getFullYear(),d.getMonth(),d.getDate(),0,0,0);var G=e.parts.slice();f.length!==G.length&&(G=a(G).filter(function(b,d){return-1!==
a.inArray(d,p)}).toArray());if(f.length===G.length){var y;l=0;for(y=G.length;l<y;l++){q=parseInt(f[l],10);e=G[l];if(isNaN(q))switch(e){case "MM":q=a(r[g].months).filter(k);q=a.inArray(q[0],r[g].months)+1;break;case "M":q=a(r[g].monthsShort).filter(k),q=a.inArray(q[0],r[g].monthsShort)+1}h[e]=q}for(l=0;l<p.length;l++)e=p[l],e in h&&!isNaN(h[e])&&(g=new Date(d),n[e](g,h[e]),isNaN(g)||(d=g))}return d},formatDate:function(b,d,c){if(!b)return"";"string"===typeof d&&(d=v.parseFormat(d));c={d:b.getUTCDate(),
D:r[c].daysShort[b.getUTCDay()],DD:r[c].days[b.getUTCDay()],m:b.getUTCMonth()+1,M:r[c].monthsShort[b.getUTCMonth()],MM:r[c].months[b.getUTCMonth()],yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear()};c.dd=(10>c.d?"0":"")+c.d;c.mm=(10>c.m?"0":"")+c.m;b=[];for(var e=a.extend([],d.separators),g=0,k=d.parts.length;g<=k;g++)e.length&&b.push(e.shift()),b.push(c[d.parts[g]]);return b.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',
contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};v.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+v.headTemplate+"<tbody></tbody>"+v.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+
v.headTemplate+v.contTemplate+v.footTemplate+"</table></div></div>";a.fn.datepicker.DPGlobal=v;a.fn.datepicker.noConflict=function(){a.fn.datepicker=p;return this};a(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(b){var d=a(this);d.data("datepicker")||(b.preventDefault(),d.datepicker("show"))});a(function(){a('[data-provide="datepicker-inline"]').datepicker()})})(window.jQuery);var jQ=jQuery,wtbx={};var tooltip,tooltipLocationObj,tooltipHover,tooltipTimeoutID;function toggleTooltip(a,b,c){null!=tooltip&&c==tooltipLocationObj?hideTooltip():(hideTooltip(),showTooltip(a,b,c))}function showHoverTooltip(a,b,c){tooltipHover=1;tooltipTimeoutID=window.setTimeout(function(){showTooltip(a,b,c)},200);jQ(c).on("mouseleave",hideTooltipEvtHover);jQ(c).on("click",function(){window.clearTimeout(tooltipTimeoutID)})}
function showTooltip(a,b,c){tooltip&&hideTooltip();tooltipLocationObj=c;if("string"==typeof b){var f=400<b.length+150?400:b.length+150;tooltip=document.createElement("DIV");tooltip.className="undefined"!=typeof jQ.fn.popover?"customTooltip":"tooltip";tooltip.style.width=f+"px";a&&(tooltip.innerHTML="<p><b>"+a+"</b></p>");tooltip.innerHTML+="<p>"+b;a=window.innerWidth?window.innerWidth-25:document.body.clientWidth;b=getOffsetLeft(c);c=getOffsetTop(c)+c.offsetHeight;b+f>a&&(b=a-f);tooltip.style.left=
b+"px";tooltip.style.top=c+"px";jQ(tooltip).hasClass("tooltip")&&(tooltip.style.display="none");document.body.appendChild(tooltip);jQ(tooltip).hasClass("tooltip")&&jQ(tooltip).fadeIn()}else tooltip=b,tooltip.style.left=getOffsetLeft(c)+"px",tooltip.style.top=getOffsetTop(c)+c.offsetHeight+"px",jQ(tooltip).hasClass("tooltipMenu")||jQ(tooltip).hasClass("navTooltipMenu")?(jQ(tooltip).slideDown("fast"),jQ(c).addClass("menuOpened")):tooltip.style.display="";if(tooltipHover)jQ(tooltip).on("mouseleave",
hideTooltipEvtHover);jQ(document).on("mousedown",hideTooltipEvt)}
function hideTooltip(){jQ(document).off("mousedown",hideTooltipEvt);tooltip&&tooltip.id?jQ&&(jQ(tooltip).hasClass("tooltipMenu")||jQ(tooltip).hasClass("navTooltipMenu"))?(jQ(tooltip).slideUp("fast"),jQ(tooltipLocationObj).removeClass("menuOpened")):jQ&&jQ(tooltip).hasClass("tooltip")?jQ(tooltip).fadeOut():tooltip.style.display="none":tooltip&&(jQ&&jQ(tooltip).hasClass("tooltip")?jQ(tooltip).fadeOut(function(){$(this).remove()}):document.body.removeChild(tooltip));tooltipLocationObj=tooltip=null;tooltipHover=
0}function hideTooltipEvt(a){var b,c,f=getEventObjectsElement(a);if(!(document.all&&a.screenX>document.body.clientWidth)){for(;f.parentNode;){if(f==tooltipLocationObj||"scrollbar"==f.tagName)return;f==tooltip&&(b=!0);"A"==f.tagName&&(c=!0);f=f.parentNode}c||b&&jQ(tooltip).hasClass("tooltipMenu")||hideTooltip()}}
function hideTooltipEvtHover(a){if(a=a.relatedTarget||a.toElement)for(;a.parentNode;){if(a==tooltipLocationObj||a==tooltip)return;a=a.parentNode}window.clearTimeout(tooltipTimeoutID);tooltipLocationObj&&jQ(tooltipLocationObj).off("mouseleave",hideTooltipEvtHover);tooltip&&jQ(tooltip).off("mouseleave",hideTooltipEvtHover);tooltip&&hideTooltip()}function removeTooltip(a){jQ(a).off("mouseleave",hideTooltipEvtHover)}
function getEventObjectsElement(a){if(a=a?a:window.event?event:null){for(a=a.target?a.target:a.srcElement?a.srcElement:null;3==a.nodeType;)a=a.parentNode;return a}return null}function getOffsetTop(a){var b=a.offsetTop;for(a=a.offsetParent;a;)b+=a.offsetTop,a=a.offsetParent;return b}function getOffsetLeft(a){var b=a.offsetLeft;for(a=a.offsetParent;a;)b+=a.offsetLeft,a=a.offsetParent;return b};var lastChecked,checkboxList,toggleCheckbox,highlightCell;
function activateCheckboxes(a,b,c,f){if(c)jQ(document).on("click","#"+f,function(){this.checked?jQ("input[name="+c+"]").prop("checked",!0):jQ("input[name="+c+"]").prop("checked",!1)}),jQ(document).on("click","input[name="+c+"]",function(){if(this.checked){var a=jQ("input[name="+c+"]:checked").length;jQ("input[name="+c+"]").length==a&&jQ("#"+f).prop("checked",!0)}else jQ("#"+f).prop("checked",!1)});else{checkboxList=a;highlightCell=b;if(!checkboxList)return;if(toggleCheckbox=(checkboxList.form?checkboxList.form:
checkboxList[0].form).allbox)toggleCheckbox.onclick=toggleCheckboxes;if(checkboxList.length)for(b=0;b<checkboxList.length;b++)checkboxList[b].onchange=checkboxChanged,checkboxList[b].onclick=checkboxClicked;else checkboxList.onchange=checkboxChanged,checkboxList.onclick=checkboxClicked}var e;"undefined"!==typeof checkboxList&&(e=checkboxList.length?a[0].name:a.name);jQ(a[0]).parent().is("LI, TD")&&0===jQ(a[0]).siblings().length&&jQ(":checkbox[name="+e+"], :checkbox[name=allbox]").parent().click(function(a){if("INPUT"==
a.target.tagName)return!0;jQ(this).find(":checkbox").click()})}function getTotalChecked(a,b,c){var f=0;if(a)jQ("#"+b).is(":checked")&&c&&(c.match(/select_all_/)||c.match(/select_allbox/))?jQ("input[name= "+a+"]").each(function(a,b){f++}):f=jQ("[name^="+a+"]:checked").length;else{if(!checkboxList)return 0;if(checkboxList.length)for(a=0;a<checkboxList.length;a++)checkboxList[a].checked&&f++;else checkboxList.checked&&(f=1)}return f}
function toggleCheckboxes(){if(checkboxList.length)for(var a=0;a<checkboxList.length;a++)checkboxList[a].checked=toggleCheckbox.checked;else checkboxList.checked=toggleCheckbox.checked;highlightCheckboxes()}function checkboxChanged(a){a||(a=window.event);oCheckbox=getEventObjectsElement(a);highlightRow(oCheckbox);a=checkboxList.length?checkboxList.length:1;toggleCheckbox&&(toggleCheckbox.checked=a==getTotalChecked());lastChecked=oCheckbox}
function checkboxClicked(a){a||(a=window.event);oCheckbox=getEventObjectsElement(a);a.shiftKey&&checkboxShift(oCheckbox)}function checkboxShift(a){if(lastChecked&&checkboxList.length){var b,c;c=getCheckboxIndex(lastChecked);var f=getCheckboxIndex(a);c<f?(b=c,c=f):b=f;for(;b<=c;b++)checkboxList[b].checked=a.checked,highlightRow(checkboxList[b])}}function getCheckboxIndex(a){for(var b=0;b<checkboxList.length;b++)if(checkboxList[b]==a)return b}
function highlightRow(a){var b=checkboxToTitleCell(a);b&&(b.style.fontWeight=a.checked?"bold":"normal");a.checked?jQ(a).closest("tr,li").addClass("selectedRow"):jQ(a).closest("tr,li").removeClass("selectedRow")}
function highlightCheckboxes(){if(checkboxList.length)for(var a=0;a<checkboxList.length;a++){var b=checkboxToTitleCell(checkboxList[a]);b&&(b.style.fontWeight=toggleCheckbox.checked?"bold":"normal");toggleCheckbox.checked?jQ(checkboxList[a]).closest("tr,li").addClass("selectedRow"):jQ(checkboxList[a]).closest("tr,li").removeClass("selectedRow")}else if(b=checkboxToTitleCell(checkboxList))b.style.fontWeight=toggleCheckbox.checked?"bold":"normal"}
function checkboxToTitleCell(a){if(-1!=highlightCell){a=a.parentNode;if(!a)return null;var b=a.parentNode;return b?jQ(a).is("li")?a:highlightCell&&b.cells?b.cells[highlightCell]:b:null}}function getEventObjectsElement(a){if(a=a?a:window.event?event:null){for(a=a.target?a.target:a.srcElement?a.srcElement:null;3==a.nodeType;)a=a.parentNode;return a}return null};jQ(function(){jQ("input, textarea").placeholder()});
(function(a,b,c){function f(a){var b={},d=/^jQuery\d+$/;c.each(a.attributes,function(a,c){c.specified&&!d.test(c.name)&&(b[c.name]=c.value)});return b}function e(a,d){var e=c(this);if(this.value==e.attr("placeholder")&&e.hasClass("placeholder"))if(e.data("placeholder-password")){e=e.hide().next().show().attr("id",e.removeAttr("id").data("placeholder-id"));if(!0===a)return e[0].value=d;e.focus()}else this.value="",e.removeClass("placeholder"),this==b.activeElement&&this.select()}function d(){var a,
b=c(this),d=this.id;if(""==this.value){if("password"==this.type){if(!b.data("placeholder-textinput")){try{a=b.clone().attr({type:"text"})}catch(g){a=c("<input>").attr(c.extend(f(this),{type:"text"}))}a.removeAttr("name").data({"placeholder-password":!0,"placeholder-id":d}).bind("focus.placeholder",e);b.data({"placeholder-textinput":a,"placeholder-id":d}).before(a)}b=b.removeAttr("id").hide().prev().attr("id",d).show()}b.addClass("placeholder");b[0].value=b.attr("placeholder")}else b.removeClass("placeholder")}
var g="placeholder"in b.createElement("input"),h="placeholder"in b.createElement("textarea"),k=c.fn,m=c.valHooks;g&&h?(k=k.placeholder=function(){return this},k.input=k.textarea=!0):(k=k.placeholder=function(){this.filter((g?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":e,"blur.placeholder":d}).data("placeholder-enabled",!0).trigger("blur.placeholder");return this},k.input=g,k.textarea=h,k={get:function(a){var b=c(a);return b.data("placeholder-enabled")&&b.hasClass("placeholder")?
"":a.value},set:function(a,g){var k=c(a);if(!k.data("placeholder-enabled"))return a.value=g;""==g?(a.value=g,a!=b.activeElement&&d.call(a)):k.hasClass("placeholder")?e.call(a,!0,g)||(a.value=g):a.value=g;return k}},g||(m.input=k),h||(m.textarea=k),c(function(){c(b).delegate("form","submit.placeholder",function(){var a=c(".placeholder",this).each(e);setTimeout(function(){a.each(d)},10)})}),c(a).bind("beforeunload.placeholder",function(){c(".placeholder").each(function(){this.value=""})}))})(this,document,
jQ);jQ(document).ready(function(){autosuggest.activate()});
var autosuggest={activate:function(){jQ("#autosuggest").length&&jQ.ui&&jQ("#autosuggest").autocomplete({source:function(a,b){var c=new RegExp("^"+jQ.ui.autocomplete.escapeRegex(a.term),"i");jQ.ajax({type:"POST",url:"/live_member_search",data:{uid:uid,s:a.term},success:function(a){a&&"<"!=a.charAt(0)&&eval(a);b(jQ.grep(suggestions,function(a){return c.test(a)}))}})},select:function(a,b){var c=jQ("#autosuggest")[0].form;c&&0==jQ(c).find(":text, :checkbox, :radio, textarea, select, input[type=password]").not("#autosuggest").length&&(jQ("#autosuggest").val(b.item.value),
$(c).submit())}})}};function help(a,b,c,f,e){b||(b=320);c||(c=216);f&&e||(f=(screen.width-b)/2,e=(screen.height-c)/2);win=window.open(a,"_blank","height="+c+",width="+b+",top="+e+",left="+f+",scrollbars=yes,resizable,status=yes");null==win?alert("Unable to open a new browser window,\n This might be due to a 'popup blocker'"):4<=parseInt(navigator.appVersion)&&win.window.focus();return null!=win};(function(a){var b=/^\s*|\s*$/g,c="$1"==="B".replace(/A(.)|B/,"$1"),f={majorVersion:"3",minorVersion:"5.3",releaseDate:"2012-06-19",_init:function(){function b(a){return a.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(a.src)?(/_(src|dev)\.js/g.test(a.src)&&(d.suffix="_src"),-1!=(l=a.src.indexOf("?"))&&(d.query=a.src.substring(l+1)),d.baseURL=a.src.substring(0,a.src.lastIndexOf("/")),f&&-1==d.baseURL.indexOf("://")&&0!==d.baseURL.indexOf("/")&&(d.baseURL=f+d.baseURL),d.baseURL):
null}var d=this,c=document,h=navigator,k=h.userAgent,f,l,p;d.isOpera=a.opera&&opera.buildNumber;d.isWebKit=/WebKit/.test(k);d.isIE=!d.isWebKit&&!d.isOpera&&/MSIE/gi.test(k)&&/Explorer/gi.test(h.appName);d.isIE6=d.isIE&&/MSIE [56]/.test(k);d.isIE7=d.isIE&&/MSIE [7]/.test(k);d.isIE8=d.isIE&&/MSIE [8]/.test(k);d.isIE9=d.isIE&&/MSIE [9]/.test(k);d.isGecko=!d.isWebKit&&/Gecko/.test(k);d.isMac=-1!=k.indexOf("Mac");d.isAir=/adobeair/i.test(k);d.isIDevice=/(iPad|iPhone)/.test(k);d.isIOS5=d.isIDevice&&534<=
k.match(/AppleWebKit\/(\d*)/)[1];if(a.tinyMCEPreInit)d.suffix=tinyMCEPreInit.suffix,d.baseURL=tinyMCEPreInit.base,d.query=tinyMCEPreInit.query;else{d.suffix="";k=c.getElementsByTagName("base");for(h=0;h<k.length;h++)if(p=k[h].href)/^https?:\/\/[^\/]+$/.test(p)&&(p+="/"),f=p?p.match(/.*\//)[0]:"";k=c.getElementsByTagName("script");for(h=0;h<k.length;h++)if(b(k[h]))return;if(c=c.getElementsByTagName("head")[0])for(k=c.getElementsByTagName("script"),h=0;h<k.length&&!b(k[h]);h++);}},is:function(a,b){return b?
"array"==b&&a.hasOwnProperty&&a instanceof Array?!0:typeof a==b:void 0!==a},makeMap:function(a,b,c){a=a||[];"string"==typeof a&&(a=a.split(b||","));c=c||{};for(b=a.length;b--;)c[a[b]]={};return c},each:function(a,b,c){var h,k;if(!a)return 0;c=c||a;if(void 0!==a.length)for(h=0,k=a.length;h<k;h++){if(!1===b.call(c,a[h],h,a))return 0}else for(h in a)if(a.hasOwnProperty(h)&&!1===b.call(c,a[h],h,a))return 0;return 1},map:function(a,b){var c=[];f.each(a,function(a){c.push(b(a))});return c},grep:function(a,
b){var c=[];f.each(a,function(a){b&&!b(a)||c.push(a)});return c},inArray:function(a,b){var c,h;if(a)for(c=0,h=a.length;c<h;c++)if(a[c]===b)return c;return-1},extend:function(a,b){var c,h,k,f=arguments,l;c=1;for(h=f.length;c<h;c++)for(k in b=f[c],b)b.hasOwnProperty(k)&&(l=b[k],void 0!==l&&(a[k]=l));return a},trim:function(a){return(a?""+a:"").replace(b,"")},create:function(a,b,c){var h,k,f,l,p,n=0;a=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(a);f=a[3].match(/(^|\.)(\w+)$/i)[2];k=this.createNS(a[3].replace(/\.\w+$/,
""),c);if(!k[f])if("static"==a[2]){if(k[f]=b,this.onCreate)this.onCreate(a[2],a[3],k[f])}else if(b[f]||(b[f]=function(){},n=1),k[f]=b[f],this.extend(k[f].prototype,b),a[5]&&(h=this.resolve(a[5]).prototype,l=a[5].match(/\.(\w+)$/i)[1],p=k[f],k[f]=n?function(){return h[l].apply(this,arguments)}:function(){this.parent=h[l];return p.apply(this,arguments)},k[f].prototype[f]=k[f],this.each(h,function(a,b){k[f].prototype[b]=h[b]}),this.each(b,function(a,b){h[b]?k[f].prototype[b]=function(){this.parent=h[b];
return a.apply(this,arguments)}:b!=f&&(k[f].prototype[b]=a)})),this.each(b["static"],function(a,b){k[f][b]=a}),this.onCreate)this.onCreate(a[2],a[3],k[f].prototype)},walk:function(a,b,c,h){h=h||this;a&&(c&&(a=a[c]),f.each(a,function(a,e){if(!1===b.call(h,a,e,c))return!1;f.walk(a,b,c,h)}))},createNS:function(b,d){var c,h;d=d||a;b=b.split(".");for(c=0;c<b.length;c++)h=b[c],d[h]||(d[h]={}),d=d[h];return d},resolve:function(b,d){var c,h;d=d||a;b=b.split(".");c=0;for(h=b.length;c<h&&(d=d[b[c]],d);c++);
return d},addUnload:function(b,d){function c(){function b(){d.detachEvent("onstop",b);k&&k();d=0}var d=document;"interactive"==d.readyState&&(d&&d.attachEvent("onstop",b),a.setTimeout(function(){d&&d.detachEvent("onstop",b)},0))}var h=this,k;k=function(){var b=h.unloads,d,e;if(b){for(e in b)(d=b[e])&&d.func&&d.func.call(d.scope,1);a.detachEvent?(a.detachEvent("onbeforeunload",c),a.detachEvent("onunload",k)):a.removeEventListener&&a.removeEventListener("unload",k,!1);h.unloads=w=k=0;a.CollectGarbage&&
CollectGarbage()}};b={func:b,scope:d||this};h.unloads?h.unloads.push(b):(a.attachEvent?(a.attachEvent("onunload",k),a.attachEvent("onbeforeunload",c)):a.addEventListener&&a.addEventListener("unload",k,!1),h.unloads=[b]);return b},removeUnload:function(a){var b=this.unloads,c=null;f.each(b,function(h,k){if(h&&h.func==a)return b.splice(k,1),c=a,!1});return c},explode:function(a,b){return!a||f.is(a,"array")?a:f.map(a.split(b||","),f.trim)},_addVer:function(a){var b;if(!this.query)return a;b=(-1==a.indexOf("?")?
"?":"&")+this.query;return-1==a.indexOf("#")?a+b:a.replace("#",b+"#")},_replace:function(a,b,g){return c?g.replace(a,function(){var a=b,c=arguments,e;for(e=0;e<c.length-2;e++)a=void 0===c[e]?a.replace(new RegExp("\\$"+e,"g"),""):a.replace(new RegExp("\\$"+e,"g"),c[e]);return a}):g.replace(a,b)}};f._init();a.tinymce=a.tinyMCE=f})(window);
tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,inDispatch:!1,Dispatcher:function(a){this.scope=a||this;this.listeners=[]},add:function(a,b){this.listeners.push({cb:a,scope:b||this.scope});return a},addToTop:function(a,b){var c={cb:a,scope:b||this.scope};this.inDispatch?this.listeners=[c].concat(this.listeners):this.listeners.unshift(c);return a},remove:function(a){var b=this.listeners,c=null;tinymce.each(b,function(f,e){if(a==f.cb)return c=f,b.splice(e,1),!1});return c},dispatch:function(){var a,
b=arguments,c,f=this.listeners;this.inDispatch=!0;for(c=0;c<f.length&&(a=f[c],a=a.cb.apply(a.scope,0<b.length?b:[a.scope]),!1!==a);c++);this.inDispatch=!1;return a}});
(function(){var a=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(b,c){var f=this,e;b=tinymce.trim(b);c=f.settings=c||{};if(/^([\w\-]+):([^\/]{2})/i.test(b)||/^\s*#/.test(b))f.source=b;else if(0===b.indexOf("/")&&0!==b.indexOf("//")&&(b=(c.base_uri?c.base_uri.protocol||"http":"http")+"://mce_host"+b),/^[\w\-]*:?\/\//.test(b)||(e=c.base_uri?c.base_uri.path:(new tinymce.util.URI(location.href)).directory,b=(c.base_uri&&c.base_uri.protocol||"http")+"://mce_host"+f.toAbsPath(e,b)),b=b.replace(/@@/g,
"(mce_at)"),b=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(b),a("source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),function(a,c){var e=b[c];e&&(e=e.replace(/\(mce_at\)/g,"@@"));f[a]=e}),e=c.base_uri)f.protocol||(f.protocol=e.protocol),f.userInfo||(f.userInfo=e.userInfo),f.port||"mce_host"!==
f.host||(f.port=e.port),f.host&&"mce_host"!==f.host||(f.host=e.host),f.source=""},setPath:function(a){a=/^(.*?)\/?(\w+)?$/.exec(a);this.path=a[0];this.directory=a[1];this.file=a[2];this.source="";this.getURI()},toRelative:function(a){var c;if("./"===a)return a;a=new tinymce.util.URI(a,{base_uri:this});if("mce_host"!=a.host&&this.host!=a.host&&a.host||this.port!=a.port||this.protocol!=a.protocol)return a.getURI();c=this.getURI();var f=a.getURI();if(c==f||"/"==c.charAt(c.length-1)&&c.substr(0,c.length-
1)==f)return c;c=this.toRelPath(this.path,a.path);a.query&&(c+="?"+a.query);a.anchor&&(c+="#"+a.anchor);return c},toAbsolute:function(a,c){a=new tinymce.util.URI(a,{base_uri:this});return a.getURI(this.host==a.host&&this.protocol==a.protocol?c:0)},toRelPath:function(a,c){var f,e=0,d="",g,h;a=a.substring(0,a.lastIndexOf("/"));a=a.split("/");f=c.split("/");if(a.length>=f.length)for(g=0,h=a.length;g<h;g++)if(g>=f.length||a[g]!=f[g]){e=g+1;break}if(a.length<f.length)for(g=0,h=f.length;g<h;g++)if(g>=a.length||
a[g]!=f[g]){e=g+1;break}if(1===e)return c;g=0;for(h=a.length-(e-1);g<h;g++)d+="../";g=e-1;for(h=f.length;g<h;g++)d=g!=e-1?d+("/"+f[g]):d+f[g];return d},toAbsPath:function(b,c){var f,e=0,d=[],g;g=/\/$/.test(c)?"/":"";b=b.split("/");c=c.split("/");a(b,function(a){a&&d.push(a)});b=d;f=c.length-1;for(d=[];0<=f;f--)0!==c[f].length&&"."!==c[f]&&(".."===c[f]?e++:0<e?e--:d.push(c[f]));f=b.length-e;f=0>=f?d.reverse().join("/"):b.slice(0,f).join("/")+"/"+d.reverse().join("/");0!==f.indexOf("/")&&(f="/"+f);
g&&f.lastIndexOf("/")!==f.length-1&&(f+=g);return f},getURI:function(a){var c;if(!this.source||a)c="",a||(this.protocol&&(c+=this.protocol+"://"),this.userInfo&&(c+=this.userInfo+"@"),this.host&&(c+=this.host),this.port&&(c+=":"+this.port)),this.path&&(c+=this.path),this.query&&(c+="?"+this.query),this.anchor&&(c+="#"+this.anchor),this.source=c;return this.source}})})();
(function(){var a=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(b){b=this.get(b);var c;b&&a(b.split("&"),function(a){a=a.split("=");c=c||{};c[unescape(a[0])]=unescape(a[1])});return c},setHash:function(b,c,f,e,d,g){var h="";a(c,function(a,b){h+=(h?"&":"")+escape(b)+"="+escape(a)});this.set(b,h,f,e,d,g)},get:function(a){var c=document.cookie,f=a+"=",e;if(c){e=c.indexOf("; "+f);if(-1==e){if(e=c.indexOf(f),0!==e)return null}else e+=2;a=c.indexOf(";",e);-1==a&&(a=c.length);
return unescape(c.substring(e+f.length,a))}},set:function(a,c,f,e,d,g){document.cookie=a+"="+escape(c)+(f?"; expires="+f.toGMTString():"")+(e?"; path="+escape(e):"")+(d?"; domain="+d:"")+(g?"; secure":"")},remove:function(a,c,f){var e=new Date;e.setTime(e.getTime()-1E3);this.set(a,"",e,c,f)}})})();
(function(){function a(b,c){var f,e,d,g;c=c||'"';if(null==b)return"null";d=typeof b;if("string"==d)return e="\bb\tt\nn\ff\rr\"\"''\\\\",c+b.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,b){if('"'===c&&"'"===a)return a;f=e.indexOf(b);if(f+1)return"\\"+e.charAt(f+1);a=b.charCodeAt().toString(16);return"\\u"+"0000".substring(a.length)+a})+c;if("object"==d){if(b.hasOwnProperty&&b instanceof Array){f=0;for(e="[";f<b.length;f++)e+=(0<f?",":"")+a(b[f],c);return e+"]"}e="{";for(g in b)b.hasOwnProperty(g)&&
(e+="function"!=typeof b[g]?(1<e.length?","+c:c)+g+c+":"+a(b[g],c):"");return e+"}"}return""+b}tinymce.util.JSON={serialize:a,parse:function(a){try{return eval("("+a+")")}catch(c){}}}})();
tinymce.create("static tinymce.util.XHR",{send:function(a){function b(){!a.async||4==f.readyState||1E4<d++?(a.success&&1E4>d&&200==f.status?a.success.call(a.success_scope,""+f.responseText,f,a):a.error&&a.error.call(a.error_scope,1E4<d?"TIMED_OUT":"GENERAL",f,a),f=null):e.setTimeout(b,10)}function c(a){f=0;try{f=new ActiveXObject(a)}catch(b){}return f}var f,e=window,d=0;a.scope=a.scope||this;a.success_scope=a.success_scope||a.scope;a.error_scope=a.error_scope||a.scope;a.async=!1===a.async?!1:!0;a.data=
a.data||"";if(f=e.XMLHttpRequest?new XMLHttpRequest:c("Microsoft.XMLHTTP")||c("Msxml2.XMLHTTP")){f.overrideMimeType&&f.overrideMimeType(a.content_type);f.open(a.type||(a.data?"POST":"GET"),a.url,a.async);a.content_type&&f.setRequestHeader("Content-Type",a.content_type);f.setRequestHeader("X-Requested-With","XMLHttpRequest");f.send(a.data);if(!a.async)return b();e.setTimeout(b,10)}}});
(function(){var a=tinymce.extend,b=tinymce.util.JSON,c=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(b){this.settings=a({},b);this.count=0},send:function(f){var e=f.error,d=f.success;f=a(this.settings,f);f.success=function(a,c){a=b.parse(a);"undefined"==typeof a&&(a={error:"JSON Parse error."});a.error?e.call(f.error_scope||f.scope,a.error,c):d.call(f.success_scope||f.scope,a.result)};f.error=function(a,b){e&&e.call(f.error_scope||f.scope,a,b)};f.data=b.serialize({id:f.id||
"c"+this.count++,method:f.method,params:f.params});f.content_type="application/json";c.send(f)},"static":{sendRPC:function(a){return(new tinymce.util.JSONRequest).send(a)}}})})();(function(a){a.VK={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(a){return a.shiftKey||a.ctrlKey||a.altKey}}})(tinymce);
tinymce.util.Quirks=function(a){function b(b,d){try{a.getDoc().execCommand(b,!1,d)}catch(c){}}function c(){var b=a.getDoc().documentMode;return b?b:6}function f(){function b(d){var c,e,g;c=z.getRng();e=C.getParent(c.startContainer,C.isBlock);d&&(e=C.getNext(e,C.isBlock));if(e){for(e=e.firstChild;e&&3==e.nodeType&&0===e.nodeValue.length;)e=e.nextSibling;e&&"SPAN"===e.nodeName&&(g=e.cloneNode(!1))}a.getDoc().execCommand(d?"ForwardDelete":"Delete",!1,null);e=C.getParent(c.startContainer,C.isBlock);tinymce.each(C.select("span.Apple-style-span,font.Apple-style-span",
e),function(a){var b=z.getBookmark();g?C.replace(g.cloneNode(!1),a,!0):C.remove(a,!0);z.moveToBookmark(b)})}a.onKeyDown.add(function(a,d){var c;c=d.keyCode==D;d.isDefaultPrevented()||!c&&d.keyCode!=A||B.modifierPressed(d)||(d.preventDefault(),b(c))});a.addCommand("Delete",function(){b()})}function e(){a.settings.content_editable||(C.bind(a.getDoc(),"focusin",function(a){z.setRng(z.getRng())}),C.bind(a.getDoc(),"mousedown",function(b){b.target==a.getDoc().documentElement&&(a.getWin().focus(),z.setRng(z.getRng()))}))}
function d(){a.onKeyDown.add(function(a,b){if(!b.isDefaultPrevented()&&b.keyCode===A&&z.isCollapsed()&&0===z.getRng(!0).startOffset){var d=z.getNode().previousSibling;d&&d.nodeName&&"hr"===d.nodeName.toLowerCase()&&(C.remove(d),tinymce.dom.Event.cancel(b))}})}function g(){Range.prototype.getClientRects||a.onMouseDown.add(function(a,b){if("HTML"===b.target.nodeName){var d=a.getBody();d.blur();setTimeout(function(){d.focus()},0)}})}function h(){a.onClick.add(function(a,b){b=b.target;/^(IMG|HR)$/.test(b.nodeName)&&
z.getSel().setBaseAndExtent(b,0,b,1);"A"==b.nodeName&&C.hasClass(b,"mceItemAnchor")&&z.select(b);a.nodeChanged()})}function k(){function b(){var d=C.getAttribs(z.getStart().cloneNode(!1));return function(){var b=z.getStart();b!==a.getBody()&&(C.setAttrib(b,"style",null),tinymce.each(d,function(a){b.setAttributeNode(a.cloneNode(!0))}))}}function d(a,b){b.preventDefault();return!1}a.onKeyPress.add(function(a,d){var c;if((8==d.keyCode||46==d.keyCode)&&!z.isCollapsed()&&z.getStart()!=z.getEnd())return c=
b(),a.getDoc().execCommand("delete",!1,null),c(),d.preventDefault(),!1});C.bind(a.getDoc(),"cut",function(c){var e;z.isCollapsed()||z.getStart()==z.getEnd()||(e=b(),a.onKeyUp.addToTop(d),setTimeout(function(){e();a.onKeyUp.remove(d)},0))})}function m(){var b,d;C.bind(a.getDoc(),"selectionchange",function(){d&&(clearTimeout(d),d=0);d=window.setTimeout(function(){var d=z.getRng();b&&tinymce.dom.RangeUtils.compareRanges(d,b)||(a.nodeChanged(),b=d)},50)})}function l(){7<c()||(b("RespectVisibilityInDesign",
!0),a.contentStyles.push(".mceHideBrInPre pre br {display: none}"),C.addClass(a.getBody(),"mceHideBrInPre"),a.parser.addNodeFilter("pre",function(a,b){for(var d=a.length,c,e,g,k;d--;)for(c=a[d].getAll("br"),e=c.length;e--;)g=c[e],(k=g.prev)&&3===k.type&&"\n"!=k.value.charAt(k.value-1)?k.value+="\n":g.parent.insert(new tinymce.html.Node("#text",3),g,!0).value="\n"}),a.serializer.addNodeFilter("pre",function(a,b){for(var d=a.length,c,e,g;d--;)for(c=a[d].getAll("br"),e=c.length;e--;)g=c[e],(g=g.prev)&&
3==g.type&&(g.value=g.value.replace(/\r?\n$/,""))}))}function p(){C.bind(a.getBody(),"mouseup",function(a){var b=z.getNode();if("IMG"==b.nodeName){if(a=C.getStyle(b,"width"))C.setAttrib(b,"width",a.replace(/[^0-9%]+/g,"")),C.setStyle(b,"width","");if(a=C.getStyle(b,"height"))C.setAttrib(b,"height",a.replace(/[^0-9%]+/g,"")),C.setStyle(b,"height","")}})}function n(){a.onKeyDown.add(function(a,b){var d,c,e,g;d=b.keyCode==D;b.isDefaultPrevented()||!d&&b.keyCode!=A||B.modifierPressed(b)||(c=z.getRng(),
e=c.startContainer,g=c.startOffset,c=c.collapsed,3==e.nodeType&&0<e.nodeValue.length&&(0===g&&!c||c&&g===(d?0:1))&&(nonEmptyElements=a.schema.getNonEmptyElements(),b.preventDefault(),g=C.create("br",{id:"__tmp"}),e.parentNode.insertBefore(g,e),a.getDoc().execCommand(d?"ForwardDelete":"Delete",!1,null),e=z.getRng().startContainer,(d=e.previousSibling)&&1==d.nodeType&&!C.isBlock(d)&&C.isEmpty(d)&&!nonEmptyElements[d.nodeName.toLowerCase()]&&C.remove(d),C.remove("__tmp")))})}function q(){function d(){a._refreshContentEditable();
b("StyleWithCSS",!1);b("enableInlineTableEditing",!1);K.object_resizing||b("enableObjectResizing",!1)}K.readonly||(a.onBeforeExecCommand.add(d),a.onMouseDown.add(d))}function r(){function b(a,d){tinymce.each(C.select("a"),function(a){var b=a.parentNode,d=C.getRoot();if(b.lastChild===a){for(;b&&!C.isBlock(b);){if(b.parentNode.lastChild!==b||b===d)return;b=b.parentNode}C.add(b,"br",{"data-mce-bogus":1})}})}a.onExecCommand.add(function(a,d){"CreateLink"===d&&b(a)});a.onSetContent.add(z.onSetContent.add(b))}
function v(){K.forced_root_block&&a.onInit.add(function(){b("DefaultParagraphSeparator",K.forced_root_block)})}function x(){function b(d,c){d&&c.initial||a.execCommand("mceRepaint")}a.onUndo.add(b);a.onRedo.add(b);a.onSetContent.add(b)}function t(){a.onKeyDown.add(function(a,b){var d;b.isDefaultPrevented()||b.keyCode!=A||(d=a.getDoc().selection.createRange())&&d.item&&(b.preventDefault(),a.undoManager.beforeChange(),C.remove(d.item(0)),a.undoManager.add())})}function u(){var b;10<=c()&&(b="",tinymce.each("p div h1 h2 h3 h4 h5 h6".split(" "),
function(a,d){b+=(0<d?",":"")+a+":empty"}),a.contentStyles.push(b+"{padding-right: 1px !important}"))}var B=tinymce.VK,A=B.BACKSPACE,D=B.DELETE,C=a.dom,z=a.selection,K=a.settings;(function(){a.onKeyDown.add(function(a,b){if(!b.isDefaultPrevented()&&b.keyCode===A&&z.isCollapsed()&&0===z.getRng(!0).startOffset){var d=z.getNode().previousSibling;if(d&&d.nodeName&&"table"===d.nodeName.toLowerCase())return tinymce.dom.Event.cancel(b)}})})();(function(){a.onKeyDown.add(function(a,b){var d,c,e,g,k;if(!b.isDefaultPrevented()&&
b.keyCode==B.BACKSPACE&&(d=z.getRng(),c=d.startContainer,e=d.startOffset,g=C.getRoot(),k=c,d.collapsed&&0===e)){for(;k&&k.parentNode&&k.parentNode.firstChild==k&&k.parentNode!=g;)k=k.parentNode;"BLOCKQUOTE"===k.tagName&&(a.formatter.toggle("blockquote",null,k),d.setStart(c,0),d.setEnd(c,0),z.setRng(d),z.collapse(!1))}})})();(function(){function b(a,d){var c,e;e=d?"start":"end";c=a[e+"Container"];e=a[e+"Offset"];1==c.nodeType&&c.hasChildNodes()&&(c=c.childNodes[Math.min(d?e:0<e?e-1:0,c.childNodes.length-
1)]);return c}function d(a,c){var e,g,k;k=c?"start":"end";var h;e=a[k+"Container"];g=a[k+"Offset"];k=C.getRoot();1==e.nodeType&&(h=g>=e.childNodes.length,e=b(a,c),3==e.nodeType&&(g=c&&!h?0:e.nodeValue.length));if(3==e.nodeType&&(c&&0<g||!c&&g<e.nodeValue.length))return!1;for(;e!==k;){g=e.parentNode[c?"firstChild":"lastChild"];"BR"==g.nodeName&&(g=g[c?"nextSibling":"previousSibling"]||g);if(g!==e)return!1;e=e.parentNode}return!0}a.onKeyDown.addToTop(function(a,c){var e;e=c.keyCode;c.isDefaultPrevented()||
e!=D&&e!=A||(e=z.getRng(!0),d(e,!0)&&d(e,!1)&&(e.collapsed||C.findCommonAncestor(b(e,!0),b(e))===C.getRoot())&&(a.setContent(""),a.selection.setCursorLocation(a.getBody(),0),a.nodeChanged(),c.preventDefault()))})})();tinymce.isWebKit&&(n(),f(),e(),h(),v(),tinymce.isIDevice&&m());tinymce.isIE&&(d(),document.body.setAttribute("role","application"),l(),p(),t(),u());tinymce.isGecko&&(d(),g(),k(),q(),r(),x())};
(function(a){function b(a,b){var d,c,e,g={};if(a){a=a.split(",");b=b||10;for(d=0;d<a.length;d+=2)c=String.fromCharCode(parseInt(a[d],b)),f[c]||(e="&"+a[d+1]+";",g[c]=e,g[e]=c);return g}}var c,f,e,d=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,g=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,h=/[<>&\"\']/g,k=/&(#x|#)?([\w]+);/g,m={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",
139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"};f={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"};e={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};c=b("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",
32);a.html=a.html||{};a.html.Entities={encodeRaw:function(a,b){return a.replace(b?d:g,function(a){return f[a]||a})},encodeAllRaw:function(a){return(""+a).replace(h,function(a){return f[a]||a})},encodeNumeric:function(a,b){return a.replace(b?d:g,function(a){return 1<a.length?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":f[a]||"&#"+a.charCodeAt(0)+";"})},encodeNamed:function(a,b,e){e=e||c;return a.replace(b?d:g,function(a){return f[a]||e[a]||a})},getEncodeFunc:function(e,k){function h(a,
b){return a.replace(b?d:g,function(a){return f[a]||k[a]||"&#"+a.charCodeAt(0)+";"||a})}function m(a,b){return r.encodeNamed(a,b,k)}var r=a.html.Entities;k=b(k)||c;e=a.makeMap(e.replace(/\+/g,","));return e.named&&e.numeric?h:e.named?k?m:r.encodeNamed:e.numeric?r.encodeNumeric:r.encodeRaw},decode:function(a){return a.replace(k,function(a,b,d){if(b)return d=parseInt(d,2===b.length?16:10),65535<d?(d-=65536,String.fromCharCode(55296+(d>>10),56320+(d&1023))):m[d]||String.fromCharCode(d);(b=e[a]||c[a])||
(b=document.createElement("div"),b.innerHTML=a,b=b.textContent||b.innerText||a);return b})}}})(tinymce);
tinymce.html.Styles=function(a,b){function c(a,b,d,c){function e(a){a=parseInt(a).toString(16);return 1<a.length?a:"0"+a}return"#"+e(b)+e(d)+e(c)}var f=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,e=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,d=/\s*([^:]+):\s*([^;]+);?/g,g=/\s+$/,h,k={},m;a=a||{};m="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(h=0;h<m.length;h++)k[m[h]]="\ufeff"+h,k["\ufeff"+h]=m[h];return{toHex:function(a){return a.replace(f,
c)},parse:function(b){function h(a,b){var d,c;if(d=t[a+"-top"+b])c=t[a+"-right"+b],d==c&&(d=t[a+"-bottom"+b],c==d&&(c=t[a+"-left"+b],d==c&&(t[a+b]=c,delete t[a+"-top"+b],delete t[a+"-right"+b],delete t[a+"-bottom"+b],delete t[a+"-left"+b])))}function n(a){var b=t[a],d;if(b&&!(0>b.indexOf(" "))){b=b.split(" ");for(d=b.length;d--;)if(b[d]!==b[0])return!1;t[a]=b[0];return!0}}function m(a,b,d,c){n(b)&&n(d)&&n(c)&&(t[a]=t[b]+" "+t[d]+" "+t[c],delete t[b],delete t[d],delete t[c])}function r(a){D=!0;return k[a]}
function v(a,b){D&&(a=a.replace(/\uFEFF[0-9]/g,function(a){return k[a]}));b||(a=a.replace(/\\([\'\";:])/g,"$1"));return a}function x(a,b,d,c,e,g){if(e=e||g)return e=v(e),"'"+e.replace(/\'/g,"\\'")+"'";b=v(b||d||c);C&&(b=C.call(z,b,"style"));return"url('"+b.replace(/\'/g,"\\'")+"')"}var t={},u,B,A,D,C=a.url_converter,z=a.url_converter_scope||this;if(b){for(b=b.replace(/\\[\"\';:\uFEFF]/g,r).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(a){return a.replace(/[;:]/g,r)});u=d.exec(b);){B=u[1].replace(g,"").toLowerCase();
A=u[2].replace(g,"");if(B&&0<A.length){if("font-weight"===B&&"700"===A)A="bold";else if("color"===B||"background-color"===B)A=A.toLowerCase();A=A.replace(f,c);A=A.replace(e,x);t[B]=D?v(A,!0):A}d.lastIndex=u.index+u[0].length}h("border","");h("border","-width");h("border","-color");h("border","-style");h("padding","");h("margin","");m("border","border-width","border-style","border-color");"medium none"===t.border&&delete t.border}return t},serialize:function(a,d){function c(d){var g,k,h,f;if(g=b.styles[d])for(k=
0,h=g.length;k<h;k++)d=g[k],f=a[d],void 0!==f&&0<f.length&&(e+=(0<e.length?" ":"")+d+": "+f+";")}var e="",g,k;if(d&&b&&b.styles)c("*"),c(d);else for(g in a)k=a[g],void 0!==k&&0<k.length&&(e+=(0<e.length?" ":"")+g+": "+k+";");return e}}};
(function(a){function b(a,b){return a.split(b||",")}function c(a,d){function c(b){return b.replace(/[A-Z]+/g,function(b){return c(a[b])})}var e,h={};for(e in a)a.hasOwnProperty(e)&&(a[e]=c(a[e]));c(d).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(a,d,c,e){c=b(c,"|");h[d]={attributes:g(c),attributesOrder:c,children:g(e,"|",{"#comment":{}})}});return h}function f(){var a=d.html5;a||(a=d.html5=c({A:"id|accesskey|class|dir|draggable|item|hidden|itemprop|role|spellcheck|style|subject|title",
B:"#|a|abbr|area|audio|b|bdo|br|button|canvas|cite|code|command|datalist|del|dfn|em|embed|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|meta|meter|noscript|object|output|progress|q|ruby|samp|script|select|small|span|strong|sub|sup|svg|textarea|time|var|video|wbr",C:"#|a|abbr|area|address|article|aside|audio|b|bdo|blockquote|br|button|canvas|cite|code|command|datalist|del|details|dfn|dialog|div|dl|em|embed|fieldset|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|menu|meta|meter|nav|noscript|ol|object|output|p|pre|progress|q|ruby|samp|script|section|select|small|span|strong|style|sub|sup|svg|table|textarea|time|ul|var|video"},
"html[A|manifest][body|head]head[A][base|command|link|meta|noscript|script|style|title]title[A][#]base[A|href|target][]link[A|href|rel|media|type|sizes][]meta[A|http-equiv|name|content|charset][]style[A|type|media|scoped][#]script[A|charset|type|src|defer|async][#]noscript[A][C]body[A][C]section[A][C]nav[A][C]article[A][C]aside[A][C]h1[A][B]h2[A][B]h3[A][B]h4[A][B]h5[A][B]h6[A][B]hgroup[A][h1|h2|h3|h4|h5|h6]header[A][C]footer[A][C]address[A][C]p[A][B]br[A][]pre[A][B]dialog[A][dd|dt]blockquote[A|cite][C]ol[A|start|reversed][li]ul[A][li]li[A|value][C]dl[A][dd|dt]dt[A][B]dd[A][C]a[A|href|target|ping|rel|media|type][B]em[A][B]strong[A][B]small[A][B]cite[A][B]q[A|cite][B]dfn[A][B]abbr[A][B]code[A][B]var[A][B]samp[A][B]kbd[A][B]sub[A][B]sup[A][B]i[A][B]b[A][B]mark[A][B]progress[A|value|max][B]meter[A|value|min|max|low|high|optimum][B]time[A|datetime][B]ruby[A][B|rt|rp]rt[A][B]rp[A][B]bdo[A][B]span[A][B]ins[A|cite|datetime][B]del[A|cite|datetime][B]figure[A][C|legend|figcaption]figcaption[A][C]img[A|alt|src|height|width|usemap|ismap][]iframe[A|name|src|height|width|sandbox|seamless][]embed[A|src|height|width|type][]object[A|data|type|height|width|usemap|name|form|classid][param]param[A|name|value][]details[A|open][C|legend]command[A|type|label|icon|disabled|checked|radiogroup][]menu[A|type|label][C|li]legend[A][C|B]div[A][C]source[A|src|type|media][]audio[A|src|autobuffer|autoplay|loop|controls][source]video[A|src|autobuffer|autoplay|loop|controls|width|height|poster][source]hr[A][]form[A|accept-charset|action|autocomplete|enctype|method|name|novalidate|target][C]fieldset[A|disabled|form|name][C|legend]label[A|form|for][B]input[A|type|accept|alt|autocomplete|checked|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|height|list|max|maxlength|min|multiple|pattern|placeholder|readonly|required|size|src|step|width|files|value|name][]button[A|autofocus|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|name|value|type][B]select[A|autofocus|disabled|form|multiple|name|size][option|optgroup]datalist[A][B|option]optgroup[A|disabled|label][option]option[A|disabled|selected|label|value][]textarea[A|autofocus|disabled|form|maxlength|name|placeholder|readonly|required|rows|cols|wrap][]keygen[A|autofocus|challenge|disabled|form|keytype|name][]output[A|for|form|name][B]canvas[A|width|height][]map[A|name][B|C]area[A|shape|coords|href|alt|target|media|rel|ping|type][]mathml[A][]svg[A][]table[A|border][caption|colgroup|thead|tfoot|tbody|tr]caption[A][C]colgroup[A|span][col]col[A|span][]thead[A][tr]tfoot[A][tr]tbody[A][tr]tr[A][th|td]th[A|headers|rowspan|colspan|scope][B]td[A|headers|rowspan|colspan][C]wbr[A][]"));
return a}function e(){var a=d.html4;a||(a=d.html4=c({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",
Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]"));
return a}var d={},g=a.makeMap,h=a.each;a.html.Schema=function(c){function m(b,e,h){var f=c[b];f?f=g(f,",",g(f.toUpperCase()," ")):(f=d[b],f||(f=g(e," ",g(e.toUpperCase()," ")),f=a.extend(f,h),d[b]=f));return f}function l(a){return new RegExp("^"+a.replace(/([?+*])/g,".$1")+"$")}function p(d){var c,e,k,h,f,n,m,p,q,D,C,r,z,t,v,y,A,E,G=/^([#+\-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,B=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,K=/[*?+]/;if(d)for(d=b(d),x["@"]&&(y=x["@"].attributes,A=x["@"].attributesOrder),
c=0,e=d.length;c<e;c++)if(f=G.exec(d[c])){t=f[1];q=f[2];v=f[3];p=f[4];r={};z=[];n={attributes:r,attributesOrder:z};"#"===t&&(n.paddEmpty=!0);"-"===t&&(n.removeEmpty=!0);if(y){for(E in y)r[E]=y[E];z.push.apply(z,A)}if(p)for(p=b(p,"|"),k=0,h=p.length;k<h;k++)if(f=B.exec(p[k]))m={},C=f[1],D=f[2].replace(/::/g,":"),t=f[3],f=f[4],"!"===C&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(D),m.required=!0),"-"===C?(delete r[D],z.splice(a.inArray(z,D),1)):(t&&("="===t&&(n.attributesDefault=
n.attributesDefault||[],n.attributesDefault.push({name:D,value:f}),m.defaultValue=f),":"===t&&(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:D,value:f}),m.forcedValue=f),"<"===t&&(m.validValues=g(f,"?"))),K.test(D)?(n.attributePatterns=n.attributePatterns||[],m.pattern=l(D),n.attributePatterns.push(m)):(r[D]||z.push(D),r[D]=m));y||"@"!=q||(y=r,A=z);v&&(n.outputName=q,x[v]=n);K.test(q)?(n.pattern=l(q),u.push(n)):x[q]=n}}function n(a){x={};u=[];p(a);h(A,function(a,b){t[b]=
a.children})}function q(a){var d=/^(~)?(.+)$/;a&&h(b(a),function(a){a=d.exec(a);var b="~"===a[1],c=b?"span":"div",e=a[2];t[e]=t[c];y[e]=c;b||(E[e]={});h(t,function(a,b){a[c]&&(a[e]=a[c])})})}function r(a){var d=/^([+\-]?)(\w+)\[([^\]]+)\]$/;a&&h(b(a),function(a){a=d.exec(a);var c,e;a&&(c=(e=a[1])?t[a[2]]:t[a[2]]={"#comment":{}},c=t[a[2]],h(b(a[3],"|"),function(a){"-"===e?delete c[a]:c[a]={}}))})}function v(a){var b=x[a],d;if(b)return b;for(d=u.length;d--;)if(b=u[d],b.pattern.test(a))return b}var x=
{},t={},u=[],B,A,D,C,z,K,E,G,y={};c=c||{};A="html5"==c.schema?f():e();!1===c.verify_html&&(c.valid_elements="*[*]");c.valid_styles&&(B={},h(c.valid_styles,function(b,d){B[d]=a.explode(b)}));D=m("whitespace_elements","pre script style textarea");C=m("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr");z=m("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr");K=m("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls");
G=m("non_empty_elements","td th iframe video audio object",z);E=m("block_elements","h1 h2 h3 h4 h5 h6 hr p div address pre form table tbody thead tfoot th tr td li ol ul caption blockquote center dl dt dd dir fieldset noscript menu isindex samp header footer article section hgroup aside nav figure option datalist select optgroup");c.valid_elements?n(c.valid_elements):(h(A,function(a,b){x[b]={attributes:a.attributes,attributesOrder:a.attributesOrder};t[b]=a.children}),"html5"!=c.schema&&h(b("strong/b,em/i"),
function(a){a=b(a,"/");x[a[1]].outputName=a[0]}),x.img.attributesDefault=[{name:"alt",value:""}],h(b("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr,strong,em,b,i"),function(a){x[a]&&(x[a].removeEmpty=!0)}),h(b("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(a){x[a].paddEmpty=!0}));q(c.custom_elements);r(c.valid_children);p(c.extended_valid_elements);r("+ol[ul|ol],+ul[ul|ol]");c.invalid_elements&&a.each(a.explode(c.invalid_elements),function(a){x[a]&&delete x[a]});v("span")||p("span[!data-mce-type|*]");
this.children=t;this.styles=B;this.getBoolAttrs=function(){return K};this.getBlockElements=function(){return E};this.getShortEndedElements=function(){return z};this.getSelfClosingElements=function(){return C};this.getNonEmptyElements=function(){return G};this.getWhiteSpaceElements=function(){return D};this.isValidChild=function(a,b){var d=t[a];return!(!d||!d[b])};this.isValid=function(a,b){var d,c;if(d=v(a))if(b){if(d.attributes[b])return!0;if(d=d.attributePatterns)for(c=d.length;c--;)if(d[c].pattern.test(a))return!0}else return!0;
return!1};this.getElementRule=v;this.getCustomElements=function(){return y};this.addValidElements=p;this.setValidElements=n;this.addCustomElements=q;this.addValidChildren=r}})(tinymce);
(function(a){a.html.SaxParser=function(b,c){var f=this,e=function(){};b=b||{};f.schema=c=c||new a.html.Schema;!1!==b.fix_self_closing&&(b.fix_self_closing=!0);a.each("comment cdata text start end pi doctype".split(" "),function(a){a&&(f[a]=b[a]||e)});f.parse=function(d){function e(a){var b,d;for(b=q.length;b--&&q[b].name!==a;);if(0<=b){for(d=q.length-1;d>=b;d--)a=q[d],a.valid&&k.end(a.name);q.length=b}}function h(a,b,d,c,e){b=b.toLowerCase();d=b in A?b:S(d||c||e||"");if(D&&!t&&0!==b.indexOf("data-")){a=
y[b];if(!a&&I){for(c=I.length;c--&&(a=I[c],!a.pattern.test(b)););-1===c&&(a=null)}if(!a||a.validValues&&!(d in a.validValues))return}r.map[b]=d;r.push({name:b,value:d})}var k=this,f,l=0,p,n,q=[],r,v,x,t,u,B,A,D,C,z,K,E,G,y,I,L,U,N,P,aa,Q,J,M=0,S=a.html.Entities.decode,O,V;aa=RegExp("<(?:(?:!--([\\w\\W]*?)--\x3e)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-\\:]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))",
"g");Q=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g;J={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi};B=c.getShortEndedElements();P=b.self_closing_elements||c.getSelfClosingElements();A=c.getBoolAttrs();D=b.validate;u=b.remove_internals;O=b.fix_self_closing;V=a.isIE;for(G=/^:/;f=aa.exec(d);){l<f.index&&k.text(S(d.substr(l,f.index-l)));if(p=f[6])p=p.toLowerCase(),V&&G.test(p)&&(p=p.substr(1)),e(p);else if(p=f[7]){p=p.toLowerCase();
V&&G.test(p)&&(p=p.substr(1));l=p in B;O&&P[p]&&0<q.length&&q[q.length-1].name===p&&e(p);if(!D||(C=c.getElementRule(p))){z=!0;D&&(y=C.attributes,I=C.attributePatterns);(E=f[8])?((t=-1!==E.indexOf("data-mce-type"))&&u&&(z=!1),r=[],r.map={},E.replace(Q,h)):(r=[],r.map={});if(D&&!t){L=C.attributesRequired;U=C.attributesDefault;if(N=C.attributesForced)for(n=N.length;n--;)K=N[n],x=K.name,K=K.value,"{$uid}"===K&&(K="mce_"+M++),r.map[x]=K,r.push({name:x,value:K});if(U)for(n=U.length;n--;)K=U[n],x=K.name,
x in r.map||(K=K.value,"{$uid}"===K&&(K="mce_"+M++),r.map[x]=K,r.push({name:x,value:K}));if(L){for(n=L.length;n--&&!(L[n]in r.map););-1===n&&(z=!1)}r.map["data-mce-bogus"]&&(z=!1)}z&&k.start(p,r,l)}else z=!1;if(n=J[p]){n.lastIndex=l=f.index+f[0].length;(f=n.exec(d))?(z&&(v=d.substr(l,f.index-l)),l=f.index+f[0].length):(v=d.substr(l),l=d.length);z&&0<v.length&&k.text(v,!0);z&&k.end(p);aa.lastIndex=l;continue}l||(E&&E.indexOf("/")==E.length-1?z&&k.end(p):q.push({name:p,valid:z}))}else(p=f[1])?k.comment(p):
(p=f[2])?k.cdata(p):(p=f[3])?k.doctype(p):(p=f[4])&&k.pi(p,f[5]);l=f.index+f[0].length}l<d.length&&k.text(S(d.substr(l)));for(n=q.length-1;0<=n;n--)p=q[n],p.valid&&k.end(p.name)}}})(tinymce);
(function(a){function b(a,b,c){var e;e=c?"lastChild":"firstChild";c=c?"prev":"next";if(a[e])return a[e];if(a!==b){if(e=a[c])return e;for(a=a.parent;a&&a!==b;a=a.parent)if(e=a[c])return e}}function c(a,b){this.name=a;this.type=b;1===b&&(this.attributes=[],this.attributes.map={})}var f=/^[ \t\r\n]*$/,e={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};a.extend(c.prototype,{replace:function(a){a.parent&&a.remove();this.insert(a,this);this.remove();return this},attr:function(a,
b){var c,e;if("string"!==typeof a){for(e in a)this.attr(e,a[e]);return this}if(c=this.attributes){if(void 0!==b){if(null===b){if(a in c.map)for(delete c.map[a],e=c.length;e--;)if(c[e].name===a){c.splice(e,1);break}return this}if(a in c.map)for(e=c.length;e--;){if(c[e].name===a){c[e].value=b;break}}else c.push({name:a,value:b});c.map[a]=b;return this}return c.map[a]}},clone:function(){var a=new c(this.name,this.type),b,e,k,f,l;if(k=this.attributes){l=[];l.map={};b=0;for(e=k.length;b<e;b++)f=k[b],"id"!==
f.name&&(l[l.length]={name:f.name,value:f.value},l.map[f.name]=f.value);a.attributes=l}a.value=this.value;a.shortEnded=this.shortEnded;return a},wrap:function(a){this.parent.insert(a,this);a.append(this);return this},unwrap:function(){var a,b;for(a=this.firstChild;a;)b=a.next,this.insert(a,this,!0),a=b;this.remove()},remove:function(){var a=this.parent,b=this.next,c=this.prev;if(a){if(a.firstChild===this){if(a.firstChild=b)b.prev=null}else c.next=b;if(a.lastChild===this){if(a.lastChild=c)c.next=null}else b.prev=
c;this.parent=this.next=this.prev=null}return this},append:function(a){var b;a.parent&&a.remove();(b=this.lastChild)?(b.next=a,a.prev=b,this.lastChild=a):this.lastChild=this.firstChild=a;a.parent=this;return a},insert:function(a,b,c){var e;a.parent&&a.remove();e=b.parent||this;c?(b===e.firstChild?e.firstChild=a:b.prev.next=a,a.prev=b.prev,a.next=b,b.prev=a):(b===e.lastChild?e.lastChild=a:b.next.prev=a,a.next=b.next,a.prev=b,b.next=a);a.parent=e;return a},getAll:function(a){var c,e=[];for(c=this.firstChild;c;c=
b(c,this))c.name===a&&e.push(c);return e},empty:function(){var a,c,e;if(this.firstChild){a=[];for(e=this.firstChild;e;e=b(e,this))a.push(e);for(c=a.length;c--;)e=a[c],e.parent=e.firstChild=e.lastChild=e.next=e.prev=null}this.firstChild=this.lastChild=null;return this},isEmpty:function(a){var c=this.firstChild,e,k;if(c){do{if(1===c.type){if(c.attributes.map["data-mce-bogus"])continue;if(a[c.name])return!1;for(e=c.attributes.length;e--;)if(k=c.attributes[e].name,"name"===k||0===k.indexOf("data-"))return!1}if(8===
c.type||3===c.type&&!f.test(c.value))return!1}while(c=b(c,this))}return!0},walk:function(a){return b(this,null,a)}});a.extend(c,{create:function(a,b){var f,k;f=new c(a,e[a]||1);if(b)for(k in b)f.attr(k,b[k]);return f}});a.html.Node=c})(tinymce);
(function(a){var b=a.html.Node;a.html.DomParser=function(c,f){function e(c){var e,g,k,h,m,x,t,u,B,A,D;A=a.makeMap("tr,td,th,tbody,thead,tfoot,table");B=f.getNonEmptyElements();for(e=0;e<c.length;e++)if(g=c[e],g.parent){h=[g];for(k=g.parent;k&&!f.isValidChild(k.name,g.name)&&!A[k.name];k=k.parent)h.push(k);if(k&&1<h.length){h.reverse();m=x=d.filterNode(h[0].clone());for(u=0;u<h.length-1;u++){f.isValidChild(x.name,h[u].name)?(t=d.filterNode(h[u].clone()),x.append(t)):t=x;for(x=h[u].firstChild;x&&x!=
h[u+1];)D=x.next,t.append(x),x=D;x=t}m.isEmpty(B)?k.insert(g,h[0],!0):(k.insert(m,h[0],!0),k.insert(g,m));k=h[0];(k.isEmpty(B)||k.firstChild===k.lastChild&&"br"===k.firstChild.name)&&k.empty().remove()}else g.parent&&("li"===g.name?(k=g.prev,!k||"ul"!==k.name&&"ul"!==k.name?(k=g.next,!k||"ul"!==k.name&&"ul"!==k.name?g.wrap(d.filterNode(new b("ul",1))):k.insert(g,k.firstChild,!0)):k.append(g)):f.isValidChild(g.parent.name,"div")&&f.isValidChild("div",g.name)?g.wrap(d.filterNode(new b("div",1))):"style"===
g.name||"script"===g.name?g.empty().remove():g.unwrap())}}var d=this,g={},h=[],k={},m={};c=c||{};c.validate="validate"in c?c.validate:!0;c.root_name=c.root_name||"body";d.schema=f=f||new a.html.Schema;d.filterNode=function(a){var b,d,c;d in g&&((c=k[d])?c.push(a):k[d]=[a]);for(b=h.length;b--;)d=h[b].name,d in a.attributes.map&&((c=m[d])?c.push(a):m[d]=[a]);return a};d.addNodeFilter=function(b,d){a.each(a.explode(b),function(a){var b=g[a];b||(g[a]=b=[]);b.push(d)})};d.addAttributeFilter=function(b,
d){a.each(a.explode(b),function(a){var b;for(b=0;b<h.length;b++)if(h[b].name===a){h[b].callbacks.push(d);return}h.push({name:a,callbacks:[d]})})};d.parse=function(d,p){function n(){for(var a=x.firstChild,b,d;a;)b=a.next,3==a.type||1==a.type&&"p"!==a.name&&!K[a.name]&&!a.attr("data-mce-type")?(d||(d=q(Q,1),x.insert(d,a)),d.append(a)):d=null,a=b}function q(a,d){var c=new b(a,d),e;a in g&&((e=k[a])?e.push(c):k[a]=[c]);return c}function r(a){var b;for(a=a.prev;a&&3===a.type;)b=a.value.replace(I,""),0<
b.length?(a.value=b,a=a.prev):(b=a.prev,a.remove(),a=b)}var v,x,t,u,B,A,D,C,z,K,E,G=[],y,I,L,U,N,P,aa,Q;p=p||{};k={};m={};K=a.extend(a.makeMap("script,style,head,html,body,title,meta,param"),f.getBlockElements());aa=f.getNonEmptyElements();P=f.children;z=c.validate;Q="forced_root_block"in p?p.forced_root_block:c.forced_root_block;N=f.getWhiteSpaceElements();E=/^[ \t\r\n]+/;I=/[ \t\r\n]+$/;L=/[ \t\r\n]+/g;U=/^[ \t\r\n]+$/;v=new a.html.SaxParser({validate:z,self_closing_elements:function(a){var b,d=
{};for(b in a)"li"!==b&&"p"!=b&&(d[b]=a[b]);return d}(f.getSelfClosingElements()),cdata:function(a){t.append(q("#cdata",4)).value=a},text:function(a,b){var d;y||(a=a.replace(L," "),t.lastChild&&K[t.lastChild.name]&&(a=a.replace(E,"")));0!==a.length&&(d=q("#text",3),d.raw=!!b,t.append(d).value=a)},comment:function(a){t.append(q("#comment",8)).value=a},pi:function(a,b){t.append(q(a,7)).value=b;r(t)},doctype:function(a){t.append(q("#doctype",10)).value=a;r(t)},start:function(a,b,d){var c,e,g;if(c=z?
f.getElementRule(a):{}){c=q(c.outputName||a,1);c.attributes=b;c.shortEnded=d;t.append(c);(e=P[t.name])&&P[c.name]&&!e[c.name]&&G.push(c);for(e=h.length;e--;)g=h[e].name,g in b.map&&((C=m[g])?C.push(c):m[g]=[c]);K[a]&&r(c);d||(t=c);!y&&N[a]&&(y=!0)}},end:function(a){var d,c,e,g;if(c=z?f.getElementRule(a):{}){if(K[a]){if(!y){if((d=t.firstChild)&&3===d.type)for(e=d.value.replace(E,""),0<e.length?(d.value=e,d=d.next):(g=d.next,d.remove(),d=g);d&&3===d.type;)e=d.value,g=d.next,(0===e.length||U.test(e))&&
d.remove(),d=g;if((d=t.lastChild)&&3===d.type)for(e=d.value.replace(I,""),0<e.length?(d.value=e,d=d.prev):(g=d.prev,d.remove(),d=g);d&&3===d.type;)e=d.value,g=d.prev,(0===e.length||U.test(e))&&d.remove(),d=g}(d=t.prev)&&3===d.type&&(e=d.value.replace(E,""),0<e.length?d.value=e:d.remove())}y&&N[a]&&(y=!1);if((c.removeEmpty||c.paddEmpty)&&t.isEmpty(aa))if(c.paddEmpty)t.empty().append(new b("#text","3")).value="\u00a0";else if(!t.attributes.map.name&&!t.attributes.map.id){a=t.parent;t.empty().remove();
t=a;return}t=t.parent}}},f);x=t=new b(p.context||c.root_name,11);v.parse(d);z&&G.length&&(p.context?p.invalid=!0:e(G));Q&&"body"==x.name&&n();if(!p.invalid){for(D in k){C=g[D];v=k[D];for(A=v.length;A--;)v[A].parent||v.splice(A,1);u=0;for(B=C.length;u<B;u++)C[u](v,D,p)}u=0;for(B=h.length;u<B;u++)if(C=h[u],C.name in m){v=m[C.name];for(A=v.length;A--;)v[A].parent||v.splice(A,1);A=0;for(D=C.callbacks.length;A<D;A++)C.callbacks[A](v,C.name,p)}}return x};c.remove_trailing_brs&&d.addNodeFilter("br",function(b,
d){var c,e=b.length,g,k=a.extend({},f.getBlockElements()),h=f.getNonEmptyElements(),m,u,B;k.body=1;for(c=0;c<e;c++)if(g=b[c],m=g.parent,k[g.parent.name]&&g===m.lastChild){for(u=g.prev;u;){B=u.name;if("span"!==B||"bookmark"!==u.attr("data-mce-type")){if("br"!==B)break;if("br"===B){g=null;break}}u=u.prev}g&&(g.remove(),m.isEmpty(h)&&(elementRule=f.getElementRule(m.name)))&&(elementRule.removeEmpty?m.remove():elementRule.paddEmpty&&(m.empty().append(new a.html.Node("#text",3)).value="\u00a0"))}else{for(u=
g;m.firstChild===u&&m.lastChild===u;){u=m;if(k[m.name])break;m=m.parent}u===m&&(textNode=new a.html.Node("#text",3),textNode.value="\u00a0",g.replace(textNode))}});c.allow_html_in_named_anchor||d.addAttributeFilter("id,name",function(a,b){for(var d=a.length,c,e,g,k;d--;)if(k=a[d],"a"===k.name&&k.firstChild&&!k.attr("href")){g=k.parent;c=k.lastChild;do e=c.prev,g.insert(c,k),c=e;while(c)}})}})(tinymce);
tinymce.html.Writer=function(a){var b=[],c,f,e,d,g;a=a||{};c=a.indent;f=tinymce.makeMap(a.indent_before||"");e=tinymce.makeMap(a.indent_after||"");d=tinymce.html.Entities.getEncodeFunc(a.entity_encoding||"raw",a.entities);g="html"==a.element_format;return{start:function(a,k,m){var l,p,n;c&&f[a]&&0<b.length&&(l=b[b.length-1],0<l.length&&"\n"!==l&&b.push("\n"));b.push("<",a);if(k)for(l=0,p=k.length;l<p;l++)n=k[l],b.push(" ",n.name,'="',d(n.value,!0),'"');b[b.length]=!m||g?">":" />";m&&c&&e[a]&&0<b.length&&
(l=b[b.length-1],0<l.length&&"\n"!==l&&b.push("\n"))},end:function(a){b.push("</",a,">");c&&e[a]&&0<b.length&&(a=b[b.length-1],0<a.length&&"\n"!==a&&b.push("\n"))},text:function(a,c){0<a.length&&(b[b.length]=c?a:d(a))},cdata:function(a){b.push("<![CDATA[",a,"]]\x3e")},comment:function(a){b.push("\x3c!--",a,"--\x3e")},pi:function(a,d){d?b.push("<?",a," ",d,"?>"):b.push("<?",a,"?>");c&&b.push("\n")},doctype:function(a){b.push("<!DOCTYPE",a,">",c?"\n":"")},reset:function(){b.length=0},getContent:function(){return b.join("").replace(/\n$/,
"")}}};
(function(a){a.html.Serializer=function(b,c){var f=new a.html.Writer(b);b=b||{};b.validate="validate"in b?b.validate:!0;this.schema=c=c||new a.html.Schema;this.writer=f;this.serialize=function(a){function d(a){var b=g[a.type],e,p,n,q,r,v,x,t;if(b)b(a);else{b=a.name;e=a.shortEnded;p=a.attributes;if(h&&p&&1<p.length){r=[];r.map={};t=c.getElementRule(a.name);v=0;for(x=t.attributesOrder.length;v<x;v++)n=t.attributesOrder[v],n in p.map&&(q=p.map[n],r.map[n]=q,r.push({name:n,value:q}));v=0;for(x=p.length;v<
x;v++)n=p[v].name,n in r.map||(q=p.map[n],r.map[n]=q,r.push({name:n,value:q}));p=r}f.start(a.name,p,e);if(!e){if(a=a.firstChild){do d(a);while(a=a.next)}f.end(b)}}}var g,h;h=b.validate;g={3:function(a,b){f.text(a.value,a.raw)},8:function(a){f.comment(a.value)},7:function(a){f.pi(a.name,a.value)},10:function(a){f.doctype(a.value)},4:function(a){f.cdata(a.value)},11:function(a){if(a=a.firstChild){do d(a);while(a=a.next)}}};f.reset();if(1!=a.type||b.inner)g[11](a);else d(a);return f.getContent()}}})(tinymce);
tinymce.dom={};
(function(a,b){function c(a,b,d,c){a.addEventListener?a.addEventListener(b,d,c||!1):a.attachEvent&&a.attachEvent("on"+b,d)}function f(a,b,d,c){a.removeEventListener?a.removeEventListener(b,d,c||!1):a.detachEvent&&a.detachEvent("on"+b,d)}function e(a,b){function d(){return!1}function c(){return!0}var e,g=b||{};for(e in a)"layerX"!==e&&"layerY"!==e&&(g[e]=a[e]);g.target||(g.target=g.srcElement||document);g.preventDefault=function(){g.isDefaultPrevented=c;a&&(a.preventDefault?a.preventDefault():a.returnValue=
!1)};g.stopPropagation=function(){g.isPropagationStopped=c;a&&(a.stopPropagation?a.stopPropagation():a.cancelBubble=!0)};g.stopImmediatePropagation=function(){g.isImmediatePropagationStopped=c;g.stopPropagation()};g.isDefaultPrevented||(g.isDefaultPrevented=d,g.isPropagationStopped=d,g.isImmediatePropagationStopped=d);return g}function d(a,b,d){function e(){d.domLoaded||(d.domLoaded=!0,b(q))}var g=a.document,q={type:"ready"};h?c(a,"DOMContentLoaded",e):(c(g,"readystatechange",function(){"complete"===
g.readyState&&(f(g,"readystatechange",arguments.callee),e())}),g.documentElement.doScroll&&a===a.top&&function(){try{g.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}e()}());c(a,"load",e)}function g(a){function g(a,b){var d,c,e,k;if(d=p[b][a.type])for(c=0,e=d.length;c<e&&((k=d[c])&&!1===k.func.call(k.scope,a)&&a.preventDefault(),!a.isImmediatePropagationStopped());c++);}var l=this,p={},n,q,r,v;r="onmouseenter"in document.documentElement;q="onfocusin"in document.documentElement;
v={mouseenter:"mouseover",mouseleave:"mouseout"};n=1;l.domLoaded=!1;l.events=p;l.bind=function(f,t,u,B){function A(a){g(e(a||I.event),D)}var D,C,z,K,E,G,y,I=window;if(f&&3!==f.nodeType&&8!==f.nodeType){f[b]?(D=f[b],p[D]||(p[D]={})):(D=n++,f[b]=D,p[D]={});B=B||f;t=t.split(" ");for(z=t.length;z--;)K=t[z],G=A,E=y=!1,"DOMContentLoaded"===K&&(K="ready"),!l.domLoaded&&"complete"!=f.readyState||"ready"!==K?(r||(E=v[K])&&(G=function(a){var b,d;b=a.currentTarget;if((d=a.relatedTarget)&&b.contains)d=b.contains(d);
else for(;d&&d!==b;)d=d.parentNode;d||(a=e(a||I.event),a.type="mouseout"===a.type?"mouseleave":"mouseenter",a.target=b,g(a,D))}),q||"focusin"!==K&&"focusout"!==K||(y=!0,E="focusin"===K?"focus":"blur",G=function(a){a=e(a||I.event);a.type="focus"===a.type?"focusin":"focusout";g(a,D)}),(C=p[D][K])?C.push({func:u,scope:B}):(p[D][K]=C=[{func:u,scope:B}],C.fakeName=E,C.capture=y,C.nativeHandler=G,h||(C.proxyHandler=a(D)),"ready"===K?d(f,G,l):c(f,E||K,h?G:C.proxyHandler,y))):(l.domLoaded=!0,u.call(B,e({type:K})));
f=C=0;return u}};l.unbind=function(a,d,c){var e,g,k,n,m,q;if(!a||3===a.nodeType||8===a.nodeType)return l;if(e=a[b]){q=p[e];if(d)for(d=d.split(" "),k=d.length;k--;){if(m=d[k],g=q[m]){if(c)for(n=g.length;n--;)g[n].func===c&&g.splice(n,1);c&&0!==g.length||(delete q[m],f(a,g.fakeName||m,h?g.nativeHandler:g.proxyHandler,g.capture))}}else{for(m in q)g=q[m],f(a,g.fakeName||m,h?g.nativeHandler:g.proxyHandler,g.capture);q={}}for(m in q)return l;delete p[e];try{delete a[b]}catch(r){a[b]=null}}return l};l.fire=
function(a,d,c){if(!a||3===a.nodeType||8===a.nodeType)return l;c=e(null,c);c.type=d;do(d=a[b])&&g(c,d),a=a.parentNode||a.ownerDocument||a.defaultView||a.parentWindow;while(a&&!c.isPropagationStopped());return l};l.clean=function(a){var d,c,e=l.unbind;if(!a||3===a.nodeType||8===a.nodeType)return l;a[b]&&e(a);a.getElementsByTagName||(a=a.document);if(a&&a.getElementsByTagName)for(e(a),c=a.getElementsByTagName("*"),d=c.length;d--;)a=c[d],a[b]&&e(a);return l};l.callNativeHandler=function(a,b){p&&p[a][b.type].nativeHandler(b)};
l.destory=function(){p={}};l.add=function(a,b,d,c){"string"===typeof a&&(a=document.getElementById(a));if(a&&a instanceof Array)for(var e=a.length;e--;)l.add(a[e],b,d,c);else return"init"===b&&(b="ready"),l.bind(a,b instanceof Array?b.join(" "):b,d,c)};l.remove=function(a,b,d,c){if(!a)return l;"string"===typeof a&&(a=document.getElementById(a));if(a instanceof Array){for(var e=a.length;e--;)l.remove(a[e],b,d,c);return l}return l.unbind(a,b instanceof Array?b.join(" "):b,d)};l.clear=function(a){"string"===
typeof a&&(a=document.getElementById(a));return l.clean(a)};l.cancel=function(a){a&&(l.prevent(a),l.stop(a));return!1};l.prevent=function(a){a.preventDefault||(a=e(a));a.preventDefault();return!1};l.stop=function(a){a.stopPropagation||(a=e(a));a.stopPropagation();return!1}}var h=!!document.addEventListener;a.EventUtils=g;a.Event=new g(function(a){return function(b){tinymce.dom.Event.callNativeHandler(a,b)}});a.Event.bind(window,"ready",function(){});a=0})(tinymce.dom,"data-mce-expando");
tinymce.dom.TreeWalker=function(a,b){function c(a,d,c,f){if(a){if(!f&&a[d])return a[d];if(a!=b){if(d=a[c])return d;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(d=a[c])return d}}}var f=a;this.current=function(){return f};this.next=function(a){return f=c(f,"firstChild","nextSibling",a)};this.prev=function(a){return f=c(f,"lastChild","previousSibling",a)}};
(function(a){var b=a.each,c=a.is,f=a.isWebKit,e=a.isIE,d=a.html.Entities,g=/^([a-z0-9],?)+$/i,h=/^[ \t\r\n]*$/;a.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(b,d){var c;this.doc=b;this.win=window;
this.files={};this.cssFlicker=!1;this.counter=0;this.stdMode=!a.isIE||8<=b.documentMode;this.boxModel=!a.isIE||"CSS1Compat"==b.compatMode||this.stdMode;this.hasOuterHTML="outerHTML"in b.createElement("a");this.settings=d=a.extend({keep_values:!1,hex_colors:1},d);this.schema=d.schema;this.styles=new a.html.Styles({url_converter:d.url_converter,url_converter_scope:d.url_converter_scope},d.schema);if(a.isIE6)try{b.execCommand("BackgroundImageCache",!1,!0)}catch(e){this.cssFlicker=!0}this.fixDoc(b);this.events=
d.ownEvents?new a.dom.EventUtils(d.proxy):a.dom.Event;a.addUnload(this.destroy,this);c=d.schema?d.schema.getBlockElements():{};this.isBlock=function(a){var b=a.nodeType;return b?!(1!==b||!c[a.nodeName]):!!c[a]}},fixDoc:function(a){var b=this.settings,d;if(e&&b.schema)for(d in"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(b){a.createElement(b)}),b.schema.getCustomElements())a.createElement(d)},
clone:function(a,d){var c=this,g,f;if(!e||1!==a.nodeType||d)return a.cloneNode(d);f=c.doc;return d?g.firstChild:(g=f.createElement(a.nodeName),b(c.getAttribs(a),function(b){c.setAttrib(g,b.nodeName,c.getAttrib(a,b.nodeName))}),g)},getRoot:function(){var a=this.settings;return a&&this.get(a.root_element)||this.doc.body},getViewPort:function(a){var b;a=a?a:this.win;b=a.document;b=this.boxModel?b.documentElement:b.body;return{x:a.pageXOffset||b.scrollLeft,y:a.pageYOffset||b.scrollTop,w:a.innerWidth||
b.clientWidth,h:a.innerHeight||b.clientHeight}},getRect:function(a){var b;a=this.get(a);b=this.getPos(a);a=this.getSize(a);return{x:b.x,y:b.y,w:a.w,h:a.h}},getSize:function(a){var b,d;a=this.get(a);b=this.getStyle(a,"width");d=this.getStyle(a,"height");-1===b.indexOf("px")&&(b=0);-1===d.indexOf("px")&&(d=0);return{w:parseInt(b,10)||a.offsetWidth||a.clientWidth,h:parseInt(d,10)||a.offsetHeight||a.clientHeight}},getParent:function(a,b,d){return this.getParents(a,b,d,!1)},getParents:function(a,b,d,e){var g=
this,f,h=g.settings,v=[];a=g.get(a);e=void 0===e;h.strict_root&&(d=d||g.getRoot());c(b,"string")&&(f=b,b="*"===b?function(a){return 1==a.nodeType}:function(a){return g.is(a,f)});for(;a&&a!=d&&a.nodeType&&9!==a.nodeType;){if(!b||b(a))if(e)v.push(a);else return a;a=a.parentNode}return e?v:null},get:function(a){var b;return a&&this.doc&&"string"==typeof a&&(b=a,(a=this.doc.getElementById(a))&&a.id!==b)?this.doc.getElementsByName(b)[1]:a},getNext:function(a,b){return this._findSib(a,b,"nextSibling")},
getPrev:function(a,b){return this._findSib(a,b,"previousSibling")},select:function(b,d){return a.dom.Sizzle(b,this.get(d)||this.get(this.settings.root_element)||this.doc,[])},is:function(b,d){var c;if(void 0===b.length){if("*"===d)return 1==b.nodeType;if(g.test(d)){d=d.toLowerCase().split(/,/);b=b.nodeName.toLowerCase();for(c=d.length-1;0<=c;c--)if(d[c]==b)return!0;return!1}}return 0<a.dom.Sizzle.matches(d,b.nodeType?[b]:b).length},add:function(a,b,d,e,g){var f=this;return this.run(a,function(a){var k;
k=c(b,"string")?f.doc.createElement(b):b;f.setAttribs(k,d);e&&(e.nodeType?k.appendChild(e):f.setHTML(k,e));return g?k:a.appendChild(k)})},create:function(a,b,d){return this.add(this.doc.createElement(a),a,b,d,1)},createHTML:function(a,b,d){var c,e;c="<"+a;for(e in b)b.hasOwnProperty(e)&&(c+=" "+e+'="'+this.encode(b[e])+'"');return"undefined"!=typeof d?c+">"+d+"</"+a+">":c+" />"},remove:function(b,d){return this.run(b,function(b){var c,e=b.parentNode;if(!e)return null;if(d)for(;c=b.firstChild;)!a.isIE||
3!==c.nodeType||c.nodeValue?e.insertBefore(c,b):b.removeChild(c);return e.removeChild(b)})},setStyle:function(b,d,c){var g=this;return g.run(b,function(f){var h;h=f.style;d=d.replace(/-(\D)/g,function(a,b){return b.toUpperCase()});g.pixelStyles.test(d)&&(a.is(c,"number")||/^[\-0-9\.]+$/.test(c))&&(c+="px");switch(d){case "opacity":e&&(h.filter=""===c?"":"alpha(opacity="+100*c+")",b.currentStyle&&b.currentStyle.hasLayout||(h.display="inline-block"));h[d]=h["-moz-opacity"]=h["-khtml-opacity"]=c||"";
break;case "float":e?h.styleFloat=c:h.cssFloat=c;break;default:h[d]=c||""}g.settings.update_styles&&g.setAttrib(f,"data-mce-style")})},getStyle:function(a,b,d){if(a=this.get(a)){if(this.doc.defaultView&&d){b=b.replace(/[A-Z]/g,function(a){return"-"+a});try{return this.doc.defaultView.getComputedStyle(a,null).getPropertyValue(b)}catch(c){return null}}b=b.replace(/-(\D)/g,function(a,b){return b.toUpperCase()});"float"==b&&(b=e?"styleFloat":"cssFloat");return a.currentStyle&&d?a.currentStyle[b]:a.style?
a.style[b]:void 0}},setStyles:function(a,d){var c=this,e=c.settings,g;g=e.update_styles;e.update_styles=0;b(d,function(b,d){c.setStyle(a,d,b)});e.update_styles=g;e.update_styles&&c.setAttrib(a,e.cssText)},removeAllAttribs:function(a){return this.run(a,function(a){var b,d=a.attributes;for(b=d.length-1;0<=b;b--)a.removeAttributeNode(d.item(b))})},setAttrib:function(a,d,e){var g=this;if(a&&d)return g.settings.strict&&(d=d.toLowerCase()),this.run(a,function(a){var f=g.settings,k=a.getAttribute(d);if(null!==
e)switch(d){case "style":if(!c(e,"string")){b(e,function(b,d){g.setStyle(a,d,b)});return}f.keep_values&&(e&&!g._isRes(e)?a.setAttribute("data-mce-style",e,2):a.removeAttribute("data-mce-style",2));a.style.cssText=e;break;case "class":a.className=e||"";break;case "src":case "href":f.keep_values&&(f.url_converter&&(e=f.url_converter.call(f.url_converter_scope||g,e,d,a)),g.setAttrib(a,"data-mce-"+d,e,2));break;case "shape":a.setAttribute("data-mce-style",e)}c(e)&&null!==e&&0!==e.length?a.setAttribute(d,
""+e,2):a.removeAttribute(d,2);tinyMCE.activeEditor&&k!=e&&(f=tinyMCE.activeEditor,f.onSetAttrib.dispatch(f,a,d,e))})},setAttribs:function(a,d){var c=this;return this.run(a,function(a){b(d,function(b,d){c.setAttrib(a,d,b)})})},getAttrib:function(b,d,g){var h;b=this.get(b);if(!b||1!==b.nodeType)return void 0===g?!1:g;c(g)||(g="");if(/^(src|href|style|coords|shape)$/.test(d)&&(h=b.getAttribute("data-mce-"+d)))return h;e&&this.props[d]&&(h=(h=b[this.props[d]])&&h.nodeValue?h.nodeValue:h);h||(h=b.getAttribute(d,
2));if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(d))return!0===b[this.props[d]]&&""===h?d:h?d:"";if("FORM"===b.nodeName&&b.getAttributeNode(d))return b.getAttributeNode(d).nodeValue;"style"===d&&(h=h||b.style.cssText)&&(h=this.serializeStyle(this.parseStyle(h),b.nodeName),this.settings.keep_values&&!this._isRes(h)&&b.setAttribute("data-mce-style",h));f&&"class"===d&&h&&(h=h.replace(/(apple|webkit)\-[a-z\-]+/gi,""));if(e)switch(d){case "rowspan":case "colspan":1===
h&&(h="");break;case "size":if("+0"===h||20===h||0===h)h="";break;case "width":case "height":case "vspace":case "checked":case "disabled":case "readonly":0===h&&(h="");break;case "hspace":-1===h&&(h="");break;case "maxlength":case "tabindex":if(32768===h||2147483647===h||"32768"===h)h="";break;case "multiple":case "compact":case "noshade":case "nowrap":return 65535===h?d:g;case "shape":h=h.toLowerCase();break;default:0===d.indexOf("on")&&h&&(h=a._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",
""+h))}return void 0!==h&&null!==h&&""!==h?""+h:g},getPos:function(a,b){var d=0,c=0,e=this.doc;a=this.get(a);b=b||e.body;if(a){if(a.getBoundingClientRect)return a=a.getBoundingClientRect(),c=this.boxModel?e.documentElement:e.body,d=a.left+(e.documentElement.scrollLeft||e.body.scrollLeft)-c.clientTop,c=a.top+(e.documentElement.scrollTop||e.body.scrollTop)-c.clientLeft,{x:d,y:c};for(e=a;e&&e!=b&&e.nodeType;)d+=e.offsetLeft||0,c+=e.offsetTop||0,e=e.offsetParent;for(e=a.parentNode;e&&e!=b&&e.nodeType;)d-=
e.scrollLeft||0,c-=e.scrollTop||0,e=e.parentNode}return{x:d,y:c}},parseStyle:function(a){return this.styles.parse(a)},serializeStyle:function(a,b){return this.styles.serialize(a,b)},addStyle:function(a){var b=this.doc,d;styleElm=b.getElementById("mceDefaultStyles");styleElm||(styleElm=b.createElement("style"),styleElm.id="mceDefaultStyles",styleElm.type="text/css",d=b.getElementsByTagName("head")[0],d.firstChild?d.insertBefore(styleElm,d.firstChild):d.appendChild(styleElm));styleElm.styleSheet?styleElm.styleSheet.cssText+=
a:styleElm.appendChild(b.createTextNode(a))},loadCSS:function(d){var c=this,g=c.doc,f;d||(d="");f=g.getElementsByTagName("head")[0];b(d.split(","),function(b){var d;c.files[b]||(c.files[b]=!0,d=c.create("link",{rel:"stylesheet",href:a._addVer(b)}),e&&g.documentMode&&g.recalc&&(d.onload=function(){g.recalc&&g.recalc();d.onload=null}),f.appendChild(d))})},addClass:function(a,b){return this.run(a,function(a){var d;if(!b)return 0;if(this.hasClass(a,b))return a.className;d=this.removeClass(a,b);return a.className=
(""!=d?d+" ":"")+b})},removeClass:function(b,d){var c=this,e;return c.run(b,function(b){var g;return c.hasClass(b,d)?(e||(e=new RegExp("(^|\\s+)"+d+"(\\s+|$)","g")),g=b.className.replace(e," "),g=a.trim(" "!=g?g:""),b.className=g,g||(b.removeAttribute("class"),b.removeAttribute("className")),g):b.className})},hasClass:function(a,b){return(a=this.get(a))&&b?-1!==(" "+a.className+" ").indexOf(" "+b+" "):!1},show:function(a){return this.setStyle(a,"display","block")},hide:function(a){return this.setStyle(a,
"display","none")},isHidden:function(a){a=this.get(a);return!a||"none"==a.style.display||"none"==this.getStyle(a,"display")},uniqueId:function(a){return(a?a:"mce_")+this.counter++},setHTML:function(d,c){var g=this;return g.run(d,function(d){if(e){for(;d.firstChild;)d.removeChild(d.firstChild);try{d.innerHTML="<br />"+c,d.removeChild(d.firstChild)}catch(f){var h=g.create("div");h.innerHTML="<br />"+c;b(a.grep(h.childNodes),function(a,b){b&&d.canHaveHTML&&d.appendChild(a)})}}else d.innerHTML=c;return c})},
getOuterHTML:function(a){var b;a=this.get(a);if(!a)return null;if(1===a.nodeType&&this.hasOuterHTML)return a.outerHTML;b=(a.ownerDocument||this.doc).createElement("body");b.appendChild(a.cloneNode(!0));return b.innerHTML},setOuterHTML:function(a,b,d){function c(a,b,d){d=d.createElement("body");d.innerHTML=b;for(b=d.lastChild;b;)g.insertAfter(b.cloneNode(!0),a),b=b.previousSibling;g.remove(a)}var g=this;return this.run(a,function(a){a=g.get(a);if(1==a.nodeType)if(d=d||a.ownerDocument||g.doc,e)try{e&&
1==a.nodeType?a.outerHTML=b:c(a,b,d)}catch(f){c(a,b,d)}else c(a,b,d)})},decode:d.decode,encode:d.encodeAllRaw,insertAfter:function(a,b){b=this.get(b);return this.run(a,function(a){var d,c;d=b.parentNode;(c=b.nextSibling)?d.insertBefore(a,c):d.appendChild(a);return a})},replace:function(d,e,g){c(e,"array")&&(d=d.cloneNode(!0));return this.run(e,function(c){g&&b(a.grep(c.childNodes),function(a){d.appendChild(a)});return c.parentNode.replaceChild(d,c)})},rename:function(a,d){var c=this,e;a.nodeName!=
d.toUpperCase()&&(e=c.create(d),b(c.getAttribs(a),function(b){c.setAttrib(e,b.nodeName,c.getAttrib(a,b.nodeName))}),c.replace(e,a,1));return e||a},findCommonAncestor:function(a,b){for(var d=a,c;d;){for(c=b;c&&d!=c;)c=c.parentNode;if(d==c)break;d=d.parentNode}return!d&&a.ownerDocument?a.ownerDocument.documentElement:d},toHex:function(a){function b(a){a=parseInt(a,10).toString(16);return 1<a.length?a:"0"+a}var d=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(a);d&&(a=
"#"+b(d[1])+b(d[2])+b(d[3]));return a},getClasses:function(){function d(h){b(h.imports,function(a){d(a)});b(h.cssRules||h.rules,function(h){switch(h.type||1){case 1:h.selectorText&&b(h.selectorText.split(","),function(b){b=b.replace(/^\s*|\s*$|^\s\./g,"");!/\.mce/.test(b)&&/\.[\w\-]+$/.test(b)&&(f=b,b=a._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",b),g&&!(b=g(b,f))||e[b]||(c.push({"class":b}),e[b]=1))});break;case 3:d(h.styleSheet)}})}var c=[],e={},g=this.settings.class_filter,f;if(this.classes)return this.classes;
try{b(this.doc.styleSheets,d)}catch(h){}0<c.length&&(this.classes=c);return c},run:function(a,d,c){var e=this,g;e.doc&&"string"===typeof a&&(a=e.get(a));if(!a)return!1;c=c||this;return a.nodeType||!a.length&&0!==a.length?d.call(c,a):(g=[],b(a,function(a,b){a&&("string"==typeof a&&(a=e.doc.getElementById(a)),g.push(d.call(c,a,b)))}),g)},getAttribs:function(a){var b;a=this.get(a);if(!a)return[];if(e){b=[];if("OBJECT"==a.nodeName)return a.attributes;"OPTION"===a.nodeName&&this.getAttrib(a,"selected")&&
b.push({specified:1,nodeName:"selected"});a.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(a){b.push({specified:1,nodeName:a})});return b}return a.attributes},isEmpty:function(b,d){var c,e,g,f,r=0;if(b=b.firstChild){g=new a.dom.TreeWalker(b,b.parentNode);d=d||this.schema?this.schema.getNonEmptyElements():null;do{e=b.nodeType;if(1===e){if(b.getAttribute("data-mce-bogus"))continue;f=b.nodeName.toLowerCase();if(d&&d[f]){if("br"===
f){r++;continue}return!1}this.getAttribs(b);for(c=b.attributes.length;c--;)if(f=b.attributes[c].nodeName,"name"===f||"data-mce-bookmark"===f)return!1}if(8==e||3===e&&!h.test(b.nodeValue))return!1}while(b=g.next())}return 1>=r},destroy:function(b){this.win=this.doc=this.root=this.events=this.frag=null;b||a.removeUnload(this.destroy)},createRng:function(){var b=this.doc;return b.createRange?b.createRange():new a.dom.Range(this)},nodeIndex:function(a,b){var d=0,c,e;if(a)for(c=a.nodeType,a=a.previousSibling;a;a=
a.previousSibling)if(e=a.nodeType,!b||3!=e||e!=c&&a.nodeValue.length)d++,c=e;return d},split:function(b,d,c){function e(b){var d,c=b.childNodes,f=b.nodeType;if(1!=f||"bookmark"!=b.getAttribute("data-mce-type")){for(d=c.length-1;0<=d;d--)e(c[d]);if(9!=f){if(3==f&&0<b.nodeValue.length){d=a.trim(b.nodeValue).length;if(!(c=!g.isBlock(b.parentNode)||0<d)){if(d=0===d)d=b.nextSibling&&"SPAN"==b.nextSibling.nodeName,d=b.previousSibling&&"SPAN"==b.previousSibling.nodeName&&d;c=d}if(c)return}else if(1==f&&
(c=b.childNodes,1==c.length&&c[0]&&1==c[0].nodeType&&"bookmark"==c[0].getAttribute("data-mce-type")&&b.parentNode.insertBefore(c[0],b),c.length||/^(br|hr|input|img)$/i.test(b.nodeName)))return;g.remove(b)}return b}}var g=this,f=g.createRng(),h,v;if(b&&d)return f.setStart(b.parentNode,g.nodeIndex(b)),f.setEnd(d.parentNode,g.nodeIndex(d)),h=f.extractContents(),f=g.createRng(),f.setStart(d.parentNode,g.nodeIndex(d)+1),f.setEnd(b.parentNode,g.nodeIndex(b)+1),f=f.extractContents(),v=b.parentNode,v.insertBefore(e(h),
b),c?v.replaceChild(c,d):v.insertBefore(d,b),v.insertBefore(e(f),b),g.remove(b),c||d},bind:function(a,b,d,c){return this.events.add(a,b,d,c||this)},unbind:function(a,b,d){return this.events.remove(a,b,d)},fire:function(a,b,d){return this.events.fire(a,b,d)},getContentEditable:function(a){var b;return 1!=a.nodeType?null:(b=a.getAttribute("data-mce-contenteditable"))&&"inherit"!==b?b:"inherit"!==a.contentEditable?a.contentEditable:null},_findSib:function(a,b,d){var e=this,g=b;if(a)for(c(g,"string")&&
(g=function(a){return e.is(a,b)}),a=a[d];a;a=a[d])if(g(a))return a;return null},_isRes:function(a){return/^(top|left|bottom|right|width|height)/i.test(a)||/;\s*(top|left|bottom|right|width|height)/i.test(a)}});a.DOM=new a.dom.DOMUtils(document,{process_html:0})})(tinymce);
(function(a){function b(a){function f(a,b){l(!0,a,b)}function e(a,b){l(!1,a,b)}function d(a){f(a.parentNode,A(a))}function g(a){e(a.parentNode,A(a)+1)}function h(){return p(1)}function k(a,b){var d;if(3==a.nodeType||0>b)return a;for(d=a.firstChild;d&&0<b;)--b,d=d.nextSibling;return d?d:a}function m(b,d,e,g){var f,h;if(b==e)return d==g?0:d<g?-1:1;for(f=e;f&&f.parentNode!=b;)f=f.parentNode;if(f){h=0;for(e=b.firstChild;e!=f&&h<d;)h++,e=e.nextSibling;return d<=h?-1:1}for(f=b;f&&f.parentNode!=e;)f=f.parentNode;
if(f){h=0;for(e=e.firstChild;e!=f&&h<g;)h++,e=e.nextSibling;return h<g?-1:1}for(d=a.findCommonAncestor(b,e);b&&b.parentNode!=d;)b=b.parentNode;b||(b=d);for(g=e;g&&g.parentNode!=d;)g=g.parentNode;g||(g=d);if(b==g)return 0;for(e=d.firstChild;e;){if(e==b)return-1;if(e==g)return 1;e=e.nextSibling}}function l(b,d,e){b?(t.startContainer=d,t.startOffset=e):(t.endContainer=d,t.endOffset=e);for(d=t.endContainer;d.parentNode;)d=d.parentNode;for(e=t.startContainer;e.parentNode;)e=e.parentNode;e==d?0<m(t.startContainer,
t.startOffset,t.endContainer,t.endOffset)&&t.collapse(b):t.collapse(b);t.collapsed=t.startContainer==t.endContainer&&t.startOffset==t.endOffset;t.commonAncestorContainer=a.findCommonAncestor(t.startContainer,t.endContainer)}function p(a){var b,d=0,c=0,e;if(t.startContainer==t.endContainer)return n(a);b=t.endContainer;for(e=b.parentNode;e;b=e,e=e.parentNode){if(e==t.startContainer){var g=b;e=c=d=d=e=b=void 0;2!=a&&(b=u.createDocumentFragment());e=q(g,a);b&&b.appendChild(e);d=A(g);d-=t.startOffset;
if(!(0>=d))for(e=g.previousSibling;0<d;)c=e.previousSibling,e=x(e,a),b&&b.insertBefore(e,b.firstChild),--d,e=c;1!=a&&(t.setEndBefore(g),t.collapse(!1));a=b;return a}++d}b=t.startContainer;for(e=b.parentNode;e;b=e,e=e.parentNode){if(e==t.endContainer){g=b;e=c=d=e=d=b=void 0;2!=a&&(b=u.createDocumentFragment());e=r(g,a);b&&b.appendChild(e);d=A(g);++d;d=t.endOffset-d;for(e=g.nextSibling;e&&0<d;)c=e.nextSibling,e=x(e,a),b&&b.appendChild(e),--d,e=c;1!=a&&(t.setStartAfter(g),t.collapse(!0));return b}++c}c-=
d;for(b=t.startContainer;0<c;)b=b.parentNode,c--;for(d=t.endContainer;0>c;)d=d.parentNode,c++;c=b.parentNode;for(e=d.parentNode;c!=e;c=c.parentNode,e=e.parentNode)b=c,d=e;var f;2!=a&&(g=u.createDocumentFragment());f=r(b,a);g&&g.appendChild(f);c=A(b);e=A(d);++c;c=e-c;for(f=b.nextSibling;0<c;)e=f.nextSibling,f=x(f,a),g&&g.appendChild(f),f=e,--c;f=q(d,a);g&&g.appendChild(f);1!=a&&(t.setStartAfter(b),t.collapse(!0));return g}function n(a){var b,d,c,e,g;2!=a&&(b=u.createDocumentFragment());if(t.startOffset==
t.endOffset)return b;if(3==t.startContainer.nodeType){d=t.startContainer.nodeValue;c=d.substring(t.startOffset,t.endOffset);1!=a&&(d=t.startContainer,e=t.startOffset,g=t.endOffset-t.startOffset,0===e&&g>=d.nodeValue.length-1?d.parentNode.removeChild(d):d.deleteData(e,g),t.collapse(!0));if(2==a)return;0<c.length&&b.appendChild(u.createTextNode(c));return b}d=k(t.startContainer,t.startOffset);for(c=t.endOffset-t.startOffset;d&&0<c;)e=d.nextSibling,d=x(d,a),b&&b.appendChild(d),--c,d=e;1!=a&&t.collapse(!0);
return b}function q(a,b){var d=k(t.endContainer,t.endOffset-1),c,e,g,f=d!=t.endContainer;if(d==a)return v(d,f,!1,b);c=d.parentNode;for(e=v(c,!1,!1,b);c;){for(;d;)g=d.previousSibling,d=v(d,f,!1,b),2!=b&&e.insertBefore(d,e.firstChild),f=!0,d=g;if(c==a)return e;d=c.previousSibling;c=c.parentNode;g=v(c,!1,!1,b);2!=b&&g.appendChild(e);e=g}}function r(a,b){var d=k(t.startContainer,t.startOffset),c=d!=t.startContainer,e,g,f;if(d==a)return v(d,c,!0,b);e=d.parentNode;for(g=v(e,!1,!0,b);e;){for(;d;)f=d.nextSibling,
d=v(d,c,!0,b),2!=b&&g.appendChild(d),c=!0,d=f;if(e==a)return g;d=e.nextSibling;e=e.parentNode;f=v(e,!1,!0,b);2!=b&&f.appendChild(g);g=f}}function v(b,d,e,g){var f;if(d)return x(b,g);if(3==b.nodeType){d=b.nodeValue;e?(f=t.startOffset,e=d.substring(f),d=d.substring(0,f)):(f=t.endOffset,e=d.substring(0,f),d=d.substring(f));1!=g&&(b.nodeValue=d);if(2==g)return;b=a.clone(b,!1);b.nodeValue=e;return b}if(2!=g)return a.clone(b,!1)}function x(b,d){if(2!=d)return 1==d?a.clone(b,!0):b;b.parentNode.removeChild(b)}
var t=this,u=a.doc,B=tinymce.extend,A=a.nodeIndex;B(t,{startContainer:u,startOffset:0,endContainer:u,endOffset:0,collapsed:!0,commonAncestorContainer:u,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:f,setEnd:e,setStartBefore:d,setStartAfter:function(a){f(a.parentNode,A(a)+1)},setEndBefore:function(a){e(a.parentNode,A(a))},setEndAfter:g,collapse:function(a){a?(t.endContainer=t.startContainer,t.endOffset=t.startOffset):(t.startContainer=t.endContainer,t.startOffset=t.endOffset);
t.collapsed=!0},selectNode:function(a){d(a);g(a)},selectNodeContents:function(a){f(a,0);e(a,1===a.nodeType?a.childNodes.length:a.nodeValue.length)},compareBoundaryPoints:function(a,b){var d=t.startContainer,c=t.startOffset,e=t.endContainer,g=t.endOffset,f=b.startContainer,h=b.startOffset,k=b.endContainer,n=b.endOffset;if(0===a)return m(d,c,f,h);if(1===a)return m(e,g,f,h);if(2===a)return m(e,g,k,n);if(3===a)return m(d,c,k,n)},deleteContents:function(){p(2)},extractContents:function(){return p(0)},
cloneContents:h,insertNode:function(b){var d=this.startContainer,e=this.startOffset,g;3!==d.nodeType&&4!==d.nodeType||!d.nodeValue?(0<d.childNodes.length&&(g=d.childNodes[e]),g?d.insertBefore(b,g):d.appendChild(b)):e?e>=d.nodeValue.length?a.insertAfter(b,d):(e=d.splitText(e),d.parentNode.insertBefore(b,e)):d.parentNode.insertBefore(b,d)},surroundContents:function(a){var b=t.extractContents();t.insertNode(a);a.appendChild(b);t.selectNode(a)},cloneRange:function(){return B(new b(a),{startContainer:t.startContainer,
startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset,collapsed:t.collapsed,commonAncestorContainer:t.commonAncestorContainer})},toStringIE:function(){return a.create("body",null,h()).outerText}});return t}a.Range=b;b.prototype.toString=function(){return this.toStringIE()}})(tinymce.dom);
(function(){tinymce.dom.TridentSelection=function(a){function b(b,d){var c,f=0,k,m,l,p,n,q=-1,r;c=b.duplicate();c.collapse(d);r=c.parentElement();if(r.ownerDocument===a.dom.doc){for(;"false"===r.contentEditable;)r=r.parentNode;if(!r.hasChildNodes())return{node:r,inside:1};l=r.children;for(k=l.length-1;f<=k;)if(n=Math.floor((f+k)/2),p=l[n],c.moveToElementText(p),q=c.compareEndPoints(d?"StartToStart":"EndToEnd",b),0<q)k=n-1;else if(0>q)f=n+1;else return{node:p};if(0>q)for(p?c.collapse(!1):(c.moveToElementText(r),
c.collapse(!0),p=r,m=!0),f=0;0!==c.compareEndPoints(d?"StartToStart":"StartToEnd",b)&&0!==c.move("character",1)&&r==c.parentElement();)f++;else for(c.collapse(!0),f=0;0!==c.compareEndPoints(d?"StartToStart":"StartToEnd",b)&&0!==c.move("character",-1)&&r==c.parentElement();)f++;return{node:p,position:q,offset:f,inside:m}}}var c=this,f=a.dom;this.getBookmark=function(c){function d(a){var b,d,c,e,g=[];b=a.parentNode;for(d=f.getRoot().parentNode;b!=d&&9!==b.nodeType;){c=b.children;for(e=c.length;e--;)if(a===
c[e]){g.push(e);break}a=b;b=b.parentNode}return g}function g(a){if(a=b(h,a))return{position:a.position,offset:a.offset,indexes:d(a.node),inside:a.inside}}var h=a.getRng(),k={};2===c&&(h.item?k.start={ctrl:!0,indexes:d(h.item(0))}:(k.start=g(!0),a.isCollapsed()||(k.end=g())));return k};this.moveToBookmark=function(a){function b(a){var d,c,e,g;d=f.getRoot();for(c=a.length-1;0<=c;c--)g=d.children,e=a[c],e<=g.length-1&&(d=g[e]);return d}function c(g){var f=a[g?"start":"end"],p,n;f&&(p=0<f.position,n=
k.createTextRange(),n.moveToElementText(b(f.indexes)),offset=f.offset,void 0!==offset?(n.collapse(f.inside||p),n.moveStart("character",p?-offset:offset)):n.collapse(g),h.setEndPoint(g?"StartToStart":"EndToStart",n),g&&h.collapse(!0))}var h,k=f.doc.body;a.start&&(a.start.ctrl?(h=k.createControlRange(),h.addElement(b(a.start.indexes))):(h=k.createTextRange(),c(!0),c()),h.select())};this.addRange=function(b){function d(a){var b,d,e,h,r;e=f.create("a");b=a?k:l;d=a?m:p;h=c.duplicate();if(b==n||b==n.documentElement)b=
q,d=0;3==b.nodeType?(b.parentNode.insertBefore(e,b),h.moveToElementText(e),h.moveStart("character",d),f.remove(e),c.setEndPoint(a?"StartToStart":"EndToEnd",h)):(r=b.childNodes,r.length?(d>=r.length?f.insertAfter(e,r[r.length-1]):b.insertBefore(e,r[d]),h.moveToElementText(e)):b.canHaveHTML&&(b.innerHTML="<span>\ufeff</span>",e=b.firstChild,h.moveToElementText(e),h.collapse(!1)),c.setEndPoint(a?"StartToStart":"EndToEnd",h),f.remove(e))}var c,h,k,m,l,p,n=a.dom.doc,q=n.body;k=b.startContainer;m=b.startOffset;
l=b.endContainer;p=b.endOffset;c=q.createTextRange();if(k==l&&1==k.nodeType){if(m==p&&!k.hasChildNodes()){if(k.canHaveHTML){(b=k.previousSibling)&&!b.hasChildNodes()&&f.isBlock(b)?b.innerHTML="\ufeff":b=null;k.innerHTML="<span>\ufeff</span><span>\ufeff</span>";c.moveToElementText(k.lastChild);c.select();f.doc.selection.clear();k.innerHTML="";b&&(b.innerHTML="");return}m=f.nodeIndex(k);k=k.parentNode}if(m==p-1)try{h=q.createControlRange();h.addElement(k.childNodes[m]);h.select();return}catch(r){}}d(!0);
d();c.select()};this.getRangeAt=function(){function e(a){var c=b(d,a),e,f,h=0,k;e=c.node;f=c.offset;if(c.inside&&!e.hasChildNodes())g[a?"setStart":"setEnd"](e,0);else if(void 0===f)g[a?"setStartBefore":"setEndAfter"](e);else{if(0>c.position){c=c.inside?e.firstChild:e.nextSibling;if(!c){g[a?"setStartAfter":"setEndAfter"](e);return}if(!f){if(3==c.nodeType)g[a?"setStart":"setEnd"](c,0);else g[a?"setStartBefore":"setEndBefore"](c);return}for(;c;){k=c.nodeValue;h+=k.length;if(h>=f){e=c;h-=f;h=k.length-
h;break}c=c.nextSibling}}else{c=e.previousSibling;if(!c)return g[a?"setStartBefore":"setEndBefore"](e);if(!f){if(3==e.nodeType)g[a?"setStart":"setEnd"](c,e.nodeValue.length);else g[a?"setStartAfter":"setEndAfter"](c);return}for(;c;){h+=c.nodeValue.length;if(h>=f){e=c;h-=f;break}c=c.previousSibling}}g[a?"setStart":"setEnd"](e,h)}}var d=a.getRng(),g=f.createRng(),h,k,m,l;h=d.item?d.item(0):d.parentElement();if(h.ownerDocument!=f.doc)return g;k=a.isCollapsed();if(d.item)return g.setStart(h.parentNode,
f.nodeIndex(h)),g.setEnd(g.startContainer,g.startOffset+1),g;try{e(!0),k||e()}catch(p){if(-2147024809==p.number)l=c.getBookmark(2),m=d.duplicate(),m.collapse(!0),h=m.parentElement(),k||(m=d.duplicate(),m.collapse(!1),m=m.parentElement(),m.innerHTML=m.innerHTML),h.innerHTML=h.innerHTML,c.moveToBookmark(l),d=a.getRng(),e(!0),k||e();else throw p;}return g}}})();
(function(){function a(a,b,d,c,e,g){e=0;for(var f=c.length;e<f;e++){var h=c[e];if(h){for(var k=!1,h=h[a];h;){if(h.sizcache===d){k=c[h.sizset];break}1!==h.nodeType||g||(h.sizcache=d,h.sizset=e);if(h.nodeName.toLowerCase()===b){k=h;break}h=h[a]}c[e]=k}}}function b(a,b,d,c,e,g){e=0;for(var f=c.length;e<f;e++){var h=c[e];if(h){for(var k=!1,h=h[a];h;){if(h.sizcache===d){k=c[h.sizset];break}if(1===h.nodeType)if(g||(h.sizcache=d,h.sizset=e),"string"!==typeof b){if(h===b){k=!0;break}}else if(0<l.filter(b,
[h]).length){k=h;break}h=h[a]}c[e]=k}}}var c=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,f=0,e=Object.prototype.toString,d=!1,g=!0,h=/\\/g,k=/\r\n/g,m=/\W/;[0,0].sort(function(){g=!1;return 0});var l=function(a,b,d,g){d=d||[];var f=b=b||document;if(1!==b.nodeType&&9!==b.nodeType)return[];if(!a||"string"!==typeof a)return d;var h,k,m,p,r,v=!0,t=l.isXML(b),u=[],B=a;do if(c.exec(""),h=c.exec(B))if(B=h[3],u.push(h[1]),
h[2]){p=h[3];break}while(h);if(1<u.length&&q.exec(a))if(2===u.length&&n.relative[u[0]])k=A(u[0]+u[1],b,g);else for(k=n.relative[u[0]]?[b]:l(u.shift(),b);u.length;)a=u.shift(),n.relative[a]&&(a+=u.shift()),k=A(a,k,g);else if(!g&&1<u.length&&9===b.nodeType&&!t&&n.match.ID.test(u[0])&&!n.match.ID.test(u[u.length-1])&&(h=l.find(u.shift(),b,t),b=h.expr?l.filter(h.expr,h.set)[0]:h.set[0]),b)for(h=g?{expr:u.pop(),set:x(g)}:l.find(u.pop(),1!==u.length||"~"!==u[0]&&"+"!==u[0]||!b.parentNode?b:b.parentNode,
t),k=h.expr?l.filter(h.expr,h.set):h.set,0<u.length?m=x(k):v=!1;u.length;)h=r=u.pop(),n.relative[r]?h=u.pop():r="",null==h&&(h=b),n.relative[r](m,h,t);else m=[];m||(m=k);m||l.error(r||a);if("[object Array]"===e.call(m))if(v)if(b&&1===b.nodeType)for(a=0;null!=m[a];a++)m[a]&&(!0===m[a]||1===m[a].nodeType&&l.contains(b,m[a]))&&d.push(k[a]);else for(a=0;null!=m[a];a++)m[a]&&1===m[a].nodeType&&d.push(k[a]);else d.push.apply(d,m);else x(m,d);p&&(l(p,f,d,g),l.uniqueSort(d));return d};l.uniqueSort=function(a){if(u&&
(d=g,a.sort(u),d))for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a};l.matches=function(a,b){return l(a,null,null,b)};l.matchesSelector=function(a,b){return 0<l(b,null,null,[a]).length};l.find=function(a,b,d){var c,e,g,f,k,m;if(!a)return[];e=0;for(g=n.order.length;e<g;e++)if(k=n.order[e],f=n.leftMatch[k].exec(a))if(m=f[1],f.splice(1,1),"\\"!==m.substr(m.length-1)&&(f[1]=(f[1]||"").replace(h,""),c=n.find[k](f,b,d),null!=c)){a=a.replace(n.match[k],"");break}c||(c="undefined"!==typeof b.getElementsByTagName?
b.getElementsByTagName("*"):[]);return{set:c,expr:a}};l.filter=function(a,b,d,c){for(var e,g,f,h,k,m,p,q,r=a,x=[],v=b,A=b&&b[0]&&l.isXML(b[0]);a&&b.length;){for(f in n.filter)if(null!=(e=n.leftMatch[f].exec(a))&&e[2]&&(m=n.filter[f],k=e[1],g=!1,e.splice(1,1),"\\"!==k.substr(k.length-1))){v===x&&(x=[]);if(n.preFilter[f])if(e=n.preFilter[f](e,v,d,x,c,A),!e)g=h=!0;else if(!0===e)continue;if(e)for(p=0;null!=(k=v[p]);p++)k&&(h=m(k,e,p,v),q=c^h,d&&null!=h?q?g=!0:v[p]=!1:q&&(x.push(k),g=!0));if(void 0!==
h){d||(v=x);a=a.replace(n.match[f],"");if(!g)return[];break}}if(a===r)if(null==g)l.error(a);else break;r=a}return v};l.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};var p=l.getText=function(a){var b,d;b=a.nodeType;var c="";if(b)if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;if("string"===typeof a.innerText)return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)c+=p(a)}else{if(3===b||4===b)return a.nodeValue}else for(b=
0;d=a[b];b++)8!==d.nodeType&&(c+=p(d));return c},n=l.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,
PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var d="string"===typeof b,c=d&&!m.test(b),d=d&&!c;c&&(b=b.toLowerCase());for(var c=0,e=a.length,g;c<e;c++)if(g=a[c]){for(;(g=g.previousSibling)&&1!==g.nodeType;);a[c]=d||g&&g.nodeName.toLowerCase()===b?g||!1:g===b}d&&l.filter(b,
a,!0)},">":function(a,b){var d,c="string"===typeof b,e=0,g=a.length;if(c&&!m.test(b))for(b=b.toLowerCase();e<g;e++){if(d=a[e])d=d.parentNode,a[e]=d.nodeName.toLowerCase()===b?d:!1}else{for(;e<g;e++)(d=a[e])&&(a[e]=c?d.parentNode:d.parentNode===b);c&&l.filter(b,a,!0)}},"":function(d,c,e){var g,h=f++,k=b;"string"!==typeof c||m.test(c)||(g=c=c.toLowerCase(),k=a);k("parentNode",c,h,d,g,e)},"~":function(d,c,e){var g,h=f++,k=b;"string"!==typeof c||m.test(c)||(g=c=c.toLowerCase(),k=a);k("previousSibling",
c,h,d,g,e)}},find:{ID:function(a,b,d){if("undefined"!==typeof b.getElementById&&!d)return(a=b.getElementById(a[1]))&&a.parentNode?[a]:[]},NAME:function(a,b){if("undefined"!==typeof b.getElementsByName){for(var d=[],c=b.getElementsByName(a[1]),e=0,g=c.length;e<g;e++)c[e].getAttribute("name")===a[1]&&d.push(c[e]);return 0===d.length?null:d}},TAG:function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,d,c,e,g){a=" "+a[1].replace(h,
"")+" ";if(g)return a;g=0;for(var f;null!=(f=b[g]);g++)f&&(e^(f.className&&0<=(" "+f.className+" ").replace(/[\t\n\r]/g," ").indexOf(a))?d||c.push(f):d&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(h,"")},TAG:function(a,b){return a[1].replace(h,"").toLowerCase()},CHILD:function(a){if("nth"===a[1]){a[2]||l.error(a[0]);a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-
0;a[3]=b[3]-0}else a[2]&&l.error(a[0]);a[0]=f++;return a},ATTR:function(a,b,d,c,e,g){b=a[1]=a[1].replace(h,"");!g&&n.attrMap[b]&&(a[1]=n.attrMap[b]);a[4]=(a[4]||a[5]||"").replace(h,"");"~="===a[2]&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(a,b,d,e,g){if("not"===a[1])if(1<(c.exec(a[3])||"").length||/^\w/.test(a[3]))a[3]=l(a[3],null,null,b);else return a=l.filter(a[3],b,d,1^g),d||e.push.apply(e,a),!1;else if(n.match.POS.test(a[0])||n.match.CHILD.test(a[0]))return!0;return a},POS:function(a){a.unshift(!0);
return a}},filters:{enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===a.disabled},checked:function(a){return!0===a.checked},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,d){return!!l(d[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),d=a.type;return"input"===a.nodeName.toLowerCase()&&
"text"===d&&(b===d||null===b)},radio:function(a){return"input"===a.nodeName.toLowerCase()&&"radio"===a.type},checkbox:function(a){return"input"===a.nodeName.toLowerCase()&&"checkbox"===a.type},file:function(a){return"input"===a.nodeName.toLowerCase()&&"file"===a.type},password:function(a){return"input"===a.nodeName.toLowerCase()&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"submit"===a.type},image:function(a){return"input"===a.nodeName.toLowerCase()&&
"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return 0===b},last:function(a,b,d,c){return b===c.length-1},even:function(a,b){return 0===b%2},odd:function(a,b){return 1===
b%2},lt:function(a,b,d){return b<d[3]-0},gt:function(a,b,d){return b>d[3]-0},nth:function(a,b,d){return d[3]-0===b},eq:function(a,b,d){return d[3]-0===b}},filter:{PSEUDO:function(a,b,d,c){var e=b[1],g=n.filters[e];if(g)return g(a,d,b,c);if("contains"===e)return 0<=(a.textContent||a.innerText||p([a])||"").indexOf(b[3]);if("not"===e){b=b[3];d=0;for(c=b.length;d<c;d++)if(b[d]===a)return!1;return!0}l.error(e)},CHILD:function(a,b){var d,c,e,g,f,h;d=b[1];h=a;switch(d){case "only":case "first":for(;h=h.previousSibling;)if(1===
h.nodeType)return!1;if("first"===d)return!0;h=a;case "last":for(;h=h.nextSibling;)if(1===h.nodeType)return!1;return!0;case "nth":d=b[2];c=b[3];if(1===d&&0===c)return!0;e=b[0];if((g=a.parentNode)&&(g.sizcache!==e||!a.nodeIndex)){f=0;for(h=g.firstChild;h;h=h.nextSibling)1===h.nodeType&&(h.nodeIndex=++f);g.sizcache=e}h=a.nodeIndex-c;return 0===d?0===h:0===h%d&&0<=h/d}},ID:function(a,b){return 1===a.nodeType&&a.getAttribute("id")===b},TAG:function(a,b){return"*"===b&&1===a.nodeType||!!a.nodeName&&a.nodeName.toLowerCase()===
b},CLASS:function(a,b){return-1<(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)},ATTR:function(a,b){var d=b[1],d=l.attr?l.attr(a,d):n.attrHandle[d]?n.attrHandle[d](a):null!=a[d]?a[d]:a.getAttribute(d),c=d+"",e=b[2],g=b[4];return null==d?"!="===e:!e&&l.attr?null!=d:"="===e?c===g:"*="===e?0<=c.indexOf(g):"~="===e?0<=(" "+c+" ").indexOf(g):g?"!="===e?c!==g:"^="===e?0===c.indexOf(g):"$="===e?c.substr(c.length-g.length)===g:"|="===e?c===g||c.substr(0,g.length+1)===g+"-":!1:c&&!1!==d},POS:function(a,
b,d,c){var e=n.setFilters[b[2]];if(e)return e(a,d,b,c)}}},q=n.match.POS,r=function(a,b){return"\\"+(b-0+1)},v;for(v in n.match)n.match[v]=new RegExp(n.match[v].source+/(?![^\[]*\])(?![^\(]*\))/.source),n.leftMatch[v]=new RegExp(/(^(?:.|\r|\n)*?)/.source+n.match[v].source.replace(/\\(\d+)/g,r));n.match.globalPOS=q;var x=function(a,b){a=Array.prototype.slice.call(a,0);return b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(t){x=function(a,
b){var d=0,c=b||[];if("[object Array]"===e.call(a))Array.prototype.push.apply(c,a);else if("number"===typeof a.length)for(var g=a.length;d<g;d++)c.push(a[d]);else for(;a[d];d++)c.push(a[d]);return c}}var u,B;document.documentElement.compareDocumentPosition?u=function(a,b){return a===b?(d=!0,0):a.compareDocumentPosition&&b.compareDocumentPosition?a.compareDocumentPosition(b)&4?-1:1:a.compareDocumentPosition?-1:1}:(u=function(a,b){if(a===b)return d=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-
b.sourceIndex;var c,e,g=[],f=[];c=a.parentNode;e=b.parentNode;var h=c;if(c===e)return B(a,b);if(!c)return-1;if(!e)return 1;for(;h;)g.unshift(h),h=h.parentNode;for(h=e;h;)f.unshift(h),h=h.parentNode;c=g.length;e=f.length;for(h=0;h<c&&h<e;h++)if(g[h]!==f[h])return B(g[h],f[h]);return h===c?B(a,f[h],-1):B(g[h],b,1)},B=function(a,b,d){if(a===b)return d;for(a=a.nextSibling;a;){if(a===b)return-1;a=a.nextSibling}return 1});(function(){var a=document.createElement("div"),b="script"+(new Date).getTime(),d=
document.documentElement;a.innerHTML="<a name='"+b+"'/>";d.insertBefore(a,d.firstChild);document.getElementById(b)&&(n.find.ID=function(a,b,d){if("undefined"!==typeof b.getElementById&&!d)return(b=b.getElementById(a[1]))?b.id===a[1]||"undefined"!==typeof b.getAttributeNode&&b.getAttributeNode("id").nodeValue===a[1]?[b]:void 0:[]},n.filter.ID=function(a,b){var d="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&d&&d.nodeValue===b});d.removeChild(a);d=a=null})();
(function(){var a=document.createElement("div");a.appendChild(document.createComment(""));0<a.getElementsByTagName("*").length&&(n.find.TAG=function(a,b){var d=b.getElementsByTagName(a[1]);if("*"===a[1]){for(var c=[],e=0;d[e];e++)1===d[e].nodeType&&c.push(d[e]);d=c}return d});a.innerHTML="<a href='#'></a>";a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&"#"!==a.firstChild.getAttribute("href")&&(n.attrHandle.href=function(a){return a.getAttribute("href",2)});a=null})();document.querySelectorAll&&
function(){var a=l,b=document.createElement("div");b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||0!==b.querySelectorAll(".TEST").length){l=function(b,d,c,e){d=d||document;if(!e&&!l.isXML(d)){var g=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(g&&(1===d.nodeType||9===d.nodeType)){if(g[1])return x(d.getElementsByTagName(b),c);if(g[2]&&n.find.CLASS&&d.getElementsByClassName)return x(d.getElementsByClassName(g[2]),c)}if(9===d.nodeType){if("body"===b&&d.body)return x([d.body],c);if(g&&g[3]){var f=
d.getElementById(g[3]);if(f&&f.parentNode){if(f.id===g[3])return x([f],c)}else return x([],c)}try{return x(d.querySelectorAll(b),c)}catch(h){}}else if(1===d.nodeType&&"object"!==d.nodeName.toLowerCase()){var g=d,k=(f=d.getAttribute("id"))||"__sizzle__",m=d.parentNode,p=/^\s*[+~]/.test(b);f?k=k.replace(/'/g,"\\$&"):d.setAttribute("id",k);p&&m&&(d=d.parentNode);try{if(!p||m)return x(d.querySelectorAll("[id='"+k+"'] "+b),c)}catch(q){}finally{f||g.removeAttribute("id")}}}return a(b,d,c,e)};for(var d in a)l[d]=
a[d];b=null}}();(function(){var a=document.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(document.createElement("div"),"div"),c=!1;try{b.call(document.documentElement,"[test!='']:sizzle")}catch(e){c=!0}l.matchesSelector=function(a,e){e=e.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!l.isXML(a))try{if(c||!n.match.PSEUDO.test(e)&&!/!=/.test(e)){var g=b.call(a,e);if(g||!d||a.document&&11!==a.document.nodeType)return g}}catch(f){}return 0<
l(e,null,null,[a]).length}}})();(function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";a.getElementsByClassName&&0!==a.getElementsByClassName("e").length&&(a.lastChild.className="e",1!==a.getElementsByClassName("e").length&&(n.order.splice(1,0,"CLASS"),n.find.CLASS=function(a,b,d){if("undefined"!==typeof b.getElementsByClassName&&!d)return b.getElementsByClassName(a[1])},a=null))})();l.contains=document.documentElement.contains?function(a,
b){return a!==b&&(a.contains?a.contains(b):!0)}:document.documentElement.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(){return!1};l.isXML=function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?"HTML"!==a.nodeName:!1};var A=function(a,b,d){var c,e=[],g="";for(b=b.nodeType?[b]:b;c=n.match.PSEUDO.exec(a);)g+=c[0],a=a.replace(n.match.PSEUDO,"");a=n.relative[a]?a+"*":a;c=0;for(var f=b.length;c<f;c++)l(a,b[c],e,d);return l.filter(g,e)};window.tinymce.dom.Sizzle=
l})();
(function(a){a.dom.Element=function(b,c){var f=this,e;f.settings=c=c||{};f.id=b;f.dom=e=c.dom||a.DOM;a.isIE||e.get(f.id);a.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(a){f[a]=function(){var c=[b],h;for(h=0;h<arguments.length;h++)c.push(arguments[h]);c=e[a].apply(e,c);f.update(a);return c}});a.extend(f,{on:function(b,c,e){return a.dom.Event.add(f.id,b,
c,e)},getXY:function(){return{x:parseInt(f.getStyle("left")),y:parseInt(f.getStyle("top"))}},getSize:function(){var a=e.get(f.id);return{w:parseInt(f.getStyle("width")||a.clientWidth),h:parseInt(f.getStyle("height")||a.clientHeight)}},moveTo:function(a,b){f.setStyles({left:a,top:b})},moveBy:function(a,b){var c=f.getXY();f.moveTo(c.x+a,c.y+b)},resizeTo:function(a,b){f.setStyles({width:a,height:b})},resizeBy:function(a,b){var c=f.getSize();f.resizeTo(c.w+a,c.h+b)},update:function(b){a.isIE6&&c.blocker&&
(b=b||"",0!==b.indexOf("get")&&0!==b.indexOf("has")&&0!==b.indexOf("is")&&("remove"==b?e.remove(f.blocker):(f.blocker?b=e.get(f.blocker):(f.blocker=e.uniqueId(),b=e.add(c.container||e.getRoot(),"iframe",{id:f.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),e.setStyle(b,"opacity",0)),e.setStyles(b,{left:f.getStyle("left",1),top:f.getStyle("top",1),width:f.getStyle("width",1),height:f.getStyle("height",1),display:f.getStyle("display",1),zIndex:parseInt(f.getStyle("zIndex",1)||
0)-1}))))}})}})(tinymce);
(function(a){var b=a.is,c=a.isIE,f=a.each,e=a.dom.TreeWalker;a.create("tinymce.dom.Selection",{Selection:function(b,c,e,k){var m=this;m.dom=b;m.win=c;m.serializer=e;m.editor=k;f(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(b){m[b]=new a.util.Dispatcher(m)});m.win.getSelection||(m.tridentSel=new a.dom.TridentSelection(m));a.isIE&&b.boxModel&&this._fixIESelection();a.addUnload(m.destroy,m)},setCursorLocation:function(a,b){var c=this.dom.createRng();c.setStart(a,
b);c.setEnd(a,b);this.setRng(c);this.collapse(!1)},getContent:function(a){var c=this.getRng(),e=this.dom.create("body"),f=this.getSel(),m,l;a=a||{};m=l="";a.get=!0;a.format=a.format||"html";a.forced_root_block="";this.onBeforeGetContent.dispatch(this,a);if("text"==a.format)return this.isCollapsed()?"":c.text||(f.toString?f.toString():"");c.cloneContents?(c=c.cloneContents())&&e.appendChild(c):b(c.item)||b(c.htmlText)?(e.innerHTML="<br>"+(c.item?c.item(0).outerHTML:c.htmlText),e.removeChild(e.firstChild)):
e.innerHTML=c.toString();/^\s/.test(e.innerHTML)&&(m=" ");/\s+$/.test(e.innerHTML)&&(l=" ");a.getInner=!0;a.content=this.isCollapsed()?"":m+this.serializer.serialize(e,a)+l;this.onGetContent.dispatch(this,a);return a.content},setContent:function(a,b){var c=this.getRng(),e,f=this.win.document,l;b=b||{format:"html"};b.set=!0;b.content=a;b.no_events||this.onBeforeSetContent.dispatch(this,b);a=b.content;if(c.insertNode){a+='<span id="__caret">_</span>';c.startContainer==f&&c.endContainer==f?f.body.innerHTML=
a:(c.deleteContents(),0===f.body.childNodes.length?f.body.innerHTML=a:c.createContextualFragment?c.insertNode(c.createContextualFragment(a)):(e=f.createDocumentFragment(),l=f.createElement("div"),e.appendChild(l),l.outerHTML=a,c.insertNode(e)));e=this.dom.get("__caret");c=f.createRange();c.setStartBefore(e);c.setEndBefore(e);this.setRng(c);this.dom.remove("__caret");try{this.setRng(c)}catch(p){}}else c.item&&(f.execCommand("Delete",!1,null),c=this.getRng()),/^\s+/.test(a)?(c.pasteHTML('<span id="__mce_tmp">_</span>'+
a),this.dom.remove("__mce_tmp")):c.pasteHTML(a);b.no_events||this.onSetContent.dispatch(this,b)},getStart:function(){var a=this.getRng(),b,c;if(a.duplicate||a.item){if(a.item)return a.item(0);b=a.duplicate();b.collapse(1);b=b.parentElement();b.ownerDocument!==this.dom.doc&&(b=this.dom.getRoot());for(a=c=a.parentElement();c=c.parentNode;)if(c==b){b=a;break}return b}b=a.startContainer;1==b.nodeType&&b.hasChildNodes()&&(b=b.childNodes[Math.min(b.childNodes.length-1,a.startOffset)]);return b&&3==b.nodeType?
b.parentNode:b},getEnd:function(){var a=this.getRng(),b;if(a.duplicate||a.item){if(a.item)return a.item(0);a=a.duplicate();a.collapse(0);b=a.parentElement();b.ownerDocument!==this.dom.doc&&(b=this.dom.getRoot());return b&&"BODY"==b.nodeName?b.lastChild||b:b}b=a.endContainer;a=a.endOffset;1==b.nodeType&&b.hasChildNodes()&&(b=b.childNodes[0<a?a-1:a]);return b&&3==b.nodeType?b.parentNode:b},getBookmark:function(a,b){function c(a,b){var d=0;f(p.select(a),function(a,c){a==b&&(d=c)});return d}function e(a){function b(d){var c,
e;e=d?"start":"end";c=a[e+"Container"];e=a[e+"Offset"];1==c.nodeType&&"TR"==c.nodeName&&(c=c.childNodes,c=c[Math.min(d?e:e-1,c.length-1)])&&(e=d?0:c.childNodes.length,a["set"+(d?"Start":"End")](c,e))}b(!0);b();return a}function m(){function a(d,e){var f=d[e?"startContainer":"endContainer"],h=d[e?"startOffset":"endOffset"],k=[],n,m=0;if(3==f.nodeType){if(b)for(n=f.previousSibling;n&&3==n.nodeType;n=n.previousSibling)h+=n.nodeValue.length;k.push(h)}else n=f.childNodes,h>=n.length&&n.length&&(m=1,h=
Math.max(0,n.length-1)),k.push(l.dom.nodeIndex(n[h],b)+m);for(;f&&f!=c;f=f.parentNode)k.push(l.dom.nodeIndex(f,b));return k}var d=l.getRng(!0),c=p.getRoot(),e={};e.start=a(d,!0);l.isCollapsed()||(e.end=a(d));return e}var l=this,p=l.dom,n,q,r,v,x;if(2==a)return l.tridentSel?l.tridentSel.getBookmark(a):m();if(a)return{rng:l.getRng()};n=l.getRng();r=p.uniqueId();v=tinyMCE.activeEditor.selection.isCollapsed();if(n.duplicate||n.item){if(n.item)return x=n.item(0),q=x.nodeName,{name:q,index:c(q,x)};q=n.duplicate();
try{n.collapse(),n.pasteHTML('<span data-mce-type="bookmark" id="'+r+'_start" style="overflow:hidden;line-height:0px">\ufeff</span>'),v||(q.collapse(!1),n.moveToElementText(q.parentElement()),0===n.compareEndPoints("StartToEnd",q)&&q.move("character",-1),q.pasteHTML('<span data-mce-type="bookmark" id="'+r+'_end" style="overflow:hidden;line-height:0px">\ufeff</span>'))}catch(t){return null}}else{x=l.getNode();q=x.nodeName;if("IMG"==q)return{name:q,index:c(q,x)};q=e(n.cloneRange());v||(q.collapse(!1),
q.insertNode(p.create("span",{"data-mce-type":"bookmark",id:r+"_end",style:"overflow:hidden;line-height:0px"},"\ufeff")));n=e(n);n.collapse(!0);n.insertNode(p.create("span",{"data-mce-type":"bookmark",id:r+"_start",style:"overflow:hidden;line-height:0px"},"\ufeff"))}l.moveToBookmark({id:r,keep:1});return{id:r}},moveToBookmark:function(b){function e(a){var c=b[a?"start":"end"],g,f,h;if(c){h=c[0];f=p;for(g=c.length-1;1<=g;g--){f=f.childNodes;if(c[g]>f.length-1)return;f=f[c[g]]}3===f.nodeType&&(h=Math.min(c[0],
f.nodeValue.length));1===f.nodeType&&(h=Math.min(c[0],f.childNodes.length));a?l.setStart(f,h):l.setEnd(f,h)}return!0}function h(c){var e=m.get(b.id+"_"+c),g,h,k;k=b.keep;if(e&&(g=e.parentNode,"start"==c?(k?(g=e.firstChild,h=1):h=m.nodeIndex(e),n=q=g,r=v=h):(k?(g=e.firstChild,h=1):h=m.nodeIndex(e),q=g,v=h),!k)){k=e.previousSibling;g=e.nextSibling;for(f(a.grep(e.childNodes),function(a){3==a.nodeType&&(a.nodeValue=a.nodeValue.replace(/\uFEFF/g,""))});e=m.get(b.id+"_"+c);)m.remove(e,1);k&&g&&k.nodeType==
g.nodeType&&3==k.nodeType&&!a.isOpera&&(h=k.nodeValue.length,k.appendData(g.nodeValue),m.remove(g),"start"==c?(n=q=k,r=v=h):(q=k,v=h))}}function k(a){!m.isBlock(a)||a.innerHTML||c||(a.innerHTML='<br data-mce-bogus="1" />');return a}var m=this.dom,l,p,n,q,r,v;if(b)if(b.start){l=m.createRng();p=m.getRoot();if(this.tridentSel)return this.tridentSel.moveToBookmark(b);e(!0)&&e()&&this.setRng(l)}else b.id?(h("start"),h("end"),n&&(l=m.createRng(),l.setStart(k(n),r),l.setEnd(k(q),v),this.setRng(l))):b.name?
this.select(m.select(b.name)[b.index]):b.rng&&this.setRng(b.rng)},select:function(b,c){function f(b,d){var c=new e(b,b);do{if(3==b.nodeType&&0!==a.trim(b.nodeValue).length){d?m.setStart(b,0):m.setEnd(b,b.nodeValue.length);break}if("BR"==b.nodeName){d?m.setStartBefore(b):m.setEndBefore(b);break}}while(b=d?c.next():c.prev())}var k=this.dom,m=k.createRng();b&&(k=k.nodeIndex(b),m.setStart(b.parentNode,k),m.setEnd(b.parentNode,k+1),c&&(f(b,1),f(b)),this.setRng(m));return b},isCollapsed:function(){var a=
this.getRng(),b=this.getSel();return!a||a.item?!1:a.compareEndPoints?0===a.compareEndPoints("StartToEnd",a):!b||a.collapsed},collapse:function(a){var b=this.getRng(),c;b.item&&(c=b.item(0),b=this.win.document.body.createTextRange(),b.moveToElementText(c));b.collapse(!!a);this.setRng(b)},getSel:function(){var a=this.win;return a.getSelection?a.getSelection():a.document.selection},getRng:function(b){var c,e,f=this.win.document;if(b&&this.tridentSel)return this.tridentSel.getRangeAt(0);try{if(c=this.getSel())e=
0<c.rangeCount?c.getRangeAt(0):c.createRange?c.createRange():f.createRange()}catch(m){}a.isIE&&e&&e.setStart&&f.selection.createRange().item&&(b=f.selection.createRange().item(0),e=f.createRange(),e.setStartBefore(b),e.setEndAfter(b));e||(e=f.createRange?f.createRange():f.body.createTextRange());e.setStart&&9===e.startContainer.nodeType&&e.collapsed&&(b=this.dom.getRoot(),e.setStart(b,0),e.setEnd(b,0));this.selectedRange&&this.explicitRange&&(0===e.compareBoundaryPoints(e.START_TO_START,this.selectedRange)&&
0===e.compareBoundaryPoints(e.END_TO_END,this.selectedRange)?e=this.explicitRange:this.explicitRange=this.selectedRange=null);return e},setRng:function(a,b){var c;if(this.tridentSel){if(a.cloneRange)try{this.tridentSel.addRange(a);return}catch(e){}try{a.select()}catch(f){}}else if(c=this.getSel()){this.explicitRange=a;try{c.removeAllRanges()}catch(l){}c.addRange(a);!1===b&&c.extend&&(c.collapse(a.endContainer,a.endOffset),c.extend(a.startContainer,a.startOffset));this.selectedRange=0<c.rangeCount?
c.getRangeAt(0):null}},setNode:function(a){this.setContent(this.dom.getOuterHTML(a));return a},getNode:function(){function a(b,d){for(var c=b;b&&3===b.nodeType&&0===b.length;)b=d?b.nextSibling:b.previousSibling;return b||c}var b=this.getRng();this.getSel();var c,e=b.startContainer,f=b.endContainer;return b?b.setStart?(c=b.commonAncestorContainer,!b.collapsed&&(b.startContainer==b.endContainer&&2>b.endOffset-b.startOffset&&b.startContainer.hasChildNodes()&&(c=b.startContainer.childNodes[b.startOffset]),
3===e.nodeType&&3===f.nodeType&&(e=e.length===b.startOffset?a(e.nextSibling,!0):e.parentNode,f=0===b.endOffset?a(f.previousSibling,!1):f.parentNode,e&&e===f))?e:c&&3==c.nodeType?c.parentNode:c):b.item?b.item(0):b.parentElement():this.dom.getRoot()},getSelectedBlocks:function(a,b){var c=this.dom,f,m,l,p=[];f=c.getParent(a||this.getStart(),c.isBlock);m=c.getParent(b||this.getEnd(),c.isBlock);f&&p.push(f);if(f&&m&&f!=m){l=f;for(var n=new e(f,c.getRoot());(l=n.next())&&l!=m;)c.isBlock(l)&&p.push(l)}m&&
f!=m&&p.push(m);return p},isForward:function(){var a=this.dom,b=this.getSel(),c;if(!b||null==b.anchorNode||null==b.focusNode)return!0;c=a.createRng();c.setStart(b.anchorNode,b.anchorOffset);c.collapse(!0);a=a.createRng();a.setStart(b.focusNode,b.focusOffset);a.collapse(!0);return 0>=c.compareBoundaryPoints(c.START_TO_START,a)},normalize:function(){function b(a){function d(a,b){for(var c=new e(a,x.getParent(a.parentNode,x.isBlock)||t);a=c[b?"prev":"next"]();)if("BR"===a.nodeName)return!0}function n(a,
b){var d,c;b=b||q;for(d=new e(b,x.getParent(b.parentNode,x.isBlock)||t);u=d[a?"prev":"next"]();){if(3===u.nodeType&&0<u.nodeValue.length){q=u;r=a?u.nodeValue.length:0;k=!0;return}if(x.isBlock(u)||B[u.nodeName.toLowerCase()])return;c=u}m&&c&&(q=c,k=!0,r=0)}var q,r,v,x=c.dom,t=x.getRoot(),u,B;q=f[(a?"start":"end")+"Container"];r=f[(a?"start":"end")+"Offset"];B=x.schema.getNonEmptyElements();9===q.nodeType&&(q=x.getRoot(),r=0);if(q===t){if(a&&(u=q.childNodes[0<r?r-1:0])&&(u.nodeName.toLowerCase(),B[u.nodeName]||
"TABLE"==u.nodeName))return;if(q.hasChildNodes()&&(q=q.childNodes[Math.min(!a&&0<r?r-1:r,q.childNodes.length-1)],r=0,q.hasChildNodes()&&!/TABLE/.test(q.nodeName))){u=q;v=new e(q,t);do{if(3===u.nodeType&&0<u.nodeValue.length){r=a?0:u.nodeValue.length;q=u;k=!0;break}if(B[u.nodeName.toLowerCase()]){r=x.nodeIndex(u);q=u.parentNode;"IMG"!=u.nodeName||a||r++;k=!0;break}}while(u=a?v.next():v.prev())}}m&&(3===q.nodeType&&0===r&&n(!0),1===q.nodeType&&(u=q.childNodes[r],!u||"BR"!==u.nodeName||d(u)||d(u,!0)||
n(!0,q.childNodes[r])));a&&!m&&3===q.nodeType&&r===q.nodeValue.length&&n(!1);if(k)f["set"+(a?"Start":"End")](q,r)}var c=this,f,k,m;a.isIE||(f=c.getRng(),m=f.collapsed,b(!0),m||b(),k&&(m&&f.collapse(!0),c.setRng(f,c.isForward())))},selectorChanged:function(a,b){var c=this,e;c.selectorChangedData||(c.selectorChangedData={},e={},c.editor.onNodeChange.addToTop(function(a,b,d){var g=c.dom,q=g.getParents(d,null,g.getRoot()),r={};f(c.selectorChangedData,function(a,b){f(q,function(d){if(g.is(d,b))return e[b]||
(f(a,function(a){a(!0,{node:d,selector:b,parents:q})}),e[b]=a),r[b]=a,!1})});f(e,function(a,b){r[b]||(delete e[b],f(a,function(a){a(!1,{node:d,selector:b,parents:q})}))})}));c.selectorChangedData[a]||(c.selectorChangedData[a]=[]);c.selectorChangedData[a].push(b);return c},destroy:function(b){this.win=null;b||a.removeUnload(this.destroy)},_fixIESelection:function(){function a(b,d){var c=l.createTextRange();try{c.moveToPoint(b,d)}catch(e){c=null}return c}function b(e){if(e.button){if(e=a(e.x,e.y))0<
e.compareEndPoints("StartToStart",n)?e.setEndPoint("StartToStart",n):e.setEndPoint("EndToEnd",n),e.select()}else c()}function c(){var a=f.selection.createRange();n&&!a.item&&0===a.compareEndPoints("StartToEnd",a)&&n.select();e.unbind(f,"mouseup",c);e.unbind(f,"mousemove",b);n=p=0}var e=this.dom,f=e.doc,l=f.body,p,n,q;f.documentElement.unselectable=!0;e.bind(f,["mousedown","contextmenu"],function(l){"HTML"===l.target.nodeName&&(p&&c(),q=f.documentElement,!(q.scrollHeight>q.clientHeight)&&(p=1,n=a(l.x,
l.y)))&&(e.bind(f,"mouseup",c),e.bind(f,"mousemove",b),e.win.focus(),n.select())})}})})(tinymce);
(function(a){a.dom.Serializer=function(b,c,f){var e,d,g=a.isIE,h=a.each,k;b.apply_source_formatting||(b.indent=!1);c=c||a.DOM;f=f||new a.html.Schema(b);b.entity_encoding=b.entity_encoding||"named";b.remove_trailing_brs="remove_trailing_brs"in b?b.remove_trailing_brs:!0;e=new a.util.Dispatcher(self);d=new a.util.Dispatcher(self);k=new a.html.DomParser(b,f);k.addAttributeFilter("src,href,style",function(a,d){for(var e=a.length,g,f,h="data-mce-"+d,k=b.url_converter,x=b.url_converter_scope;e--;)g=a[e],
f=g.attributes.map[h],void 0!==f?(g.attr(d,0<f.length?f:null),g.attr(h,null)):(f=g.attributes.map[d],"style"===d?f=c.serializeStyle(c.parseStyle(f),g.name):k&&(f=k.call(x,f,d,g.name)),g.attr(d,0<f.length?f:null))});k.addAttributeFilter("class",function(a,b){for(var d=a.length,c,e;d--;)c=a[d],e=c.attr("class").replace(/(?:^|\s)mce(Item\w+|Selected)(?!\S)/g,""),c.attr("class",0<e.length?e:null)});k.addAttributeFilter("data-mce-type",function(a,b,d){b=a.length;for(var c;b--;)c=a[b],"bookmark"!==c.attributes.map["data-mce-type"]||
d.cleanup||c.remove()});k.addAttributeFilter("data-mce-expando",function(a,b,d){for(d=a.length;d--;)a[d].attr(b,null)});k.addNodeFilter("script,style",function(a,b){function d(a){return a.replace(/(\x3c!--\[CDATA\[|\]\]--\x3e)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((\x3c!--)?(\s*\/\/)?\s*<!\[CDATA\[|(\x3c!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*\x3c!--|\/\*\s*\x3c!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(--\x3e)?|\s*\/\/\s*\]\]>(--\x3e)?|\/\/\s*(--\x3e)?|\]\]>|\/\*\s*--\x3e\s*\*\/|\s*--\x3e\s*)\s*$/g,
"")}for(var c=a.length,e,g;c--;)e=a[c],g=e.firstChild?e.firstChild.value:"","script"===b?(e.attr("type",(e.attr("type")||"text/javascript").replace(/^mce\-/,"")),0<g.length&&(e.firstChild.value="// <![CDATA[\n"+d(g)+"\n// ]]\x3e")):0<g.length&&(e.firstChild.value="\x3c!--\n"+d(g)+"\n--\x3e")});k.addNodeFilter("#comment",function(a,b){for(var d=a.length,c;d--;)c=a[d],0===c.value.indexOf("[CDATA[")?(c.name="#cdata",c.type=4,c.value=c.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===c.value.indexOf("mce:protected ")&&
(c.name="#text",c.type=3,c.raw=!0,c.value=unescape(c.value).substr(14))});k.addNodeFilter("xml:namespace,input",function(a,b){for(var d=a.length,c;d--;)c=a[d],7===c.type?c.remove():1===c.type&&("input"!==b||"type"in c.attributes.map||c.attr("type","text"))});b.fix_list_elements&&k.addNodeFilter("ul,ol",function(a,b){for(var d=a.length,c,e;d--;)c=a[d],e=c.parent,("ul"===e.name||"ol"===e.name)&&c.prev&&"li"===c.prev.name&&c.prev.append(c)});k.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",
function(a,b){for(var d=a.length;d--;)a[d].attr(b,null)});return{schema:f,addNodeFilter:k.addNodeFilter,addAttributeFilter:k.addAttributeFilter,onPreProcess:e,onPostProcess:d,serialize:function(m,l){var p,n,q;g&&0<c.select("script,style,select,map").length?(p=m.innerHTML,m=m.cloneNode(!1),c.setHTML(m,p)):m=m.cloneNode(!0);p=m.ownerDocument.implementation;p.createHTMLDocument&&(n=p.createHTMLDocument(""),h("BODY"==m.nodeName?m.childNodes:[m],function(a){n.body.appendChild(n.importNode(a,!0))}),m="BODY"!=
m.nodeName?n.body.firstChild:n.body,q=c.doc,c.doc=n);l=l||{};l.format=l.format||"html";l.no_events||(l.node=m,e.dispatch(self,l));p=new a.html.Serializer(b,f);l.content=p.serialize(k.parse(a.trim(l.getInner?m.innerHTML:c.getOuterHTML(m)),l));l.cleanup||(l.content=l.content.replace(/\uFEFF|\u200B/g,""));l.no_events||d.dispatch(self,l);q&&(c.doc=q);l.node=null;return l.content},addRules:function(a){f.addValidElements(a)},setRules:function(a){f.setValidElements(a)}}}})(tinymce);
(function(a){a.dom.ScriptLoader=function(b){function c(b,d){function c(){g.remove(x);f&&(f.onreadystatechange=f.onload=f=null);d()}function e(){"undefined"!==typeof console&&console.log&&console.log("Failed to load: "+b)}var g=a.DOM,f,h,v,x;x=g.uniqueId();if(a.isIE6&&(h=new a.util.URI(b),v=location,h.host==v.hostname&&h.port==v.port&&h.protocol+":"==v.protocol&&"file"!=h.protocol.toLowerCase())){a.util.XHR.send({url:a._addVer(h.getURI()),success:function(a){var b=g.create("script",{type:"text/javascript"});
b.text=a;document.getElementsByTagName("head")[0].appendChild(b);g.remove(b);c()},error:e});return}f=document.createElement("script");f.id=x;f.type="text/javascript";f.src=a._addVer(b);a.isIE||(f.onload=c);f.onerror=e;a.isOpera||(f.onreadystatechange=function(){var a=f.readyState;"complete"!=a&&"loaded"!=a||c()});(document.getElementsByTagName("head")[0]||document.body).appendChild(f)}var f={},e=[],d={},g=[],h=0;this.isDone=function(a){return 2==f[a]};this.markDone=function(a){f[a]=2};this.add=this.load=
function(a,b,c){void 0==f[a]&&(e.push(a),f[a]=0);b&&(d[a]||(d[a]=[]),d[a].push({func:b,scope:c||this}))};this.loadQueue=function(a,b){this.loadScripts(e,a,b)};this.loadScripts=function(b,e,l){function p(b){a.each(d[b],function(a){a.func.call(a.scope)});d[b]=void 0}var n;g.push({func:e,scope:l||this});n=function(){var d=a.grep(b);b.length=0;a.each(d,function(a){2==f[a]?p(a):1!=f[a]&&(f[a]=1,h++,c(a,function(){f[a]=2;h--;p(a);n()}))});h||(a.each(g,function(a){a.func.call(a.scope)}),g.length=0)};n()}};
a.ScriptLoader=new a.dom.ScriptLoader})(tinymce);
(function(a){a.dom.RangeUtils=function(b){this.walk=function(c,f){function e(a){var b;b=a[0];3===b.nodeType&&b===k&&m>=b.nodeValue.length&&a.splice(0,1);b=a[a.length-1];0===p&&0<a.length&&b===l&&3===b.nodeType&&a.splice(a.length-1,1);return a}function d(a,b,d){for(var c=[];a&&a!=d;a=a[b])c.push(a);return c}function g(a,b){do{if(a.parentNode==b)return a;a=a.parentNode}while(a)}function h(a,b,c){var g=c?"nextSibling":"previousSibling";r=a;for(v=r.parentNode;r&&r!=b;r=v)v=r.parentNode,x=d(r==a?r:r[g],
g),x.length&&(c||x.reverse(),f(e(x)))}var k=c.startContainer,m=c.startOffset,l=c.endContainer,p=c.endOffset,n,q,r,v,x;q=b.select("td.mceSelected,th.mceSelected");if(0<q.length)a.each(q,function(a){f([a])});else{1==k.nodeType&&k.hasChildNodes()&&(k=k.childNodes[m]);1==l.nodeType&&l.hasChildNodes()&&(l=l.childNodes[Math.min(p-1,l.childNodes.length-1)]);if(k==l)return f(e([k]));n=b.findCommonAncestor(k,l);for(r=k;r;r=r.parentNode){if(r===l)return h(k,n,!0);if(r===n)break}for(r=l;r;r=r.parentNode){if(r===
k)return h(l,n);if(r===n)break}q=g(k,n)||k;n=g(l,n)||l;h(k,q,!0);x=d(q==k?q:q.nextSibling,"nextSibling",n==l?n.nextSibling:n);x.length&&f(e(x));h(l,n)}};this.split=function(a){var b=a.startContainer,e=a.startOffset,d=a.endContainer;a=a.endOffset;b==d&&3==b.nodeType?0<e&&e<b.nodeValue.length&&(d=b.splitText(e),b=d.previousSibling,a>e?(b=d=d.splitText(a-e).previousSibling,a=d.nodeValue.length,e=0):a=0):(3==b.nodeType&&0<e&&e<b.nodeValue.length&&(b=b.splitText(e),e=0),3==d.nodeType&&0<a&&a<d.nodeValue.length&&
(d=d.splitText(a).previousSibling,a=d.nodeValue.length));return{startContainer:b,startOffset:e,endContainer:d,endOffset:a}}};a.dom.RangeUtils.compareRanges=function(a,c){if(a&&c)if(a.item||a.duplicate){if(a.item&&c.item&&a.item(0)===c.item(0)||a.isEqual&&c.isEqual&&c.isEqual(a))return!0}else return a.startContainer==c.startContainer&&a.startOffset==c.startOffset;return!1}})(tinymce);
(function(a){var b=a.dom.Event,c=a.each;a.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(f,e){var d=this,g=f.root,h=f.items,k=f.enableUpDown,m=f.enableLeftRight||!f.enableUpDown,l=f.excludeFromTabOrder,p,n,q,r,v;e=e||a.DOM;p=function(a){v=a.target.id};n=function(a){e.setAttrib(a.target.id,"tabindex","-1")};r=function(a){a=e.get(v);e.setAttrib(a,"tabindex","0");a.focus()};d.focus=function(){e.get(v).focus()};d.destroy=function(){c(h,function(a){a=e.get(a.id);e.unbind(a,"focus",
p);e.unbind(a,"blur",n)});var a=e.get(g);e.unbind(a,"focus",r);e.unbind(a,"keydown",q);h=e=g=d.focus=p=n=q=r=null;d.destroy=function(){}};d.moveFocus=function(a,d){var g=-1,k;if(v){c(h,function(a,b){if(a.id===v)return g=b,!1});g+=a;0>g?g=h.length-1:g>=h.length&&(g=0);k=h[g];e.setAttrib(v,"tabindex","-1");e.setAttrib(k.id,"tabindex","0");e.get(k.id).focus();if(f.actOnFocus)f.onAction(k.id);d&&b.cancel(d)}};q=function(a){switch(a.keyCode){case 37:m&&d.moveFocus(-1);break;case 39:m&&d.moveFocus(1);break;
case 38:k&&d.moveFocus(-1);break;case 40:k&&d.moveFocus(1);break;case 27:f.onCancel&&(f.onCancel(),b.cancel(a));break;case 14:case 13:case 32:f.onAction&&(f.onAction(v),b.cancel(a))}};c(h,function(a,b){var d,c;a.id||(a.id=e.uniqueId("_mce_item_"));c=e.get(a.id);l?(e.bind(c,"blur",n),d="-1"):d=0===b?"0":"-1";c.setAttribute("tabindex",d);e.bind(c,"focus",p)});h[0]&&(v=h[0].id);e.setAttrib(g,"tabindex","-1");var x=e.get(g);e.bind(x,"focus",r);e.bind(x,"keydown",q)}})})(tinymce);
(function(a){var b=a.DOM,c=a.is;a.create("tinymce.ui.Control",{Control:function(b,c,d){this.id=b;this.settings=c=c||{};this.rendered=!1;this.onRender=new a.util.Dispatcher(this);this.classPrefix="";this.scope=c.scope||this;this.active=this.disabled=0;this.editor=d},setAriaProperty:function(a,c){var d=b.get(this.id+"_aria")||b.get(this.id);d&&b.setAttrib(d,"aria-"+a,!!c)},focus:function(){b.get(this.id).focus()},setDisabled:function(a){a!=this.disabled&&(this.setAriaProperty("disabled",a),this.setState("Disabled",
a),this.setState("Enabled",!a),this.disabled=a)},isDisabled:function(){return this.disabled},setActive:function(a){a!=this.active&&(this.setState("Active",a),this.active=a,this.setAriaProperty("pressed",a))},isActive:function(){return this.active},setState:function(a,c){var d=b.get(this.id);a=this.classPrefix+a;c?b.addClass(d,a):b.removeClass(d,a)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(a){b.setHTML(a,this.renderHTML())},postRender:function(){var a;c(this.disabled)&&
(a=this.disabled,this.disabled=-1,this.setDisabled(a));c(this.active)&&(a=this.active,this.active=-1,this.setActive(a))},remove:function(){b.remove(this.id);this.destroy()},destroy:function(){a.dom.Event.clear(this.id)}})})(tinymce);tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(a,b,c){this.parent(a,b,c);this.controls=[];this.lookup={}},add:function(a){this.lookup[a.id]=a;this.controls.push(a);return a},get:function(a){return this.lookup[a]}});
tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(a,b){this.parent(a,b);this.classPrefix="mceSeparator";this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}});
(function(a){var b=a.is;a.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(a,b){this.parent(a,b);this.classPrefix="mceMenuItem"},setSelected:function(a){this.setState("Selected",a);this.setAriaProperty("checked",!!a);this.selected=a},isSelected:function(){return this.selected},postRender:function(){this.parent();b(this.selected)&&this.setSelected(this.selected)}})})(tinymce);
(function(a){var b=a.DOM,c=a.walk;a.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(b,c){this.parent(b,c);this.items={};this.collapsed=!1;this.menuCount=0;this.onAddItem=new a.util.Dispatcher(this)},expand:function(a){a&&c(this,function(a){a.expand&&a.expand()},"items",this);this.collapsed=!1},collapse:function(a){a&&c(this,function(a){a.collapse&&a.collapse()},"items",this);this.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(c){c.settings||(c=new a.ui.MenuItem(c.id||
b.uniqueId(),c));this.onAddItem.dispatch(this,c);return this.items[c.id]=c},addSeparator:function(){return this.add({separator:!0})},addMenu:function(a){a.collapse||(a=this.createMenu(a));this.menuCount++;return this.add(a)},hasMenus:function(){return 0!==this.menuCount},remove:function(a){delete this.items[a.id]},removeAll:function(){c(this,function(a){a.removeAll?a.removeAll():a.remove();a.destroy()},"items",this);this.items={}},createMenu:function(c){c=new a.ui.Menu(c.id||b.uniqueId(),c);c.onAddItem.add(this.onAddItem.dispatch,
this.onAddItem);return c}})})(tinymce);
(function(a){var b=a.is,c=a.DOM,f=a.each,e=a.dom.Event,d=a.dom.Element;a.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(d,e){e=e||{};e.container=e.container||c.doc.body;e.offset_x=e.offset_x||0;e.offset_y=e.offset_y||0;e.vp_offset_x=e.vp_offset_x||0;e.vp_offset_y=e.vp_offset_y||0;b(e.icons)&&!e.icons&&(e["class"]+=" mceNoIcons");this.parent(d,e);this.onShowMenu=new a.util.Dispatcher(this);this.onHideMenu=new a.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(b){var d=
this.settings;b.container=b.container||d.container;b.parent=this;b.constrain=b.constrain||d.constrain;b["class"]=b["class"]||d["class"];b.vp_offset_x=b.vp_offset_x||d.vp_offset_x;b.vp_offset_y=b.vp_offset_y||d.vp_offset_y;b.keyboard_focus=d.keyboard_focus;b=new a.ui.DropMenu(b.id||c.uniqueId(),b);b.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return b},focus:function(){this.keyboardNav&&this.keyboardNav.focus()},update:function(){var a=this.settings,b=c.get("menu_"+this.id+"_tbl"),d=c.get("menu_"+
this.id+"_co"),e,f;e=a.max_width?Math.min(b.offsetWidth,a.max_width):b.offsetWidth;f=a.max_height?Math.min(b.offsetHeight,a.max_height):b.offsetHeight;c.boxModel?this.element.setStyles({width:e,height:f}):this.element.setStyles({width:e+2,height:f+2});a.max_width&&c.setStyle(d,"width",e);a.max_height&&(c.setStyle(d,"height",f),b.clientHeight<a.max_height&&c.setStyle(d,"overflow","hidden"))},showMenu:function(b,h,k){var m=this,l=m.settings,p,n=c.getViewPort(),q,r,v,x,t=m.classPrefix;m.collapse(1);
m.isMenuVisible||(m.rendered?p=c.get("menu_"+m.id):(p=c.add(m.settings.container,m.renderNode()),f(m.items,function(a){a.postRender()}),m.element=new d("menu_"+m.id,{blocker:1,container:l.container})),a.isOpera||c.setStyles(p,{left:-65535,top:-65535}),c.show(p),m.update(),b+=l.offset_x||0,h+=l.offset_y||0,n.w-=4,n.h-=4,l.constrain&&(q=p.clientWidth-2,r=p.clientHeight-2,v=n.x+n.w,n=n.y+n.h,b+l.vp_offset_x+q>v&&(b=k?k-q:Math.max(0,v-l.vp_offset_x-q)),h+l.vp_offset_y+r>n&&(h=Math.max(0,n-l.vp_offset_y-
r))),c.setStyles(p,{left:b,top:h}),m.element.update(),m.isMenuVisible=1,m.mouseClickFunc=e.add(p,"click",function(a){var b;if((a=a.target)&&(a=c.getParent(a,"tr"))&&!c.hasClass(a,t+"ItemSub")&&(b=m.items[a.id],!b.isDisabled())){for(x=m;x;)x.hideMenu&&x.hideMenu(),x=x.settings.parent;if(b.settings.onclick)b.settings.onclick(a);return!1}}),m.hasMenus()&&(m.mouseOverFunc=e.add(p,"mouseover",function(a){var b;(a=a.target)&&(a=c.getParent(a,"tr"))&&(b=m.items[a.id],m.lastMenu&&m.lastMenu.collapse(1),!b.isDisabled()&&
a&&c.hasClass(a,t+"ItemSub")&&(a=c.getRect(a),b.showMenu(a.x+a.w-2,a.y-2,a.x),m.lastMenu=b,c.addClass(c.get(b.id).firstChild,t+"ItemActive")))})),e.add(p,"keydown",m._keyHandler,m),m.onShowMenu.dispatch(m),l.keyboard_focus&&m._setupKeyboardNav())},hideMenu:function(a){var b=c.get("menu_"+this.id),d;this.isMenuVisible&&(this.keyboardNav&&this.keyboardNav.destroy(),e.remove(b,"mouseover",this.mouseOverFunc),e.remove(b,"click",this.mouseClickFunc),e.remove(b,"keydown",this._keyHandler),c.hide(b),this.isMenuVisible=
0,a||this.collapse(1),this.element&&this.element.hide(),(d=c.get(this.id))&&c.removeClass(d.firstChild,this.classPrefix+"ItemActive"),this.onHideMenu.dispatch(this))},add:function(a){var b;a=this.parent(a);this.isRendered&&(b=c.get("menu_"+this.id))&&this._add(c.select("tbody",b)[0],a);return a},collapse:function(a){this.parent(a);this.hideMenu(1)},remove:function(a){c.remove(a.id);this.destroy();return this.parent(a)},destroy:function(){var a=c.get("menu_"+this.id);this.keyboardNav&&this.keyboardNav.destroy();
e.remove(a,"mouseover",this.mouseOverFunc);e.remove(c.select("a",a),"focus",this.mouseOverFunc);e.remove(a,"click",this.mouseClickFunc);e.remove(a,"keydown",this._keyHandler);this.element&&this.element.remove();c.remove(a)},renderNode:function(){var a=this,b=a.settings,e,m,l;l=c.create("div",{role:"listbox",id:"menu_"+a.id,"class":b["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"});a.settings.parent&&c.setAttrib(l,"aria-parent","menu_"+a.settings.parent.id);m=c.add(l,"div",
{role:"presentation",id:"menu_"+a.id+"_co","class":a.classPrefix+(b["class"]?" "+b["class"]:"")});a.element=new d("menu_"+a.id,{blocker:1,container:b.container});b.menu_line&&c.add(m,"span",{"class":a.classPrefix+"Line"});b=c.add(m,"table",{role:"presentation",id:"menu_"+a.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});e=c.add(b,"tbody");f(a.items,function(b){a._add(e,b)});a.rendered=!0;return l},_setupKeyboardNav:function(){var b,d,e=this;b=c.get("menu_"+e.id);d=c.select("a[role=option]","menu_"+
e.id);d.splice(0,0,b);e.keyboardNav=new a.ui.KeyboardNavigation({root:"menu_"+e.id,items:d,onCancel:function(){e.hideMenu()},enableUpDown:!0});b.focus()},_keyHandler:function(a){switch(a.keyCode){case 37:this.settings.parent&&(this.hideMenu(),this.settings.parent.focus(),e.cancel(a));break;case 39:this.mouseOverFunc&&this.mouseOverFunc(a)}},_add:function(a,b){var d,e=b.settings,f,p,n,q=this.classPrefix;e.separator?(p=c.add(a,"tr",{id:b.id,"class":q+"ItemSeparator"}),c.add(p,"td",{"class":q+"ItemSeparator"}),
(d=p.previousSibling)&&c.addClass(d,"mceLast")):(d=p=c.add(a,"tr",{id:b.id,"class":q+"Item "+q+"ItemEnabled"}),d=n=c.add(d,e.titleItem?"th":"td"),d=f=c.add(d,"a",{id:b.id+"_aria",role:e.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),e.parent&&(c.setAttrib(f,"aria-haspopup","true"),c.setAttrib(f,"aria-owns","menu_"+b.id)),c.addClass(n,e["class"]),f=c.add(d,"span",{"class":"mceIcon"+(e.icon?" mce_"+e.icon:"")}),e.icon_src&&c.add(f,"img",{src:e.icon_src}),
d=c.add(d,e.element||"span",{"class":"mceText",title:b.settings.title},b.settings.title),b.settings.style&&("function"==typeof b.settings.style&&(b.settings.style=b.settings.style()),c.setAttrib(d,"style",b.settings.style)),1==a.childNodes.length&&c.addClass(p,"mceFirst"),(d=p.previousSibling)&&c.hasClass(d,q+"ItemSeparator")&&c.addClass(p,"mceFirst"),b.collapse&&c.addClass(p,q+"ItemSub"),(d=p.previousSibling)&&c.removeClass(d,"mceLast"),c.addClass(p,"mceLast"))}})})(tinymce);
(function(a){var b=a.DOM;a.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(a,b,e){this.parent(a,b,e);this.classPrefix="mceButton"},renderHTML:function(){var a=this.classPrefix,f=this.settings,e,d;d=b.encode(f.label||"");e='<a role="button" id="'+this.id+'" href="javascript:;" class="'+a+" "+a+"Enabled "+f["class"]+(d?" "+a+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+b.encode(f.title)+'">';e=!f.image||this.editor&&
this.editor.forcedHighContrastMode?e+('<span class="mceIcon '+f["class"]+'"></span>'+(d?'<span class="'+a+'Label">'+d+"</span>":"")):e+('<span class="mceIcon '+f["class"]+'"><img class="mceIcon" src="'+f.image+'" alt="'+b.encode(f.title)+'" /></span>'+(d?'<span class="'+a+'Label">'+d+"</span>":""));e+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+f.title+"</span>";return e+"</a>"},postRender:function(){var b=this,f=b.settings,e;a.isIE&&b.editor&&a.dom.Event.add(b.id,
"mousedown",function(a){e="IMG"===b.editor.selection.getNode().nodeName?b.editor.selection.getBookmark():null});a.dom.Event.add(b.id,"click",function(d){if(!b.isDisabled())return a.isIE&&b.editor&&null!==e&&b.editor.selection.moveToBookmark(e),f.onclick.call(f.scope,d)});a.dom.Event.add(b.id,"keyup",function(d){if(!b.isDisabled()&&d.keyCode==a.VK.SPACEBAR)return f.onclick.call(f.scope,d)})}})})(tinymce);
(function(a){var b=a.DOM,c=a.dom.Event,f=a.each,e=a.util.Dispatcher;a.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(b,c,f){this.parent(b,c,f);this.items=[];this.onChange=new e(this);this.onPostRender=new e(this);this.onAdd=new e(this);this.onRenderMenu=new a.util.Dispatcher(this);this.classPrefix="mceListBox";this.marked={}},select:function(a){var b=this,c,e;b.marked={};if(void 0==a)return b.selectByIndex(-1);e=a&&"function"==typeof a?a:function(b){return b==a};a!=b.selectedValue&&
(f(b.items,function(a,d){if(e(a.value))return c=1,b.selectByIndex(d),!1}),c||b.selectByIndex(-1))},selectByIndex:function(a){var c,e,f;this.marked={};a!=this.selectedIndex&&(c=b.get(this.id+"_text"),f=b.get(this.id+"_voiceDesc"),(e=this.items[a])?(this.selectedValue=e.value,this.selectedIndex=a,b.setHTML(c,b.encode(e.title)),b.setHTML(f,this.settings.title+" - "+e.title),b.removeClass(c,"mceTitle"),b.setAttrib(this.id,"aria-valuenow",e.title)):(b.setHTML(c,b.encode(this.settings.title)),b.setHTML(f,
b.encode(this.settings.title)),b.addClass(c,"mceTitle"),this.selectedValue=this.selectedIndex=null,b.setAttrib(this.id,"aria-valuenow",this.settings.title)))},mark:function(a){this.marked[a]=!0},add:function(b,c,e){e=e||{};e=a.extend(e,{title:b,value:c});this.items.push(e);this.onAdd.dispatch(this,e)},getLength:function(){return this.items.length},renderHTML:function(){var a="",a=this.settings,c=this.classPrefix,a='<span role="listbox" aria-haspopup="true" aria-labelledby="'+this.id+'_voiceDesc" aria-describedby="'+
this.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+this.id+'" cellpadding="0" cellspacing="0" class="'+c+" "+c+"Enabled"+(a["class"]?" "+a["class"]:"")+'"><tbody><tr>',a=a+("<td>"+b.createHTML("span",{id:this.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},this.settings.title)),a=a+(b.createHTML("a",{id:this.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},b.encode(this.settings.title))+"</td>"),a=a+("<td>"+
b.createHTML("a",{id:this.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25bc</span></span>')+"</td>");return a+"</tr></tbody></table></span>"},showMenu:function(){var d=this,e,h=b.get(this.id),k;if(!d.isDisabled()&&0!==d.items.length){if(d.menu&&d.menu.isMenuVisible)return d.hideMenu();d.isMenuRendered||(d.renderMenu(),d.isMenuRendered=!0);e=b.getPos(h);k=
d.menu;k.settings.offset_x=e.x;k.settings.offset_y=e.y;k.settings.keyboard_focus=!a.isOpera;f(d.items,function(a){k.items[a.id]&&k.items[a.id].setSelected(0)});f(d.items,function(a){k.items[a.id]&&d.marked[a.value]&&k.items[a.id].setSelected(1);a.value===d.selectedValue&&k.items[a.id].setSelected(1)});k.showMenu(0,h.clientHeight);c.add(b.doc,"mousedown",d.hideMenu,d);b.addClass(d.id,d.classPrefix+"Selected")}},hideMenu:function(a){this.menu&&this.menu.isMenuVisible&&(b.removeClass(this.id,this.classPrefix+
"Selected"),!a||"mousedown"!=a.type||a.target.id!=this.id+"_text"&&a.target.id!=this.id+"_open")&&(a&&b.getParent(a.target,".mceMenu")||(b.removeClass(this.id,this.classPrefix+"Selected"),c.remove(b.doc,"mousedown",this.hideMenu,this),this.menu.hideMenu()))},renderMenu:function(){var a=this,c;c=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":a.classPrefix+"Menu mceNoIcons",max_width:250,max_height:150});c.onHideMenu.add(function(){a.hideMenu();a.focus()});c.add({title:a.settings.title,
"class":"mceMenuItemTitle",onclick:function(){!1!==a.settings.onselect("")&&a.select("")}});f(a.items,function(e){void 0===e.value?c.add({title:e.title,role:"option","class":"mceMenuItemTitle",onclick:function(){!1!==a.settings.onselect("")&&a.select("")}}):(e.id=b.uniqueId(),e.role="option",e.onclick=function(){!1!==a.settings.onselect(e.value)&&a.select(e.value)},c.add(e))});a.onRenderMenu.dispatch(a,c);a.menu=c},postRender:function(){var d=this,e=d.classPrefix;c.add(d.id,"click",d.showMenu,d);
c.add(d.id,"keydown",function(a){32==a.keyCode&&(d.showMenu(a),c.cancel(a))});c.add(d.id,"focus",function(){d._focused||(d.keyDownHandler=c.add(d.id,"keydown",function(a){40==a.keyCode&&(d.showMenu(),c.cancel(a))}),d.keyPressHandler=c.add(d.id,"keypress",function(a){var b;13==a.keyCode&&(b=d.selectedValue,d.selectedValue=null,c.cancel(a),d.settings.onselect(b))}));d._focused=1});c.add(d.id,"blur",function(){c.remove(d.id,"keydown",d.keyDownHandler);c.remove(d.id,"keypress",d.keyPressHandler);d._focused=
0});if(a.isIE6||!b.boxModel)c.add(d.id,"mouseover",function(){b.hasClass(d.id,e+"Disabled")||b.addClass(d.id,e+"Hover")}),c.add(d.id,"mouseout",function(){b.hasClass(d.id,e+"Disabled")||b.removeClass(d.id,e+"Hover")});d.onPostRender.dispatch(d,b.get(d.id))},destroy:function(){this.parent();c.clear(this.id+"_text");c.clear(this.id+"_open")}})})(tinymce);
(function(a){var b=a.DOM,c=a.dom.Event,f=a.each;a.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(a,b){this.parent(a,b);this.classPrefix="mceNativeListBox"},setDisabled:function(a){b.get(this.id).disabled=a;this.setAriaProperty("disabled",a)},isDisabled:function(){return b.get(this.id).disabled},select:function(a){var b=this,c,h;if(void 0==a)return b.selectByIndex(-1);h=a&&"function"==typeof a?a:function(b){return b==a};a!=b.selectedValue&&(f(b.items,function(a,e){if(h(a.value))return c=
1,b.selectByIndex(e),!1}),c||b.selectByIndex(-1))},selectByIndex:function(a){b.get(this.id).selectedIndex=a+1;this.selectedValue=this.items[a]?this.items[a].value:null},add:function(a,c,f){f=f||{};f.value=c;this.isRendered()&&b.add(b.get(this.id),"option",f,a);a={title:a,value:c,attribs:f};this.items.push(a);this.onAdd.dispatch(this,a)},getLength:function(){return this.items.length},renderHTML:function(){var a;a=b.createHTML("option",{value:""},"-- "+this.settings.title+" --");f(this.items,function(c){a+=
b.createHTML("option",{value:c.value},c.title)});a=b.createHTML("select",{id:this.id,"class":"mceNativeListBox","aria-labelledby":this.id+"_aria"},a);return a+=b.createHTML("span",{id:this.id+"_aria",style:"display: none"},this.settings.title)},postRender:function(){function e(a){if((a=d.items[a.target.selectedIndex-1])&&(a=a.value)&&(d.onChange.dispatch(d,a),d.settings.onselect))d.settings.onselect(a)}var d=this,f=!0;d.rendered=!0;c.add(d.id,"change",e);c.add(d.id,"keydown",function(b){var k;c.remove(d.id,
"change",void 0);f=!1;k=c.add(d.id,"blur",function(){f||(f=!0,c.add(d.id,"change",e),c.remove(d.id,"blur",k))});if(a.isWebKit&&(37==b.keyCode||39==b.keyCode))return c.prevent(b);if(13==b.keyCode||32==b.keyCode)return e(b),c.cancel(b)});d.onPostRender.dispatch(d,b.get(d.id))}})})(tinymce);
(function(a){var b=a.DOM,c=a.dom.Event;a.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(c,e,d){this.parent(c,e,d);this.onRenderMenu=new a.util.Dispatcher(this);e.menu_container=e.menu_container||b.doc.body},showMenu:function(){var a,e=b.get(this.id),d;if(!this.isDisabled()){this.isMenuRendered||(this.renderMenu(),this.isMenuRendered=!0);if(this.isMenuVisible)return this.hideMenu();b.getPos(this.settings.menu_container);a=b.getPos(e);d=this.menu;d.settings.offset_x=a.x;d.settings.offset_y=
a.y;d.settings.vp_offset_x=a.x;d.settings.vp_offset_y=a.y;d.settings.keyboard_focus=this._focused;d.showMenu(0,e.firstChild.clientHeight);c.add(b.doc,"mousedown",this.hideMenu,this);this.setState("Selected",1);this.isMenuVisible=1}},renderMenu:function(){var a=this,b;b=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:a.settings.icons});b.onHideMenu.add(function(){a.hideMenu();a.focus()});a.onRenderMenu.dispatch(a,b);a.menu=b},hideMenu:function(a){var e=
this;a&&"mousedown"==a.type&&b.getParent(a.target,function(a){return a.id===e.id||a.id===e.id+"_open"})||(a&&b.getParent(a.target,".mceMenu")||(e.setState("Selected",0),c.remove(b.doc,"mousedown",e.hideMenu,e),e.menu&&e.menu.hideMenu()),e.isMenuVisible=0)},postRender:function(){var a=this,b=a.settings;c.add(a.id,"click",function(){if(!a.isDisabled()){if(b.onclick)b.onclick(a.value);a.showMenu()}})}})})(tinymce);
(function(a){var b=a.DOM,c=a.dom.Event;a.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(a,b,c){this.parent(a,b,c);this.classPrefix="mceSplitButton"},renderHTML:function(){var a,c=this.settings,d;a="<tbody><tr>";d=c.image?b.createHTML("img ",{src:c.image,role:"presentation","class":"mceAction "+c["class"]}):b.createHTML("span",{"class":"mceAction "+c["class"]},"");d+=b.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:this.id+"_voice",style:"display:none;"},c.title);
a+="<td >"+b.createHTML("a",{role:"button",id:this.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+c["class"],onclick:"return false;",onmousedown:"return false;",title:c.title},d)+"</td>";d=b.createHTML("span",{"class":"mceOpen "+c["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25bc</span>');a+="<td >"+b.createHTML("a",{role:"button",id:this.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+c["class"],onclick:"return false;",onmousedown:"return false;",
title:c.title},d)+"</td>";a=b.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+c["class"],cellpadding:"0",cellspacing:"0",title:c.title},a+"</tr></tbody>");return b.createHTML("div",{id:this.id,role:"button",tabindex:"0","aria-labelledby":this.id+"_voice","aria-haspopup":"true"},a)},postRender:function(){var f=this,e=f.settings,d;e.onclick&&(d=function(a){f.isDisabled()||(e.onclick(f.value),c.cancel(a))},c.add(f.id+"_action","click",d),c.add(f.id,["click","keydown"],
function(a){if(!(32!==a.keyCode&&13!==a.keyCode&&14!==a.keyCode||a.altKey||a.ctrlKey||a.metaKey))d(),c.cancel(a);else if("click"===a.type||40===a.keyCode)f.showMenu(),c.cancel(a)}));c.add(f.id+"_open","click",function(a){f.showMenu();c.cancel(a)});c.add([f.id,f.id+"_open"],"focus",function(){f._focused=1});c.add([f.id,f.id+"_open"],"blur",function(){f._focused=0});if(a.isIE6||!b.boxModel)c.add(f.id,"mouseover",function(){b.hasClass(f.id,"mceSplitButtonDisabled")||b.addClass(f.id,"mceSplitButtonHover")}),
c.add(f.id,"mouseout",function(){b.hasClass(f.id,"mceSplitButtonDisabled")||b.removeClass(f.id,"mceSplitButtonHover")})},destroy:function(){this.parent();c.clear(this.id+"_action");c.clear(this.id+"_open");c.clear(this.id)}})})(tinymce);
(function(a){var b=a.DOM,c=a.dom.Event,f=a.is,e=a.each;a.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(b,c,e){this.parent(b,c,e);this.settings=c=a.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},
this.settings);this.onShowMenu=new a.util.Dispatcher(this);this.onHideMenu=new a.util.Dispatcher(this);this.value=c.default_color},showMenu:function(){var d=this,e,f;if(!d.isDisabled()){d.isMenuRendered||(d.renderMenu(),d.isMenuRendered=!0);if(d.isMenuVisible)return d.hideMenu();e=b.get(d.id);b.show(d.id+"_menu");b.addClass(e,"mceSplitButtonSelected");f=b.getPos(e);b.setStyles(d.id+"_menu",{left:f.x,top:f.y+e.firstChild.clientHeight,zIndex:2E5});e=0;c.add(b.doc,"mousedown",d.hideMenu,d);d.onShowMenu.dispatch(d);
d._focused&&(d._keyHandler=c.add(d.id+"_menu","keydown",function(a){27==a.keyCode&&d.hideMenu()}),b.select("a",d.id+"_menu")[0].focus());d.keyboardNav=new a.ui.KeyboardNavigation({root:d.id+"_menu",items:b.select("a",d.id+"_menu"),onCancel:function(){d.hideMenu();d.focus()}});d.keyboardNav.focus();d.isMenuVisible=1}},hideMenu:function(a){var e=this;!e.isMenuVisible||a&&"mousedown"==a.type&&b.getParent(a.target,function(a){return a.id===e.id+"_open"})||(a&&b.getParent(a.target,".mceSplitButtonMenu")||
(b.removeClass(e.id,"mceSplitButtonSelected"),c.remove(b.doc,"mousedown",e.hideMenu,e),c.remove(e.id+"_menu","keydown",e._keyHandler),b.hide(e.id+"_menu")),e.isMenuVisible=0,e.onHideMenu.dispatch(),e.keyboardNav.destroy())},renderMenu:function(){var d=this,g,h=0,k=d.settings,m,l,p,n,q;n=b.add(k.menu_container,"div",{role:"listbox",id:d.id+"_menu","class":k.menu_class+" "+k["class"],style:"position:absolute;left:0;top:-1000px;"});g=b.add(n,"div",{"class":k["class"]+" mceSplitButtonMenu"});b.add(g,
"span",{"class":"mceMenuLine"});m=b.add(g,"table",{role:"presentation","class":"mceColorSplitMenu"});l=b.add(m,"tbody");h=0;e(f(k.colors,"array")?k.colors:k.colors.split(","),function(c){c=c.replace(/^#/,"");h--||(p=b.add(l,"tr"),h=k.grid_width-1);m=b.add(p,"td");var e={href:"javascript:;",style:{backgroundColor:"#"+c},title:d.editor.getLang("colors."+c,c),"data-mce-color":"#"+c};a.isIE||(e.role="option");m=b.add(m,"a",e);d.editor.forcedHighContrastMode&&(m=b.add(m,"canvas",{width:16,height:16,"aria-hidden":"true"}),
m.getContext&&(q=m.getContext("2d"))?(q.fillStyle="#"+c,q.fillRect(0,0,16,16)):b.remove(m))});k.more_colors_func&&(m=b.add(l,"tr"),m=b.add(m,"td",{colspan:k.grid_width,"class":"mceMoreColors"}),m=b.add(m,"a",{role:"option",id:d.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},k.more_colors_title),c.add(m,"click",function(a){k.more_colors_func.call(k.more_colors_scope||this);return c.cancel(a)}));b.addClass(g,"mceColorSplitMenu");c.add(d.id+"_menu","mousedown",function(a){return c.cancel(a)});
c.add(d.id+"_menu","click",function(a){var c;(a=b.getParent(a.target,"a",l))&&"a"==a.nodeName.toLowerCase()&&(c=a.getAttribute("data-mce-color"))&&d.setColor(c);return!1});return n},setColor:function(a){this.displayColor(a);this.hideMenu();this.settings.onselect(a)},displayColor:function(a){b.setStyle(this.id+"_preview","backgroundColor",a);this.value=a},postRender:function(){var a=this.id;this.parent();b.add(a+"_action","div",{id:a+"_preview","class":"mceColorPreview"});b.setStyle(this.id+"_preview",
"backgroundColor",this.value)},destroy:function(){this.parent();c.clear(this.id+"_menu");c.clear(this.id+"_more");b.remove(this.id+"_menu");this.keyboardNav&&this.keyboardNav.destroy()}})})(tinymce);
(function(a){var b=a.DOM,c=a.each,f=a.dom.Event;a.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var c=[],d=this.controls,f=a.each,h=this.settings;c.push('<div id="'+this.id+'" role="group" aria-labelledby="'+this.id+'_voice">');c.push("<span role='application'>");c.push('<span id="'+this.id+'_voice" class="mceVoiceLabel" style="display:none;">'+b.encode(h.name)+"</span>");f(d,function(a){c.push(a.renderHTML())});c.push("</span>");c.push("</div>");return c.join("")},
focus:function(){b.get(this.id).focus()},postRender:function(){var e=this,d=[];c(e.controls,function(a){c(a.controls,function(a){a.id&&d.push(a)})});e.keyNav=new a.ui.KeyboardNavigation({root:e.id,items:d,onCancel:function(){a.isWebKit&&b.get(e.editor.id+"_ifr").focus();e.editor.focus()},excludeFromTabOrder:!e.settings.tab_focus_toolbar})},destroy:function(){this.parent();this.keyNav.destroy();f.clear(this.id)}})})(tinymce);
(function(a){var b=a.DOM;a.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var a="",f,e,d=this.settings,g,h,k,m;m=this.controls;for(g=0;g<m.length;g++)e=m[g],h=m[g-1],k=m[g+1],0===g&&(f="mceToolbarStart",e.Button?f+=" mceToolbarStartButton":e.SplitButton?f+=" mceToolbarStartSplitButton":e.ListBox&&(f+=" mceToolbarStartListBox"),a+=b.createHTML("td",{"class":f},b.createHTML("span",null,"\x3c!-- IE --\x3e"))),h&&e.ListBox&&(h.Button||h.SplitButton)&&(a+=b.createHTML("td",{"class":"mceToolbarEnd"},
b.createHTML("span",null,"\x3c!-- IE --\x3e"))),a=b.stdMode?a+('<td style="position: relative">'+e.renderHTML()+"</td>"):a+("<td>"+e.renderHTML()+"</td>"),k&&e.ListBox&&(k.Button||k.SplitButton)&&(a+=b.createHTML("td",{"class":"mceToolbarStart"},b.createHTML("span",null,"\x3c!-- IE --\x3e")));f="mceToolbarEnd";e.Button?f+=" mceToolbarEndButton":e.SplitButton?f+=" mceToolbarEndSplitButton":e.ListBox&&(f+=" mceToolbarEndListBox");a+=b.createHTML("td",{"class":f},b.createHTML("span",null,"\x3c!-- IE --\x3e"));
return b.createHTML("table",{id:this.id,"class":"mceToolbar"+(d["class"]?" "+d["class"]:""),cellpadding:"0",cellspacing:"0",align:this.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+a+"</tr></tbody>")}})})(tinymce);
(function(a){var b=a.util.Dispatcher;a.create("tinymce.AddOnManager",{AddOnManager:function(){this.items=[];this.urls={};this.lookup={};this.onAdd=new b(this)},get:function(a){if(this.lookup[a])return this.lookup[a].instance},dependencies:function(a){var b;this.lookup[a]&&(b=this.lookup[a].dependencies);return b||[]},requireLangPack:function(b){var f=a.settings;f&&f.language&&!1!==f.language_load&&a.ScriptLoader.add(this.urls[b]+"/langs/"+f.language+".js")},add:function(a,b,e){this.items.push(b);
this.lookup[a]={instance:b,dependencies:e};this.onAdd.dispatch(this,a,b);return b},createUrl:function(a,b){return"object"===typeof b?b:{prefix:a.prefix,resource:b,suffix:a.suffix}},addComponents:function(b,f){var e=this.urls[b];a.each(f,function(b){a.ScriptLoader.add(e+"/"+b)})},load:function(b,f,e,d){function g(){var g=h.dependencies(b);a.each(g,function(a){a=h.createUrl(f,a);h.load(a.resource,a,void 0,void 0)});e&&(d?e.call(d):e.call(a.ScriptLoader))}var h=this,k=f;h.urls[b]||("object"===typeof f&&
(k=f.prefix+f.resource+f.suffix),0!==k.indexOf("/")&&-1==k.indexOf("://")&&(k=a.baseURL+"/"+k),h.urls[b]=k.substring(0,k.lastIndexOf("/")),h.lookup[b]?g():a.ScriptLoader.add(k,g,d))}});a.PluginManager=new a.AddOnManager;a.ThemeManager=new a.AddOnManager})(tinymce);
(function(a){var b=a.each,c=a.extend,f=a.DOM,e=a.dom.Event,d=a.explode,g=a.util.Dispatcher,h=0;a.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");/[\/\\]$/.test(a.documentBaseURL)||(a.documentBaseURL+="/");a.baseURL=(new a.util.URI(a.documentBaseURL)).toAbsolute(a.baseURL);a.baseURI=new a.util.URI(a.baseURL);a.onBeforeUnload=new g(a);e.add(window,"beforeunload",function(b){a.onBeforeUnload.dispatch(a,b)});a.onAddEditor=new g(a);a.onRemoveEditor=new g(a);a.EditorManager=
c(a,{editors:[],i18n:{},activeEditor:null,init:function(c){function g(a){var b=a.id;b||(b=(b=a.name)&&!f.get(b)?a.name:f.uniqueId(),a.setAttribute("id",b));return b}function l(b,c,d){var e=b[c];if(e)return a.is(e,"string")&&(d=(d=e.replace(/\.\w+$/,""))?a.resolve(d):0,e=a.resolve(e)),e.apply(d||this,Array.prototype.slice.call(arguments,2))}function p(a,b){return b.constructor===RegExp?b.test(a.className):f.hasClass(a,b)}var n=[],q;this.settings=c;e.bind(window,"ready",function(){var e,v;l(c,"onpageload");
switch(c.mode){case "exact":e=c.elements||"";0<e.length&&b(d(e),function(d){f.get(d)?(q=new a.Editor(d,c),n.push(q),q.render(1)):b(document.forms,function(e){b(e.elements,function(b){b.name===d&&(d="mce_editor_"+h++,f.setAttrib(b,"id",d),q=new a.Editor(d,c),n.push(q),q.render(1))})})});break;case "textareas":case "specific_textareas":b(f.select("textarea"),function(b){if(!c.editor_deselector||!p(b,c.editor_deselector))if(!c.editor_selector||p(b,c.editor_selector))q=new a.Editor(g(b),c),n.push(q),
q.render(1)});break;default:c.types?b(c.types,function(d){b(f.select(d.selector),function(b){b=new a.Editor(g(b),a.extend({},c,d));n.push(b);b.render(1)})}):c.selector&&b(f.select(c.selector),function(b){b=new a.Editor(g(b),c);n.push(b);b.render(1)})}c.oninit&&(e=v=0,b(n,function(a){v++;a.initialized?e++:a.onInit.add(function(){e++;e==v&&l(c,"oninit")});e==v&&l(c,"oninit")}))})},get:function(a){return void 0===a?this.editors:this.editors[a]},getInstanceById:function(a){return this.get(a)},add:function(a){var b=
this.editors;b[a.id]=a;b.push(a);this._setActive(a);this.onAddEditor.dispatch(this,a);return a},remove:function(a){var b,c=this.editors;if(!c[a.id])return null;delete c[a.id];for(b=0;b<c.length;b++)if(c[b]==a){c.splice(b,1);break}this.activeEditor==a&&this._setActive(c[0]);a.destroy();this.onRemoveEditor.dispatch(this,a);return a},execCommand:function(b,c,d){function e(){f.destroy();g.detachEvent("onunload",e);g=g.tinyMCE=g.tinymce=null}var f=this.get(d),g;switch(b){case "mceFocus":return f.focus(),
!0;case "mceAddEditor":case "mceAddControl":return this.get(d)||(new a.Editor(d,this.settings)).render(),!0;case "mceAddFrameControl":return g=d.window,g.tinyMCE=tinyMCE,g.tinymce=a,a.DOM.doc=g.document,a.DOM.win=g,f=new a.Editor(d.element_id,d),f.render(),a.isIE&&g.attachEvent("onunload",e),d.page_window=null,!0;case "mceRemoveEditor":case "mceRemoveControl":return f&&f.remove(),!0;case "mceToggleEditor":if(!f)return this.execCommand("mceAddControl",0,d),!0;f.isHidden()?f.show():f.hide();return!0}return this.activeEditor?
this.activeEditor.execCommand(b,c,d):!1},execInstanceCommand:function(a,b,c,d){return(a=this.get(a))?a.execCommand(b,c,d):!1},triggerSave:function(){b(this.editors,function(a){a.save()})},addI18n:function(c,d){var e=this.i18n;a.is(c,"string")?b(d,function(a,b){e[c+"."+b]=a}):b(c,function(a,c){b(a,function(a,d){b(a,function(a,b){"common"===d?e[c+"."+b]=a:e[c+"."+d+"."+b]=a})})})},_setActive:function(a){this.selectedInstance=this.activeEditor=a}})})(tinymce);
(function(a){var b=a.DOM,c=a.dom.Event,f=a.extend,e=a.each,d=a.isGecko,g=a.isIE,h=a.is,k=a.ThemeManager,m=a.PluginManager,l=a.explode;a.create("tinymce.Editor",{Editor:function(b,c){this.settings=c=f({id:b,language:"en",theme:"advanced",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:a.documentBaseURL,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,table_inline_editing:!1,object_resizing:!0,
accessibility_focus:!0,doctype:a.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:!0,directionality:"ltr",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",fix_table_elements:!0,inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",
indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:!0,entity_encoding:"named",url_converter:this.convertURL,url_converter_scope:this,ie7_compat:!0},c);this.id=this.editorId=b;this.isNotDirty=!1;
this.plugins={};this.documentBaseURI=new a.util.URI(c.document_base_url||a.documentBaseURL,{base_uri:tinyMCE.baseURI});this.baseURI=a.baseURI;this.contentCSS=[];this.contentStyles=[];this.setupEvents();this.execCommands={};this.queryStateCommands={};this.queryValueCommands={};this.execCallback("setup",this)},render:function(d){function f(){h.language&&!1!==h.language_load&&v.add(a.baseURL+"/langs/"+h.language+".js");h.theme&&"function"!=typeof h.theme&&"-"!=h.theme.charAt(0)&&!k.urls[h.theme]&&k.load(h.theme,
"themes/"+h.theme+"/editor_template"+a.suffix+".js");e(l(h.plugins),function(b){b&&!m.urls[b]&&("-"==b.charAt(0)?(b=b.substr(1,b.length),b=m.dependencies(b),e(b,function(b){b=m.createUrl({prefix:"plugins/",resource:b,suffix:"/editor_plugin"+a.suffix+".js"},b);m.load(b.resource,b)})):"safari"!=b&&m.load(b,{prefix:"plugins/",resource:b,suffix:"/editor_plugin"+a.suffix+".js"}))});v.loadQueue(function(){g.removed||g.init()})}var g=this,h=g.settings;d=g.id;var v=a.ScriptLoader;c.domLoaded?(tinyMCE.settings=
h,!g.getElement()||a.isIDevice&&!a.isIOS5||(!/TEXTAREA|INPUT/i.test(g.getElement().nodeName)&&h.hidden_input&&b.getParent(d,"form")&&b.insertAfter(b.create("input",{type:"hidden",name:d}),d),h.content_editable||(g.orgVisibility=g.getElement().style.visibility,g.getElement().style.visibility="hidden"),a.WindowManager&&(g.windowManager=new a.WindowManager(g)),"xml"==h.encoding&&g.onGetContent.add(function(a,c){c.save&&(c.content=b.encode(c.content))}),h.add_form_submit_trigger&&g.onSubmit.addToTop(function(){g.initialized&&
(g.save(),g.isNotDirty=1)}),h.add_unload_trigger&&(g._beforeUnload=tinyMCE.onBeforeUnload.add(function(){!g.initialized||g.destroyed||g.isHidden()||g.save({format:"raw",no_events:!0})})),a.addUnload(g.destroy,g),h.submit_patch&&g.onBeforeRenderUI.add(function(){var b=g.getElement().form;b&&!b._mceOldSubmit&&(b.submit.nodeType||b.submit.length||(g.formElement=b,b._mceOldSubmit=b.submit,b.submit=function(){a.triggerSave();g.isNotDirty=1;return g.formElement._mceOldSubmit(g.formElement)}),b=null)}),
f())):c.add(window,"ready",function(){g.render()})},init:function(){function c(b){var f=m.get(b),g=m.urls[b]||a.documentBaseURL.replace(/\/$/,"");f&&-1===a.inArray(D,b)&&(e(m.dependencies(b),function(a){c(a)}),f=new f(d,g),d.plugins[b]=f,f.init&&(f.init(d,g),D.push(b)))}var d=this,f=d.settings,h,v,x,t=d.getElement(),u,B,A,D=[];a.add(d);f.aria_label=f.aria_label||b.getAttrib(t,"aria-label",d.getLang("aria.rich_text_area"));f.theme&&("function"!=typeof f.theme?(f.theme=f.theme.replace(/-/,""),u=k.get(f.theme),
d.theme=new u,d.theme.init&&d.theme.init(d,k.urls[f.theme]||a.documentBaseURL.replace(/\/$/,""))):d.theme=f.theme);e(l(f.plugins.replace(/\-/g,"")),c);!1!==f.popup_css&&(f.popup_css=f.popup_css?d.documentBaseURI.toAbsolute(f.popup_css):d.baseURI.toAbsolute("themes/"+f.theme+"/skins/"+f.skin+"/dialog.css"));f.popup_css_add&&(f.popup_css+=","+d.documentBaseURI.toAbsolute(f.popup_css_add));d.controlManager=new a.ControlManager(d);d.onBeforeRenderUI.dispatch(d,d.controlManager);f.render_ui&&d.theme&&
(d.orgDisplay=t.style.display,"function"!=typeof f.theme?(h=f.width||t.style.width||t.offsetWidth,v=f.height||t.style.height||t.offsetHeight,x=f.min_height||100,A=/^[0-9\.]+(|px)$/i,A.test(""+h)&&(h=Math.max(parseInt(h,10)+(u.deltaWidth||0),100)),A.test(""+v)&&(v=Math.max(parseInt(v,10)+(u.deltaHeight||0),x)),u=d.theme.renderUI({targetNode:t,width:h,height:v,deltaWidth:f.delta_width,deltaHeight:f.delta_height}),b.setStyles(u.sizeContainer||u.editorContainer,{width:h,height:v}),v=(u.iframeHeight||
v)+("number"==typeof v?u.deltaHeight||0:""),v<x&&(v=x)):(u=f.theme(d,t),u.editorContainer.nodeType&&(u.editorContainer=u.editorContainer.id=u.editorContainer.id||d.id+"_parent"),u.iframeContainer.nodeType&&(u.iframeContainer=u.iframeContainer.id=u.iframeContainer.id||d.id+"_iframecontainer"),v=u.iframeHeight||t.offsetHeight,g&&d.onInit.add(function(a){a.dom.bind(a.getBody(),"beforedeactivate keydown",function(){a.lastIERng=a.selection.getRng()})})),d.editorContainer=u.editorContainer);f.content_css&&
e(l(f.content_css),function(a){d.contentCSS.push(d.documentBaseURI.toAbsolute(a))});if(f.content_editable)return t=u=null,d.initContentBody();document.domain&&location.hostname!=document.domain&&(a.relaxedDomain=document.domain);d.iframeHTML=f.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';f.document_base_url!=a.documentBaseURL&&(d.iframeHTML+='<base href="'+d.documentBaseURI.getURI()+'" />');d.iframeHTML=f.ie7_compat?d.iframeHTML+'<meta http-equiv="X-UA-Compatible" content="IE=7" />':
d.iframeHTML+'<meta http-equiv="X-UA-Compatible" content="IE=edge" />';d.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';for(h=0;h<d.contentCSS.length;h++)d.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+d.contentCSS[h]+'" />';d.contentCSS=[];h=f.body_id||"tinymce";-1!=h.indexOf("=")&&(h=d.getParam("body_id","","hash"),h=h[d.id]||h);x=f.body_class||"";-1!=x.indexOf("=")&&(x=d.getParam("body_class","","hash"),x=x[d.id]||"");d.iframeHTML+='</head><body id="'+
h+'" class="mceContentBody '+x+'" onload="window.parent.tinyMCE.get(\''+d.id+"').onLoad.dispatch();\"><br></body></html>";a.relaxedDomain&&(g||a.isOpera&&11>parseFloat(opera.version()))&&(B='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+d.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody();})()');b.add(u.iframeContainer,"iframe",{id:d.id+"_ifr",src:B||'javascript:""',frameBorder:"0",allowTransparency:"true",
title:f.aria_label,style:{width:"100%",height:v,display:"block"}});d.contentAreaContainer=u.iframeContainer;u.editorContainer&&(b.get(u.editorContainer).style.display=d.orgDisplay);t.style.visibility=d.orgVisibility;b.get(d.id).style.display="none";b.setAttrib(d.id,"aria-hidden",!0);a.relaxedDomain&&B||d.initContentBody();t=u=null},initContentBody:function(){var c=this,d=c.settings,f=b.get(c.id),h=c.getDoc(),k;g&&a.relaxedDomain||d.content_editable||(h.open(),h.write(c.iframeHTML),h.close(),a.relaxedDomain&&
(h.domain=a.relaxedDomain));d.content_editable&&(b.addClass(f,"mceContentBody"),c.contentDocument=h=d.content_document||document,c.contentWindow=d.content_window||window,c.bodyElement=f,d.content_document=d.content_window=null);f=c.getBody();f.disabled=!0;d.readonly||(f.contentEditable=c.getParam("content_editable_state",!0));f.disabled=!1;c.schema=new a.html.Schema(d);c.dom=new a.dom.DOMUtils(h,{keep_values:!0,url_converter:c.convertURL,url_converter_scope:c,hex_colors:d.force_hex_style_colors,class_filter:d.class_filter,
update_styles:!0,root_element:d.content_editable?c.id:null,schema:c.schema});c.parser=new a.html.DomParser(d,c.schema);c.parser.addAttributeFilter("src,href,style",function(a,b){for(var d=a.length,e,f=c.dom,g,h;d--;)e=a[d],g=e.attr(b),h="data-mce-"+b,e.attributes.map[h]||("style"===b?e.attr(h,f.serializeStyle(f.parseStyle(g),e.name)):e.attr(h,c.convertURL(g,b,e.name)))});c.parser.addNodeFilter("script",function(a,b){for(var c=a.length,d;c--;)d=a[c],d.attr("type","mce-"+(d.attr("type")||"text/javascript"))});
c.parser.addNodeFilter("#cdata",function(a,b){for(var c=a.length,d;c--;)d=a[c],d.type=8,d.name="#comment",d.value="[CDATA["+d.value+"]]"});c.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(b,d){for(var e=b.length,f,g=c.schema.getNonEmptyElements();e--;)f=b[e],f.isEmpty(g)&&(f.empty().append(new a.html.Node("br",1)).shortEnded=!0)});c.serializer=new a.dom.Serializer(d,c.dom,c.schema);c.selection=new a.dom.Selection(c.dom,c.getWin(),c.serializer,c);c.formatter=new a.Formatter(c);c.undoManager=
new a.UndoManager(c);c.forceBlocks=new a.ForceBlocks(c);c.enterKey=new a.EnterKey(c);c.editorCommands=new a.EditorCommands(c);c.onExecCommand.add(function(a,b){/^(FontName|FontSize)$/.test(b)||c.nodeChanged()});c.serializer.onPreProcess.add(function(a,b){return c.onPreProcess.dispatch(c,b,a)});c.serializer.onPostProcess.add(function(a,b){return c.onPostProcess.dispatch(c,b,a)});c.onPreInit.dispatch(c);d.browser_spellcheck||d.gecko_spellcheck||(h.body.spellcheck=!1);d.readonly||c.bindNativeEvents();
c.controlManager.onPostRender.dispatch(c,c.controlManager);c.onPostRender.dispatch(c);c.quirks=a.util.Quirks(c);d.directionality&&(f.dir=d.directionality);d.nowrap&&(f.style.whiteSpace="nowrap");d.protect&&c.onBeforeSetContent.add(function(a,b){e(d.protect,function(a){b.content=b.content.replace(a,function(a){return"\x3c!--mce:protected "+escape(a)+"--\x3e"})})});c.onSetContent.add(function(){c.addVisual(c.getBody())});d.padd_empty_editor&&c.onPostProcess.add(function(a,b){b.content=b.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,
"")});c.load({initial:!0,format:"html"});c.startContent=c.getContent({format:"raw"});c.initialized=!0;c.onInit.dispatch(c);c.execCallback("setupcontent_callback",c.id,f,h);c.execCallback("init_instance_callback",c);c.focus(!0);c.nodeChanged({initial:!0});0<c.contentStyles.length&&(k="",e(c.contentStyles,function(a){k+=a+"\r\n"}),c.dom.addStyle(k));e(c.contentCSS,function(a){c.dom.loadCSS(a)});d.auto_focus&&setTimeout(function(){var b=a.get(d.auto_focus);b.selection.select(b.getBody(),1);b.selection.collapse(1);
b.getBody().focus();b.getWin().focus()},100);f=h=f=null},focus:function(b){var c,d=this.selection,e=this.settings.content_editable,f,g=this.getDoc();if(!b){this.lastIERng&&d.setRng(this.lastIERng);b=d.getRng();b.item&&(f=b.item(0));this._refreshContentEditable();e||this.getWin().focus();if(a.isGecko||e)b=this.getBody(),b.setActive?b.setActive():b.focus(),e&&d.normalize();f&&f.ownerDocument==g&&(b=g.body.createControlRange(),b.addElement(f),b.select())}a.activeEditor!=this&&(null!=(c=a.activeEditor)&&
c.onDeactivate.dispatch(c,this),this.onActivate.dispatch(this,c));a._setActive(this)},execCallback:function(b){var c=this.settings[b],d;if(c)return this.callbackLookup&&(d=this.callbackLookup[b])&&(c=d.func,d=d.scope),h(c,"string")&&(d=(d=c.replace(/\.\w+$/,""))?a.resolve(d):0,c=a.resolve(c),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[b]={func:c,scope:d}),c.apply(d||this,Array.prototype.slice.call(arguments,1))},translate:function(b){var c=this.settings.language||"en",d=a.i18n;
return b?d[c+"."+b]||b.replace(/\{\#([^\}]+)\}/g,function(a,b){return d[c+"."+b]||"{#"+b+"}"}):""},getLang:function(b,c){return a.i18n[(this.settings.language||"en")+"."+b]||(h(c)?c:"{#"+b+"}")},getParam:function(b,c,d){var f=a.trim;b=h(this.settings[b])?this.settings[b]:c;var g;return"hash"===d?(g={},h(b,"string")?e(0<b.indexOf("=")?b.split(/[;,](?![^=;,]*(?:[;,]|$))/):b.split(","),function(a){a=a.split("=");1<a.length?g[f(a[0])]=f(a[1]):g[f(a[0])]=f(a)}):g=b,g):b},nodeChanged:function(a){var b=
this.selection,c;this.initialized&&(a=a||{},c=b.getStart()||this.getBody(),c=g&&c.ownerDocument!=this.getDoc()?this.getBody():c,a.parents=[],this.dom.getParent(c,function(b){if("BODY"==b.nodeName)return!0;a.parents.push(b)}),this.onNodeChange.dispatch(this,a?a.controlManager||this.controlManager:this.controlManager,c,b.isCollapsed(),a))},addButton:function(a,b){this.buttons=this.buttons||{};this.buttons[a]=b},addCommand:function(a,b,c){this.execCommands[a]={func:b,scope:c||this}},addQueryStateHandler:function(a,
b,c){this.queryStateCommands[a]={func:b,scope:c||this}},addQueryValueHandler:function(a,b,c){this.queryValueCommands[a]={func:b,scope:c||this}},addShortcut:function(a,b,c,d){var f=this,g;if(!1===f.settings.custom_shortcuts)return!1;f.shortcuts=f.shortcuts||{};h(c,"string")&&(g=c,c=function(){f.execCommand(g,!1,null)});h(c,"object")&&(g=c,c=function(){f.execCommand(g[0],g[1],g[2])});e(l(a),function(a){var g={func:c,scope:d||this,desc:f.translate(b),alt:!1,ctrl:!1,shift:!1};e(l(a,"+"),function(a){switch(a){case "alt":case "ctrl":case "shift":g[a]=
!0;break;default:g.charCode=a.charCodeAt(0),g.keyCode=a.toUpperCase().charCodeAt(0)}});f.shortcuts[(g.ctrl?"ctrl":"")+","+(g.alt?"alt":"")+","+(g.shift?"shift":"")+","+g.keyCode]=g});return!0},execCommand:function(a,b,c,d){var g=this,h=0,k;/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(a)||d&&d.skip_focus||g.focus();d=f({},d);g.onBeforeExecCommand.dispatch(g,a,b,c,d);if(d.terminate)return!1;if(g.execCallback("execcommand_callback",g.id,g.selection.getNode(),a,b,
c))return g.onExecCommand.dispatch(g,a,b,c,d),!0;if(k=g.execCommands[a])if(k=k.func.call(k.scope,b,c),!0!==k)return g.onExecCommand.dispatch(g,a,b,c,d),k;e(g.plugins,function(e){if(e.execCommand&&e.execCommand(a,b,c))return g.onExecCommand.dispatch(g,a,b,c,d),h=1,!1});if(h)return!0;if(g.theme&&g.theme.execCommand&&g.theme.execCommand(a,b,c)||g.editorCommands.execCommand(a,b,c))return g.onExecCommand.dispatch(g,a,b,c,d),!0;g.getDoc().execCommand(a,b,c);g.onExecCommand.dispatch(g,a,b,c,d)},queryCommandState:function(a){var b;
if(!this._isHidden()){if(b=this.queryStateCommands[a])if(b=b.func.call(b.scope),!0!==b)return b;b=this.editorCommands.queryCommandState(a);if(-1!==b)return b;try{return this.getDoc().queryCommandState(a)}catch(c){}}},queryCommandValue:function(a){var b;if(!this._isHidden()){if(b=this.queryValueCommands[a])if(b=b.func.call(b.scope),!0!==b)return b;b=this.editorCommands.queryCommandValue(a);if(h(b))return b;try{return this.getDoc().queryCommandValue(a)}catch(c){}}},show:function(){b.show(this.getContainer());
b.hide(this.id);this.load()},hide:function(){var a=this.getDoc();g&&a&&a.execCommand("SelectAll");this.save();b.hide(this.getContainer());b.setStyle(this.id,"display",this.orgDisplay)},isHidden:function(){return!b.isHidden(this.id)},setProgressState:function(a,b,c){this.onSetProgressState.dispatch(this,a,b,c);return a},load:function(a){var b=this.getElement(),c;if(b)return a=a||{},a.load=!0,c=this.setContent(h(b.value)?b.value:b.innerHTML,a),a.element=b,a.no_events||this.onLoadContent.dispatch(this,
a),a.element=null,c},save:function(a){var c=this,d=c.getElement(),f,g;if(d&&c.initialized)return a=a||{},a.save=!0,a.element=d,f=a.content=c.getContent(a),a.no_events||c.onSaveContent.dispatch(c,a),f=a.content,/TEXTAREA|INPUT/i.test(d.nodeName)?d.value=f:(d.innerHTML=f,(g=b.getParent(c.id,"form"))&&e(g.elements,function(a){if(a.name==c.id)return a.value=f,!1})),a.element=d=null,f},setContent:function(b,c){var d=this.getBody(),e;c=c||{};c.format=c.format||"html";c.set=!0;c.content=b;c.no_events||this.onBeforeSetContent.dispatch(this,
c);b=c.content;if(a.isIE||0!==b.length&&!/^\s+$/.test(b))return"raw"!==c.format&&(b=(new a.html.Serializer({},this.schema)).serialize(this.parser.parse(b))),c.content=a.trim(b),this.dom.setHTML(d,c.content),c.no_events||this.onSetContent.dispatch(this,c),this.settings.content_editable&&document.activeElement!==this.getBody()||this.selection.normalize(),c.content;e=this.settings.forced_root_block;d.innerHTML=e?"<"+e+'><br data-mce-bogus="1"></'+e+">":'<br data-mce-bogus="1">';this.selection.select(d,
!0);this.selection.collapse(!0)},getContent:function(b){var c;b=b||{};b.format=b.format||"html";b.get=!0;b.getInner=!0;b.no_events||this.onBeforeGetContent.dispatch(this,b);c="raw"==b.format?this.getBody().innerHTML:this.serializer.serialize(this.getBody(),b);b.content=a.trim(c);b.no_events||this.onGetContent.dispatch(this,b);return b.content},isDirty:function(){return a.trim(this.startContent)!=a.trim(this.getContent({format:"raw",no_events:1}))&&!this.isNotDirty},getContainer:function(){this.container||
(this.container=b.get(this.editorContainer||this.id+"_parent"));return this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return b.get(this.settings.content_element||this.id)},getWin:function(){var a;!this.contentWindow&&(a=b.get(this.id+"_ifr"))&&(this.contentWindow=a.contentWindow);return this.contentWindow},getDoc:function(){var a;!this.contentDocument&&(a=this.getWin())&&(this.contentDocument=a.document);return this.contentDocument},getBody:function(){return this.bodyElement||
this.getDoc().body},convertURL:function(a,b,c){var d=this.settings;return d.urlconverter_callback?this.execCallback("urlconverter_callback",a,c,!0,b):!d.convert_urls||c&&"LINK"==c.nodeName||0===a.indexOf("file:")?a:d.relative_urls?this.documentBaseURI.toRelative(a):a=this.documentBaseURI.toAbsolute(a,d.remove_script_host)},addVisual:function(a){var b=this,c=b.settings,d=b.dom,f;a=a||b.getBody();h(b.hasVisual)||(b.hasVisual=c.visual);e(d.select("table,a",a),function(a){var e;switch(a.nodeName){case "TABLE":f=
c.visual_table_class||"mceItemTable";(e=d.getAttrib(a,"border"))&&"0"!=e||(b.hasVisual?d.addClass(a,f):d.removeClass(a,f));break;case "A":d.getAttrib(a,"href",!1)||(e=d.getAttrib(a,"name")||a.id,f="mceItemAnchor",e&&(b.hasVisual?d.addClass(a,f):d.removeClass(a,f)))}});b.onVisualAid.dispatch(b,a,b.hasVisual)},remove:function(){var d=this.getContainer();this.removed||(this.removed=1,this.hide(),this.settings.content_editable||(c.unbind(this.getWin()),c.unbind(this.getDoc())),c.unbind(this.getBody()),
c.clear(d),this.execCallback("remove_instance_callback",this),this.onRemove.dispatch(this),this.onExecCommand.listeners=[],a.remove(this),b.remove(d))},destroy:function(b){this.destroyed||(d&&(c.unbind(this.getDoc()),c.unbind(this.getWin()),c.unbind(this.getBody())),b||(a.removeUnload(this.destroy),tinyMCE.onBeforeUnload.remove(this._beforeUnload),this.theme&&this.theme.destroy&&this.theme.destroy(),this.controlManager.destroy(),this.selection.destroy(),this.dom.destroy()),this.formElement&&(this.formElement.submit=
this.formElement._mceOldSubmit,this.formElement._mceOldSubmit=null),this.contentAreaContainer=this.formElement=this.container=this.settings.content_element=this.bodyElement=this.contentDocument=this.contentWindow=null,this.selection&&(this.selection=this.selection.win=this.selection.dom=this.selection.dom.doc=null),this.destroyed=1)},_refreshContentEditable:function(){var a,b;this._isHidden()&&(a=this.getBody(),b=a.parentNode,b.removeChild(a),b.appendChild(a),a.focus())},_isHidden:function(){var a;
if(!d)return 0;a=this.selection.getSel();return!a||!a.rangeCount||0===a.rangeCount}})})(tinymce);
(function(a){var b=a.each;a.Editor.prototype.setupEvents=function(){var c=this,f=c.settings;b("onPreInit onBeforeRenderUI onPostRender onLoad onInit onRemove onActivate onDeactivate onClick onEvent onMouseUp onMouseDown onDblClick onKeyDown onKeyUp onKeyPress onContextMenu onSubmit onReset onPaste onPreProcess onPostProcess onBeforeSetContent onBeforeGetContent onSetContent onGetContent onLoadContent onSaveContent onNodeChange onChange onBeforeExecCommand onExecCommand onUndo onRedo onVisualAid onSetProgressState onSetAttrib".split(" "),function(b){c[b]=
new a.util.Dispatcher(c)});f.cleanup_callback&&(c.onBeforeSetContent.add(function(a,b){b.content=a.execCallback("cleanup_callback","insert_to_editor",b.content,b)}),c.onPreProcess.add(function(a,b){b.set&&a.execCallback("cleanup_callback","insert_to_editor_dom",b.node,b);b.get&&a.execCallback("cleanup_callback","get_from_editor_dom",b.node,b)}),c.onPostProcess.add(function(a,b){b.set&&(b.content=a.execCallback("cleanup_callback","insert_to_editor",b.content,b));b.get&&(b.content=a.execCallback("cleanup_callback",
"get_from_editor",b.content,b))}));f.save_callback&&c.onGetContent.add(function(a,b){b.save&&(b.content=a.execCallback("save_callback",a.id,b.content,a.getBody()))});f.handle_event_callback&&c.onEvent.add(function(a,b,f){!1===c.execCallback("handle_event_callback",b,a,f)&&(b.preventDefault(),b.stopPropagation())});f.handle_node_change_callback&&c.onNodeChange.add(function(a,b,c){a.execCallback("handle_node_change_callback",a.id,c,-1,-1,!0,a.selection.isCollapsed())});f.save_callback&&c.onSaveContent.add(function(a,
b){var c=a.execCallback("save_callback",a.id,b.content,a.getBody());c&&(b.content=c)});f.onchange_callback&&c.onChange.add(function(a,b){a.execCallback("onchange_callback",a,b)})};a.Editor.prototype.bindNativeEvents=function(){function c(a,b){g.removed||!1!==g.onEvent.dispatch(g,a,b)&&g[m[a.fakeType||a.type]].dispatch(g,a,b)}function f(a){g.focus(!0)}function e(){g.selection.normalize();g.nodeChanged()}function d(c,d){(c.altKey||c.ctrlKey||c.metaKey)&&b(g.shortcuts,function(b){if(b.ctrl==(a.isMac?
c.metaKey:c.ctrlKey)&&b.alt==c.altKey&&b.shift==c.shiftKey&&(c.keyCode==b.keyCode||c.charCode&&c.charCode==b.charCode))return c.preventDefault(),d&&b.func.call(b.scope),!0})}var g=this,h=g.settings,k=g.dom,m;m={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};b(m,function(b,d){var e=h.content_editable?g.getBody():g.getDoc();switch(d){case "contextmenu":k.bind(e,
d,c);break;case "paste":k.bind(g.getBody(),d,c);break;case "submit":case "reset":k.bind(g.getElement().form||a.DOM.getParent(g.id,"form"),d,c);break;default:k.bind(e,d,c)}});k.bind(h.content_editable?g.getBody():a.isGecko?g.getDoc():g.getWin(),"focus",function(a){g.focus(!0)});h.content_editable&&a.isOpera&&(k.bind(g.getBody(),"click",f),k.bind(g.getBody(),"keydown",f));g.onMouseUp.add(e);g.onKeyUp.add(function(b,c){var d=c.keyCode;(33<=d&&36>=d||37<=d&&40>=d||13==d||45==d||46==d||8==d||a.isMac&&
(91==d||93==d)||c.ctrlKey)&&e()});g.onReset.add(function(){g.setContent(g.startContent,{format:"raw"})});g.onKeyUp.add(function(a,b){d(b)});g.onKeyPress.add(function(a,b){d(b)});g.onKeyDown.add(function(a,b){d(b,!0)});a.isOpera&&g.onClick.add(function(a,b){b.preventDefault()})}})(tinymce);
(function(a){var b=a.each;a.EditorCommands=function(c){function f(a,b,c){var d;a=a.toLowerCase();return(d=l.exec[a])?(d(a,b,c),!0):!1}function e(a){var b;a=a.toLowerCase();return(b=l.state[a])?b(a):-1}function d(a,c){c=c||"exec";b(a,function(a,d){b(d.toLowerCase().split(","),function(b){l[c][b]=a})})}function g(a,b,d){void 0===b&&(b=!1);void 0===d&&(d=null);return c.getDoc().execCommand(a,b,d)}function h(a,b){n.toggle(a,b?{value:b}:void 0)}var k=c.dom,m=c.selection,l={state:{},exec:{},value:{}},p=
c.settings,n=c.formatter,q;a.extend(this,{execCommand:f,queryCommandState:e,queryCommandValue:function(a){var b;a=a.toLowerCase();return(b=l.value[a])?b(a):!1},addCommands:d});d({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){c.undoManager.add()},"Cut,Copy,Paste":function(b){var d=c.getDoc(),e;try{g(b)}catch(f){e=!0}if(e||!d.queryCommandSupported(b))a.isGecko?c.windowManager.confirm(c.getLang("clipboard_msg"),function(a){a&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html",
"_blank")}):c.windowManager.alert(c.getLang("clipboard_no_support"))},unlink:function(a){m.isCollapsed()&&m.select(m.getNode());g(a);m.collapse(!1)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(a){var c=a.substring(7);b(["left","center","right","full"],function(a){c!=a&&n.remove("align"+a)});h("align"+c);f("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(a){var b;g(a);if(a=k.getParent(m.getNode(),"ol,ul"))b=a.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(b.nodeName)&&
(q=m.getBookmark(void 0),k.split(b,a),m.moveToBookmark(q))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){h(a)},"ForeColor,HiliteColor,FontName":function(a,b,c){h(a,c)},FontSize:function(b,c,d){var e;1<=d&&7>=d&&(e=a.explode(p.font_size_style_values),d=(c=a.explode(p.font_size_classes))?c[d-1]||d:e[d-1]||d);h(b,d)},RemoveFormat:function(a){n.remove(a)},mceBlockQuote:function(a){h("blockquote")},FormatBlock:function(a,b,c){return h(c||"p")},mceCleanup:function(){var a=m.getBookmark();
c.setContent(c.getContent({cleanup:!0}),{cleanup:!0});m.moveToBookmark(a)},mceRemoveNode:function(a,b,d){a=d||m.getNode();a!=c.getBody()&&(q=m.getBookmark(void 0),c.dom.remove(a,!0),m.moveToBookmark(q))},mceSelectNodeDepth:function(a,b,d){var e=0;k.getParent(m.getNode(),function(a){if(1==a.nodeType&&e++==d)return m.select(a),!1},c.getBody())},mceSelectNode:function(a,b,c){m.select(c)},mceInsertContent:function(b,d,e){var f,g,h,n,l;f=c.parser;g=new a.html.Serializer({},c.schema);b={content:e,format:"html"};
m.onBeforeSetContent.dispatch(m,b);e=b.content;-1==e.indexOf("{$caret}")&&(e+="{$caret}");e=e.replace(/\{\$caret\}/,'<span id="mce_marker" data-mce-type="bookmark">\ufeff</span>');m.isCollapsed()||c.getDoc().execCommand("Delete",!1,null);h=m.getNode();b={context:h.nodeName.toLowerCase()};l=f.parse(e,b);d=l.lastChild;if("mce_marker"==d.attr("id"))for(e=d,d=d.prev;d;d=d.walk(!0))if(3==d.type||!k.isBlock(d.name)){d.parent.insert(e,d,"br"===d.name);break}if(b.invalid){m.setContent('<span id="mce_marker" data-mce-type="bookmark">\ufeff</span>');
h=c.selection.getNode();n=c.getBody();for(9==h.nodeType?h=d=n:d=h;d!==n;)h=d,d=d.parentNode;e=h==n?n.innerHTML:k.getOuterHTML(h);e=g.serialize(f.parse(e.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return g.serialize(l)})));h==n?k.setHTML(n,e):k.setOuterHTML(h,e)}else e=g.serialize(l),d=h.firstChild,f=h.lastChild,!d||d===f&&"BR"===d.nodeName?k.setHTML(h,e):m.setContent(e);e=k.get("mce_marker");d=k.getRect(e);h=k.getViewPort(c.getWin());if(d.y+d.h>h.y+h.h||d.y<h.y||d.x>h.x+
h.w||d.x<h.x)f=a.isIE?c.getDoc().documentElement:c.getBody(),f.scrollLeft=d.x,f.scrollTop=d.y-h.h+25;h=k.createRng();(d=e.previousSibling)&&3==d.nodeType?h.setStart(d,d.nodeValue.length):(h.setStartBefore(e),h.setEndBefore(e));k.remove(e);m.setRng(h);m.onSetContent.dispatch(m,b);c.addVisual()},mceInsertRawHTML:function(a,b,d){m.setContent("tiny_mce_marker");c.setContent(c.getContent().replace(/tiny_mce_marker/g,function(){return d}))},mceToggleFormat:function(a,b,c){h(c)},mceSetContent:function(a,
b,d){c.setContent(d)},"Indent,Outdent":function(a){var c,d,f;c=p.indentation;d=/[a-z%]+$/i.exec(c);c=parseInt(c);e("InsertUnorderedList")||e("InsertOrderedList")?g(a):(p.forced_root_block||k.getParent(m.getNode(),k.isBlock)||n.apply("div"),b(m.getSelectedBlocks(),function(b){"outdent"==a?(f=Math.max(0,parseInt(b.style.paddingLeft||0)-c),k.setStyle(b,"paddingLeft",f?f+d:"")):k.setStyle(b,"paddingLeft",parseInt(b.style.paddingLeft||0)+c+d)}))},mceRepaint:function(){if(a.isGecko)try{q=m.getBookmark(!0),
m.getSel()&&m.getSel().selectAllChildren(c.getBody()),m.collapse(!0),m.moveToBookmark(q)}catch(b){}},mceToggleFormat:function(a,b,c){n.toggle(c)},InsertHorizontalRule:function(){c.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){c.hasVisual=!c.hasVisual;c.addVisual()},mceReplaceContent:function(a,b,d){c.execCommand("mceInsertContent",!1,d.replace(/\{\$selection\}/g,m.getContent({format:"text"})))},mceInsertLink:function(a,b,c){"string"==typeof c&&(c={href:c});a=k.getParent(m.getNode(),
"a");c.href=c.href.replace(" ","%20");a&&c.href||n.remove("link");c.href&&n.apply("link",c,a)},selectAll:function(){var a=k.getRoot(),b=k.createRng();b.setStart(a,0);b.setEnd(a,a.childNodes.length);c.selection.setRng(b)}});d({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(b){var c="align"+b.substring(7);b=m.isCollapsed()?[k.getParent(m.getNode(),k.isBlock)]:m.getSelectedBlocks();b=a.map(b,function(a){return!!n.matchNode(a,c)});return-1!==a.inArray(b,!0)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){return n.match(a)},
mceBlockQuote:function(){return n.match("blockquote")},Outdent:function(){var a;return p.inline_styles&&((a=k.getParent(m.getStart(),k.isBlock))&&0<parseInt(a.style.paddingLeft)||(a=k.getParent(m.getEnd(),k.isBlock))&&0<parseInt(a.style.paddingLeft))?!0:e("InsertUnorderedList")||e("InsertOrderedList")||!p.inline_styles&&!!k.getParent(m.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(a){return k.getParent(m.getNode(),"insertunorderedlist"==a?"UL":"OL")}},"state");d({"FontSize,FontName":function(a){var b=
0,c;if(c=k.getParent(m.getNode(),"span"))b="fontsize"==a?c.style.fontSize:c.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase();return b}},"value");d({Undo:function(){c.undoManager.undo()},Redo:function(){c.undoManager.redo()}})}})(tinymce);
(function(a){var b=a.util.Dispatcher;a.UndoManager=function(c){function f(){e.typing=!1;e.add()}var e,d=0,g=[],h,k,m,l;onBeforeAdd=new b(e);k=new b(e);m=new b(e);l=new b(e);k.add(function(a,b){if(a.hasUndo())return c.onChange.dispatch(c,b,a)});m.add(function(a,b){return c.onUndo.dispatch(c,b,a)});l.add(function(a,b){return c.onRedo.dispatch(c,b,a)});c.onInit.add(function(){e.add()});c.onBeforeExecCommand.add(function(a,b,c,d,f){"Undo"==b||"Redo"==b||"mceRepaint"==b||f&&f.skip_undo||e.beforeChange()});
c.onExecCommand.add(function(a,b,c,d,f){"Undo"==b||"Redo"==b||"mceRepaint"==b||f&&f.skip_undo||e.add()});c.onSaveContent.add(f);c.dom.bind(c.dom.getRoot(),"dragend",f);c.dom.bind(c.getDoc(),a.isGecko?"blur":"focusout",function(a){!c.removed&&e.typing&&f()});c.onKeyUp.add(function(a,b){var c=b.keyCode;(33<=c&&36>=c||37<=c&&40>=c||45==c||13==c||b.ctrlKey)&&f()});c.onKeyDown.add(function(a,b){var c=b.keyCode;33<=c&&36>=c||37<=c&&40>=c||45==c?e.typing&&f():(16>c||20<c)&&224!=c&&91!=c&&!e.typing&&(e.beforeChange(),
e.typing=!0,e.add())});c.onMouseDown.add(function(a,b){e.typing&&f()});c.addShortcut("ctrl+z","undo_desc","Undo");c.addShortcut("ctrl+y","redo_desc","Redo");return e={data:g,typing:!1,onBeforeAdd:onBeforeAdd,onAdd:k,onUndo:m,onRedo:l,beforeChange:function(){h=c.selection.getBookmark(2,!0)},add:function(b){var f;f=c.settings;var k;b=b||{};b.content=a.trim(c.getContent({format:"raw",no_events:1}).replace(/<span[^>]+data-mce-bogus[^>]+>[\u200B\uFEFF]+<\/span>/g,""));e.onBeforeAdd.dispatch(e,b);if((k=
g[d])&&k.content==b.content)return null;g[d]&&(g[d].beforeBookmark=h);if(f.custom_undo_redo_levels&&g.length>f.custom_undo_redo_levels){for(f=0;f<g.length-1;f++)g[f]=g[f+1];g.length--;d=g.length}b.bookmark=c.selection.getBookmark(2,!0);d<g.length-1&&(g.length=d+1);g.push(b);d=g.length-1;e.onAdd.dispatch(e,b);c.isNotDirty=0;return b},undo:function(){var a;e.typing&&(e.add(),e.typing=!1);0<d&&(a=g[--d],c.setContent(a.content,{format:"raw"}),c.selection.moveToBookmark(a.beforeBookmark),e.onUndo.dispatch(e,
a));return a},redo:function(){var a;d<g.length-1&&(a=g[++d],c.setContent(a.content,{format:"raw"}),c.selection.moveToBookmark(a.bookmark),e.onRedo.dispatch(e,a));return a},clear:function(){g=[];d=0;e.typing=!1},hasUndo:function(){return 0<d||this.typing},hasRedo:function(){return d<g.length-1&&!this.typing}}}})(tinymce);
tinymce.ForceBlocks=function(a){function b(){var b=e.getStart(),h=a.getBody(),k,m,l,p,n,q,r,v,x;if(b&&1===b.nodeType&&c.forced_root_block){for(;b&&b!=h;){if(d[b.nodeName])return;b=b.parentNode}k=e.getRng();k.setStart?(m=k.startContainer,l=k.startOffset,p=k.endContainer,n=k.endOffset):(k.item&&(b=k.item(0),k=a.getDoc().body.createTextRange(),k.moveToElementText(b)),x=k.parentElement().ownerDocument===a.getDoc(),tmpRng=k.duplicate(),tmpRng.collapse(!0),l=-1*tmpRng.move("character",-16777215),tmpRng.collapsed||
(tmpRng=k.duplicate(),tmpRng.collapse(!1),n=-1*tmpRng.move("character",-16777215)-l));for(b=h.firstChild;b;)3===b.nodeType||1==b.nodeType&&!d[b.nodeName]?(q||(q=f.create(c.forced_root_block),b.parentNode.insertBefore(q,b),v=!0),r=b,b=b.nextSibling,q.appendChild(r)):(q=null,b=b.nextSibling);if(v){if(k.setStart)k.setStart(m,l),k.setEnd(p,n),e.setRng(k);else if(x)try{k=a.getDoc().body.createTextRange(),k.moveToElementText(h),k.collapse(!0),k.moveStart("character",l),0<n&&k.moveEnd("character",n),k.select()}catch(t){}a.nodeChanged()}}}
var c=a.settings,f=a.dom,e=a.selection,d=a.schema.getBlockElements();c.forced_root_block&&(a.onKeyUp.add(b),a.onNodeChange.add(b))};
(function(a){var b=a.dom.Event,c=a.each,f=a.extend;a.create("tinymce.ControlManager",{ControlManager:function(b,d){var f=this;d=d||{};f.editor=b;f.controls={};f.onAdd=new a.util.Dispatcher(f);f.onPostRender=new a.util.Dispatcher(f);f.prefix=d.prefix||b.id+"_";f._cls={};f.onPostRender.add(function(){c(f.controls,function(a){a.postRender()})})},get:function(a){return this.controls[this.prefix+a]||this.controls[a]},setActive:function(a,b){var c=null;(c=this.get(a))&&c.setActive(b);return c},setDisabled:function(a,
b){var c=null;(c=this.get(a))&&c.setDisabled(b);return c},add:function(a){a&&(this.controls[a.id]=a,this.onAdd.dispatch(a,this));return a},createControl:function(a){var b,f,h,k=this,m=k.editor,l;k.controlFactories||(k.controlFactories=[],c(m.plugins,function(a){a.createControl&&k.controlFactories.push(a)}));l=k.controlFactories;f=0;for(h=l.length;f<h;f++)if(b=l[f].createControl(a,k))return k.add(b);return"|"===a||"separator"===a?k.createSeparator():m.buttons&&(b=m.buttons[a])?k.createButton(a,b):
k.add(b)},createDropMenu:function(b,c,g){var h=this.editor,k,m,l;c=f({"class":"mceDropDown",constrain:h.settings.constrain_menus},c);c["class"]=c["class"]+" "+h.getParam("skin")+"Skin";if(l=h.getParam("skin_variant"))c["class"]+=" "+h.getParam("skin")+"Skin"+l.substring(0,1).toUpperCase()+l.substring(1);c["class"]+="rtl"==h.settings.directionality?" mceRtl":"";b=this.prefix+b;k=this.controls[b]=new (g||this._cls.dropmenu||a.ui.DropMenu)(b,c);k.onAddItem.add(function(a,b){var c=b.settings;c.title=
h.getLang(c.title,c.title);c.onclick||(c.onclick=function(a){c.cmd&&h.execCommand(c.cmd,c.ui||!1,c.value)})});h.onRemove.add(function(){k.destroy()});a.isIE&&(k.onShowMenu.add(function(){h.focus();m=h.selection.getBookmark(1)}),k.onHideMenu.add(function(){m&&(h.selection.moveToBookmark(m),m=0)}));return this.add(k)},createListBox:function(c,d,g){var h=this.editor;if(this.get(c))return null;d.title=h.translate(d.title);d.scope=d.scope||h;d.onselect||(d.onselect=function(a){h.execCommand(d.cmd,d.ui||
!1,a||d.value)});d=f({title:d.title,"class":"mce_"+c,scope:d.scope,control_manager:this},d);c=this.prefix+c;h.settings.use_native_selects||h.settings.use_accessible_selects&&!a.isGecko?g=new a.ui.NativeListBox(c,d):(g=g||this._cls.listbox||a.ui.ListBox,g=new g(c,d,h));this.controls[c]=g;a.isWebKit&&g.onPostRender.add(function(a,c){b.add(c,"mousedown",function(){h.bookmark=h.selection.getBookmark(1)});b.add(c,"focus",function(){h.selection.moveToBookmark(h.bookmark);h.bookmark=null})});g.hideMenu&&
h.onMouseDown.add(g.hideMenu,g);return this.add(g)},createButton:function(b,c,g){var h=this.editor;if(this.get(b))return null;c.title=h.translate(c.title);c.label=h.translate(c.label);c.scope=c.scope||h;c.onclick||c.menu_button||(c.onclick=function(){h.execCommand(c.cmd,c.ui||!1,c.value)});c=f({title:c.title,"class":"mce_"+b,unavailable_prefix:h.getLang("unavailable",""),scope:c.scope,control_manager:this},c);b=this.prefix+b;c.menu_button?(g=g||this._cls.menubutton||a.ui.MenuButton,b=new g(b,c,h),
h.onMouseDown.add(b.hideMenu,b)):(g=this._cls.button||a.ui.Button,b=new g(b,c,h));return this.add(b)},createMenuButton:function(a,b,c){b=b||{};b.menu_button=1;return this.createButton(a,b,c)},createSplitButton:function(b,c,g){var h=this.editor;if(this.get(b))return null;c.title=h.translate(c.title);c.scope=c.scope||h;c.onclick||(c.onclick=function(a){h.execCommand(c.cmd,c.ui||!1,a||c.value)});c.onselect||(c.onselect=function(a){h.execCommand(c.cmd,c.ui||!1,a||c.value)});c=f({title:c.title,"class":"mce_"+
b,scope:c.scope,control_manager:this},c);b=this.prefix+b;b=this.add(new (g||this._cls.splitbutton||a.ui.SplitButton)(b,c,h));h.onMouseDown.add(b.hideMenu,b);return b},createColorSplitButton:function(b,c,g){var h=this.editor,k,m;if(this.get(b))return null;c.title=h.translate(c.title);c.scope=c.scope||h;c.onclick||(c.onclick=function(b){a.isIE&&(m=h.selection.getBookmark(1));h.execCommand(c.cmd,c.ui||!1,b||c.value)});c.onselect||(c.onselect=function(a){h.execCommand(c.cmd,c.ui||!1,a||c.value)});c=f({title:c.title,
"class":"mce_"+b,menu_class:h.getParam("skin")+"Skin",scope:c.scope,more_colors_title:h.getLang("more_colors")},c);b=this.prefix+b;k=new (g||this._cls.colorsplitbutton||a.ui.ColorSplitButton)(b,c,h);h.onMouseDown.add(k.hideMenu,k);h.onRemove.add(function(){k.destroy()});a.isIE&&(k.onShowMenu.add(function(){h.focus();m=h.selection.getBookmark(1)}),k.onHideMenu.add(function(){m&&(h.selection.moveToBookmark(m),m=0)}));return this.add(k)},createToolbar:function(b,c,f){b=this.prefix+b;c=new (f||this._cls.toolbar||
a.ui.Toolbar)(b,c,this.editor);return this.get(b)?null:this.add(c)},createToolbarGroup:function(b,c,f){b=this.prefix+b;c=new (f||this._cls.toolbarGroup||a.ui.ToolbarGroup)(b,c,this.editor);return this.get(b)?null:this.add(c)},createSeparator:function(b){return new (b||this._cls.separator||a.ui.Separator)},setControlType:function(a,b){return this._cls[a.toLowerCase()]=b},destroy:function(){c(this.controls,function(a){a.destroy()});this.controls=null}})})(tinymce);
(function(a){var b=a.util.Dispatcher,c=a.each,f=a.isIE,e=a.isOpera;a.create("tinymce.WindowManager",{WindowManager:function(a){this.editor=a;this.onOpen=new b(this);this.onClose=new b(this);this.params={};this.features={}},open:function(b,g){var h="",k="modal"==this.editor.settings.dialog_type,m,l,p;p=a.DOM.getViewPort();b=b||{};g=g||{};l=e?p.w:screen.width;p=e?p.h:screen.height;b.name=b.name||"mc_"+(new Date).getTime();b.width=parseInt(b.width||320);b.height=parseInt(b.height||240);b.resizable=!0;
b.left=b.left||parseInt(l/2)-b.width/2;b.top=b.top||parseInt(p/2)-b.height/2;g.inline=!1;g.mce_width=b.width;g.mce_height=b.height;g.mce_auto_focus=b.auto_focus;k&&f&&(b.center=!0,b.help=!1,b.dialogWidth=b.width+"px",b.dialogHeight=b.height+"px",b.scroll=b.scrollbars||!1);c(b,function(b,c){a.is(b,"boolean")&&(b=b?"yes":"no");/^(name|url)$/.test(c)||(h=f&&k?h+((h?";":"")+c+":"+b):h+((h?",":"")+c+"="+b))});this.features=b;this.params=g;this.onOpen.dispatch(this,b,g);l=b.url||b.file;l=a._addVer(l);try{f&&
k?(m=1,window.showModalDialog(l,window,h)):m=window.open(l,b.name,h)}catch(n){}m||alert(this.editor.getLang("popup_blocked"))},close:function(a){a.close();this.onClose.dispatch(this)},createInstance:function(b,c,e,f,m,l){return new (a.resolve(b))(c,e,f,m,l)},confirm:function(a,b,c,e){e=e||window;b.call(c||this,e.confirm(this._decode(this.editor.getLang(a,a))))},alert:function(a,b,c,e){e=e||window;e.alert(this._decode(this.editor.getLang(a,a)));b&&b.call(c||this)},resizeBy:function(a,b,c){c.resizeBy(a,
b)},_decode:function(b){return a.DOM.decode(b).replace(/\\n/g,"\n")}})})(tinymce);
(function(a){a.Formatter=function(b){function c(a,b){return y.getParents(a,b,y.getRoot())}function f(a){return 1===a.nodeType&&"_mce_caret"===a.id}function e(a){return a?E[a]:E}function d(a,b){a&&("string"!==typeof a?G(a,function(a,b){d(b,a)}):(b=b.length?b:[b],G(b,function(a){a.deep===O&&(a.deep=!a.selector);a.split===O&&(a.split=!a.selector||a.inline);a.remove===O&&a.selector&&!a.inline&&(a.remove="none");a.selector&&a.inline&&(a.mixed=!0,a.block_expand=!0);"string"===typeof a.classes&&(a.classes=
a.classes.split(/\s+/))}),E[a]=b))}function g(c,d,h){function m(a,b){b=b||E;if(a){if(b.onformat)b.onformat(a,b,d,h);G(b.styles,function(b,c){y.setStyle(a,c,q(b,d))});G(b.attributes,function(b,c){y.setAttrib(a,c,q(b,d))});G(b.classes,function(b){b=q(b,d);y.hasClass(a,b)||y.addClass(a,b)})}}function n(){var a=b.selection.getRng(),c=a.startContainer,d=a.endContainer;if(c!=d&&0===a.endOffset){a:{d=new L(d);for(h=d.current();h;h=d.prev())if(1<h.childNodes.length||h==c||"BR"==h.tagName){c=h;break a}c=void 0}a.setEnd(c,
3==c.nodeType?c.length:c.childNodes.length)}return a}function C(b,c,d,e,f){var g=[],h=-1,k,m=-1,n=-1,l;G(b.childNodes,function(a,b){if("UL"===a.nodeName||"OL"===a.nodeName)return h=b,k=a,!1});G(b.childNodes,function(a,b){"SPAN"===a.nodeName&&"bookmark"==y.getAttrib(a,"data-mce-type")&&(a.id==c.id+"_start"?m=b:a.id==c.id+"_end"&&(n=b))});if(0>=h||m<h&&n>h)return G(a.grep(b.childNodes),f),0;l=y.clone(d,!1);G(a.grep(b.childNodes),function(a,b){if(m<h&&b<h||m>h&&b>h)g.push(a),a.parentNode.removeChild(a)});
m<h?b.insertBefore(l,k):m>h&&b.insertBefore(l,k.nextSibling);e.push(l);G(g,function(a){l.appendChild(a)});return l}function u(b,e,g){var h=[],n,q,x=!0;n=E.inline||E.block;q=y.create(n);m(q);U.walk(b,function(b){function l(b){var r,z,u,t,D;D=x;r=b.nodeName.toLowerCase();z=b.parentNode.nodeName.toLowerCase();1===b.nodeType&&V(b)&&(D=x,x="true"===V(b),t=!0);if(p(r,"br"))A=0,E.block&&y.remove(b);else if(E.wrapper&&k(b,c,d))A=0;else if(x&&!t&&E.block&&!E.wrapper&&/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(r))b=
y.rename(b,n),m(b),h.push(b),A=0;else{if(E.selector&&(G(v,function(a){"collapsed"in a&&a.collapsed!==J||!y.is(b,a.selector)||f(b)||(m(b,a),u=!0)}),!E.inline||u)){A=0;return}x&&!t&&N(n,r)&&N(z,n)&&(g||3!==b.nodeType||1!==b.nodeValue.length||65279!==b.nodeValue.charCodeAt(0))&&!f(b)?(A||(A=y.clone(q,!1),b.parentNode.insertBefore(A,b),h.push(A)),A.appendChild(b)):"li"==r&&e?A=C(b,e,q,h,l):(A=0,G(a.grep(b.childNodes),l),t&&(x=D),A=0)}}var A;G(b,l)});!1===E.wrap_links&&G(h,function(b){function c(b){var d,
e,f;if("A"===b.nodeName){e=y.clone(q,!1);h.push(e);f=a.grep(b.childNodes);for(d=0;d<f.length;d++)e.appendChild(f[d]);b.appendChild(e)}G(a.grep(b.childNodes),c)}c(b)});G(h,function(a){function b(a){var c,d;G(a.childNodes,function(a){if(1==a.nodeType&&!A(a)&&!f(a))return c=a,!1});c&&l(c,E)&&(d=y.clone(c,!1),m(d),y.replace(d,a,!0),y.remove(c,1));return d||a}var e;e=function(a){var b=0;G(a.childNodes,function(a){r(a)||A(a)||b++});return b}(a);if((1<h.length||!P(a))&&0===e)y.remove(a,1);else if(E.inline||
E.wrapper){E.exact||1!==e||(a=b(a));G(v,function(b){G(y.select(b.inline,a),function(a){var c;if(!1===b.wrap_links){c=a.parentNode;do if("A"===c.nodeName)return;while(c=c.parentNode)}t(b,d,a,b.exact?a:null)})});if(k(a.parentNode,c,d))return y.remove(a,1),a=0,!0;E.merge_with_parents&&y.getParent(a.parentNode,function(b){if(k(b,c,d))return y.remove(a,1),a=0,!0});a&&!1!==E.merge_siblings&&(a=D(B(a),a),a=D(a,B(a,!0)))}})}var v=e(c),E=v[0],M,J=I.isCollapsed();if(E)if(h)h.nodeType?(M=y.createRng(),M.setStartBefore(h),
M.setEndAfter(h),u(x(M,v),null,!0)):u(h,null,!0);else if(J&&E.inline&&!y.select("td.mceSelected,th.mceSelected").length)z("apply",c,d);else{var S=b.selection.getNode();aa||!v[0].defaultBlock||y.getParent(S,y.isBlock)||g(v[0].defaultBlock);b.selection.setRng(n());M=I.getBookmark();u(x(I.getRng(!0),v),M);E.styles&&(E.styles.color||E.styles.textDecoration)&&(a.walk(S,X,"childNodes"),X(S));I.moveToBookmark(M);K(I.getRng(!0));b.nodeChanged()}}function h(d,f,g){function h(b){var c,d,e,g,k;1===b.nodeType&&
V(b)&&(g=B,B="true"===V(b),k=!0);c=a.grep(b.childNodes);if(B&&!k)for(d=0,e=r.length;d<e&&!t(r[d],f,b,b);d++);if(u.deep&&c.length){d=0;for(e=c.length;d<e;d++)h(c[d]);k&&(B=g)}}function n(a){var b;G(c(a.parentNode).reverse(),function(a){var c;b||"_start"==a.id||"_end"==a.id||(c=k(a,d,f))&&!1!==c.split&&(b=a)});return b}function l(a){var b=n(a),c=a,d,e,g,h,k,m;if(b){m=b.parentNode;for(d=c.parentNode;d&&d!=m;d=d.parentNode){e=y.clone(d,!1);for(k=0;k<r.length;k++)if(t(r[k],f,e,e)){e=0;break}e&&(g&&e.appendChild(g),
h||(h=e),g=e)}u.mixed&&P(b)||(c=y.split(b,c));g&&(a.parentNode.insertBefore(g,a),h.appendChild(a))}return c}function p(a){var b=y.get(a?"_start":"_end"),c=b[a?"firstChild":"lastChild"];A(c)&&(c=c[a?"firstChild":"lastChild"]);y.remove(b,!0);return c}function q(a){var c,d;a=x(a,r,!0);u.split&&(c=C(a,!0),d=C(a),c!=d?(/^(TR|TD)$/.test(c.nodeName)&&c.firstChild&&(c=("TD"==c.nodeName?c.firstChild:c.firstChild.firstChild)||c),c=v(c,"span",{id:"_start","data-mce-type":"bookmark"}),d=v(d,"span",{id:"_end",
"data-mce-type":"bookmark"}),l(c),l(d),c=p(!0),d=p()):c=d=l(c),a.startContainer=c.parentNode,a.startOffset=Q(c),a.endContainer=d.parentNode,a.endOffset=Q(d)+1);U.walk(a,function(a){G(a,function(a){h(a);1===a.nodeType&&"underline"===b.dom.getStyle(a,"text-decoration")&&a.parentNode&&"underline"===H(a.parentNode)&&t({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,a)})})}var r=e(d),u=r[0],D,B=!0;g?g.nodeType?(D=y.createRng(),D.setStartBefore(g),D.setEndAfter(g),q(D)):q(g):I.isCollapsed()&&
u.inline&&!y.select("td.mceSelected,th.mceSelected").length?z("remove",d,f):(g=I.getBookmark(),q(I.getRng(!0)),I.moveToBookmark(g),u.inline&&m(d,f,I.getStart())&&K(I.getRng(!0)),b.nodeChanged())}function k(a,b,c,d){function f(a,b,e){var g,h,k=b[e];if(b.onmatch)return b.onmatch(a,b,e);if(k)if(k.length===O)for(g in k){if(k.hasOwnProperty(g)&&(h="attributes"===e?y.getAttrib(a,g):n(a,g),d&&!h&&!b.exact||(!d||b.exact)&&!p(h,q(k[g],c))))return}else for(g=0;g<k.length&&("attributes"===e?!y.getAttrib(a,k[g]):
!n(a,k[g]));g++);return b}var g=e(b),h;if(g&&a)for(h=0;h<g.length;h++)if(b=g[h],l(a,b)&&f(a,b,"attributes")&&f(a,b,"styles")){if(g=b.classes)for(h=0;h<g.length;h++)if(!y.hasClass(a,g[h]))return;return b}}function m(a,b,c){function d(c){c=y.getParent(c,function(c){return!!k(c,a,b,!0)});return k(c,a,b)}var e;if(c)return d(c);c=I.getNode();if(d(c))return!0;e=I.getStart();return e!=c&&d(e)?!0:!1}function l(a,b){if(p(a,b.inline)||p(a,b.block))return!0;if(b.selector)return y.is(a,b.selector)}function p(a,
b){a=a||"";b=b||"";a=""+(a.nodeName||a);b=""+(b.nodeName||b);return a.toLowerCase()==b.toLowerCase()}function n(a,b){var c=y.getStyle(a,b);if("color"==b||"backgroundColor"==b)c=y.toHex(c);"fontWeight"==b&&700==c&&(c="bold");return""+c}function q(a,b){"string"!=typeof a?a=a(b):b&&(a=a.replace(/%(\w+)/g,function(a,c){return b[c]||a}));return a}function r(a){return a&&3===a.nodeType&&/^([\t \r\n]+|)$/.test(a.nodeValue)}function v(a,b,c){b=y.create(b,c);a.parentNode.insertBefore(b,a);b.appendChild(a);
return b}function x(a,d,e){function f(a){var b,c,e,g;b=c=a?q:z;e=a?"previousSibling":"nextSibling";g=y.getRoot();if(3==b.nodeType&&!r(b)&&(a?0<x:u<b.nodeValue.length))return b;for(;d[0].block_expand||!P(c);){for(a=c[e];a;a=a[e])if(!A(a)&&!r(a))return c;if(c.parentNode==g)break;c=c.parentNode}return c}function g(a,b){for(b===O&&(b=3===a.nodeType?a.length:a.childNodes.length);a&&a.hasChildNodes();)(a=a.childNodes[b])&&(b=3===a.nodeType?a.length:a.childNodes.length);return{node:a,offset:b}}function h(a){for(var b=
a;b;){if(1===b.nodeType&&V(b))return"false"===V(b)?b:a;b=b.parentNode}return a}function k(a,c,d){function f(a,b){var c,g;g=a.nodeValue;"undefined"==typeof b&&(b=d?g.length:0);d?(c=g.lastIndexOf(" ",b),g=g.lastIndexOf("\u00a0",b),c=c>g?c:g,-1===c||e||c++):(c=g.indexOf(" ",b),g=g.indexOf("\u00a0",b),c=-1!==c&&(-1===g||c<g)?c:g);return c}var g,h;if(3===a.nodeType){c=f(a,c);if(-1!==c)return{container:a,offset:c};h=a}for(a=new L(a,y.getParent(a,P)||b.getBody());g=a[d?"prev":"next"]();)if(3===g.nodeType){if(h=
g,c=f(g),-1!==c)return{container:g,offset:c}}else if(P(g))break;if(h)return c=d?0:h.length,{container:h,offset:c}}function m(b,e){var f,g,h,k;3==b.nodeType&&0===b.nodeValue.length&&b[e]&&(b=b[e]);f=c(b);for(g=0;g<f.length;g++)for(h=0;h<d.length;h++)if(k=d[h],!("collapsed"in k&&k.collapsed!==a.collapsed)&&y.is(f[g],k.selector))return f[g];return b}function n(a,b,e){var f;d[0].wrapper||(f=y.getParent(a,d[0].block));f||(f=y.getParent(3==a.nodeType?a.parentNode:a,P));f&&d[0].wrapper&&(f=c(f,"ul,ol").reverse()[0]||
f);if(!f)for(f=a;f[b]&&!P(f[b])&&(f=f[b],!p(f,"br")););return f||a}var l,q=a.startContainer,x=a.startOffset,z=a.endContainer,u=a.endOffset;1==q.nodeType&&q.hasChildNodes()&&(l=q.childNodes.length-1,q=q.childNodes[x>l?l:x],3==q.nodeType&&(x=0));1==z.nodeType&&z.hasChildNodes()&&(l=z.childNodes.length-1,z=z.childNodes[u>l?l:u-1],3==z.nodeType&&(u=z.nodeValue.length));q=h(q);z=h(z);if(A(q.parentNode)||A(q))q=A(q)?q:q.parentNode,q=q.nextSibling||q,3==q.nodeType&&(x=0);if(A(z.parentNode)||A(z))z=A(z)?
z:z.parentNode,z=z.previousSibling||z,3==z.nodeType&&(u=z.length);if(d[0].inline){if(a.collapsed){if(l=k(q,x,!0))q=l.container,x=l.offset;if(l=k(z,u))z=l.container,u=l.offset}l=g(z,u);if(l.node){for(;l.node&&0===l.offset&&l.node.previousSibling;)l=g(l.node.previousSibling);l.node&&0<l.offset&&3===l.node.nodeType&&" "===l.node.nodeValue.charAt(l.offset-1)&&1<l.offset&&(z=l.node,z.splitText(l.offset-1))}}if(d[0].inline||d[0].block_expand)d[0].inline&&3==q.nodeType&&0!==x||(q=f(!0)),d[0].inline&&3==
z.nodeType&&u!==z.nodeValue.length||(z=f());d[0].selector&&!1!==d[0].expand&&!d[0].inline&&(q=m(q,"previousSibling"),z=m(z,"nextSibling"));if(d[0].block||d[0].selector)q=n(q,"previousSibling"),z=n(z,"nextSibling"),d[0].block&&(P(q)||(q=f(!0)),P(z)||(z=f()));1==q.nodeType&&(x=Q(q),q=q.parentNode);1==z.nodeType&&(u=Q(z)+1,z=z.parentNode);return{startContainer:q,startOffset:x,endContainer:z,endOffset:u}}function t(a,b,c,d){var e,f,g;if(!l(c,a))return!1;if("all"!=a.remove)for(G(a.styles,function(a,e){a=
q(a,b);"number"===typeof e&&(e=a,d=0);d&&!p(n(d,e),a)||y.setStyle(c,e,"");g=1}),g&&""==y.getAttrib(c,"style")&&(c.removeAttribute("style"),c.removeAttribute("data-mce-style")),G(a.attributes,function(a,e){var f;a=q(a,b);"number"===typeof e&&(e=a,d=0);if(!d||p(y.getAttrib(d,e),a)){if("class"==e&&(a=y.getAttrib(c,e))&&(f="",G(a.split(/\s+/),function(a){/mce\w+/.test(a)&&(f+=(f?" ":"")+a)}),f)){y.setAttrib(c,e,f);return}"class"==e&&c.removeAttribute("className");M.test(e)&&c.removeAttribute("data-mce-"+
e);c.removeAttribute(e)}}),G(a.classes,function(a){a=q(a,b);d&&!y.hasClass(d,a)||y.removeClass(c,a)}),f=y.getAttribs(c),e=0;e<f.length;e++)if(0!==f[e].nodeName.indexOf("_"))return!1;if("none"!=a.remove)return u(c,a),!0}function u(b,c){function d(a,b,c){a=B(a,b,c);return!a||"BR"==a.nodeName||P(a)}var e=b.parentNode,f;c.block&&(aa?e==y.getRoot()&&(c.list_block&&p(b,c.list_block)||G(a.grep(b.childNodes),function(a){N(aa,a.nodeName.toLowerCase())?f?f.appendChild(a):f=v(a,aa):f=0})):P(b)&&!P(e)&&(d(b,
!1)||d(b.firstChild,!0,1)||b.insertBefore(y.create("br"),b.firstChild),d(b,!0)||d(b.lastChild,!1,1)||b.appendChild(y.create("br"))));c.selector&&c.inline&&!p(c.inline,b)||y.remove(b,1)}function B(a,b,c){if(a)for(b=b?"nextSibling":"previousSibling",a=c?a:a[b];a;a=a[b])if(1==a.nodeType||!r(a))return a}function A(a){return a&&1==a.nodeType&&"bookmark"==a.getAttribute("data-mce-type")}function D(b,c){function d(a,b){function c(a){var b={};G(y.getAttribs(a),function(c){c=c.nodeName.toLowerCase();0!==c.indexOf("_")&&
"style"!==c&&(b[c]=y.getAttrib(a,c))});return b}function e(a,b){var c,d;for(d in a)if(a.hasOwnProperty(d)){c=b[d];if(c===O||a[d]!=c)return!1;delete b[d]}for(d in b)if(b.hasOwnProperty(d))return!1;return!0}return a.nodeName==b.nodeName&&e(c(a),c(b))&&e(y.parseStyle(y.getAttrib(a,"style")),y.parseStyle(y.getAttrib(b,"style")))?!0:!1}function e(a,b){for(f=a;f&&(3!=f.nodeType||0===f.nodeValue.length);f=f[b])if(1==f.nodeType&&!A(f))return f;return a}var f,g;if(b&&c&&(b=e(b,"previousSibling"),c=e(c,"nextSibling"),
d(b,c))){for(f=b.nextSibling;f&&f!=c;)g=f,f=f.nextSibling,b.appendChild(g);y.remove(c);G(a.grep(c.childNodes),function(a){b.appendChild(a)});return b}return c}function C(a,c){var d,e,f;d=a[c?"startContainer":"endContainer"];e=a[c?"startOffset":"endOffset"];1==d.nodeType&&(f=d.childNodes.length-1,!c&&e&&e--,d=d.childNodes[e>f?f:e]);3===d.nodeType&&c&&e>=d.nodeValue.length&&(d=(new L(d,b.getBody())).next()||d);3!==d.nodeType||c||0!==e||(d=(new L(d,b.getBody())).prev()||d);return d}function z(c,d,f){function m(a){var c=
y.create("span",{id:"_mce_caret","data-mce-bogus":!0,style:u?"color:red":""});a&&c.appendChild(b.getDoc().createTextNode(J));return c}function l(a,b){for(;a;){if(3===a.nodeType&&a.nodeValue!==J||1<a.childNodes.length)return!1;b&&1===a.nodeType&&b.push(a);a=a.firstChild}return!0}function n(a){for(;a;){if("_mce_caret"===a.id)return a;a=a.parentNode}}function p(a){var b;if(a)for(b=new L(a,a),a=b.current();a;a=b.next())if(3===a.nodeType)return a}function q(a,b){var c,d;if(a)d=I.getRng(!0),l(a)?(!1!==
b&&(d.setStartBefore(a),d.setEndBefore(a)),y.remove(a)):(c=p(a),c.nodeValue.charAt(0)===J&&c.deleteData(0,1),y.remove(a,1)),I.setRng(d);else if(a=n(I.getStart()),!a)for(;a=y.get("_mce_caret");)q(a,!1)}function A(){var a,b,c,h,k;a=I.getRng(!0);h=a.startOffset;k=a.startContainer.nodeValue;(b=n(I.getStart()))&&(c=p(b));k&&0<h&&h<k.length&&/\w/.test(k.charAt(h))&&/\w/.test(k.charAt(h-1))?(b=I.getBookmark(),a.collapse(!0),a=x(a,e(d)),a=U.split(a),g(d,f,a),I.moveToBookmark(b)):(b&&c.nodeValue===J||(b=m(!0),
c=b.firstChild,a.insertNode(b),h=1),g(d,f,b),I.setCursorLocation(c,h))}function z(){var a=I.getRng(!0),b,c,g,l,n,p=[];b=a.startContainer;c=a.startOffset;g=b;if(3==b.nodeType){if(c!=b.nodeValue.length||b.nodeValue===J)l=!0;g=g.parentNode}for(;g;){if(k(g,d,f)){n=g;break}g.nextSibling&&(l=!0);p.push(g);g=g.parentNode}if(n)if(l)g=I.getBookmark(),a.collapse(!0),a=x(a,e(d),!0),a=U.split(a),h(d,f,a),I.moveToBookmark(g);else{g=b=m();for(a=p.length-1;0<=a;a--)g.appendChild(y.clone(p[a],!1)),g=g.firstChild;
g.appendChild(y.doc.createTextNode(J));g=g.firstChild;y.insertAfter(b,n);I.setCursorLocation(g,1)}}function r(){var b;(b=n(I.getStart()))&&!y.isEmpty(b)&&a.walk(b,function(a){1!=a.nodeType||"_mce_caret"===a.id||y.isEmpty(a)||y.setAttrib(a,"data-mce-bogus",null)},"childNodes")}var u=b.settings.caret_debug;self._hasCaretEvents||(b.onBeforeGetContent.addToTop(function(){var a=[],b;if(l(n(I.getStart()),a))for(b=a.length;b--;)y.setAttrib(a[b],"data-mce-bogus","1")}),a.each(["onMouseUp","onKeyUp"],function(a){b[a].addToTop(function(){q();
r()})}),b.onKeyDown.addToTop(function(a,b){var c=b.keyCode;8!=c&&37!=c&&39!=c||q(n(I.getStart()));r()}),I.onSetContent.add(r),self._hasCaretEvents=!0);"apply"==c?A():z()}function K(a){var b=a.startContainer,c=a.startOffset,d,e;3==b.nodeType&&c>=b.nodeValue.length&&(c=Q(b),b=b.parentNode,d=!0);if(1==b.nodeType)for(e=b.childNodes,b=e[Math.min(c,e.length-1)],b=new L(b,y.getParent(b,y.isBlock)),(c>e.length-1||d)&&b.next(),c=b.current();c;c=b.next())if(3==c.nodeType&&!r(c)){d=y.create("a",null,J);c.parentNode.insertBefore(d,
c);a.setStart(c,0);I.setRng(a);y.remove(d);break}}var E={},G=a.each,y=b.dom,I=b.selection,L=a.dom.TreeWalker,U=new a.dom.RangeUtils(y),N=b.schema.isValidChild,P=y.isBlock,aa=b.settings.forced_root_block,Q=y.nodeIndex,J=a.isGecko?"\u200b":"\ufeff",M=/^(src|href|style)$/,S,O,V=y.getContentEditable,H=function(a){var c;b.dom.getParent(a,function(a){return(c=b.dom.getStyle(a,"text-decoration"))&&"none"!==c});return c},X=function(a){var c;1===a.nodeType&&a.parentNode&&1===a.parentNode.nodeType&&(c=H(a.parentNode),
b.dom.getStyle(a,"color")&&c?b.dom.setStyle(a,"text-decoration",c):b.dom.getStyle(a,"textdecoration")===c&&b.dom.setStyle(a,"text-decoration",null))};a.extend(this,{get:e,register:d,apply:g,remove:h,toggle:function(a,b,c){var d=e(a);!m(a,b,c)||"toggle"in d[0]&&!d[0].toggle?g(a,b,c):h(a,b,c)},match:m,matchAll:function(a,b){var c,d=[],e={};c=I.getStart();y.getParent(c,function(c){var f,g;for(f=0;f<a.length;f++)g=a[f],!e[g]&&k(c,g,b)&&(e[g]=!0,d.push(g))},y.getRoot());return d},matchNode:k,canApply:function(a){a=
e(a);var b,d,f,g;if(a)for(b=I.getStart(),b=c(b),f=a.length-1;0<=f;f--){g=a[f].selector;if(!g)return!0;for(d=b.length-1;0<=d;d--)if(y.is(b[d],g))return!0}return!1},formatChanged:function(a,d){var e;S||(S={},e={},b.onNodeChange.addToTop(function(a,b,d){var f=c(d),g={};G(S,function(a,b){G(f,function(c){if(k(c,b,{},!0))return e[b]||(G(a,function(a){a(!0,{node:c,format:b,parents:f})}),e[b]=a),g[b]=a,!1})});G(e,function(a,b){g[b]||(delete e[b],G(a,function(a){a(!1,{node:d,format:b,parents:f})}))})}));G(a.split(","),
function(a){S[a]||(S[a]=[]);S[a].push(d)});return this}});(function(){d({alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",
marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignfull:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},
{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",
attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(a){return!0},onformat:function(a,b,c){G(c,function(b,c){y.setAttrib(a,c,b)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",
attributes:["style","class"],split:!1,expand:!1,deep:!0}]});G("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(a){d(a,{block:a,remove:"all"})});d(b.settings.formats)})();(function(){b.addShortcut("ctrl+b","bold_desc","Bold");b.addShortcut("ctrl+i","italic_desc","Italic");b.addShortcut("ctrl+u","underline_desc","Underline");for(var a=1;6>=a;a++)b.addShortcut("ctrl+"+a,"",["FormatBlock",!1,"h"+a]);b.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]);b.addShortcut("ctrl+8",
"",["FormatBlock",!1,"div"]);b.addShortcut("ctrl+9","",["FormatBlock",!1,"address"])})()}})(tinymce);
tinymce.onAddEditor.add(function(a,b){function c(b,c){a.each(c,function(a,c){a&&g.setStyle(b,c,a)});g.rename(b,"span")}function f(c,d){g=c.dom;h.convert_fonts_to_spans&&a.each(g.select("font,u,strike",d.node),function(a){e[a.nodeName.toLowerCase()](b.dom,a)})}var e,d,g,h=b.settings;h.inline_styles&&(d=a.explode(h.font_size_legacy_values),e={font:function(a,b){c(b,{backgroundColor:b.style.backgroundColor,color:b.color,fontFamily:b.face,fontSize:d[parseInt(b.size,10)-1]})},u:function(a,b){c(b,{textDecoration:"underline"})},
strike:function(a,b){c(b,{textDecoration:"line-through"})}},b.onPreProcess.add(f),b.onSetContent.add(f),b.onInit.add(function(){b.selection.onSetContent.add(f)}))});
(function(a){var b=a.dom.TreeWalker;a.EnterKey=function(c){function f(f){function l(a){return a&&e.isBlock(a)&&!/^(TD|TH|CAPTION|FORM)$/.test(a.nodeName)&&!/^(fixed|absolute)/i.test(a.style.position)&&"true"!==e.getContentEditable(a)}function p(b){var c;a.isIE&&e.isBlock(b)&&(c=d.getRng(),b.appendChild(e.create("span",null,"\u00a0")),d.select(b),b.lastChild.outerHTML="",d.setRng(c))}function n(a){for(var b=[],c;a=a.firstChild;){if(e.isBlock(a))return;1!=a.nodeType||k[a.nodeName.toLowerCase()]||b.push(a)}for(c=
b.length;c--;)a=b[c],(!a.hasChildNodes()||a.firstChild==a.lastChild&&""===a.firstChild.nodeValue)&&e.remove(a)}function q(a){var f,g,h,m=a,l;h=e.createRng();if(a.hasChildNodes()){for(f=new b(a,a);g=f.current();){if(3==g.nodeType){h.setStart(g,0);h.setEnd(g,0);break}if(k[g.nodeName.toLowerCase()]){h.setStartBefore(g);h.setEndBefore(g);break}m=g;f.next()}g||(h.setStart(m,0),h.setEnd(m,0))}else if("BR"==a.nodeName)if(a.nextSibling&&e.isBlock(a.nextSibling)){if(!I||9>I)l=e.create("br"),a.parentNode.insertBefore(l,
a);h.setStartBefore(a);h.setEndBefore(a)}else h.setStartAfter(a),h.setEndAfter(a);else h.setStart(a,0),h.setEnd(a,0);d.setRng(h);e.remove(l);f=e.getViewPort(c.getWin());a=e.getPos(a).y;(a<f.y||a+25>f.y+f.h)&&c.getWin().scrollTo(0,a<f.y?a:a-f.h+25)}function r(b){var c=E,d,f;f=b=b||"TABLE"==P?e.create(b||Q):y.cloneNode(!1);if(!1!==g.keep_styles){do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(c.nodeName)&&(d=c.cloneNode(!1),e.setAttrib(d,"id",""),b.hasChildNodes()?d.appendChild(b.firstChild):f=d,b.appendChild(d));
while(c=c.parentNode)}a.isIE||(f.innerHTML="<br>");return b}function v(a){var c,d;if(3==E.nodeType&&(a?0<G:G<E.nodeValue.length))return!1;if(E.parentNode==y&&J&&!a||a&&1==E.nodeType&&E==y.firstChild)return!0;if("TABLE"===E.nodeName||E.previousSibling&&"TABLE"==E.previousSibling.nodeName)return J&&!a||!J&&a;c=new b(E,y);for(3==E.nodeType&&(a&&0==G?c.prev():a||G!=E.nodeValue.length||c.next());d=c.current();){if(1===d.nodeType){if(!d.getAttribute("data-mce-bogus")&&(d=d.nodeName.toLowerCase(),k[d]&&
"br"!==d))return!1}else if(3===d.nodeType&&!/^[ \t\r\n]*$/.test(d.nodeValue))return!1;a?c.prev():c.next()}return!0}function x(a,b){var c,d,f,g;c=Q||"P";d=e.getParent(a,e.isBlock);if(!d||!l(d)){d=d||K;if(!d.hasChildNodes())return c=e.create(c),d.appendChild(c),C.setStart(c,0),C.setEnd(c,0),c;for(g=a;g.parentNode!=d;)g=g.parentNode;for(;g&&!e.isBlock(g);)f=g,g=g.previousSibling;if(f){c=e.create(c);f.parentNode.insertBefore(c,f);for(g=f;g&&!e.isBlock(g);)d=g.nextSibling,c.appendChild(g),g=d;C.setStart(a,
b);C.setEnd(a,b)}}return a}function t(){function a(b){for(var c=N[b?"firstChild":"lastChild"];c&&1!=c.nodeType;)c=c[b?"nextSibling":"previousSibling"];return c===y}L=Q?r(Q):e.create("BR");a(!0)&&a()?e.replace(L,N):a(!0)?N.parentNode.insertBefore(L,N):a()?(e.insertAfter(L,N),p(L)):(z=C.cloneRange(),z.setStartAfter(y),z.setEndAfter(N),U=z.extractContents(),e.insertAfter(U,N),e.insertAfter(L,N));e.remove(y);q(L);h.add()}function u(){var c,f;if(E&&3==E.nodeType&&G>=E.nodeValue.length){if(c=!a.isIE){a:{c=
new b(E,y);for(var g;g=c.current();){if("BR"==g.nodeName){c=!0;break a}c.next()}c=void 0}c=!c}c&&(c=e.create("br"),C.insertNode(c),C.setStartAfter(c),C.setEndAfter(c),f=!0)}c=e.create("br");C.insertNode(c);a.isIE&&"PRE"==P&&(!I||8>I)&&c.parentNode.insertBefore(e.doc.createTextNode("\r"),c);f?(C.setStartBefore(c),C.setEndBefore(c)):(C.setStartAfter(c),C.setEndAfter(c));d.setRng(C);h.add()}function B(a){do 3===a.nodeType&&(a.nodeValue=a.nodeValue.replace(/^[\r\n]+/,"")),a=a.firstChild;while(a)}function A(a){for(var b=
e.getRoot(),c;a!==b&&"false"!==e.getContentEditable(a);)"true"===e.getContentEditable(a)&&(c=a),a=a.parentNode;return a!==b?c:b}function D(b){var c;a.isIE||(b.normalize(),(c=b.lastChild)&&!/^(left|right)$/gi.test(e.getStyle(c,"float",!0))||e.add(b,"br"))}var C=d.getRng(!0),z,K,E,G,y,I,L,U,N,P,aa,Q,J;if(!C.collapsed)c.execCommand("Delete");else if(!f.isDefaultPrevented()&&(E=C.startContainer,G=C.startOffset,Q=(Q=g.forced_root_block)?Q.toUpperCase():"",I=e.doc.documentMode,1==E.nodeType&&E.hasChildNodes()&&
(J=G>E.childNodes.length-1,E=E.childNodes[Math.min(G,E.childNodes.length-1)]||E,G=J&&3==E.nodeType?E.nodeValue.length:0),K=A(E)))if(h.beforeChange(),e.isBlock(K)||K==e.getRoot()){if(Q&&!f.shiftKey||!Q&&f.shiftKey)E=x(E,G);N=(y=e.getParent(E,e.isBlock))?e.getParent(y.parentNode,e.isBlock):null;P=y?y.nodeName.toUpperCase():"";aa=N?N.nodeName.toUpperCase():"";if("LI"==P&&e.isEmpty(y)){if(/^(UL|OL|LI)$/.test(N.parentNode.nodeName))return!1;t()}else{if("PRE"==P&&!1!==g.br_in_pre){if(!f.shiftKey){u();return}}else if(!Q&&
!f.shiftKey&&"LI"!=P||Q&&f.shiftKey){u();return}Q=Q||"P";v()?(L=/^(H[1-6]|PRE)$/.test(P)&&"HGROUP"!=aa?r(Q):r(),g.end_container_on_empty_block&&l(N)&&e.isEmpty(y)?L=e.split(N,y):e.insertAfter(L,y),q(L)):v(!0)?(L=y.parentNode.insertBefore(r(),y),p(L)):(z=C.cloneRange(),z.setEndAfter(y),U=z.extractContents(),B(U),L=U.firstChild,e.insertAfter(U,y),n(L),D(y),q(L));e.setAttrib(L,"id","");h.add()}}else Q&&!f.shiftKey||u()}var e=c.dom,d=c.selection,g=c.settings,h=c.undoManager,k=c.schema.getNonEmptyElements();
c.onKeyDown.add(function(a,b){13==b.keyCode&&!1!==f(b)&&b.preventDefault()})}})(tinymce);function updateSelectionBookmark(a){a.updatedSelectionBookmark=a.selection.getBookmark(1)}
function startEditor(a,b,c,f,e,d,g){var h="";690>document.body.clientWidth&&(h="95%",jQ("#subject").width("95%"));var k="removeformat, fontselect, fontsizeselect, forecolor, |, bold, italic, underline, |, justifyleft, justifycenter, justifyright, |, bullist, numlist, |, customlink, imagebutton, videobutton, |";""!=b&&(k+=",wrapcodebutton, wrapquotebutton");""!=c&&(k+=", emotions");""==f&&(k+=", code");""!=e&&(k+=", iespell");jQ("#code_button_tce").click(function(){CodeTags("CODE");jQ("#dialog_input_code_value").val("").empty();
jQ("#code_popup").modal("hide")});jQ("#video_list a").click(function(){window.open(jQ(this).attr("href"));return!1});parseInt(navigator.appVersion.split("MSIE")[1]);tinyMCE.baseURL="//"+window.location.hostname+"/textarea/tinymce/";tinyMCE.init({mode:"exact",theme:"advanced",elements:a,editor_css:"/css/editor.css?v1.01",gecko_spellcheck:!0,relative_urls:!1,plugins:"paste",theme_advanced_buttons1:k,theme_advanced_buttons2:"",theme_advanced_buttons3:"",theme_advanced_buttons4:"",theme_advanced_toolbar_location:"top",
theme_advanced_toolbar_align:"left",theme_advanced_resizing:!0,theme_advanced_resizing_use_cookie:!1,forced_root_block:!1,force_br_newlines:!0,force_p_newlines:!1,extended_valid_elements:"img[id|style|rel|rev|charset|hreflang|src|class|tabindex|alt|title]",content_css:"/css/content.css",width:h,auto_focus:g,setup:function(b){b.onPreInit.add(function(){b.schema.addValidElements("embed[id|style|width|height|type|src]")});b.onBeforeGetContent.add(function(b,c){"signature"!=a&&tinymce.each(b.dom.select("img"),
function(a){if(!jQ(a).parent("a").length&&!jQ(this).hasClass("emoticon")){var c=b.dom.getAttrib(a,"src");jQ(a).wrap('<a href="'+c+'" rel="lightbox"></a>')}});b.dom.addClass(b.dom.select("img"),"bbc_img");b.dom.setAttrib(b.dom.select("a"),"target","_blank");b.selection.select(b.getBody(),!0);b.selection.collapse(!1);b.updatedSelectionBookmark=b.selection.getBookmark(1)});b.onSaveContent.add(function(a,b){b.content=cleanEditorHtml(a.getContent())});b.onEvent.add(function(a,b){a.updatedSelectionBookmark=
a.selection.getBookmark(1)});b.addButton("videobutton",{title:"Insert Video",onclick:function(){jQ("#video_popup").modal({backdrop:!0,keyboard:!0});jQ("#video_popup").modal("show");return!1}});b.addButton("emotions",{title:"Insert Emoticon",onclick:function(){jQ("#smilie_popup").modal({backdrop:!0,keyboard:!0});jQ("#smilie_inner_content").html()?(jQ("#divSmilieInserted").hide(),jQ("#smilie_popup").modal("show")):jQ.ajax({type:"POST",url:"/cgi/members/smilie.cgi",data:{username:smilie_user,tool:tool},
success:function(a){jQ("#smilie_inner_content").html(a);jQ("#smilie_popup").modal("show")}});return!1}});b.addButton("imagebutton",{title:"Insert Photo",onclick:function(){if(0<jQ("[id^='insertimagemodal']").length)openInsertImageDialog(d);else{var a="";document.getElementById("fancy_attach_")&&(a='\n(Or use the "Attach files" link to upload a photo.)');a=prompt("Please enter the URL of your photo:"+a,"http://");null!=a&&""!=a&&this.execCommand("mceInsertContent",!1,'<a href="'+a+'" rel="lightbox"><img src="'+
a+'" class="bbc_img"></a>',{skip_undo:0})}}});b.addButton("customlink",{title:"Insert Link",onclick:function(){var a=this.selection.getContent(),c=a,d=b.selection.getNode(),e;if(d&&"A"==d.nodeName)e=!0,a=prompt("Please enter the URL of your link:\n(Press Cancel to unlink)",d.href);else{var f="http://",g=/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/;a&&jQ&&g.test(a)&&(f=jQ("<div/>").html(a).text());a=prompt("Please enter the URL of your link:",f)}if(null!=
a&&""!=a&&"http://"!=a)if(/^(f|ht)tps?:\/\//i.test(a)||(a="http://"+a),e)d.href=a;else{if(""==c||null==c)c=a;this.execCommand("mceInsertContent",!1,'<a href="'+a+'">'+c+"</a>",{skip_undo:0})}else this.execCommand("UnLink",!1,null)}});b.addButton("wrapquotebutton",{title:"Wrap [QUOTE] tags around selected text",onclick:function(){wrapTags("QUOTE")}});b.addButton("wrapcodebutton",{title:"Wrap [CODE] tags around selected text",onclick:function(){tinyMCE.activeEditor.selection.getContent()?wrapTags("CODE"):
jQ("#code_popup").modal("show")}});b.addButton("iespell",{title:"Spell Check",onclick:function(){openSpellChecker(this.getElement())}});b.onInit.add(function(b){jQ("#adv_toolbar").val("1");jQ("#"+a).attr("firstfocus")&&b.focus()})}})}jQ(document).on("click","#insert_video_url",function(){doOK()&&jQ("#video_popup").modal("hide")});function wrapTags(a){var b=tinyMCE.activeEditor.selection.getContent();tinyMCE.activeEditor.selection.setContent("["+a+"]"+b+"[/"+a+"]")}
function CodeTags(a){var b=jQ("#dialog_input_code_value").val(),b=escapeHTMLtag(b),b="["+a+"]<br>"+b+"<br>[/"+a+"]";tinyMCE.activeEditor.focus();tinyMCE.activeEditor.selection.setContent(b)}function escapeHTMLtag(a){a=a.replace(/&/g,"&amp;");a=a.replace(/>/g,"&gt;");a=a.replace(/</g,"&lt;");a=a.replace(/"/g,"&quot;");a=a.replace(/ /g,"&nbsp;");a=a.replace(/\t/g,"&nbsp;&nbsp;");return a=a.replace(/\n\n|\n/g,"<br />")}
function doOK(){var a=jQ("#dialog_input_value").val();if(""==a||"http://"==a)alert("Video URL must be specified.");else{if(ValidateURL(a))return a="[video]"+a+"[/video]",tinyMCE.activeEditor.selection.moveToBookmark(tinyMCE.activeEditor.updatedSelectionBookmark),tinyMCE.execCommand("mceInsertContent",!1,a),jQ("#dialog_input_value").val("http://"),1;alert("Please enter a valid URL. Supported videos include YouTube, Vimeo, Dailymotion, Metacafe, Facebook. ")}jQ("#dialog_input_value").focus()}
function ValidateURL(a){return/youtube|youtu.be|vimeo|dailymotion|metacafe|facebook/ig.test(a)?!0:!1}function cleanEditorHtml(a){a=removeLightboxAnchor(a);a=addAttribute(a);a=removeSmiliesLightbox(a);return a=a.replace(/(\r\n|\n|\r)/gm,"")}
function addAttribute(a){var b=document.createElement("div");b.innerHTML=a;a=b.getElementsByTagName("a");for(var c=0;c<a.length;c++){var f=a[c].getAttribute("rel");"lightbox"==f||"lightbox[]"==f||"undefined"!=typeof prevent_nofollow&&("undefined"==typeof prevent_nofollow||prevent_nofollow)||a[c].setAttribute("rel","nofollow")}return b.innerHTML}
function removeLightboxAnchor(a){var b=document.createElement("div");b.innerHTML=a;a=b.getElementsByTagName("img");for(var c=0;c<a.length;c++){var f=a[c].parentNode;"A"!=f.tagName&&"a"!=f.tagName||a[c].removeAttribute("rel")}return b.innerHTML}function removeSmiliesLightbox(a){var b=document.createElement("div");b.innerHTML=a;a=b.getElementsByTagName("img");for(var c=0;c<a.length;c++)jQ(a[c]).hasClass("emoticon")&&a[c].removeAttribute("rel");return b.innerHTML}
function mceInsertContent(a){var b=tinyMCE.activeEditor;b.selection.moveToBookmark(b.updatedSelectionBookmark);tinyMCE.execCommand("mceInsertContent",!1,a);b.updatedSelectionBookmark=b.selection.getBookmark(1)}function openSpellChecker(a){(new spellChecker(a)).openChecker()}
jQ(document).ready(function(){if(0<jQ(".mceEditor").length){var a=jQ(".mceEditor").attr("data-tinymce-focus"),b=jQ(".mceEditor").attr("data-objname"),c=jQ(".mceEditor").attr("data-easycode"),f=jQ(".mceEditor").attr("data-smilies"),e=jQ(".mceEditor").attr("data-block_html"),d=jQ(".mceEditor").attr("data-spellcheck"),g=jQ(".mceEditor").attr("data-insert-image-btn"),h=jQ(".mceEditor").attr("data-wysiwyg"),k=jQ(".mceEditor").attr("data-toolbarCompatible");jQ(".mceEditor").each(function(){var a=jQ(this).val();
-1<a.indexOf('<br data-mce-bogus="1"')&&(a=a.replace(/<br data-mce-bogus="1">/g,""),jQ(this).val(a))});if("both"==h&&0<k)if("focus"==a)jQ(document).on("click",".mceEditor",function(){(b=jQ(this).attr("data-objname"))&&startEditor(b,c,f,e,d,g,b)});else startEditor(b,c,f,e,d,g)}});(function(a,b){"object"===typeof exports&&"undefined"!==typeof module?module.exports=b():"function"===typeof define&&define.amd?define(b):a.moment=b()})(this,function(){function a(){return ob.apply(null,arguments)}function b(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function c(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function f(a,b){var c=[],d;for(d=0;d<a.length;++d)c.push(b(a[d],d));return c}function e(a,b){return Object.prototype.hasOwnProperty.call(a,
b)}function d(a,b){for(var c in b)e(b,c)&&(a[c]=b[c]);e(b,"toString")&&(a.toString=b.toString);e(b,"valueOf")&&(a.valueOf=b.valueOf);return a}function g(a,b,c,d){return lb(a,b,c,d,!0).utc()}function h(a){null==a._pf&&(a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1});return a._pf}function k(a){if(null==a._isValid){var b=h(a);a._isValid=!isNaN(a._d.getTime())&&0>b.overflow&&!b.empty&&!b.invalidMonth&&
!b.invalidWeekday&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated;a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function m(a){var b=g(NaN);null!=a?d(h(b),a):h(b).userInvalidated=!0;return b}function l(a){return void 0===a}function p(a,b){var c,d,e;l(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject);l(b._i)||(a._i=b._i);l(b._f)||(a._f=b._f);l(b._l)||(a._l=b._l);l(b._strict)||(a._strict=b._strict);l(b._tzm)||(a._tzm=
b._tzm);l(b._isUTC)||(a._isUTC=b._isUTC);l(b._offset)||(a._offset=b._offset);l(b._pf)||(a._pf=h(b));l(b._locale)||(a._locale=b._locale);if(0<Va.length)for(c in Va)d=Va[c],e=b[d],l(e)||(a[d]=e);return a}function n(b){p(this,b);this._d=new Date(null!=b._d?b._d.getTime():NaN);!1===Wa&&(Wa=!0,a.updateOffset(this),Wa=!1)}function q(a){return a instanceof n||null!=a&&null!=a._isAMomentObject}function r(a){return 0>a?Math.ceil(a):Math.floor(a)}function v(a){a=+a;var b=0;0!==a&&isFinite(a)&&(b=r(a));return b}
function x(a,b,c){var d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),f=0,g;for(g=0;g<d;g++)(c&&a[g]!==b[g]||!c&&v(a[g])!==v(b[g]))&&f++;return f+e}function t(b){!1===a.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function u(a,b){var c=!0;return d(function(){c&&(t(a+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+Error().stack),c=!1);return b.apply(this,arguments)},b)}function B(a,b){pb[a]||(t(b),
pb[a]=!0)}function A(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function D(a,b){var c=d({},a),f;for(f in b)e(b,f)&&("[object Object]"===Object.prototype.toString.call(a[f])&&"[object Object]"===Object.prototype.toString.call(b[f])?(c[f]={},d(c[f],a[f]),d(c[f],b[f])):null!=b[f]?c[f]=b[f]:delete c[f]);return c}function C(a){null!=a&&this.set(a)}function z(a){return a?a.toLowerCase().replace("_","-"):a}function K(a){var b=null;if(!ba[a]&&"undefined"!==typeof module&&
module&&module.exports)try{b=Ga._abbr,require("./locale/"+a),E(b)}catch(c){}return ba[a]}function E(a,b){var c;a&&(c=l(b)?y(a):G(a,b))&&(Ga=c);return Ga._abbr}function G(a,b){if(null!==b)return b.abbr=a,null!=ba[a]?(B("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale"),b=D(ba[a]._config,b)):null!=b.parentLocale&&(null!=ba[b.parentLocale]?b=D(ba[b.parentLocale]._config,
b):B("parentLocaleUndefined","specified parentLocale is not defined yet")),ba[a]=new C(b),E(a),ba[a];delete ba[a];return null}function y(a){var c;a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr);if(!a)return Ga;if(!b(a)){if(c=K(a))return c;a=[a]}a:{c=0;for(var d,e,f,g;c<a.length;){g=z(a[c]).split("-");d=g.length;for(e=(e=z(a[c+1]))?e.split("-"):null;0<d;){if(f=K(g.slice(0,d).join("-"))){a=f;break a}if(e&&e.length>=d&&x(g,e,!0)>=d-1)break;d--}c++}a=null}return a}function I(a,b){var c=a.toLowerCase();
Aa[c]=Aa[c+"s"]=Aa[b]=a}function L(a){return"string"===typeof a?Aa[a]||Aa[a.toLowerCase()]:void 0}function U(a){var b={},c,d;for(d in a)e(a,d)&&(c=L(d))&&(b[c]=a[d]);return b}function N(b,c){return function(d){if(null!=d){if(this.isValid())this._d["set"+(this._isUTC?"UTC":"")+b](d);a.updateOffset(this,c);return this}return P(this,b)}}function P(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function aa(a,b){var c;if("object"===typeof a)for(c in a)this.set(c,a[c]);else if(a=L(a),A(this[a]))return this[a](b);
return this}function Q(a,b,c){var d=""+Math.abs(a);return(0<=a?c?"+":"":"-")+Math.pow(10,Math.max(0,b-d.length)).toString().substr(1)+d}function J(a,b,c,d){var e=d;"string"===typeof d&&(e=function(){return this[d]()});a&&(xa[a]=e);b&&(xa[b[0]]=function(){return Q(e.apply(this,arguments),b[1],b[2])});c&&(xa[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function M(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function S(a){var b=a.match(qb),
c,d;c=0;for(d=b.length;c<d;c++)b[c]=xa[b[c]]?xa[b[c]]:M(b[c]);return function(e){var f="";for(c=0;c<d;c++)f+=b[c]instanceof Function?b[c].call(e,a):b[c];return f}}function O(a,b){if(!a.isValid())return a.localeData().invalidDate();b=V(b,a.localeData());Xa[b]=Xa[b]||S(b);return Xa[b](a)}function V(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Ha.lastIndex=0;0<=d&&Ha.test(a);)a=a.replace(Ha,c),Ha.lastIndex=0,--d;return a}function H(a,b,c){Ya[a]=A(b)?b:function(a,d){return a&&c?c:b}}function X(a,
b){return e(Ya,a)?Ya[a](b._strict,b._locale):new RegExp(ea(a))}function ea(a){return ca(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}function ca(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function W(a,b){var c,d=b;"string"===typeof a&&(a=[a]);"number"===typeof b&&(d=function(a,c){c[b]=v(a)});for(c=0;c<a.length;c++)Za[a[c]]=d}function na(a,b){W(a,function(a,c,d,e){d._w=d._w||{};b(a,d._w,d,e)})}function Qa(a,b){return(new Date(Date.UTC(a,
b+1,0))).getUTCDate()}function gb(a,b){var c;if(!a.isValid())return a;if("string"===typeof b)if(/^\d+$/.test(b))b=v(b);else if(b=a.localeData().monthsParse(b),"number"!==typeof b)return a;c=Math.min(a.date(),Qa(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c);return a}function hb(b){return null!=b?(gb(this,b),a.updateOffset(this,!0),this):P(this,"Month")}function ib(){function a(b,c){return c.length-b.length}var b=[],c=[],d=[],e,f;for(e=0;12>e;e++)f=g([2E3,e]),b.push(this.monthsShort(f,"")),
c.push(this.months(f,"")),d.push(this.months(f,"")),d.push(this.monthsShort(f,""));b.sort(a);c.sort(a);d.sort(a);for(e=0;12>e;e++)b[e]=ca(b[e]),c[e]=ca(c[e]),d[e]=ca(d[e]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+d.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+c.join("|")+")$","i");this._monthsShortStrictRegex=new RegExp("^("+b.join("|")+")$","i")}function Ra(a){var b;(b=a._a)&&-2===h(a).overflow&&(b=0>b[ka]||11<b[ka]?ka:1>b[ia]||b[ia]>Qa(b[ga],b[ka])?ia:0>b[da]||24<b[da]||
24===b[da]&&(0!==b[ha]||0!==b[la]||0!==b[sa])?da:0>b[ha]||59<b[ha]?ha:0>b[la]||59<b[la]?la:0>b[sa]||999<b[sa]?sa:-1,h(a)._overflowDayOfYear&&(b<ga||b>ia)&&(b=ia),h(a)._overflowWeeks&&-1===b&&(b=Sb),h(a)._overflowWeekday&&-1===b&&(b=Tb),h(a).overflow=b);return a}function nb(a){var b,c;b=a._i;var d=Ub.exec(b)||Vb.exec(b),e,f,g,k;if(d){h(a).iso=!0;b=0;for(c=Ia.length;b<c;b++)if(Ia[b][1].exec(d[1])){f=Ia[b][0];e=!1!==Ia[b][2];break}if(null==f)a._isValid=!1;else{if(d[3]){b=0;for(c=$a.length;b<c;b++)if($a[b][1].exec(d[3])){g=
(d[2]||" ")+$a[b][0];break}if(null==g){a._isValid=!1;return}}if(e||null==g){if(d[4])if(Wb.exec(d[4]))k="Z";else{a._isValid=!1;return}a._f=f+(g||"")+(k||"");Ta(a)}else a._isValid=!1}}else a._isValid=!1}function Qb(b){var c=Xb.exec(b._i);null!==c?b._d=new Date(+c[1]):(nb(b),!1===b._isValid&&(delete b._isValid,a.createFromInputFallback(b)))}function Rb(a,b,c,d,e,f,g){b=new Date(a,b,c,d,e,f,g);100>a&&0<=a&&isFinite(b.getFullYear())&&b.setFullYear(a);return b}function Da(a){var b=new Date(Date.UTC.apply(null,
arguments));100>a&&0<=a&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a);return b}function va(a){return 0===a%4&&0!==a%100||0===a%400}function Ea(a,b,c){c=7+b-c;return-((7+Da(a,0,c).getUTCDay()-b)%7)+c-1}function jb(a,b,c,d,e){c=(7+c-d)%7;d=Ea(a,d,e);d=1+7*(b-1)+c+d;0>=d?(b=a-1,a=(va(b)?366:365)+d):d>(va(a)?366:365)?(b=a+1,a=d-(va(a)?366:365)):(b=a,a=d);return{year:b,dayOfYear:a}}function za(a,b,c){var d=Ea(a.year(),b,c),d=Math.floor((a.dayOfYear()-d-1)/7)+1;1>d?(a=a.year()-1,b=d+ra(a,b,c)):d>ra(a.year(),
b,c)?(b=d-ra(a.year(),b,c),a=a.year()+1):(a=a.year(),b=d);return{week:b,year:a}}function ra(a,b,c){var d=Ea(a,b,c);b=Ea(a+1,b,c);return((va(a)?366:365)-d+b)/7}function wa(a,b,c){return null!=a?a:null!=b?b:c}function Sa(b){var c,d=[],e;if(!b._d){e=new Date(a.now());e=b._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()];if(b._w&&null==b._a[ia]&&null==b._a[ka]){var f,g,k,n,m,l;f=b._w;if(null!=f.GG||null!=f.W||null!=f.E){if(m=1,l=4,g=wa(f.GG,b._a[ga],
za(Y(),1,4).year),k=wa(f.W,1),n=wa(f.E,1),1>n||7<n)c=!0}else if(m=b._locale._week.dow,l=b._locale._week.doy,g=wa(f.gg,b._a[ga],za(Y(),m,l).year),k=wa(f.w,1),null!=f.d){if(n=f.d,0>n||6<n)c=!0}else if(null!=f.e){if(n=f.e+m,0>f.e||6<f.e)c=!0}else n=m;1>k||k>ra(g,m,l)?h(b)._overflowWeeks=!0:null!=c?h(b)._overflowWeekday=!0:(c=jb(g,k,n,m,l),b._a[ga]=c.year,b._dayOfYear=c.dayOfYear)}b._dayOfYear&&(c=wa(b._a[ga],e[ga]),b._dayOfYear>(va(c)?366:365)&&(h(b)._overflowDayOfYear=!0),c=Da(c,0,b._dayOfYear),b._a[ka]=
c.getUTCMonth(),b._a[ia]=c.getUTCDate());for(c=0;3>c&&null==b._a[c];++c)b._a[c]=d[c]=e[c];for(;7>c;c++)b._a[c]=d[c]=null==b._a[c]?2===c?1:0:b._a[c];24===b._a[da]&&0===b._a[ha]&&0===b._a[la]&&0===b._a[sa]&&(b._nextDay=!0,b._a[da]=0);b._d=(b._useUTC?Da:Rb).apply(null,d);null!=b._tzm&&b._d.setUTCMinutes(b._d.getUTCMinutes()-b._tzm);b._nextDay&&(b._a[da]=24)}}function Ta(b){if(b._f===a.ISO_8601)nb(b);else{b._a=[];h(b).empty=!0;var c=""+b._i,d,f,g,k,n,m=c.length,l=0;g=V(b._f,b._locale).match(qb)||[];for(d=
0;d<g.length;d++){k=g[d];if(f=(c.match(X(k,b))||[])[0])n=c.substr(0,c.indexOf(f)),0<n.length&&h(b).unusedInput.push(n),c=c.slice(c.indexOf(f)+f.length),l+=f.length;if(xa[k]){if(f?h(b).empty=!1:h(b).unusedTokens.push(k),n=b,null!=f&&e(Za,k))Za[k](f,n._a,n,k)}else b._strict&&!f&&h(b).unusedTokens.push(k)}h(b).charsLeftOver=m-l;0<c.length&&h(b).unusedInput.push(c);!0===h(b).bigHour&&12>=b._a[da]&&0<b._a[da]&&(h(b).bigHour=void 0);c=b._a;d=da;m=b._locale;g=b._a[da];l=b._meridiem;null!=l&&(null!=m.meridiemHour?
g=m.meridiemHour(g,l):null!=m.isPM&&((m=m.isPM(l))&&12>g&&(g+=12),m||12!==g||(g=0)));c[d]=g;Sa(b);Ra(b)}}function Ob(a){if(!a._d){var b=U(a._i);a._a=f([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)});Sa(a)}}function kb(a){var e=a._i,f=a._f;a._locale=a._locale||y(a._l);if(null===e||void 0===f&&""===e)return m({nullInput:!0});"string"===typeof e&&(a._i=e=a._locale.preparse(e));if(q(e))return new n(Ra(e));if(b(f)){var g,l,A;if(0===a._f.length)h(a).invalidFormat=
!0,a._d=new Date(NaN);else{for(e=0;e<a._f.length;e++)if(f=0,g=p({},a),null!=a._useUTC&&(g._useUTC=a._useUTC),g._f=a._f[e],Ta(g),k(g)&&(f+=h(g).charsLeftOver,f+=10*h(g).unusedTokens.length,h(g).score=f,null==A||f<A))A=f,l=g;d(a,l||g)}}else f?Ta(a):c(e)?a._d=e:Pb(a);k(a)||(a._d=null);return a}function Pb(d){var e=d._i;void 0===e?d._d=new Date(a.now()):c(e)?d._d=new Date(+e):"string"===typeof e?Qb(d):b(e)?(d._a=f(e.slice(0),function(a){return parseInt(a,10)}),Sa(d)):"object"===typeof e?Ob(d):"number"===
typeof e?d._d=new Date(e):a.createFromInputFallback(d)}function lb(a,b,c,d,e){var f={};"boolean"===typeof c&&(d=c,c=void 0);f._isAMomentObject=!0;f._useUTC=f._isUTC=e;f._l=c;f._i=a;f._f=b;f._strict=d;a=new n(Ra(kb(f)));a._nextDay&&(a.add(1,"d"),a._nextDay=void 0);return a}function Y(a,b,c,d){return lb(a,b,c,d,!1)}function mb(a,c){var d,e;1===c.length&&b(c[0])&&(c=c[0]);if(!c.length)return Y();d=c[0];for(e=1;e<c.length;++e)if(!c[e].isValid()||c[e][a](d))d=c[e];return d}function Fa(a){a=U(a);var b=
a.year||0,c=a.quarter||0,d=a.month||0,e=a.week||0,f=a.day||0;this._milliseconds=+(a.millisecond||0)+1E3*(a.second||0)+6E4*(a.minute||0)+36E5*(a.hour||0);this._days=+f+7*e;this._months=+d+3*c+12*b;this._data={};this._locale=y();this._bubble()}function Ua(a){return a instanceof Fa}function rb(a,b){J(a,0,0,function(){var a=this.utcOffset(),c="+";0>a&&(a=-a,c="-");return c+Q(~~(a/60),2)+b+Q(~~a%60,2)})}function ab(a,b){var c=(b||"").match(a)||[],c=((c[c.length-1]||[])+"").match(Yb)||["-",0,0],d=+(60*
c[1])+v(c[2]);return"+"===c[0]?d:-d}function bb(b,d){var e,f;return d._isUTC?(e=d.clone(),f=(q(b)||c(b)?+b:+Y(b))-+e,e._d.setTime(+e._d+f),a.updateOffset(e,!1),e):Y(b).local()}function sb(){return this.isValid()?this._isUTC&&0===this._offset:!1}function oa(a,b){var c=a,d=null;Ua(a)?c={ms:a._milliseconds,d:a._days,M:a._months}:"number"===typeof a?(c={},b?c[b]=a:c.milliseconds=a):(d=Zb.exec(a))?(c="-"===d[1]?-1:1,c={y:0,d:v(d[ia])*c,h:v(d[da])*c,m:v(d[ha])*c,s:v(d[la])*c,ms:v(d[sa])*c}):(d=$b.exec(a))?
(c="-"===d[1]?-1:1,c={y:ta(d[2],c),M:ta(d[3],c),w:ta(d[4],c),d:ta(d[5],c),h:ta(d[6],c),m:ta(d[7],c),s:ta(d[8],c)}):null==c?c={}:"object"===typeof c&&("from"in c||"to"in c)&&(d=Y(c.from),c=Y(c.to),d.isValid()&&c.isValid()?(c=bb(c,d),d.isBefore(c)?c=tb(d,c):(c=tb(c,d),c.milliseconds=-c.milliseconds,c.months=-c.months),d=c):d={milliseconds:0,months:0},c={},c.ms=d.milliseconds,c.M=d.months);c=new Fa(c);Ua(a)&&e(a,"_locale")&&(c._locale=a._locale);return c}function ta(a,b){var c=a&&parseFloat(a.replace(",",
"."));return(isNaN(c)?0:c)*b}function tb(a,b){var c={milliseconds:0,months:0};c.months=b.month()-a.month()+12*(b.year()-a.year());a.clone().add(c.months,"M").isAfter(b)&&--c.months;c.milliseconds=+b-+a.clone().add(c.months,"M");return c}function ub(a){return 0>a?-1*Math.round(-1*a):Math.round(a)}function vb(a,b){return function(c,d){var e;null===d||isNaN(+d)||(B(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),e=c,c=d,d=e);e=oa("string"===typeof c?+c:c,
d);wb(this,e,a);return this}}function wb(b,c,d,e){var f=c._milliseconds,g=ub(c._days);c=ub(c._months);if(b.isValid()){e=null==e?!0:e;f&&b._d.setTime(+b._d+f*d);if(g&&(f=P(b,"Date")+g*d,b.isValid()))b._d["set"+(b._isUTC?"UTC":"")+"Date"](f);c&&gb(b,P(b,"Month")+c*d);e&&a.updateOffset(b,g||c)}}function xb(a){if(void 0===a)return this._locale._abbr;a=y(a);null!=a&&(this._locale=a);return this}function yb(){return this._locale}function Ja(a,b){J(0,[a,a.length],0,b)}function zb(a,b,c,d,e){var f;if(null==
a)return za(this,d,e).year;f=ra(a,d,e);b>f&&(b=f);a=jb(a,b,c,d,e);a=Da(a.year,0,a.dayOfYear);this.year(a.getUTCFullYear());this.month(a.getUTCMonth());this.date(a.getUTCDate());return this}function cb(){return this.hours()%12||12}function Ab(a,b){J(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Bb(a,b){return b._meridiemParse}function ac(a,b){b[sa]=v(1E3*("0."+a))}function Cb(a){return a}function Db(a,b,c,d){var e=y();b=g().set(d,b);return e[c](b,a)}function Ba(a,
b,c,d,e){"number"===typeof a&&(b=a,a=void 0);a=a||"";if(null!=b)return Db(a,b,c,e);var f=[];for(b=0;b<d;b++)f[b]=Db(a,b,c,e);return f}function Eb(a,b,c,d){b=oa(b,c);a._milliseconds+=d*b._milliseconds;a._days+=d*b._days;a._months+=d*b._months;return a._bubble()}function Fb(a){return 0>a?Math.floor(a):Math.ceil(a)}function pa(a){return function(){return this.as(a)}}function ua(a){return function(){return this._data[a]}}function bc(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function Ka(){var a=db(this._milliseconds)/
1E3,b=db(this._days),c=db(this._months),d,e,f;d=r(a/60);e=r(d/60);a%=60;d%=60;f=r(c/12);var c=c%12,g=this.asSeconds();return g?(0>g?"-":"")+"P"+(f?f+"Y":"")+(c?c+"M":"")+(b?b+"D":"")+(e||d||a?"T":"")+(e?e+"H":"")+(d?d+"M":"")+(a?a+"S":""):"P0D"}var ob,Va=a.momentProperties=[],Wa=!1,pb={};a.suppressDeprecationWarnings=!1;var ba={},Ga,Aa={},qb=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,
Ha=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Xa={},xa={},Gb=/\d/,fa=/\d\d/,Hb=/\d{3}/,eb=/\d{4}/,La=/[+-]?\d{6}/,Z=/\d\d?/,Ib=/\d\d\d\d?/,Jb=/\d\d\d\d\d\d?/,Ma=/\d{1,3}/,fb=/\d{1,4}/,Na=/[+-]?\d{1,6}/,cc=/\d+/,Oa=/[+-]?\d+/,dc=/Z|[+-]\d\d:?\d\d/gi,Pa=/Z|[+-]\d\d(?::?\d\d)?/gi,Ca=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Ya={},Za={},ga=0,ka=1,ia=2,da=3,ha=4,la=5,sa=6,Sb=7,Tb=8;J("M",["MM",2],"Mo",function(){return this.month()+
1});J("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)});J("MMMM",0,0,function(a){return this.localeData().months(this,a)});I("month","M");H("M",Z);H("MM",Z,fa);H("MMM",function(a,b){return b.monthsShortRegex(a)});H("MMMM",function(a,b){return b.monthsRegex(a)});W(["M","MM"],function(a,b){b[ka]=v(a)-1});W(["MMM","MMMM"],function(a,b,c,d){d=c._locale.monthsParse(a,d,c._strict);null!=d?b[ka]=d:h(c).invalidMonth=a});var Kb=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Ub=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,
Vb=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Wb=/Z|[+-]\d\d(?::?\d\d)?/,Ia=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],$a=
[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Xb=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=u("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",
function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))});J("Y",0,0,function(){var a=this.year();return 9999>=a?""+a:"+"+a});J(0,["YY",2],0,function(){return this.year()%100});J(0,["YYYY",4],0,"year");J(0,["YYYYY",5],0,"year");J(0,["YYYYYY",6,!0],0,"year");I("year","y");H("Y",Oa);H("YY",Z,fa);H("YYYY",fb,eb);H("YYYYY",Na,La);H("YYYYYY",Na,La);W(["YYYYY","YYYYYY"],ga);W("YYYY",function(b,c){c[ga]=2===b.length?a.parseTwoDigitYear(b):v(b)});W("YY",function(b,c){c[ga]=a.parseTwoDigitYear(b)});W("Y",function(a,
b){b[ga]=parseInt(a,10)});a.parseTwoDigitYear=function(a){return v(a)+(68<v(a)?1900:2E3)};var Lb=N("FullYear",!1);a.ISO_8601=function(){};var ec=u("moment().min is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=Y.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:m()}),fc=u("moment().max is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=Y.apply(null,arguments);return this.isValid()&&
a.isValid()?a>this?this:a:m()});rb("Z",":");rb("ZZ","");H("Z",Pa);H("ZZ",Pa);W(["Z","ZZ"],function(a,b,c){c._useUTC=!0;c._tzm=ab(Pa,a)});var Yb=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var Zb=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,$b=/^(-)?P(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)W)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?$/;oa.fn=Fa.prototype;var gc=vb(1,"add"),hc=vb(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Mb=u("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",
function(a){return void 0===a?this.localeData():this.locale(a)});J(0,["gg",2],0,function(){return this.weekYear()%100});J(0,["GG",2],0,function(){return this.isoWeekYear()%100});Ja("gggg","weekYear");Ja("ggggg","weekYear");Ja("GGGG","isoWeekYear");Ja("GGGGG","isoWeekYear");I("weekYear","gg");I("isoWeekYear","GG");H("G",Oa);H("g",Oa);H("GG",Z,fa);H("gg",Z,fa);H("GGGG",fb,eb);H("gggg",fb,eb);H("GGGGG",Na,La);H("ggggg",Na,La);na(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=v(a)});
na(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)});J("Q",0,"Qo","quarter");I("quarter","Q");H("Q",Gb);W("Q",function(a,b){b[ka]=3*(v(a)-1)});J("w",["ww",2],"wo","week");J("W",["WW",2],"Wo","isoWeek");I("week","w");I("isoWeek","W");H("w",Z);H("ww",Z,fa);H("W",Z);H("WW",Z,fa);na(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=v(a)});J("D",["DD",2],"Do","date");I("date","D");H("D",Z);H("DD",Z,fa);H("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient});W(["D","DD"],ia);
W("Do",function(a,b){b[ia]=v(a.match(Z)[0],10)});var Nb=N("Date",!0);J("d",0,"do","day");J("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)});J("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)});J("dddd",0,0,function(a){return this.localeData().weekdays(this,a)});J("e",0,0,"weekday");J("E",0,0,"isoWeekday");I("day","d");I("weekday","e");I("isoWeekday","E");H("d",Z);H("e",Z);H("E",Z);H("dd",Ca);H("ddd",Ca);H("dddd",Ca);na(["dd","ddd","dddd"],function(a,b,c,d){d=
c._locale.weekdaysParse(a,d,c._strict);null!=d?b.d=d:h(c).invalidWeekday=a});na(["d","e","E"],function(a,b,c,d){b[d]=v(a)});J("DDD",["DDDD",3],"DDDo","dayOfYear");I("dayOfYear","DDD");H("DDD",Ma);H("DDDD",Hb);W(["DDD","DDDD"],function(a,b,c){c._dayOfYear=v(a)});J("H",["HH",2],0,"hour");J("h",["hh",2],0,cb);J("hmm",0,0,function(){return""+cb.apply(this)+Q(this.minutes(),2)});J("hmmss",0,0,function(){return""+cb.apply(this)+Q(this.minutes(),2)+Q(this.seconds(),2)});J("Hmm",0,0,function(){return""+this.hours()+
Q(this.minutes(),2)});J("Hmmss",0,0,function(){return""+this.hours()+Q(this.minutes(),2)+Q(this.seconds(),2)});Ab("a",!0);Ab("A",!1);I("hour","h");H("a",Bb);H("A",Bb);H("H",Z);H("h",Z);H("HH",Z,fa);H("hh",Z,fa);H("hmm",Ib);H("hmmss",Jb);H("Hmm",Ib);H("Hmmss",Jb);W(["H","HH"],da);W(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a);c._meridiem=a});W(["h","hh"],function(a,b,c){b[da]=v(a);h(c).bigHour=!0});W("hmm",function(a,b,c){var d=a.length-2;b[da]=v(a.substr(0,d));b[ha]=v(a.substr(d));h(c).bigHour=
!0});W("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[da]=v(a.substr(0,d));b[ha]=v(a.substr(d,2));b[la]=v(a.substr(e));h(c).bigHour=!0});W("Hmm",function(a,b,c){c=a.length-2;b[da]=v(a.substr(0,c));b[ha]=v(a.substr(c))});W("Hmmss",function(a,b,c){c=a.length-4;var d=a.length-2;b[da]=v(a.substr(0,c));b[ha]=v(a.substr(c,2));b[la]=v(a.substr(d))});var ic=N("Hours",!0);J("m",["mm",2],0,"minute");I("minute","m");H("m",Z);H("mm",Z,fa);W(["m","mm"],ha);var jc=N("Minutes",!1);J("s",["ss",2],0,"second");
I("second","s");H("s",Z);H("ss",Z,fa);W(["s","ss"],la);var kc=N("Seconds",!1);J("S",0,0,function(){return~~(this.millisecond()/100)});J(0,["SS",2],0,function(){return~~(this.millisecond()/10)});J(0,["SSS",3],0,"millisecond");J(0,["SSSS",4],0,function(){return 10*this.millisecond()});J(0,["SSSSS",5],0,function(){return 100*this.millisecond()});J(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});J(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});J(0,["SSSSSSSS",8],0,function(){return 1E5*
this.millisecond()});J(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});I("millisecond","ms");H("S",Ma,Gb);H("SS",Ma,fa);H("SSS",Ma,Hb);var ja;for(ja="SSSS";9>=ja.length;ja+="S")H(ja,cc);for(ja="S";9>=ja.length;ja+="S")W(ja,ac);var lc=N("Milliseconds",!1);J("z",0,0,"zoneAbbr");J("zz",0,0,"zoneName");var F=n.prototype;F.add=gc;F.calendar=function(a,b){var c=a||Y(),d=bb(c,this).startOf("day"),d=this.diff(d,"days",!0),d=-6>d?"sameElse":-1>d?"lastWeek":0>d?"lastDay":1>d?"sameDay":2>d?"nextDay":
7>d?"nextWeek":"sameElse",e=b&&(A(b[d])?b[d]():b[d]);return this.format(e||this.localeData().calendar(d,this,Y(c)))};F.clone=function(){return new n(this)};F.diff=function(a,b,c){var d;if(!this.isValid())return NaN;a=bb(a,this);if(!a.isValid())return NaN;d=6E4*(a.utcOffset()-this.utcOffset());b=L(b);if("year"===b||"month"===b||"quarter"===b){d=12*(a.year()-this.year())+(a.month()-this.month());var e=this.clone().add(d,"months"),f;0>a-e?(f=this.clone().add(d-1,"months"),a=(a-e)/(e-f)):(f=this.clone().add(d+
1,"months"),a=(a-e)/(f-e));a=-(d+a);"quarter"===b?a/=3:"year"===b&&(a/=12)}else a=this-a,a="second"===b?a/1E3:"minute"===b?a/6E4:"hour"===b?a/36E5:"day"===b?(a-d)/864E5:"week"===b?(a-d)/6048E5:a;return c?a:r(a)};F.endOf=function(a){a=L(a);return void 0===a||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")};F.format=function(b){b=O(this,b||a.defaultFormat);return this.localeData().postformat(b)};F.from=function(a,b){return this.isValid()&&(q(a)&&a.isValid()||Y(a).isValid())?
oa({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};F.fromNow=function(a){return this.from(Y(),a)};F.to=function(a,b){return this.isValid()&&(q(a)&&a.isValid()||Y(a).isValid())?oa({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};F.toNow=function(a){return this.to(Y(),a)};F.get=aa;F.invalidAt=function(){return h(this).overflow};F.isAfter=function(a,b){var c=q(a)?a:Y(a);if(!this.isValid()||!c.isValid())return!1;b=L(l(b)?"millisecond":
b);return"millisecond"===b?+this>+c:+c<+this.clone().startOf(b)};F.isBefore=function(a,b){var c=q(a)?a:Y(a);if(!this.isValid()||!c.isValid())return!1;b=L(l(b)?"millisecond":b);return"millisecond"===b?+this<+c:+this.clone().endOf(b)<+c};F.isBetween=function(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)};F.isSame=function(a,b){var c=q(a)?a:Y(a);if(!this.isValid()||!c.isValid())return!1;b=L(b||"millisecond");if("millisecond"===b)return+this===+c;c=+c;return+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b)};
F.isSameOrAfter=function(a,b){return this.isSame(a,b)||this.isAfter(a,b)};F.isSameOrBefore=function(a,b){return this.isSame(a,b)||this.isBefore(a,b)};F.isValid=function(){return k(this)};F.lang=Mb;F.locale=xb;F.localeData=yb;F.max=fc;F.min=ec;F.parsingFlags=function(){return d({},h(this))};F.set=aa;F.startOf=function(a){a=L(a);switch(a){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);
case "second":this.milliseconds(0)}"week"===a&&this.weekday(0);"isoWeek"===a&&this.isoWeekday(1);"quarter"===a&&this.month(3*Math.floor(this.month()/3));return this};F.subtract=hc;F.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};F.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};F.toDate=function(){return this._offset?
new Date(+this):this._d};F.toISOString=function(){var a=this.clone().utc();return 0<a.year()&&9999>=a.year()?A(Date.prototype.toISOString)?this.toDate().toISOString():O(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):O(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")};F.toJSON=function(){return this.isValid()?this.toISOString():null};F.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};F.unix=function(){return Math.floor(+this/1E3)};F.valueOf=function(){return+this._d-6E4*(this._offset||
0)};F.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};F.year=Lb;F.isLeapYear=function(){return va(this.year())};F.weekYear=function(a){return zb.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};F.isoWeekYear=function(a){return zb.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)};F.quarter=F.quarters=function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%
3)};F.month=hb;F.daysInMonth=function(){return Qa(this.year(),this.month())};F.week=F.weeks=function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")};F.isoWeek=F.isoWeeks=function(a){var b=za(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")};F.weeksInYear=function(){var a=this.localeData()._week;return ra(this.year(),a.dow,a.doy)};F.isoWeeksInYear=function(){return ra(this.year(),1,4)};F.date=Nb;F.day=F.days=function(a){if(!this.isValid())return null!=a?this:NaN;
var b=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=a){var c=this.localeData();"string"===typeof a&&(isNaN(a)?(a=c.weekdaysParse(a),a="number"===typeof a?a:null):a=parseInt(a,10));return this.add(a-b,"d")}return b};F.weekday=function(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")};F.isoWeekday=function(a){return this.isValid()?null==a?this.day()||7:this.day(this.day()%7?a:a-7):null!=a?this:NaN};F.dayOfYear=
function(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==a?b:this.add(a-b,"d")};F.hour=F.hours=ic;F.minute=F.minutes=jc;F.second=F.seconds=kc;F.millisecond=F.milliseconds=lc;F.utcOffset=function(b,c){var d=this._offset||0,e;return this.isValid()?null!=b?("string"===typeof b?b=ab(Pa,b):16>Math.abs(b)&&(b*=60),!this._isUTC&&c&&(e=15*-Math.round(this._d.getTimezoneOffset()/15)),this._offset=b,this._isUTC=!0,null!=e&&this.add(e,"m"),d!==b&&(!c||this._changeInProgress?
wb(this,oa(b-d,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?d:15*-Math.round(this._d.getTimezoneOffset()/15):null!=b?this:NaN};F.utc=function(a){return this.utcOffset(0,a)};F.local=function(a){this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(15*-Math.round(this._d.getTimezoneOffset()/15),"m"));return this};F.parseZone=function(){this._tzm?this.utcOffset(this._tzm):"string"===typeof this._i&&this.utcOffset(ab(dc,
this._i));return this};F.hasAlignedHourOffset=function(a){if(!this.isValid())return!1;a=a?Y(a).utcOffset():0;return 0===(this.utcOffset()-a)%60};F.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};F.isDSTShifted=function(){if(!l(this._isDSTShifted))return this._isDSTShifted;var a={};p(a,this);a=kb(a);if(a._a){var b=a._isUTC?g(a._a):Y(a._a);this._isDSTShifted=this.isValid()&&0<x(a._a,b.toArray())}else this._isDSTShifted=
!1;return this._isDSTShifted};F.isLocal=function(){return this.isValid()?!this._isUTC:!1};F.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};F.isUtc=sb;F.isUTC=sb;F.zoneAbbr=function(){return this._isUTC?"UTC":""};F.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};F.dates=u("dates accessor is deprecated. Use date instead.",Nb);F.months=u("months accessor is deprecated. Use month instead",hb);F.years=u("years accessor is deprecated. Use year instead",Lb);F.zone=u("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",
function(a,b){return null!=a?("string"!==typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()});var R=C.prototype;R._calendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};R.calendar=function(a,b,c){a=this._calendar[a];return A(a)?a.call(b,c):a};R._longDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};R.longDateFormat=
function(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];if(b||!c)return b;this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)});return this._longDateFormat[a]};R._invalidDate="Invalid date";R.invalidDate=function(){return this._invalidDate};R._ordinal="%d";R.ordinal=function(a){return this._ordinal.replace("%d",a)};R._ordinalParse=/\d{1,2}/;R.preparse=Cb;R.postformat=Cb;R._relativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",
mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};R.relativeTime=function(a,b,c,d){var e=this._relativeTime[c];return A(e)?e(a,b,c,d):e.replace(/%d/i,a)};R.pastFuture=function(a,b){var c=this._relativeTime[0<a?"future":"past"];return A(c)?c(b):c.replace(/%s/i,b)};R.set=function(a){var b,c;for(c in a)b=a[c],A(b)?this[c]=b:this["_"+c]=b;this._config=a;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)};
R.months=function(a,c){return b(this._months)?this._months[a.month()]:this._months[Kb.test(c)?"format":"standalone"][a.month()]};R._months="January February March April May June July August September October November December".split(" ");R.monthsShort=function(a,c){return b(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[Kb.test(c)?"format":"standalone"][a.month()]};R._monthsShort="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");R.monthsParse=function(a,b,c){var d,e;
this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(d=0;12>d;d++)if(e=g([2E3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(e="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(e.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a)||
c&&"MMM"===b&&this._shortMonthsParse[d].test(a)||!c&&this._monthsParse[d].test(a))return d};R._monthsRegex=Ca;R.monthsRegex=function(a){return this._monthsParseExact?(e(this,"_monthsRegex")||ib.call(this),a?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex};R._monthsShortRegex=Ca;R.monthsShortRegex=function(a){return this._monthsParseExact?(e(this,"_monthsRegex")||ib.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&
a?this._monthsShortStrictRegex:this._monthsShortRegex};R.week=function(a){return za(a,this._week.dow,this._week.doy).week};R._week={dow:0,doy:6};R.firstDayOfYear=function(){return this._week.doy};R.firstDayOfWeek=function(){return this._week.dow};R.weekdays=function(a,c){return b(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(c)?"format":"standalone"][a.day()]};R._weekdays="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ");R.weekdaysMin=function(a){return this._weekdaysMin[a.day()]};
R._weekdaysMin="Su Mo Tu We Th Fr Sa".split(" ");R.weekdaysShort=function(a){return this._weekdaysShort[a.day()]};R._weekdaysShort="Sun Mon Tue Wed Thu Fri Sat".split(" ");R.weekdaysParse=function(a,b,c){var d,e;this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(d=0;7>d;d++)if(e=Y([2E3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[d]=
new RegExp("^"+this.weekdaysShort(e,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".",".?")+"$","i")),this._weekdaysParse[d]||(e="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(e.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a)||c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a)||c&&"dd"===b&&this._minWeekdaysParse[d].test(a)||!c&&this._weekdaysParse[d].test(a))return d};
R.isPM=function(a){return"p"===(a+"").toLowerCase().charAt(0)};R._meridiemParse=/[ap]\.?m?\.?/i;R.meridiem=function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"};E("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,b=1===v(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+b}});a.lang=u("moment.lang is deprecated. Use moment.locale instead.",E);a.langData=u("moment.langData is deprecated. Use moment.localeData instead.",y);var ma=Math.abs,mc=pa("ms"),nc=pa("s"),oc=pa("m"),
pc=pa("h"),qc=pa("d"),rc=pa("w"),sc=pa("M"),tc=pa("y"),uc=ua("milliseconds"),vc=ua("seconds"),wc=ua("minutes"),xc=ua("hours"),yc=ua("days"),zc=ua("months"),Ac=ua("years"),ya=Math.round,qa={s:45,m:45,h:22,d:26,M:11},db=Math.abs,T=Fa.prototype;T.abs=function(){var a=this._data;this._milliseconds=ma(this._milliseconds);this._days=ma(this._days);this._months=ma(this._months);a.milliseconds=ma(a.milliseconds);a.seconds=ma(a.seconds);a.minutes=ma(a.minutes);a.hours=ma(a.hours);a.months=ma(a.months);a.years=
ma(a.years);return this};T.add=function(a,b){return Eb(this,a,b,1)};T.subtract=function(a,b){return Eb(this,a,b,-1)};T.as=function(a){var b,c=this._milliseconds;a=L(a);if("month"===a||"year"===a)return b=this._days+c/864E5,b=this._months+4800*b/146097,"month"===a?b:b/12;b=this._days+Math.round(146097*this._months/4800);switch(a){case "week":return b/7+c/6048E5;case "day":return b+c/864E5;case "hour":return 24*b+c/36E5;case "minute":return 1440*b+c/6E4;case "second":return 86400*b+c/1E3;case "millisecond":return Math.floor(864E5*
b)+c;default:throw Error("Unknown unit "+a);}};T.asMilliseconds=mc;T.asSeconds=nc;T.asMinutes=oc;T.asHours=pc;T.asDays=qc;T.asWeeks=rc;T.asMonths=sc;T.asYears=tc;T.valueOf=function(){return this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*v(this._months/12)};T._bubble=function(){var a=this._milliseconds,b=this._days,c=this._months,d=this._data;0<=a&&0<=b&&0<=c||0>=a&&0>=b&&0>=c||(a+=864E5*Fb(146097*c/4800+b),c=b=0);d.milliseconds=a%1E3;a=r(a/1E3);d.seconds=a%60;a=r(a/60);d.minutes=
a%60;a=r(a/60);d.hours=a%24;b+=r(a/24);a=r(4800*b/146097);c+=a;b-=Fb(146097*a/4800);a=r(c/12);d.days=b;d.months=c%12;d.years=a;return this};T.get=function(a){a=L(a);return this[a+"s"]()};T.milliseconds=uc;T.seconds=vc;T.minutes=wc;T.hours=xc;T.days=yc;T.weeks=function(){return r(this.days()/7)};T.months=zc;T.years=Ac;T.humanize=function(a){var b=this.localeData(),c;c=!a;var d=oa(this).abs(),e=ya(d.as("s")),f=ya(d.as("m")),g=ya(d.as("h")),h=ya(d.as("d")),k=ya(d.as("M")),d=ya(d.as("y")),e=e<qa.s&&["s",
e]||1>=f&&["m"]||f<qa.m&&["mm",f]||1>=g&&["h"]||g<qa.h&&["hh",g]||1>=h&&["d"]||h<qa.d&&["dd",h]||1>=k&&["M"]||k<qa.M&&["MM",k]||1>=d&&["y"]||["yy",d];e[2]=c;e[3]=0<+this;e[4]=b;c=bc.apply(null,e);a&&(c=b.pastFuture(+this,c));return b.postformat(c)};T.toISOString=Ka;T.toString=Ka;T.toJSON=Ka;T.locale=xb;T.localeData=yb;T.toIsoString=u("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ka);T.lang=Mb;J("X",0,0,"unix");J("x",0,0,"valueOf");H("x",Oa);H("X",/[+-]?\d+(\.\d{1,3})?/);
W("X",function(a,b,c){c._d=new Date(1E3*parseFloat(a,10))});W("x",function(a,b,c){c._d=new Date(v(a))});a.version="2.12.0";ob=Y;a.fn=F;a.min=function(){var a=[].slice.call(arguments,0);return mb("isBefore",a)};a.max=function(){var a=[].slice.call(arguments,0);return mb("isAfter",a)};a.now=function(){return Date.now?Date.now():+new Date};a.utc=g;a.unix=function(a){return Y(1E3*a)};a.months=function(a,b){return Ba(a,b,"months",12,"month")};a.isDate=c;a.locale=E;a.invalid=m;a.duration=oa;a.isMoment=
q;a.weekdays=function(a,b){return Ba(a,b,"weekdays",7,"day")};a.parseZone=function(){return Y.apply(null,arguments).parseZone()};a.localeData=y;a.isDuration=Ua;a.monthsShort=function(a,b){return Ba(a,b,"monthsShort",12,"month")};a.weekdaysMin=function(a,b){return Ba(a,b,"weekdaysMin",7,"day")};a.defineLocale=G;a.updateLocale=function(a,b){if(null!=b){var c;null!=ba[a]&&(b=D(ba[a]._config,b));c=new C(b);c.parentLocale=ba[a];ba[a]=c;E(a)}else null!=ba[a]&&(null!=ba[a].parentLocale?ba[a]=ba[a].parentLocale:
null!=ba[a]&&delete ba[a]);return ba[a]};a.locales=function(){return Object.keys(ba)};a.weekdaysShort=function(a,b){return Ba(a,b,"weekdaysShort",7,"day")};a.normalizeUnits=L;a.relativeTimeThreshold=function(a,b){if(void 0===qa[a])return!1;if(void 0===b)return qa[a];qa[a]=b;return!0};a.prototype=F;return a});function ajaxGetURL(a,b){var c;"string"===typeof a?(c=a,a=null):(a instanceof jQuery&&(a=a.get(0)),c=a.href);return jQ.ajax({type:"POST",url:c,data:{ajax_request:1},success:function(c){"undefined"!=typeof c.message&&c.message.match("^(Error|Sorry!)")?alert(c.message):b&&b.call(a,c)},error:function(a,b,c){alert("An error occurred while processing your request.\n"+b+": "+c)}})}
function ajaxSaveForm(a,b){a instanceof jQuery||(a=$(a));return jQuery.ajax({type:"POST",url:a.attr("action"),data:a.serialize()+"&ajax_request=1",success:function(c){"undefined"==typeof c?alert("An error occurred while processing your request."):"undefined"!=typeof c.message&&c.message.match("^(Error|Sorry!)")?alert(c.message):(formChanged=!1,b&&b.call(a[0],c))},error:function(a,b,e){alert("An error occurred while processing your request.\n"+b+": "+e)}})};var msg;function subscribe_request(a){var b=jQ("#ajax_subscription_vars").attr("data-id"),c=jQ("#ajax_subscription_vars").attr("data-forum");if(b)a="/subscribe/ajax_subscription?id="+b+"&forum="+c+"&name="+name+"&email=undefined";else{var f;a&&(f="&notificationtype="+a);a="/subscribe/subscribeforum?forum="+c+f}jQ.ajax({type:"GET",url:a,success:function(a){_subscribeThreadHandler(a)},error:function(){alert("There was a problem with the request.")}})}
function unsubscribe_request(){var a=jQ("#ajax_subscription_vars").attr("data-id"),b=jQ("#ajax_subscription_vars").attr("data-forum");jQ("#ajax_subscription_vars").attr("data-divToolsId");jQ.ajax({type:"GET",url:a?"/subscribe/ajax_unsubscription?id="+a+"&forum="+b:"/subscribe/unsubscribeforum?forum="+b,success:function(a){_subscribeThreadHandler(a)},error:function(){alert("There was a problem with the request.")}})}
function _subscribeThreadHandler(a){if(/^Error:/.test(a))alert(a);else{var b=jQ("#ajax_subscription_vars").attr("data-divToolsId");document.getElementById(b)&&(document.getElementById(b).innerHTML=a,document.getElementById(b).style.display="none");hideTooltip()}}
function subscribe(a){1==a?document.getElementById("unsubscribe")?(document.getElementById("unsubscribe").innerHTML='<a href="#" onclick="showTooltip(\'Receive email notifications for any update for forum\',document.getElementById(\'divEmailsubs\'),this); tooltip.clickable=1 ; return false;" id="linkEmailSubs" title="Subscribe to this forum and receive email notifications on updates" class="subscribe_icon"><span class="alt">Subscribe</span></a>',a=document.getElementById("unsubscribe"),a.id="subscribe"):
(document.getElementById("subscribe").innerHTML='<a href="#" onclick="unsubscribe_request();subscribe(1);return false;" id="subscribe" title="Unsubscribe from this forum and stop notifications" class="unsubscribe_icon"><span class="alt">Unsubscribe</span></a>',a=document.getElementById("subscribe"),a.id="unsubscribe"):document.getElementById("unsubscribe")?(document.getElementById("unsubscribe").innerHTML='<a href="#" onclick="subscribe_request(); subscribe(); return false;"  title="Subscribe to this topic and receive email notifications on updates" class="subscribe_icon"><span class="alt">Subscribe</span></a>',
a=document.getElementById("unsubscribe"),a.id="subscribe"):(document.getElementById("subscribe").innerHTML='<a href="#" onclick="unsubscribe_request(); subscribe(); return false;"  title="Unsubscribe from this topic and stop notifications" class="unsubscribe_icon"><span class="alt">Unsubscribe</span></a>',a=document.getElementById("subscribe"),a.id="unsubscribe")};var globalbeta,org_coverfileid,albumid,host=/^beta([0-9]+)?\./.test(location.hostname);globalbeta=host?"beta":"";
function remove_photo(a,b,c,f){if(!confirm("Are you sure you want to delete this photo?"))return!1;jQ("#"+f+"photo").hide();var e="attach_ids";c!=f&&(e="attach_ids_popup");f=jQ("#"+e).val().split(",");Array.indexOf||(Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]==a)return b;return-1});var d=f.indexOf(c);f.splice(d,1);d=f.join(",");""==jQ("[name=albumid]").val()?jQ("[name=coverfileid]").val(f[0]):"attach_ids_popup"==e?jQ("[name=coverfileid]").val(jQ("[name=coverfileid]").val()==
c?org_coverfileid:jQ("[name=coverfileid]").val()):jQ("[name=coverfileid]").val(org_coverfileid&&org_coverfileid!=c?org_coverfileid:f[f.length-1]);jQ("#"+e).val(d);""==jQ("#"+e).val()&&jQ("#publish").prop("disabled",!0);f=jQ("[name=coverfileid]").val();"attach_ids_popup"!=e&&jQ.ajax({type:"POST",url:"/album",data:{action:"delete_album","do":"delete_image",ajax_request:"1",userid:a,albumid:b,fileid:c,coverid:f}})}
function toggle_dropdown(a){"block"==jQ("#toggleText"+a).css("display")?jQ("#toggleText"+a).hide():jQ("#toggleText"+a).show()}function photoMenu(){jQ(".editable_photo_wrapper").mouseover(function(){jQ(".photo_wrapper_dropdown",this).show()});jQ(".editable_photo_wrapper").mouseout(function(){jQ(".photo_wrapper_dropdown",this).hide()})}
function setposition(a){jQ("#"+a.id+"_flash_container")&&(jQ.browser.msie&&8==parseInt(jQ.browser.version)?a.refresh():(jQ("#"+a.id+"_flash_container").css("position","fixed"),jQ("#"+a.id+"_flash_container").css("top",jQ("#uploadfiles").offset().top+"px"),jQ("#"+a.id+"_flash_container").css("left",jQ("#uploadfiles").offset().left+"px")));jQ("#"+a.id+"_html5_container")&&jQ("#"+a.id+"_html5_container").css("zIndex","1011")}var flag=0;
function upload_photos(a,b){org_coverfileid=jQ("[name=coverfileid]").val();var c=new plupload.Uploader({runtimes:"html5,flash,gears",browse_button:b,container:"upload_container",url:"/upload",multipart_params:{action:"doUpload",album_upload:"1",albumid:a},multi_selection:!0,flash_swf_url:"/tools/plupload.flash.swf",filters:[{title:"Image files",extensions:"jpg,gif,jpeg,jpe,gif,bmp,png"}],resize:{width:1024,height:768,quality:90}});c.init();jQ("#upload_cancel").click(function(){c.stop();if(confirm("Are you sure you want to cancel adding these photos?"))return window.location.reload(),
!1;c.start()});c.bind("FilesAdded",function(a,b){jQ("#publish").prop("disabled",!0);flag||(jQ("#addphotos_popup").modal("show"),jQ("body").css("overflow","hidden"),a.features.triggerDialog&&plupload.addEvent(document.getElementById("uploadfiles"),"click",function(b){var c=document.getElementById(a.id+"_html5");c&&!c.disabled&&c.click();b.preventDefault()}),flag=1);jQ.each(b,function(a,b){jQ("#album_pics .abc").attr("id",b.id+"attach_img");jQ("#album_pics .col-md-3").attr("id",b.id+"photo");jQ("#album_pics .album-wrapper").attr("id",
b.id+"album_wrapper");jQ("#"+b.id+"photo").addClass("hidden");jQ("#uploadBar [id^='progress_']").attr("id","progress_"+b.id);jQ("#uploadBar [id^='progressbar_']").attr("id","progressbar_"+b.id);jQ("#progressbar_"+b.id).html(b.percent+"%").attr("aria-valuenow",b.percent).css("width",b.percent+"%");var c=jQ("#uploadBar").html();jQ("#attachPhotos").append(c);jQ("#progress_"+b.id).show();c=jQ("#album_pics").html();jQ("#attachPhotos").append(c)});jQ("#uploadBar [id^='progress_']").attr("id","progress_bar");
jQ("#uploadBar [id^='progressbar_']").attr("id","progressbar_fileid");c.start();a.settings.browse_button="uploadfiles"});c.bind("UploadProgress",function(a,b){var c=a.total.percent;jQ("#upprogressbar").html(c+"%").attr("aria-valuenow",c).css("width",c+"%");100!=b.percent&&jQ("#progressbar_"+b.id).html(b.percent+"%").attr("aria-valuenow",b.percent).css("width",b.percent+"%");a.settings.browse_button="uploadfiles"});c.bind("UploadComplete",function(a,b){jQ(".progress-bar").attr("progress-bar","Upload complete");
a.settings.browse_button="uploadfiles";jQ("#publish").prop("disabled",!1)});c.bind("Error",function(a,b){var c=b.file,g;if(c&&(g=b.message))return b.code==plupload.FILE_EXTENSION_ERROR?alert("There was an error uploading your image. "+c.name+" is an invalid file type. Supported file types include jpg, gif, jpeg, jpe, gif, bmp and png."):alert("There was an error uploading your image. "+g),!1;a.settings.browse_button="uploadfiles"});c.bind("FileUploaded",function(a,b,c){c=jQ.parseJSON(c.response);
if("1"==c.status){jQ("#progress_"+b.id).hide();jQ("#"+b.id+"attach_img").css("background-image","url("+c.url_protocol+"s3.amazonaws.com/"+globalbeta+"files.websitetoolbox.com/"+global_hash.uid+c.thumb_path+"/"+c.fileid+")");jQ("#pics_album .make_album_cover").attr("id","make_album_cover"+c.fileid);jQ("#img_caption .captionArea").attr("name","description_"+c.fileid);jQ("#pics_album .remove_photo").attr("id","remove_photo"+c.fileid);jQ("#pics_album #photo_id").attr("id","photo_id"+c.fileid);jQ("#photo_id"+
c.fileid).val(b.id);var g=jQ("#img_caption").html();jQ("#"+b.id+"photo").append(g);g=jQ("#pics_album").html();jQ("#"+b.id+"album_wrapper").append(g);jQ("#pics_album [id^='remove_photo']").attr("id","remove");jQ("#pics_album [id^='photo_id']").attr("id","photo_id");jQ("#pics_album .abc").attr("id","attach_img");jQ("#img_caption [name^='description_']").attr("name","description_pic");jQ("#pics_album [id^='make_album_cover']").attr("id","make_album_cover");jQ("#album_pics .col-md-3").attr("id","photo");
jQ("#album_pics .album-wrapper").attr("id","album_wrapper");jQ("#"+b.id+"photo").show();jQ("#"+b.id+"album_wrapper").show();jQ("#"+b.id+"album_wrapper").removeClass("hidden");b=jQ("#attach_ids_popup").val();b=b+","+c.fileid;jQ("#attach_ids_popup").val(b.replace(/^,/,""));b=jQ("[name=coverfileid]").val();""!=b&&0!=b||jQ("[name=coverfileid]").val(c.fileid);photoMenu();captionArea();a.settings.browse_button="uploadfiles"}else"0"==c.status&&(c.error=c.error.replace(/<\S[^><]*>/g,""),c.error=c.error.replace(/\bError(!|:)\b|/,
""),c.error=c.error.replace(/\[close\]/,""),alert(c.error),jQ("#progress_"+b.id).remove(),jQ("#publish").prop("disabled",!0),a.settings.browse_button="uploadfiles")})}
function captionArea(){jQ(".captionArea").each(function(a){""==jQ(this).val()&&(jQ(this).val("Say something about this photo..."),jQ(this).css("color","#A9A9A9"))});jQ(".captionArea").focus(function(){"Say something about this photo..."==jQ(this).val()&&(jQ(this).val(""),jQ(this).css("color","#000000"))}).blur(function(){""==jQ(this).val()&&(jQ(this).val("Say something about this photo..."),jQ(this).css("color","#A9A9A9"))})}
function init_popup(){jQ("#uploadfiles").button();jQ("#publish").prop("disabled",!0);var a={autoOpen:!1,modal:!0,resizable:!1,height:jQ(window).height()-75,width:966,open:function(){jQ.browser.msie&&7==parseInt(jQ.browser.version)&&(jQ("#upload_container").css("position",""),jQ("html").css("overflow","hidden"))}};jQ("#addphotos_popup").dialog(a);jQ(".ui-dialog-titlebar").hide();jQ(".ui-dialog").css("overflow","auto")}
jQ(document).ready(function(){jQ(document).on("click","[id ^= 'make_album_cover']",function(){var a=this.id,a=a.replace(/make_album_cover/,"");jQ("[id=coverfileid]").val(a);jQ("#album-menu").length||toggle_dropdown(a)});0<jQ("#addphotos_popup").length&&0<jQ("#album_enable").length&&(albumid=jQ("#addphotos_popup").attr("data-albumid"),upload_photos(albumid,"uploadphotos"));0<jQ("#savebutton").length&&(jQ(function(){captionArea()}),photoMenu());jQ(document).on("click","[id ^= 'remove_photo']",function(){var a=
this.id,a=a.replace(/remove_photo/,""),b=jQ("#albumid").val(),c=jQ('[name= "userid"]').val(),f=jQ("#photo_id"+a).val();remove_photo(c,b,a,f?f:a)});0<jQ("#delete_album").length&&jQ("#delete_album").click(function(){var a=jQ("#view_album_title").val();return confirm("Are you sure you want to delete "+a+"?")?(jQ("#savebutton").attr("disabled",!0),!0):!1});0<jQ("#title").length&&(jQ("#title").focus(function(){"Untitled Album"==jQ("#title").val()&&jQ("#title").val("")}),jQ("#title").blur(function(){""==
jQ("#title").val()&&jQ("#title").val("Untitled Album")}));0<jQ("#album_desc").length&&(jQ("#album_desc").focus(function(){"Say something about this album..."==jQ("#album_desc").val()&&jQ("#album_desc").val("")}),jQ("#album_desc").blur(function(){""==jQ("#album_desc").val()&&jQ("#album_desc").val("Say something about this album...")}));0<jQ("#delete_image").length&&jQ("#delete_image").click(function(){return confirm("Are you sure you want to delete this photo?")?!0:!1});if(0<jQ("#publish").length)jQ(document).on("click",
"#publish",function(){jQ("#publish").prop("disabled",!0);document.publish.submit()})});jQ(document).ready(function(){navigator.userAgent.match(/iPad/i)&&(jQ("i, a").removeAttr("data-original-title"),jQ(":input").removeAttr("title"));0<jQ("#pending-menu").length&&wtbx.approvalQueue.hidePendingMenu();jQ("#approval_queue").length&&(jQ.extend(jQ.fn.editable.defaults,{mode:"inline",toggle:"manual",showbuttons:!0,onblur:"ignore",inputclass:"input-small"}),jQ("#events_list #event_title,#events_list #eventDesc").editable({validate:function(a){if(""==jQ.trim(a))return"event_title"==jQ(this).attr("id")?
"Event title is required.":"Event description is required."},url:"/calendar/inline_event_edit",ajaxOptions:{type:"POST"},display:function(a,b){if("event_title"==jQ(this).attr("id")){var c=jQ(this).attr("data-href");jQ(this).html('<a href="'+c+'">'+a+"</a>")}else jQ(this).html(a)},params:function(a){a.ajax_request="1";a.eventid=jQ(this).attr("data-eventid");var b=a.value;b.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;");"event_title"==jQ(this).attr("id")?
a.changed_title=jQ.trim(b):a.changed_desc=jQ.trim(b);return a},error:function(a,b){alert("An error occurred while processing your request.\n"+a.responseText)}}),jQ("#events_list #feed-main").on("click",".change-text",function(){jQ("#events_list #feed-main").find(".editable-open").editable("hide");jQ(this).closest("span").find(".editable").editable("show")}),jQ("[id^='approvePost_']").on("click",function(){var a=jQ(this).attr("data-pid");if(a)return approve_request(this,a),!1}),jQ("[id^='postDelete_']").on("click",
function(){delete_request(jQ(this).attr("data-pid"),jQ(this).attr("data-is-thread"));return!1}),jQ("[id^='postEdit_']").on("click",function(){var a=jQ(this).attr("data-pid");jQ("#show_approval_post_"+a).length&&!jQ("#show_approval_post_"+a).hasClass("hidden")&&jQ("#show_approval_post_"+a).trigger("click");return display_editor(jQ(this).attr("data-pid"),jQ(this).attr("data-easycode"),jQ(this).attr("data-smilie"),jQ(this).attr("data-html_filter"),jQ(this).attr("data-spellcheck"),jQ(this).attr("data-wysiwyg"),
jQ(this).attr("data-toolbarCompatible"),"",jQ(this).attr("data-threadid"),"",jQ(this).attr("data-forumid"))}));jQ("#select_all_pending_events, #select_all_pending_members, #select_all_pending_posts, #select_allbox").length&&(jQ("#select_all_pending_members, [name= 'delete_member']").on("click",function(){var a=this.id,b=jQ("[name= 'delete_member']");activateCheckboxes(b,1,"delete_member","select_all_pending_members");wtbx.approvalQueue.checked_members_count=getTotalChecked("delete_member","select_all_pending_members",
a);b=jQ("[name= 'delete_member'], #select_all_pending_members");"select_all_pending_members"!=a||jQ("#select_all_pending_members").is(":checked")?b.is(":checked")||wtbx.approvalQueue.checked_posts_count||wtbx.approvalQueue.checked_events_count?wtbx.approvalQueue.showPendingMenu():(wtbx.approvalQueue.hidePendingMenu(),wtbx.approvalQueue.checked_members_count=0):(wtbx.approvalQueue.checked_posts_count||wtbx.approvalQueue.checked_events_count?wtbx.approvalQueue.showPendingMenu():wtbx.approvalQueue.hidePendingMenu(),
wtbx.approvalQueue.checked_members_count=0);wtbx.approvalQueue.displaySelectedOptions(wtbx.approvalQueue.checked_members_count,wtbx.approvalQueue.checked_posts_count,wtbx.approvalQueue.checked_events_count)}),jQ("#select_all_pending_posts, [name= 'pid']").on("click",function(){var a=this.id,b=jQ("[name= 'pid']");activateCheckboxes(b,2,"pid","select_all_pending_posts");wtbx.approvalQueue.checked_posts_count=getTotalChecked("pid","select_all_pending_posts",a);b=jQ("[name= 'pid'], #select_all_pending_posts");
"select_all_pending_posts"!=a||jQ("#select_all_pending_posts").is(":checked")?b.is(":checked")||wtbx.approvalQueue.checked_members_count||wtbx.approvalQueue.checked_events_count?wtbx.approvalQueue.showPendingMenu():(wtbx.approvalQueue.hidePendingMenu(),wtbx.approvalQueue.checked_posts_count=0):(wtbx.approvalQueue.checked_members_count||wtbx.approvalQueue.checked_events_count?wtbx.approvalQueue.showPendingMenu():wtbx.approvalQueue.hidePendingMenu(),wtbx.approvalQueue.checked_posts_count=0);wtbx.approvalQueue.displaySelectedOptions(wtbx.approvalQueue.checked_members_count,
wtbx.approvalQueue.checked_posts_count,wtbx.approvalQueue.checked_events_count)}),jQ("#select_all_pending_events, [name='event']").on("click",function(){var a=this.id,b=jQ("[name='event']");activateCheckboxes(b,2,"event","select_all_pending_events");wtbx.approvalQueue.checked_events_count=getTotalChecked("event","select_all_pending_events",a);b=jQ("[name='event'], #select_all_pending_events");"select_all_pending_events"!=a||jQ("#select_all_pending_events").is(":checked")?b.is(":checked")||wtbx.approvalQueue.checked_members_count||
wtbx.approvalQueue.checked_posts_count?wtbx.approvalQueue.showPendingMenu():(wtbx.approvalQueue.hidePendingMenu(),wtbx.approvalQueue.checked_events_count=0):(wtbx.approvalQueue.checked_members_count||wtbx.approvalQueue.checked_posts_count?wtbx.approvalQueue.showPendingMenu():wtbx.approvalQueue.hidePendingMenu(),wtbx.approvalQueue.checked_events_count=0);wtbx.approvalQueue.displaySelectedOptions(wtbx.approvalQueue.checked_members_count,wtbx.approvalQueue.checked_posts_count,wtbx.approvalQueue.checked_events_count)}),
jQ("#approvePending, #decline_pending").click(function(){var a={approvalQueueAction:"approvalQueue"},b=[],c=[],f="";jQ("[name= 'pid']").is(":checked")&&(jQ("[name= 'pid']").each(function(a,c){if(jQ(c).is(":checked")){var e={};e.pid=jQ(this).val();e.forumid=jQ("#approvePost_"+jQ(this).val()).attr("data-forumid");e.is_thread=jQ("#approvePost_"+jQ(this).val()).attr("data-is-thread");e.threadid=jQ("#approvePost_"+jQ(this).val()).attr("data-threadid");e.post_userid=jQ("#approvePost_"+jQ(this).val()).attr("data-post-userid");
b.push(e)}}),a.approvalQueue=1,a.approve_post_ajax_req=1,a.pid=JSON.stringify(b),"approvePending"==this.id?a.postAction="approve":"decline_pending"==this.id&&(a.postAction="delete",f="posts"));jQ("[name= 'delete_member']").is(":checked")&&(jQ("[name= 'delete_member']").each(function(a,b){jQ(b).is(":checked")&&c.push(jQ(this).val())}),a.approve_mem_ajax_req=1,a.delete_member=c.join(","),"approvePending"==this.id?a.massaction="approve_mem":"decline_pending"==this.id&&(a.massaction="decline_mem",b.length&&
(f+=", "),f+="members"));if(jQ("[name='event']").is(":checked")){var e=[];jQ("[name='event']").each(function(a,b){jQ(b).is(":checked")&&e.push(jQ(this).val())});a.approve_event_ajax_req=1;a.allevents=e.join(",");if("approvePending"==this.id)a.eventAction=1;else if("decline_pending"==this.id){if(b.length||c.length)f+=" and ";f+="events";a.eventAction=2}}if("decline_pending"==this.id&&!confirm("Delete the "+f+" you have selected?"))return!1;jQ.ajax({type:"POST",url:"/register",data:a,success:function(a){var b=
0;if(a.pids){var c=jQ("[name= 'pid']");if(jQ("#select_all_pending_posts").is(":checked"))jQ("#posts_list").remove(),b+=c.length;else{var e=[],e=a.pids.split(",");jQ.each(e,function(a,d){jQ("#"+d).remove();--c.length;b+=1});jQ("#totalpending_post").html(c.length)}}if(a.all_events){var f=jQ("[name='event']");jQ("#select_all_pending_events").is(":checked")||"1"==f.length?(jQ("#events_list").remove(),b+=f.length):(e=[],e=a.all_events.split(","),jQ.each(e,function(a,c){jQ("#event_"+c).remove();--f.length;
b+=1}),jQ("#totalpending_events").html(f.length))}if(a.members){var l=jQ("[name= 'delete_member']");jQ("#select_all_pending_members").is(":checked")||"1"==l.length?(jQ("#pendingMembers").remove(),b+=l.length):(e=[],e=a.members.split(","),jQ.each(e,function(a,c){jQ("#member_"+c).remove();--l.length;b+=1}),jQ("#totalpending_member").html(l.length))}wtbx.approvalQueue.updatePendingCount(b)},error:function(a,b,c){alert("An error occurred while processing your request.\n"+b+": "+c)}})}),jQ("#move").click(function(){var a=
[];jQ("[name= 'pid']").is(":checked")&&jQ("[name= 'pid']").each(function(b,c){if(jQ(c).is(":checked")){var f={};f.pid=jQ(this).val();f.forumid=jQ("#approvePost_"+jQ(this).val()).attr("data-forumid");a.push(f)}});if(!confirm(1<a.length?"Move the "+a.length+" selected posts?":"Move the post?"))return!1;jQ.ajax({type:"POST",url:"/mbactions",data:{action:"moveposts",postAction:"move",findpending:1,approve_post_ajax_req:1,post_data:JSON.stringify(a)},success:function(a){jQ("#movePostsDialog_body").html(a);
jQ("#approve_post_ajax_req").val("1");jQ("#movePostsDialog").modal("show")},error:function(a,c,f){alert("An error occurred while processing your request.\n"+c+": "+f)}})}),jQ("[id^='approveMember_'],[id^='deleteMember_']").click(function(){var a=this.id,a=a.replace(/approveMember_|deleteMember_/ig,""),a={approvalQueueAction:"approvalQueue",approve_mem_ajax_req:1,delete_member:a};this.id.match(/approveMember_/g)?a.massaction="approve_mem":a.massaction="decline_mem";jQ.ajax({type:"POST",url:"/register",
data:a,success:function(a){if(a.Success){var c=jQ("[name= 'delete_member']");"1"==c.length?jQ("#pendingMembers").remove():(jQ("#member_"+a.members).remove(),jQ("#totalpending_member").html(c.length-1));wtbx.approvalQueue.updatePendingCount(1)}},error:function(a,c,f){alert("An error occurred while processing your request.\n"+c+": "+f)}})}),jQ("[id^='approveEvent_'],[id^='deleteEvent_']").click(function(){var a={approvalQueueAction:"approvalQueue",approve_event_ajax_req:1,eventAction:1,allevents:jQ(this).attr("data-eventid")};
this.id.match(/approveEvent_/g)?a.eventAction=1:a.eventAction=2;jQ.ajax({type:"POST",url:"/register",data:a,success:function(a){if(a.Success){var c=jQ("[name= 'event']");"1"==c.length?jQ("#events_list").remove():(jQ("#event_"+a.all_events).remove(),jQ("#totalpending_events").html(c.length-1));wtbx.approvalQueue.updatePendingCount(1)}},error:function(a,c,f){alert("An error occurred while processing your request.\n"+c+": "+f)}})}),jQ("#manage_primary_usergroup_pending, #manage_additional_usergroup_pending, #change_primary_usergroup, #change_additional_usergroup").click(function(){var a=
[];jQ("[name= 'delete_member']").is(":checked")&&jQ("[name= 'delete_member']").each(function(b,f){jQ(f).is(":checked")&&a.push(jQ(this).val())});var b={delete_member:a.join(",")};"manage_primary_usergroup_pending"==this.id||"manage_additional_usergroup_pending"==this.id?(b.approvalQueueAction="approvalQueue",b.approve_mem_ajax_req=1):b.change_usergroup_ajax_req=1;b.massaction="manage_primary_usergroup_pending"==this.id||"change_primary_usergroup"==this.id?"manage_primary_usergroup":"manage_additional_usergroup";
jQ.ajax({type:"POST",url:"/register",data:b,success:function(a){jQ("#change_group #change_group_body").html(a);jQ("#change_group").modal("show")},error:function(a,b,e){alert("An error occurred while processing your request.\n"+b+": "+e)}})}));jQ(document).on("click","#managePrimaryUsergroup",function(){var a=jQ("#primary_group").serialize(),b=0;jQ.ajax({type:"POST",url:"/register",data:a,success:function(a){if(a.changedUsergroup){var f=jQ("[name= 'delete_member']");if(jQ("#select_all_pending_members").is(":checked")||
"1"==f.length)jQ("#pendingMembers").remove(),b=f.length;else{var e=[],e=a.members.split("_");jQ.each(e,function(a,c){jQ("#member_"+c).remove();--f.length;b+=1});jQ("#totalpending_member").html(f.length)}jQ("#change_group").modal("hide");wtbx.approvalQueue.updatePendingCount(b)}},error:function(a,b,e){alert("An error occurred while processing your request.\n"+b+": "+e)}})});jQ(document).on("click","#manageAdditionalUsergroup",function(){var a=jQ("#additional_group").serialize();jQ.ajax({type:"POST",
url:"/register",data:a,success:function(a){a.changedUsergroup?(members=a.members.split("_"),jQ.each(members,function(a,b){jQ("#mem_"+b).prop("checked",!1)}),jQ("#change_group").modal("hide"),jQ("input:radio").attr("checked",!1)):jQ("#change_group #change_group_body").html(a)},error:function(a,c,f){alert("An error occurred while processing your request.\n"+c+": "+f)}})});jQ(document).on("click","#moveSelectedPosts",function(){var a=jQ("#move_posts_form").serialize(),b=0;jQ.ajax({type:"POST",url:"/mbactions",
data:a,success:function(a){if(a.success){var f=jQ("[name= 'pid']");if(jQ("#select_all_pending_posts").is(":checked"))jQ("#posts_list").remove(),b=f.length;else{var e=[],e=a.pids.split(",");jQ.each(e,function(a,c){jQ("#"+c).remove();--f.length;b+=1});jQ("#totalpending_post").html(f.length)}jQ("#movePostsDialog").modal("hide");wtbx.approvalQueue.updatePendingCount(b)}else a.error&&(jQ("#exist_thread").is(":checked")&&jQ("[name = 'mergethreadurl']").val(""),check_moveposts("title"))},error:function(a,
b,e){alert("An error occurred while processing your request.\n"+b+": "+e)}})})});
wtbx.approvalQueue={checked_members_count:0,checked_posts_count:0,checked_events_count:0,resetCount:function(){this.checked_events_count=this.checked_posts_count=this.checked_members_count=0},hidePendingMenu:function(){jQ("#pending-menu").removeClass("open")},showPendingMenu:function(){jQ("#pending-menu").addClass("open")},updatePendingCount:function(a){a=jQ("#total_pendings").html()-a;0==a?(jQ("#approvalQueue").remove(),jQ("#emptyQueue").removeClass("hidden")):jQ("#total_pendings").html(a);this.resetCount();
this.hidePendingMenu()},displaySelectedOptions:function(a,b,c){var f,e;b?(jQ("#pending-menu").addClass("open"),e=1<b?b+" posts":b+" post",jQ("#move").show()):(e=b="",jQ("#move").hide());a?(jQ("#pending-menu").addClass("open"),f=b?c?", ":" and ":"",f=1<a?f+" "+a+" members":f+" "+a+" member",jQ("#id-dropdown-toggle").show()):(f=a="",jQ("#id-dropdown-toggle").hide());if(c){jQ("#pending-menu").addClass("open");var d="";if(b||a)b&&a&!c&&(d=","),d+=" and ";c=1<c?d+" "+c+" events":d+" "+c+" event";a||b||
(jQ("#id-dropdown-toggle").hide(),jQ("#move").hide())}else c="",a||b||this.hidePendingMenu();jQ("#checkedBoxes").html(e+f+c+" selected");return 1}};jQ(document).ready(function(){jQ(".autoSuggestTypeahead").length&&jQ(".autoSuggestTypeahead").each(function(a,b){$elm=jQ(b);init_typeahead($elm)});jQ(".autoSuggestToken").length&&jQ(".autoSuggestToken").each(function(a,b){$elm=jQ(b);var c=$elm.attr("data-user_limit"),f=$elm.attr("data-user_limit_elment_id");init_tokenfield($elm,$elm,c,jQ("#"+f))})});function init_typeahead(a,b,c,f,e){b=_initEngine();a.typeahead({hint:!0,highlight:!0,minLength:1},{source:b.ttAdapter(),displayKey:"user"})}
function init_tokenfield(a,b,c,f,e){var d=_initEngine(),g;a.tokenfield({typeahead:[null,{source:d.ttAdapter(),displayKey:"user"}],limit:c,delimiter:";",beautify:!1});b.data("bs.tokenfield").$input.on("blur",function(){if(e)return jQ(this).tokenfield("getTokens").length&&checkUsername("/pm/username_check?pm_ajaxRequest=1&valid_recipients=1&recipient="+encodeURIComponent(b.val())),!1});b.on("tokenfield:createtoken",function(a){var b=jQ(this).tokenfield("getTokens");jQ.each(b,function(b,c){c.value===
a.attrs.value&&a.preventDefault()})});b.on("tokenfield:removedtoken",function(a){jQ(this).tokenfield("getTokens").length||jQ("#"+jQ(this).attr("id")+"-tokenfield").attr("placeholder",g)});b.on("tokenfield:createdtoken",function(a){if(total_recipients=jQ(this).tokenfield("getTokens").length)g||(g=jQ("#"+jQ(this).attr("id")+"-tokenfield").attr("placeholder")),jQ("#"+jQ(this).attr("id")+"-tokenfield").attr("placeholder","");total_recipients>=c&&(a=jQ("[name= 'IgnoreUsers']").length?"You can only ignore up to "+
c+" users at a time.":"You may send your message to up to "+c+" people at a time. ",f.html(a))})}function destroy_typeahead(a){a.typeahead("destroy")}function show_singleUser_in_tokenfield(a,b){a.tokenfield("setTokens",[{user:b,value:b}])}
function _initEngine(){var a=new Bloodhound({local:[{user:""}],remote:{url:"/live_member_search?uid="+global_hash.uid+"&format=json&search=a",replace:function(a,c){return"/live_member_search?uid="+global_hash.uid+"&format=json&search="+c},filter:function(a){var c=[];jQ(a).each(function(a,b){c.push({user:b.user,value:b.user})});return c}},limit:10,datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.user)},queryTokenizer:Bloodhound.tokenizers.whitespace});a.initialize();return a};!function(a){var b=function(b,f){this.options=a.extend({},a.fn.editableform.defaults,f);this.$div=a(b);this.options.scope||(this.options.scope=this)};b.prototype={constructor:b,initInput:function(){this.input=this.options.input;this.value=this.input.str2value(this.options.value);this.input.prerender()},initTemplate:function(){this.$form=a(a.fn.editableform.template)},initButtons:function(){var b=this.$form.find(".editable-buttons");b.append(a.fn.editableform.buttons);"bottom"===this.options.showbuttons&&
b.addClass("editable-buttons-bottom")},render:function(){this.$loading=a(a.fn.editableform.loading);this.$div.empty().append(this.$loading);this.initTemplate();this.options.showbuttons?this.initButtons():this.$form.find(".editable-buttons").remove();this.showLoading();this.isSaving=!1;this.$div.triggerHandler("rendering");this.initInput();this.$form.find("div.editable-input").append(this.input.$tpl);this.$div.append(this.$form);a.when(this.input.render()).then(a.proxy(function(){(this.options.showbuttons||
this.input.autosubmit(),this.$form.find(".editable-cancel").click(a.proxy(this.cancel,this)),this.input.error)?(this.error(this.input.error),this.$form.find(".editable-submit").attr("disabled",!0),this.input.$input.attr("disabled",!0),this.$form.submit(function(a){a.preventDefault()})):(this.error(!1),this.input.$input.removeAttr("disabled"),this.$form.find(".editable-submit").removeAttr("disabled"),this.input.value2input(null===this.value||void 0===this.value||""===this.value?this.options.defaultValue:
this.value),this.$form.submit(a.proxy(this.submit,this)));this.$div.triggerHandler("rendered");this.showForm();this.input.postrender&&this.input.postrender()},this))},cancel:function(){this.$div.triggerHandler("cancel")},showLoading:function(){var a,b;this.$form?(a=this.$form.outerWidth(),b=this.$form.outerHeight(),a&&this.$loading.width(a),b&&this.$loading.height(b),this.$form.hide()):(a=this.$loading.parent().width(),a&&this.$loading.width(a));this.$loading.show()},showForm:function(a){this.$loading.hide();
this.$form.show();!1!==a&&this.input.activate();this.$div.triggerHandler("show")},error:function(b){var f=this.$form.find(".control-group"),e=this.$form.find(".editable-error-block");if(!1===b)f.removeClass(a.fn.editableform.errorGroupClass),e.removeClass(a.fn.editableform.errorBlockClass).empty().hide();else{if(b){b=b.split("\n");for(var d=0;d<b.length;d++)b[d]=a("<div>").text(b[d]).html();b=b.join("<br>")}f.addClass(a.fn.editableform.errorGroupClass);e.addClass(a.fn.editableform.errorBlockClass).html(b).show()}},
submit:function(b){b.stopPropagation();b.preventDefault();var f=this.input.input2value();if(b=this.validate(f))return this.error(b),this.showForm(),void 0;if(!this.options.savenochange&&this.input.value2str(f)==this.input.value2str(this.value))return this.$div.triggerHandler("nochange"),void 0;var e=this.input.value2submit(f);this.isSaving=!0;a.when(this.save(e)).done(a.proxy(function(a){this.isSaving=!1;var b="function"==typeof this.options.success?this.options.success.call(this.options.scope,a,
f):null;return!1===b?(this.error(!1),this.showForm(!1),void 0):"string"==typeof b?(this.error(b),this.showForm(),void 0):(b&&"object"==typeof b&&b.hasOwnProperty("newValue")&&(f=b.newValue),this.error(!1),this.value=f,this.$div.triggerHandler("save",{newValue:f,submitValue:e,response:a}),void 0)},this)).fail(a.proxy(function(a){this.isSaving=!1;a="function"==typeof this.options.error?this.options.error.call(this.options.scope,a,f):"string"==typeof a?a:a.responseText||a.statusText||"Unknown error!";
this.error(a);this.showForm()},this))},save:function(b){this.options.pk=a.fn.editableutils.tryParseJson(this.options.pk,!0);var f,e="function"==typeof this.options.pk?this.options.pk.call(this.options.scope):this.options.pk;return"function"==typeof this.options.url||this.options.url&&("always"===this.options.send||"auto"===this.options.send&&null!==e&&void 0!==e)?(this.showLoading(),f={name:this.options.name||"",value:b,pk:e},"function"==typeof this.options.params?f=this.options.params.call(this.options.scope,
f):(this.options.params=a.fn.editableutils.tryParseJson(this.options.params,!0),a.extend(f,this.options.params)),"function"==typeof this.options.url?this.options.url.call(this.options.scope,f):a.ajax(a.extend({url:this.options.url,data:f,type:"POST"},this.options.ajaxOptions))):void 0},validate:function(a){return void 0===a&&(a=this.value),"function"==typeof this.options.validate?this.options.validate.call(this.options.scope,a):void 0},option:function(a,b){a in this.options&&(this.options[a]=b);"value"===
a&&this.setValue(b)},setValue:function(a,b){this.value=b?this.input.str2value(a):a;this.$form&&this.$form.is(":visible")&&this.input.value2input(this.value)}};a.fn.editableform=function(c){var f=arguments;return this.each(function(){var e=a(this),d=e.data("editableform"),g="object"==typeof c&&c;d||e.data("editableform",d=new b(this,g));"string"==typeof c&&d[c].apply(d,Array.prototype.slice.call(f,1))})};a.fn.editableform.Constructor=b;a.fn.editableform.defaults={type:"text",url:null,params:null,name:null,
pk:null,value:null,defaultValue:null,send:"auto",validate:null,success:null,error:null,ajaxOptions:null,showbuttons:!0,scope:null,savenochange:!1};a.fn.editableform.template='<form class="form-inline editableform"><div class="control-group"><div><div class="editable-input"></div><div class="editable-buttons"></div></div><div class="editable-error-block"></div></div></form>';a.fn.editableform.loading='<div class="editableform-loading"></div>';a.fn.editableform.buttons='<button type="submit" class="editable-submit">ok</button><button type="button" class="editable-cancel">cancel</button>';
a.fn.editableform.errorGroupClass=null;a.fn.editableform.errorBlockClass="editable-error";a.fn.editableform.engine="jquery"}(window.jQuery);
(function(a){a.fn.editableutils={inherit:function(a,c){var f=function(){};f.prototype=c.prototype;a.prototype=new f;a.prototype.constructor=a;a.superclass=c.prototype},setCursorPosition:function(a,c){if(a.setSelectionRange)a.setSelectionRange(c,c);else if(a.createTextRange){var f=a.createTextRange();f.collapse(!0);f.moveEnd("character",c);f.moveStart("character",c);f.select()}},tryParseJson:function(a,c){if("string"==typeof a&&a.length&&a.match(/^[\{\[].*[\}\]]$/))if(c)try{a=(new Function("return "+
a))()}catch(f){}finally{}else a=(new Function("return "+a))();return a},sliceObj:function(b,c,f){var e,d,g={};if(!a.isArray(c)||!c.length)return g;for(var h=0;h<c.length;h++)e=c[h],b.hasOwnProperty(e)&&(g[e]=b[e]),!0!==f&&(d=e.toLowerCase(),b.hasOwnProperty(d)&&(g[e]=b[d]));return g},getConfigData:function(b){var c={};return a.each(b.data(),function(a,b){("object"!=typeof b||b&&"object"==typeof b&&(b.constructor===Object||b.constructor===Array))&&(c[a]=b)}),c},objectKeys:function(a){if(Object.keys)return Object.keys(a);
if(a!==Object(a))throw new TypeError("Object.keys called on a non-object");var c,f=[];for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&f.push(c);return f},escape:function(b){return a("<div>").text(b).html()},itemsByValue:function(b,c,f){if(!c||null===b)return[];if("function"!=typeof f){var e=f||"value";f=function(a){return a[e]}}var d=a.isArray(b),g=[],h=this;return a.each(c,function(c,e){if(e.children)g=g.concat(h.itemsByValue(b,e.children,f));else if(d)a.grep(b,function(a){return a==(e&&"object"==
typeof e?f(e):e)}).length&&g.push(e);else{var l=e&&"object"==typeof e?f(e):e;b==l&&g.push(e)}}),g},createInput:function(b){var c,f,e=b.type;return"date"===e&&("inline"===b.mode?a.fn.editabletypes.datefield?e="datefield":a.fn.editabletypes.dateuifield&&(e="dateuifield"):a.fn.editabletypes.date?e="date":a.fn.editabletypes.dateui&&(e="dateui"),"date"!==e||a.fn.editabletypes.date||(e="combodate")),"datetime"===e&&"inline"===b.mode&&(e="datetimefield"),"wysihtml5"!==e||a.fn.editabletypes[e]||(e="textarea"),
"function"==typeof a.fn.editabletypes[e]?(c=a.fn.editabletypes[e],f=this.sliceObj(b,this.objectKeys(c.defaults)),new c(f)):(a.error("Unknown type: "+e),!1)},supportsTransitions:function(){var a=(document.body||document.documentElement).style,c="transition",f=["Moz","Webkit","Khtml","O","ms"];if("string"==typeof a[c])return!0;for(var c=c.charAt(0).toUpperCase()+c.substr(1),e=0;e<f.length;e++)if("string"==typeof a[f[e]+c])return!0;return!1}}})(window.jQuery);
(function(a){var b=function(a,b){this.init(a,b)},c=function(a,b){this.init(a,b)};b.prototype={containerName:null,containerDataName:null,innerCss:null,containerClass:"editable-container editable-popup",defaults:{},init:function(c,e){this.$element=a(c);this.options=a.extend({},a.fn.editableContainer.defaults,e);this.splitOptions();this.formOptions.scope=this.$element[0];this.initContainer();this.delayedHide=!1;this.$element.on("destroyed",a.proxy(function(){this.destroy()},this));a(document).data("editable-handlers-attached")||
(a(document).on("keyup.editable",function(b){27===b.which&&a(".editable-open").editableContainer("hide")}),a(document).on("click.editable",function(c){var e,f=a(c.target),k=".editable-container .ui-datepicker-header .datepicker .modal-backdrop .bootstrap-wysihtml5-insert-image-modal .bootstrap-wysihtml5-insert-link-modal".split(" ");if(a.contains(document.documentElement,c.target)&&!f.is(document)){for(e=0;e<k.length;e++)if(f.is(k[e])||f.parents(k[e]).length)return;b.prototype.closeOthers(c.target)}}),
a(document).data("editable-handlers-attached",!0))},splitOptions:function(){if(this.containerOptions={},this.formOptions={},!a.fn[this.containerName])throw Error(this.containerName+" not found. Have you included corresponding js file?");for(var b in this.options)b in this.defaults?this.containerOptions[b]=this.options[b]:this.formOptions[b]=this.options[b]},tip:function(){return this.container()?this.container().$tip:null},container:function(){var a;return this.containerDataName&&(a=this.$element.data(this.containerDataName))?
a:this.$element.data(this.containerName)},call:function(){this.$element[this.containerName].apply(this.$element,arguments)},initContainer:function(){this.call(this.containerOptions)},renderForm:function(){this.$form.editableform(this.formOptions).on({save:a.proxy(this.save,this),nochange:a.proxy(function(){this.hide("nochange")},this),cancel:a.proxy(function(){this.hide("cancel")},this),show:a.proxy(function(){this.delayedHide?(this.hide(this.delayedHide.reason),this.delayedHide=!1):this.setPosition()},
this),rendering:a.proxy(this.setPosition,this),resize:a.proxy(this.setPosition,this),rendered:a.proxy(function(){this.$element.triggerHandler("shown",a(this.options.scope).data("editable"))},this)}).editableform("render")},show:function(b){this.$element.addClass("editable-open");!1!==b&&this.closeOthers(this.$element[0]);this.innerShow();this.tip().addClass(this.containerClass);this.$form;this.$form=a("<div>");this.tip().is(this.innerCss)?this.tip().append(this.$form):this.tip().find(this.innerCss).append(this.$form);
this.renderForm()},hide:function(a){if(this.tip()&&this.tip().is(":visible")&&this.$element.hasClass("editable-open")){if(this.$form.data("editableform").isSaving)return this.delayedHide={reason:a},void 0;this.delayedHide=!1;this.$element.removeClass("editable-open");this.innerHide();this.$element.triggerHandler("hidden",a||"manual")}},innerShow:function(){},innerHide:function(){},toggle:function(a){this.container()&&this.tip()&&this.tip().is(":visible")?this.hide():this.show(a)},setPosition:function(){},
save:function(a,b){this.$element.triggerHandler("save",b);this.hide("save")},option:function(a,b){this.options[a]=b;a in this.containerOptions?(this.containerOptions[a]=b,this.setContainerOption(a,b)):(this.formOptions[a]=b,this.$form&&this.$form.editableform("option",a,b))},setContainerOption:function(a,b){this.call("option",a,b)},destroy:function(){this.hide();this.innerDestroy();this.$element.off("destroyed");this.$element.removeData("editableContainer")},innerDestroy:function(){},closeOthers:function(b){a(".editable-open").each(function(c,
d){if(d!==b&&!a(d).find(b).length){var g=a(d),h=g.data("editableContainer");h&&("cancel"===h.options.onblur?g.data("editableContainer").hide("onblur"):"submit"===h.options.onblur&&g.data("editableContainer").tip().find("form").submit())}})},activate:function(){this.tip&&this.tip().is(":visible")&&this.$form&&this.$form.data("editableform").input.activate()}};a.fn.editableContainer=function(f){var e=arguments;return this.each(function(){var d=a(this),g=d.data("editableContainer"),h="object"==typeof f&&
f,k="inline"===h.mode?c:b;g||d.data("editableContainer",g=new k(this,h));"string"==typeof f&&g[f].apply(g,Array.prototype.slice.call(e,1))})};a.fn.editableContainer.Popup=b;a.fn.editableContainer.Inline=c;a.fn.editableContainer.defaults={value:null,placement:"top",autohide:!0,onblur:"cancel",anim:!1,mode:"popup"};jQuery.event.special.destroyed={remove:function(a){a.handler&&a.handler()}}})(window.jQuery);
(function(a){a.extend(a.fn.editableContainer.Inline.prototype,a.fn.editableContainer.Popup.prototype,{containerName:"editableform",innerCss:".editable-inline",containerClass:"editable-container editable-inline",initContainer:function(){this.$tip=a("<span></span>");this.options.anim||(this.options.anim=0)},splitOptions:function(){this.containerOptions={};this.formOptions=this.options},tip:function(){return this.$tip},innerShow:function(){this.$element.hide();this.tip().insertAfter(this.$element).show()},
innerHide:function(){this.$tip.hide(this.options.anim,a.proxy(function(){this.$element.show();this.innerDestroy()},this))},innerDestroy:function(){this.tip()&&this.tip().empty().remove()}})})(window.jQuery);
(function(a){var b=function(b,f){this.$element=a(b);this.options=a.extend({},a.fn.editable.defaults,f,a.fn.editableutils.getConfigData(this.$element));this.options.selector?this.initLive():this.init();this.options.highlight&&!a.fn.editableutils.supportsTransitions()&&(this.options.highlight=!1)};b.prototype={constructor:b,init:function(){var b;b=!1;if(this.options.name=this.options.name||this.$element.attr("id"),this.options.scope=this.$element[0],this.input=a.fn.editableutils.createInput(this.options),
this.input){switch(void 0===this.options.value||null===this.options.value?(this.value=this.input.html2value(a.trim(this.$element.html())),b=!0):(this.options.value=a.fn.editableutils.tryParseJson(this.options.value,!0),this.value="string"==typeof this.options.value?this.input.str2value(this.options.value):this.options.value),this.$element.addClass("editable"),"textarea"===this.input.type&&this.$element.addClass("editable-pre-wrapped"),"manual"!==this.options.toggle?(this.$element.addClass("editable-click"),
this.$element.on(this.options.toggle+".editable",a.proxy(function(a){(this.options.disabled||a.preventDefault(),"mouseenter"===this.options.toggle)?this.show():this.toggle("click"!==this.options.toggle)},this))):this.$element.attr("tabindex",-1),"function"==typeof this.options.display&&(this.options.autotext="always"),this.options.autotext){case "always":b=!0;break;case "auto":b=!a.trim(this.$element.text()).length&&null!==this.value&&void 0!==this.value&&!b;break;default:b=!1}a.when(b?this.render():
!0).then(a.proxy(function(){this.options.disabled?this.disable():this.enable();this.$element.triggerHandler("init",this)},this))}},initLive:function(){var b=this.options.selector;this.options.selector=!1;this.options.autotext="never";this.$element.on(this.options.toggle+".editable",b,a.proxy(function(b){var c=a(b.target);c.data("editable")||(c.hasClass(this.options.emptyclass)&&c.empty(),c.editable(this.options).trigger(b))},this))},render:function(a){return!1!==this.options.display?this.input.value2htmlFinal?
this.input.value2html(this.value,this.$element[0],this.options.display,a):"function"==typeof this.options.display?this.options.display.call(this.$element[0],this.value,a):this.input.value2html(this.value,this.$element[0]):void 0},enable:function(){this.options.disabled=!1;this.$element.removeClass("editable-disabled");this.handleEmpty(this.isEmpty);"manual"!==this.options.toggle&&"-1"===this.$element.attr("tabindex")&&this.$element.removeAttr("tabindex")},disable:function(){this.options.disabled=
!0;this.hide();this.$element.addClass("editable-disabled");this.handleEmpty(this.isEmpty);this.$element.attr("tabindex",-1)},toggleDisabled:function(){this.options.disabled?this.enable():this.disable()},option:function(b,f){return b&&"object"==typeof b?(a.each(b,a.proxy(function(b,c){this.option(a.trim(b),c)},this)),void 0):(this.options[b]=f,"disabled"===b?f?this.disable():this.enable():("value"===b&&this.setValue(f),this.container&&this.container.option(b,f),this.input.option&&this.input.option(b,
f),void 0))},handleEmpty:function(b){!1!==this.options.display&&(this.isEmpty=void 0!==b?b:"function"==typeof this.input.isEmpty?this.input.isEmpty(this.$element):""===a.trim(this.$element.html()),this.options.disabled?this.isEmpty&&(this.$element.empty(),this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass)):this.isEmpty?(this.$element.html(this.options.emptytext),this.options.emptyclass&&this.$element.addClass(this.options.emptyclass)):this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass))},
show:function(b){if(!this.options.disabled){if(this.container){if(this.container.tip().is(":visible"))return}else{var f=a.extend({},this.options,{value:this.value,input:this.input});this.$element.editableContainer(f);this.$element.on("save.internal",a.proxy(this.save,this));this.container=this.$element.data("editableContainer")}this.container.show(b)}},hide:function(){this.container&&this.container.hide()},toggle:function(a){this.container&&this.container.tip().is(":visible")?this.hide():this.show(a)},
save:function(a,b){if(this.options.unsavedclass){var e;(e=(e=(e=(e="function"==typeof this.options.url)||!1===this.options.display)||void 0!==b.response)||this.options.savenochange&&this.input.value2str(this.value)!==this.input.value2str(b.newValue))?this.$element.removeClass(this.options.unsavedclass):this.$element.addClass(this.options.unsavedclass)}if(this.options.highlight){var d=this.$element,g=d.css("background-color");d.css("background-color",this.options.highlight);setTimeout(function(){"transparent"===
g&&(g="");d.css("background-color",g);d.addClass("editable-bg-transition");setTimeout(function(){d.removeClass("editable-bg-transition")},1700)},10)}this.setValue(b.newValue,!1,b.response)},validate:function(){return"function"==typeof this.options.validate?this.options.validate.call(this,this.value):void 0},setValue:function(b,f,e){this.value=f?this.input.str2value(b):b;this.container&&this.container.option("value",this.value);a.when(this.render(e)).then(a.proxy(function(){this.handleEmpty()},this))},
activate:function(){this.container&&this.container.activate()},destroy:function(){this.disable();this.container&&this.container.destroy();this.input.destroy();"manual"!==this.options.toggle&&(this.$element.removeClass("editable-click"),this.$element.off(this.options.toggle+".editable"));this.$element.off("save.internal");this.$element.removeClass("editable editable-open editable-disabled");this.$element.removeData("editable")}};a.fn.editable=function(c){var f={},e=arguments;switch(c){case "validate":return this.each(function(){var b,
c=a(this).data("editable");c&&(b=c.validate())&&(f[c.options.name]=b)}),f;case "getValue":return 2===arguments.length&&!0===arguments[1]?f=this.eq(0).data("editable").value:this.each(function(){var b=a(this).data("editable");b&&void 0!==b.value&&null!==b.value&&(f[b.options.name]=b.input.value2submit(b.value))}),f;case "submit":var d,g=arguments[1]||{},h=this,k=this.editable("validate");return a.isEmptyObject(k)?(d=this.editable("getValue"),g.data&&a.extend(d,g.data),a.ajax(a.extend({url:g.url,data:d,
type:"POST"},g.ajaxOptions)).success(function(a){"function"==typeof g.success&&g.success.call(h,a,g)}).error(function(){"function"==typeof g.error&&g.error.apply(h,arguments)})):"function"==typeof g.error&&g.error.call(h,k),this}return this.each(function(){var d=a(this),f=d.data("editable"),g="object"==typeof c&&c;return g&&g.selector?(new b(this,g),void 0):(f||d.data("editable",f=new b(this,g)),"string"==typeof c&&f[c].apply(f,Array.prototype.slice.call(e,1)),void 0)})};a.fn.editable.defaults={type:"text",
disabled:!1,toggle:"click",emptytext:"Empty",autotext:"auto",value:null,display:null,emptyclass:"editable-empty",unsavedclass:"editable-unsaved",selector:null,highlight:"#FFFF80"}})(window.jQuery);
(function(a){a.fn.editabletypes={};var b=function(){};b.prototype={init:function(b,f,e){this.type=b;this.options=a.extend({},e,f)},prerender:function(){this.$input=this.$tpl=a(this.options.tpl);this.error=this.$clear=null},render:function(){},value2html:function(b,f){a(f)[this.options.escape?"text":"html"](a.trim(b))},html2value:function(b){return a("<div>").html(b).text()},value2str:function(a){return a},str2value:function(a){return a},value2submit:function(a){return a},value2input:function(a){this.$input.val(a)},
input2value:function(){return this.$input.val()},activate:function(){this.$input.is(":visible")&&this.$input.focus()},clear:function(){this.$input.val(null)},escape:function(b){return a("<div>").text(b).html()},autosubmit:function(){},destroy:function(){},setClass:function(){this.options.inputclass&&this.$input.addClass(this.options.inputclass)},setAttr:function(a){void 0!==this.options[a]&&null!==this.options[a]&&this.$input.attr(a,this.options[a])},option:function(a,b){this.options[a]=b}};b.defaults=
{tpl:"",inputclass:null,escape:!0,scope:null,showbuttons:!0};a.extend(a.fn.editabletypes,{abstractinput:b})})(window.jQuery);
(function(a){var b=function(){};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{render:function(){var b=a.Deferred();return this.error=null,this.onSourceReady(function(){this.renderList();b.resolve()},function(){this.error=this.options.sourceError;b.resolve()}),b.promise()},html2value:function(){return null},value2html:function(b,f,e,d){var g=a.Deferred(),h=function(){"function"==typeof e?e.call(f,b,this.sourceData,d):this.value2htmlFinal(b,f);g.resolve()};return null===
b?h.call(this):this.onSourceReady(h,function(){g.resolve()}),g.promise()},onSourceReady:function(b,f){var e;if(a.isFunction(this.options.source)?(e=this.options.source.call(this.options.scope),this.sourceData=null):e=this.options.source,this.options.sourceCache&&a.isArray(this.sourceData))return b.call(this),void 0;try{e=a.fn.editableutils.tryParseJson(e,!1)}catch(d){return f.call(this),void 0}if("string"==typeof e){if(this.options.sourceCache){var g,h=e;if(a(document).data(h)||a(document).data(h,
{}),g=a(document).data(h),!1===g.loading&&g.sourceData)return this.sourceData=g.sourceData,this.doPrepend(),b.call(this),void 0;if(!0===g.loading)return g.callbacks.push(a.proxy(function(){this.sourceData=g.sourceData;this.doPrepend();b.call(this)},this)),g.err_callbacks.push(a.proxy(f,this)),void 0;g.loading=!0;g.callbacks=[];g.err_callbacks=[]}e=a.extend({url:e,type:"get",cache:!1,dataType:"json",success:a.proxy(function(d){g&&(g.loading=!1);this.sourceData=this.makeArray(d);a.isArray(this.sourceData)?
(g&&(g.sourceData=this.sourceData,a.each(g.callbacks,function(){this.call()})),this.doPrepend(),b.call(this)):(f.call(this),g&&a.each(g.err_callbacks,function(){this.call()}))},this),error:a.proxy(function(){f.call(this);g&&(g.loading=!1,a.each(g.err_callbacks,function(){this.call()}))},this)},this.options.sourceOptions);a.ajax(e)}else this.sourceData=this.makeArray(e),a.isArray(this.sourceData)?(this.doPrepend(),b.call(this)):f.call(this)},doPrepend:function(){null!==this.options.prepend&&void 0!==
this.options.prepend&&(a.isArray(this.prependData)||(a.isFunction(this.options.prepend)&&(this.options.prepend=this.options.prepend.call(this.options.scope)),this.options.prepend=a.fn.editableutils.tryParseJson(this.options.prepend,!0),"string"==typeof this.options.prepend&&(this.options.prepend={"":this.options.prepend}),this.prependData=this.makeArray(this.options.prepend)),a.isArray(this.prependData)&&a.isArray(this.sourceData)&&(this.sourceData=this.prependData.concat(this.sourceData)))},renderList:function(){},
value2htmlFinal:function(){},makeArray:function(b){var f,e,d,g,h=[];if(!b||"string"==typeof b)return null;if(a.isArray(b)){g=function(a,b){return e={value:a,text:b},2<=f++?!1:void 0};for(var k=0;k<b.length;k++)d=b[k],"object"==typeof d?(f=0,a.each(d,g),1===f?h.push(e):1<f&&(d.children&&(d.children=this.makeArray(d.children)),h.push(d))):h.push({value:d,text:d})}else a.each(b,function(a,b){h.push({value:a,text:b})});return h},option:function(a,b){this.options[a]=b;"source"===a&&(this.sourceData=null);
"prepend"===a&&(this.prependData=null)}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{source:null,prepend:!1,sourceError:"Error when loading list",sourceCache:!0,sourceOptions:null});a.fn.editabletypes.list=b})(window.jQuery);
(function(a){var b=function(a){this.init("text",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{render:function(){this.renderClear();this.setClass();this.setAttr("placeholder")},activate:function(){this.$input.is(":visible")&&(this.$input.focus(),a.fn.editableutils.setCursorPosition(this.$input.get(0),this.$input.val().length),this.toggleClear&&this.toggleClear())},renderClear:function(){this.options.clear&&(this.$clear=a('<span class="editable-clear-x"></span>'),
this.$input.after(this.$clear).css("padding-right",24).keyup(a.proxy(function(b){if(!~a.inArray(b.keyCode,[40,38,9,13,27])){clearTimeout(this.t);var f=this;this.t=setTimeout(function(){f.toggleClear(b)},100)}},this)).parent().css("position","relative"),this.$clear.click(a.proxy(this.clear,this)))},postrender:function(){},toggleClear:function(){if(this.$clear){var a=this.$input.val().length,b=this.$clear.is(":visible");a&&!b&&this.$clear.show();!a&&b&&this.$clear.hide()}},clear:function(){this.$clear.hide();
this.$input.val("").focus()}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',placeholder:null,clear:!0});a.fn.editabletypes.text=b})(window.jQuery);
(function(a){var b=function(a){this.init("textarea",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{render:function(){this.setClass();this.setAttr("placeholder");this.setAttr("rows");this.$input.keydown(function(b){b.ctrlKey&&13===b.which&&a(this).closest("form").submit()})},activate:function(){a.fn.editabletypes.text.prototype.activate.call(this)}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"input-large",
placeholder:null,rows:7});a.fn.editabletypes.textarea=b})(window.jQuery);
(function(a){var b=function(a){this.init("select",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.list);a.extend(b.prototype,{renderList:function(){this.$input.empty();var b=function(f,e){var d;if(a.isArray(e))for(var g=0;g<e.length;g++)d={},e[g].children?(d.label=e[g].text,f.append(b(a("<optgroup>",d),e[g].children))):(d.value=e[g].value,e[g].disabled&&(d.disabled=!0),f.append(a("<option>",d).text(e[g].text)));return f};b(this.$input,this.sourceData);this.setClass();this.$input.on("keydown.editable",
function(b){13===b.which&&a(this).closest("form").submit()})},value2htmlFinal:function(b,f){var e="",d=a.fn.editableutils.itemsByValue(b,this.sourceData);d.length&&(e=d[0].text);a.fn.editabletypes.abstractinput.prototype.value2html.call(this,e,f)},autosubmit:function(){this.$input.off("keydown.editable").on("change.editable",function(){a(this).closest("form").submit()})}});b.defaults=a.extend({},a.fn.editabletypes.list.defaults,{tpl:"<select></select>"});a.fn.editabletypes.select=b})(window.jQuery);
(function(a){var b=function(a){this.init("checklist",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.list);a.extend(b.prototype,{renderList:function(){var b;if(this.$tpl.empty(),a.isArray(this.sourceData)){for(var f=0;f<this.sourceData.length;f++)b=a("<label>").append(a("<input>",{type:"checkbox",value:this.sourceData[f].value})).append(a("<span>").text(" "+this.sourceData[f].text)),a("<div>").append(b).appendTo(this.$tpl);this.$input=this.$tpl.find('input[type="checkbox"]');this.setClass()}},
value2str:function(b){return a.isArray(b)?b.sort().join(a.trim(this.options.separator)):""},str2value:function(b){var f,e=null;return"string"==typeof b&&b.length?(f=new RegExp("\\s*"+a.trim(this.options.separator)+"\\s*"),e=b.split(f)):e=a.isArray(b)?b:[b],e},value2input:function(b){this.$input.prop("checked",!1);a.isArray(b)&&b.length&&this.$input.each(function(f,e){var d=a(e);a.each(b,function(a,b){d.val()==b&&d.prop("checked",!0)})})},input2value:function(){var b=[];return this.$input.filter(":checked").each(function(f,
e){b.push(a(e).val())}),b},value2htmlFinal:function(b,f){var e=[],d=a.fn.editableutils.itemsByValue(b,this.sourceData),g=this.options.escape;d.length?(a.each(d,function(b,c){var d=g?a.fn.editableutils.escape(c.text):c.text;e.push(d)}),a(f).html(e.join("<br>"))):a(f).empty()},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(b){13===b.which&&a(this).closest("form").submit()})}});b.defaults=a.extend({},a.fn.editabletypes.list.defaults,{tpl:'<div class="editable-checklist"></div>',
inputclass:null,separator:","});a.fn.editabletypes.checklist=b})(window.jQuery);(function(a){var b=function(a){this.init("password",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text);a.extend(b.prototype,{value2html:function(b,f){b?a(f).text("[hidden]"):a(f).empty()},html2value:function(){return null}});b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="password">'});a.fn.editabletypes.password=b})(window.jQuery);
(function(a){var b=function(a){this.init("email",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text);b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="email">'});a.fn.editabletypes.email=b})(window.jQuery);(function(a){var b=function(a){this.init("url",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text);b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="url">'});a.fn.editabletypes.url=b})(window.jQuery);
(function(a){var b=function(a){this.init("tel",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text);b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="tel">'});a.fn.editabletypes.tel=b})(window.jQuery);
(function(a){var b=function(a){this.init("number",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text);a.extend(b.prototype,{render:function(){b.superclass.render.call(this);this.setAttr("min");this.setAttr("max");this.setAttr("step")},postrender:function(){this.$clear&&this.$clear.css({right:24})}});b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="number">',inputclass:"input-mini",min:null,max:null,step:null});a.fn.editabletypes.number=b})(window.jQuery);
(function(a){var b=function(a){this.init("range",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.number);a.extend(b.prototype,{render:function(){this.$input=this.$tpl.filter("input");this.setClass();this.setAttr("min");this.setAttr("max");this.setAttr("step");this.$input.on("input",function(){a(this).siblings("output").text(a(this).val())})},activate:function(){this.$input.focus()}});b.defaults=a.extend({},a.fn.editabletypes.number.defaults,{tpl:'<input type="range"><output style="width: 30px; display: inline-block"></output>',
inputclass:"input-medium"});a.fn.editabletypes.range=b})(window.jQuery);(function(a){var b=function(a){this.init("time",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{render:function(){this.setClass()}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="time">'});a.fn.editabletypes.time=b})(window.jQuery);
(function(a){var b=function(c){if(this.init("select2",c,b.defaults),c.select2=c.select2||{},this.sourceData=null,c.placeholder&&(c.select2.placeholder=c.placeholder),!c.select2.tags&&c.source){var f=c.source;a.isFunction(c.source)&&(f=c.source.call(c.scope));"string"==typeof f?(c.select2.ajax=c.select2.ajax||{},c.select2.ajax.data||(c.select2.ajax.data=function(a){return{query:a}}),c.select2.ajax.results||(c.select2.ajax.results=function(a){return{results:a}}),c.select2.ajax.url=f):(this.sourceData=
this.convertSource(f),c.select2.data=this.sourceData)}if(this.options.select2=a.extend({},b.defaults.select2,c.select2),this.isMultiple=this.options.select2.tags||this.options.select2.multiple,this.isRemote="ajax"in this.options.select2,this.idFunc=this.options.select2.id,"function"!=typeof this.idFunc){var e=this.idFunc||"id";this.idFunc=function(a){return a[e]}}this.formatSelection=this.options.select2.formatSelection;"function"!=typeof this.formatSelection&&(this.formatSelection=function(a){return a.text})};
a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{render:function(){this.setClass();this.isRemote&&this.$input.on("select2-loaded",a.proxy(function(a){this.sourceData=a.items.results},this));this.isMultiple&&this.$input.on("change",function(){a(this).closest("form").parent().triggerHandler("resize")})},value2html:function(c,f){var e,d="",g=this;this.options.select2.tags?e=c:this.sourceData&&(e=a.fn.editableutils.itemsByValue(c,this.sourceData,this.idFunc));a.isArray(e)?
(d=[],a.each(e,function(a,b){d.push(b&&"object"==typeof b?g.formatSelection(b):b)})):e&&(d=g.formatSelection(e));d=a.isArray(d)?d.join(this.options.viewseparator):d;b.superclass.value2html.call(this,d,f)},html2value:function(a){return this.options.select2.tags?this.str2value(a,this.options.viewseparator):null},value2input:function(b){if(this.$input.data("select2")?this.$input.val(b).trigger("change",!0):(this.$input.val(b),this.$input.select2(this.options.select2)),this.isRemote&&!this.isMultiple&&
!this.options.select2.initSelection){var f=this.options.select2.formatSelection;this.options.select2.id||f||(b={id:b,text:a(this.options.scope).text()},this.$input.select2("data",b))}},input2value:function(){return this.$input.select2("val")},str2value:function(b,f){if("string"!=typeof b||!this.isMultiple)return b;f=f||this.options.select2.separator||a.fn.select2.defaults.separator;var e,d,g;if(null===b||1>b.length)return null;e=b.split(f);d=0;for(g=e.length;g>d;d+=1)e[d]=a.trim(e[d]);return e},autosubmit:function(){this.$input.on("change",
function(b,f){f||a(this).closest("form").submit()})},convertSource:function(b){if(a.isArray(b)&&b.length&&void 0!==b[0].value)for(var f=0;f<b.length;f++)void 0!==b[f].value&&(b[f].id=b[f].value,delete b[f].value);return b},destroy:function(){this.$input.data("select2")&&this.$input.select2("destroy")}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="hidden">',select2:null,placeholder:null,source:null,viewseparator:", "});a.fn.editabletypes.select2=b})(window.jQuery);
(function(a){var b=function(b,f){return this.$element=a(b),this.$element.is("input")?(this.options=a.extend({},a.fn.combodate.defaults,f,this.$element.data()),this.init(),void 0):(a.error("Combodate should be applied to INPUT element"),void 0)};b.prototype={constructor:b,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]};this.$widget=a('<span class="combodate"></span>').html(this.getTemplate());
this.initCombos();this.$widget.on("change","select",a.proxy(function(){this.$element.val(this.getValue())},this));this.$widget.find("select").css("width","auto");this.$element.hide().after(this.$widget);this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var b=this.options.template;return a.each(this.map,function(a,e){e=e[0];var d=new RegExp(e+"+"),g=1<e.length?e.substring(1,2):e;b=b.replace(d,"{"+g+"}")}),b=b.replace(/ /g,"&nbsp;"),a.each(this.map,function(a,e){e=e[0];
var d=1<e.length?e.substring(1,2):e;b=b.replace("{"+d+"}",'<select class="'+a+'"></select>')}),b},initCombos:function(){var b=this;a.each(this.map,function(a){var e,d,g=b.$widget.find("."+a);g.length&&(b["$"+a]=g,e="fill"+a.charAt(0).toUpperCase()+a.slice(1),d=b[e](),b["$"+a].html(b.renderItems(d)))})},initItems:function(a){var b,e=[];"name"===this.options.firstItem?(b=moment.relativeTime||moment.langData()._relativeTime,a="function"==typeof b[a]?b[a](1,!0,a,!1):b[a],a=a.split(" ").reverse()[0],e.push(["",
a])):"empty"===this.options.firstItem&&e.push(["",""]);return e},renderItems:function(a){for(var b=[],e=0;e<a.length;e++)b.push('<option value="'+a[e][0]+'">'+a[e][1]+"</option>");return b.join("\n")},fillDay:function(){var a,b,e=this.initItems("d"),d=-1!==this.options.template.indexOf("DD");for(b=1;31>=b;b++)a=d?this.leadZero(b):b,e.push([b,a]);return e},fillMonth:function(){var a,b,e=this.initItems("M"),d=-1!==this.options.template.indexOf("MMMM"),g=-1!==this.options.template.indexOf("MMM"),h=-1!==
this.options.template.indexOf("MM");for(b=0;11>=b;b++)a=d?moment().date(1).month(b).format("MMMM"):g?moment().date(1).month(b).format("MMM"):h?this.leadZero(b+1):b+1,e.push([b,a]);return e},fillYear:function(){var a,b,e=[],d=-1!==this.options.template.indexOf("YYYY");for(b=this.options.maxYear;b>=this.options.minYear;b--)a=d?b:(b+"").substring(2),e[this.options.yearDescending?"push":"unshift"]([b,a]);return this.initItems("y").concat(e)},fillHour:function(){var a,b,e=this.initItems("h");a=-1!==this.options.template.indexOf("h");
var d=(-1!==this.options.template.indexOf("H"),-1!==this.options.template.toLowerCase().indexOf("hh")),g=a?12:23;for(b=a?1:0;g>=b;b++)a=d?this.leadZero(b):b,e.push([b,a]);return e},fillMinute:function(){var a,b,e=this.initItems("m"),d=-1!==this.options.template.indexOf("mm");for(b=0;59>=b;b+=this.options.minuteStep)a=d?this.leadZero(b):b,e.push([b,a]);return e},fillSecond:function(){var a,b,e=this.initItems("s"),d=-1!==this.options.template.indexOf("ss");for(b=0;59>=b;b+=this.options.secondStep)a=
d?this.leadZero(b):b,e.push([b,a]);return e},fillAmpm:function(){var a=-1!==this.options.template.indexOf("a");return-1!==this.options.template.indexOf("A"),[["am",a?"am":"AM"],["pm",a?"pm":"PM"]]},getValue:function(b){var f,e={},d=this,g=!1;return a.each(this.map,function(a){if("ampm"!==a){var b="day"===a?1:0;return e[a]=d["$"+a]?parseInt(d["$"+a].val(),10):b,isNaN(e[a])?(g=!0,!1):void 0}}),g?"":(this.$ampm&&(e.hour=12===e.hour?"am"===this.$ampm.val()?0:12:"am"===this.$ampm.val()?e.hour:e.hour+12),
f=moment([e.year,e.month,e.day,e.hour,e.minute,e.second]),this.highlight(f),b=void 0===b?this.options.format:b,null===b?f.isValid()?f:null:f.isValid()?f.format(b):"")},setValue:function(b){function f(b,c){var d={};return b.children("option").each(function(b,e){var f,g=a(e).attr("value");""!==g&&(f=Math.abs(g-c),("undefined"==typeof d.distance||f<d.distance)&&(d={value:g,distance:f}))}),d.value}if(b){var e="string"==typeof b?moment(b,this.options.format):moment(b),d=this,g={};e.isValid()&&(a.each(this.map,
function(a,b){"ampm"!==a&&(g[a]=e[b[1]]())}),this.$ampm&&(12<=g.hour?(g.ampm="pm",12<g.hour&&(g.hour-=12)):(g.ampm="am",0===g.hour&&(g.hour=12))),a.each(g,function(a,b){d["$"+a]&&("minute"===a&&1<d.options.minuteStep&&d.options.roundTime&&(b=f(d["$"+a],b)),"second"===a&&1<d.options.secondStep&&d.options.roundTime&&(b=f(d["$"+a],b)),d["$"+a].val(b))}),this.$element.val(e.format(this.options.format)))}},highlight:function(a){a.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):
this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),this.$widget.find("select").css("border-color","red"))},leadZero:function(a){return 9>=a?"0"+a:a},destroy:function(){this.$widget.remove();this.$element.removeData("combodate").show()}};a.fn.combodate=function(c){var f,e=Array.apply(null,arguments);return e.shift(),"getValue"===
c&&this.length&&(f=this.eq(0).data("combodate"))?f.getValue.apply(f,e):this.each(function(){var d=a(this),f=d.data("combodate"),h="object"==typeof c&&c;f||d.data("combodate",f=new b(this,h));"string"==typeof c&&"function"==typeof f[c]&&f[c].apply(f,e)})};a.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,yearDescending:!0,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,roundTime:!0}})(window.jQuery);
(function(a){var b=function(c){this.init("combodate",c,b.defaults);this.options.viewformat||(this.options.viewformat=this.options.format);c.combodate=a.fn.editableutils.tryParseJson(c.combodate,!0);this.options.combodate=a.extend({},b.defaults.combodate,c.combodate,{format:this.options.format,template:this.options.template})};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{render:function(){this.$input.combodate(this.options.combodate);"bs3"===a.fn.editableform.engine&&
this.$input.siblings().find("select").addClass("form-control");this.options.inputclass&&this.$input.siblings().find("select").addClass(this.options.inputclass)},value2html:function(a,f){var e=a?a.format(this.options.viewformat):"";b.superclass.value2html.call(this,e,f)},html2value:function(a){return a?moment(a,this.options.viewformat):null},value2str:function(a){return a?a.format(this.options.format):""},str2value:function(a){return a?moment(a,this.options.format):null},value2submit:function(a){return this.value2str(a)},
value2input:function(a){this.$input.combodate("setValue",a)},input2value:function(){return this.$input.combodate("getValue",null)},activate:function(){this.$input.siblings(".combodate").find("select").eq(0).focus()},autosubmit:function(){}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',inputclass:null,format:"YYYY-MM-DD",viewformat:null,template:"D / MMM / YYYY",combodate:null});a.fn.editabletypes.combodate=b})(window.jQuery);
(function(a){var b=a.fn.editableform.Constructor.prototype.initInput;a.extend(a.fn.editableform.Constructor.prototype,{initTemplate:function(){this.$form=a(a.fn.editableform.template);this.$form.find(".control-group").addClass("form-group");this.$form.find(".editable-error-block").addClass("help-block")},initInput:function(){b.apply(this);var c=null===this.input.options.inputclass||!1===this.input.options.inputclass;~a.inArray(this.input.type,"text select textarea password email url tel number range time typeaheadjs".split(" "))&&
(this.input.$input.addClass("form-control"),c&&(this.input.options.inputclass="input-sm",this.input.$input.addClass("input-sm")));for(var f=this.$form.find(".editable-buttons"),c=c?["input-sm"]:this.input.options.inputclass.split(" "),e=0;e<c.length;e++)"input-lg"===c[e].toLowerCase()&&f.find("button").removeClass("btn-sm").addClass("btn-lg")}});a.fn.editableform.buttons='<button type="submit" class="btn btn-primary btn-sm editable-submit"><i class="glyphicon glyphicon-ok"></i></button><button type="button" class="btn btn-default btn-sm editable-cancel"><i class="glyphicon glyphicon-remove"></i></button>';
a.fn.editableform.errorGroupClass="has-error";a.fn.editableform.errorBlockClass=null;a.fn.editableform.engine="bs3"})(window.jQuery);
(function(a){a.extend(a.fn.editableContainer.Popup.prototype,{containerName:"popover",containerDataName:"bs.popover",innerCss:".popover-content",defaults:a.fn.popover.Constructor.DEFAULTS,initContainer:function(){a.extend(this.containerOptions,{trigger:"manual",selector:!1,content:" ",template:this.defaults.template});var b;this.$element.data("template")&&(b=this.$element.data("template"),this.$element.removeData("template"));this.call(this.containerOptions);b&&this.$element.data("template",b)},innerShow:function(){this.call("show")},
innerHide:function(){this.call("hide")},innerDestroy:function(){this.call("destroy")},setContainerOption:function(a,c){this.container().options[a]=c},setPosition:function(){!function(){var a=this.tip(),c="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,f=this.getPosition(),a=this.getCalculatedOffset(c,f,a[0].offsetWidth,a[0].offsetHeight);this.applyPlacement(a,c)}.call(this.container())}})})(window.jQuery);
(function(a){function b(){return new Date(Date.UTC.apply(Date,arguments))}function c(b,c){var d,e=a(b).data(),f={},g=new RegExp("^"+c.toLowerCase()+"([A-Z])");c=new RegExp("^"+c.toLowerCase());for(var h in e)c.test(h)&&(d=h.replace(g,function(a,b){return b.toLowerCase()}),f[d]=e[h]);return f}function f(b){var c={};if(l[b]||(b=b.split("-")[0],l[b])){var d=l[b];return a.each(m,function(a,b){b in d&&(c[b]=d[b])}),c}}var e=function(b,c){this._process_options(c);this.element=a(b);this.isInline=!1;this.isInput=
this.element.is("input");this.hasInput=(this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):!1)&&this.element.find("input").length;this.component&&0===this.component.length&&(this.component=!1);this.picker=a(p.template);this._buildEvents();this._attachEvents();this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu");this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right"));
this.viewMode=this.o.startView;this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(a,b){return parseInt(b)+1});this._allow_update=!1;this.setStartDate(this.o.startDate);this.setEndDate(this.o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.fillDow();this.fillMonths();this._allow_update=!0;this.update();this.showMode();this.isInline&&this.show()};e.prototype={constructor:e,_process_options:function(b){this._o=a.extend({},this._o,b);b=this.o=a.extend({},
this._o);var c=b.language;switch(l[c]||(c=c.split("-")[0],l[c]||(c=k.language)),b.language=c,b.startView){case 2:case "decade":b.startView=2;break;case 1:case "year":b.startView=1;break;default:b.startView=0}switch(b.minViewMode){case 1:case "months":b.minViewMode=1;break;case 2:case "years":b.minViewMode=2;break;default:b.minViewMode=0}b.startView=Math.max(b.startView,b.minViewMode);b.weekStart%=7;b.weekEnd=(b.weekStart+6)%7;c=p.parseFormat(b.format);b.startDate!==-1/0&&(b.startDate=p.parseDate(b.startDate,
c,b.language));1/0!==b.endDate&&(b.endDate=p.parseDate(b.endDate,c,b.language));b.daysOfWeekDisabled=b.daysOfWeekDisabled||[];a.isArray(b.daysOfWeekDisabled)||(b.daysOfWeekDisabled=b.daysOfWeekDisabled.split(/[,\s]*/));b.daysOfWeekDisabled=a.map(b.daysOfWeekDisabled,function(a){return parseInt(a,10)})},_events:[],_secondaryEvents:[],_applyEvents:function(a){for(var b,c,d=0;d<a.length;d++)b=a[d][0],c=a[d][1],b.on(c)},_unapplyEvents:function(a){for(var b,c,d=0;d<a.length;d++)b=a[d][0],c=a[d][1],b.off(c)},
_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}],[this.component,{click:a.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:a.proxy(this.show,this)}]];this._secondaryEvents=
[[this.picker,{click:a.proxy(this.click,this)}],[a(window),{resize:a.proxy(this.place,this)}],[a(document),{mousedown:a.proxy(function(a){this.element.is(a.target)||this.element.find(a.target).size()||this.picker.is(a.target)||this.picker.find(a.target).size()||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},
_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(b,c){var d=c||this.date,e=new Date(d.getTime()+6E4*d.getTimezoneOffset());this.element.trigger({type:b,date:e,format:a.proxy(function(a){return p.formatDate(d,a||this.o.format,this.o.language)},this)})},show:function(a){this.isInline||this.picker.appendTo("body");this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();this._attachSecondaryEvents();
a&&a.preventDefault();this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;this.isInput||
delete this.element.data().date},getDate:function(){var a=this.getUTCDate();return new Date(a.getTime()+6E4*a.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(a){this.setUTCDate(new Date(a.getTime()-6E4*a.getTimezoneOffset()))},setUTCDate:function(a){this.date=a;this.setValue()},setValue:function(){var a=this.getFormattedDate();this.isInput?this.element.val(a):this.component&&this.element.find("input").val(a)},getFormattedDate:function(a){return void 0===a&&(a=this.o.format),
p.formatDate(this.date,a,this.o.language)},setStartDate:function(a){this._process_options({startDate:a});this.update();this.updateNavArrows()},setEndDate:function(a){this._process_options({endDate:a});this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(a){this._process_options({daysOfWeekDisabled:a});this.update();this.updateNavArrows()},place:function(){if(!this.isInline){var b=parseInt(this.element.parents().filter(function(){return"auto"!=a(this).css("z-index")}).first().css("z-index"))+
10,c=this.component?this.component.parent().offset():this.element.offset(),d=this.component?this.component.outerHeight(!0):this.element.outerHeight(!0);this.picker.css({top:c.top+d,left:c.left,zIndex:b})}},_allow_update:!0,update:function(){if(this._allow_update){var a,b=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(a=arguments[0],b=!0):(a=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date);
this.date=p.parseDate(a,this.o.format,this.o.language);b&&this.setValue();this.viewDate=this.date<this.o.startDate?new Date(this.o.startDate):this.date>this.o.endDate?new Date(this.o.endDate):new Date(this.date);this.fill()}},fillDow:function(){var a=this.o.weekStart,b="<tr>";this.o.calendarWeeks&&(b+='<th class="cw">&nbsp;</th>',this.picker.find(".datepicker-days thead tr:first-child").prepend('<th class="cw">&nbsp;</th>'));for(;a<this.o.weekStart+7;)b+='<th class="dow">'+l[this.o.language].daysMin[a++%
7]+"</th>";b+="</tr>";this.picker.find(".datepicker-days thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="month">'+l[this.o.language].monthsShort[b++]+"</span>";this.picker.find(".datepicker-months td").html(a)},setRange:function(b){b&&b.length?this.range=a.map(b,function(a){return a.valueOf()}):delete this.range;this.fill()},getClassNames:function(b){var c=[],d=this.viewDate.getUTCFullYear(),e=this.viewDate.getUTCMonth(),f=this.date.valueOf(),g=new Date;return b.getUTCFullYear()<
d||b.getUTCFullYear()==d&&b.getUTCMonth()<e?c.push("old"):(b.getUTCFullYear()>d||b.getUTCFullYear()==d&&b.getUTCMonth()>e)&&c.push("new"),this.o.todayHighlight&&b.getUTCFullYear()==g.getFullYear()&&b.getUTCMonth()==g.getMonth()&&b.getUTCDate()==g.getDate()&&c.push("today"),f&&b.valueOf()==f&&c.push("active"),(b.valueOf()<this.o.startDate||b.valueOf()>this.o.endDate||-1!==a.inArray(b.getUTCDay(),this.o.daysOfWeekDisabled))&&c.push("disabled"),this.range&&(b>this.range[0]&&b<this.range[this.range.length-
1]&&c.push("range"),-1!=a.inArray(b.valueOf(),this.range)&&c.push("selected")),c},fill:function(){var c,d=new Date(this.viewDate),e=d.getUTCFullYear(),f=d.getUTCMonth(),d=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,g=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,h=1/0!==this.o.endDate?this.o.endDate.getUTCFullYear():1/0,k=1/0!==this.o.endDate?this.o.endDate.getUTCMonth():1/0;this.date&&this.date.valueOf();this.picker.find(".datepicker-days thead th.datepicker-switch").text(l[this.o.language].months[f]+
" "+e);this.picker.find("tfoot th.today").text(l[this.o.language].today).toggle(!1!==this.o.todayBtn);this.picker.find("tfoot th.clear").text(l[this.o.language].clear).toggle(!1!==this.o.clearBtn);this.updateNavArrows();this.fillMonths();var m=b(e,f-1,28,0,0,0,0),f=p.getDaysInMonth(m.getUTCFullYear(),m.getUTCMonth());m.setUTCDate(f);m.setUTCDate(f-(m.getUTCDay()-this.o.weekStart+7)%7);var A=new Date(m);A.setUTCDate(A.getUTCDate()+42);for(var A=A.valueOf(),D,f=[];m.valueOf()<A;){if(m.getUTCDay()==
this.o.weekStart&&(f.push("<tr>"),this.o.calendarWeeks)){D=new Date(+m+864E5*((this.o.weekStart-m.getUTCDay()-7)%7));D=new Date(+D+864E5*((11-D.getUTCDay())%7));var C=new Date(+(C=b(D.getUTCFullYear(),0,1))+864E5*((11-C.getUTCDay())%7));f.push('<td class="cw">'+((D-C)/864E5/7+1)+"</td>")}D=this.getClassNames(m);D.push("day");var z=this.o.beforeShowDay(m);void 0===z?z={}:"boolean"==typeof z?z={enabled:z}:"string"==typeof z&&(z={classes:z});!1===z.enabled&&D.push("disabled");z.classes&&(D=D.concat(z.classes.split(/\s+/)));
z.tooltip&&(c=z.tooltip);D=a.unique(D);f.push('<td class="'+D.join(" ")+'"'+(c?' title="'+c+'"':"")+">"+m.getUTCDate()+"</td>");m.getUTCDay()==this.o.weekEnd&&f.push("</tr>");m.setUTCDate(m.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(f.join(""));c=this.date&&this.date.getUTCFullYear();f=this.picker.find(".datepicker-months").find("th:eq(1)").text(e).end().find("span").removeClass("active");c&&c==e&&f.eq(this.date.getUTCMonth()).addClass("active");(d>e||e>h)&&f.addClass("disabled");
e==d&&f.slice(0,g).addClass("disabled");e==h&&f.slice(k+1).addClass("disabled");f="";e=10*parseInt(e/10,10);g=this.picker.find(".datepicker-years").find("th:eq(1)").text(e+"-"+(e+9)).end().find("td");--e;for(k=-1;11>k;k++)f+='<span class="year'+(-1==k?" old":10==k?" new":"")+(c==e?" active":"")+(d>e||e>h?" disabled":"")+'">'+e+"</span>",e+=1;g.html(f)},updateNavArrows:function(){if(this._allow_update){var a=new Date(this.viewDate),b=a.getUTCFullYear(),a=a.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==
-1/0&&b<=this.o.startDate.getUTCFullYear()&&a<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});1/0!==this.o.endDate&&b>=this.o.endDate.getUTCFullYear()&&a>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-1/0&&b<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):
this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.o.endDate&&b>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(c){c.preventDefault();c=a(c.target).closest("span, td, th");if(1==c.length)switch(c[0].nodeName.toLowerCase()){case "th":switch(c[0].className){case "datepicker-switch":this.showMode(1);break;case "prev":case "next":c=p.modes[this.viewMode].navStep*("prev"==c[0].className?
-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,c);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,c)}this.fill();break;case "today":c=new Date;c=b(c.getFullYear(),c.getMonth(),c.getDate(),0,0,0);this.showMode(-2);this._setDate(c,"linked"==this.o.todayBtn?null:"view");break;case "clear":var d;this.isInput?d=this.element:this.component&&(d=this.element.find("input"));d&&d.val("").change();this._trigger("changeDate");this.update();this.o.autoclose&&this.hide()}break;
case "span":if(!c.is(".disabled")){if(this.viewDate.setUTCDate(1),c.is(".month")){d=1;var e=c.parent().find("span").index(c),f=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(e);this._trigger("changeMonth",this.viewDate);1===this.o.minViewMode&&this._setDate(b(f,e,d,0,0,0,0))}else f=parseInt(c.text(),10)||0,d=1,e=0,this.viewDate.setUTCFullYear(f),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(b(f,e,d,0,0,0,0));this.showMode(-1);this.fill()}break;case "td":c.is(".day")&&
!c.is(".disabled")&&(d=parseInt(c.text(),10)||1,f=this.viewDate.getUTCFullYear(),e=this.viewDate.getUTCMonth(),c.is(".old")?0===e?(e=11,--f):--e:c.is(".new")&&(11==e?(e=0,f+=1):e+=1),this._setDate(b(f,e,d,0,0,0,0)))}},_setDate:function(a,b){b&&"date"!=b||(this.date=new Date(a));b&&"view"!=b||(this.viewDate=new Date(a));this.fill();this.setValue();this._trigger("changeDate");var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input"));c&&(c.change(),!this.o.autoclose||b&&"date"!=
b||this.hide())},moveMonth:function(a,b){if(!b)return a;var c,d,e=new Date(a.valueOf()),f=e.getUTCDate(),g=e.getUTCMonth();d=Math.abs(b);if(b=0<b?1:-1,1==d)d=-1==b?function(){return e.getUTCMonth()==g}:function(){return e.getUTCMonth()!=c},c=g+b,e.setUTCMonth(c),(0>c||11<c)&&(c=(c+12)%12);else{for(var h=0;d>h;h++)e=this.moveMonth(e,b);c=e.getUTCMonth();e.setUTCDate(f);d=function(){return c!=e.getUTCMonth()}}for(;d();)e.setUTCDate(--f),e.setUTCMonth(c);return e},moveYear:function(a,b){return this.moveMonth(a,
12*b)},dateWithinRange:function(a){return a>=this.o.startDate&&a<=this.o.endDate},keydown:function(a){if(this.picker.is(":not(:visible)"))return 27==a.keyCode&&this.show(),void 0;var b,c,d,e=!1;switch(a.keyCode){case 27:this.hide();a.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;b=37==a.keyCode?-1:1;a.ctrlKey?(c=this.moveYear(this.date,b),d=this.moveYear(this.viewDate,b)):a.shiftKey?(c=this.moveMonth(this.date,b),d=this.moveMonth(this.viewDate,b)):(c=new Date(this.date),
c.setUTCDate(this.date.getUTCDate()+b),d=new Date(this.viewDate),d.setUTCDate(this.viewDate.getUTCDate()+b));this.dateWithinRange(c)&&(this.date=c,this.viewDate=d,this.setValue(),this.update(),a.preventDefault(),e=!0);break;case 38:case 40:if(!this.o.keyboardNavigation)break;b=38==a.keyCode?-1:1;a.ctrlKey?(c=this.moveYear(this.date,b),d=this.moveYear(this.viewDate,b)):a.shiftKey?(c=this.moveMonth(this.date,b),d=this.moveMonth(this.viewDate,b)):(c=new Date(this.date),c.setUTCDate(this.date.getUTCDate()+
7*b),d=new Date(this.viewDate),d.setUTCDate(this.viewDate.getUTCDate()+7*b));this.dateWithinRange(c)&&(this.date=c,this.viewDate=d,this.setValue(),this.update(),a.preventDefault(),e=!0);break;case 13:this.hide();a.preventDefault();break;case 9:this.hide()}if(e){this._trigger("changeDate");var f;this.isInput?f=this.element:this.component&&(f=this.element.find("input"));f&&f.change()}},showMode:function(a){a&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+a)));this.picker.find(">div").hide().filter(".datepicker-"+
p.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()}};var d=function(b,c){this.element=a(b);this.inputs=a.map(c.inputs,function(a){return a.jquery?a[0]:a});delete c.inputs;a(this.inputs).datepicker(c).bind("changeDate",a.proxy(this.dateUpdated,this));this.pickers=a.map(this.inputs,function(b){return a(b).data("datepicker")});this.updateDates()};d.prototype={updateDates:function(){this.dates=a.map(this.pickers,function(a){return a.date});this.updateRanges()},updateRanges:function(){var b=
a.map(this.dates,function(a){return a.valueOf()});a.each(this.pickers,function(a,c){c.setRange(b)})},dateUpdated:function(b){var c=a(b.target).data("datepicker").getUTCDate();b=a.inArray(b.target,this.inputs);var d=this.inputs.length;if(-1!=b){if(c<this.dates[b])for(;0<=b&&c<this.dates[b];)this.pickers[b--].setUTCDate(c);else if(c>this.dates[b])for(;d>b&&c>this.dates[b];)this.pickers[b++].setUTCDate(c);this.updateDates()}},remove:function(){a.map(this.pickers,function(a){a.remove()});delete this.element.data().datepicker}};
var g=a.fn.datepicker,h=a.fn.datepicker=function(b){var g=Array.apply(null,arguments);g.shift();var h;return this.each(function(){var m=a(this),l=m.data("datepicker"),p="object"==typeof b&&b;if(!l){var l=c(this,"date"),u=a.extend({},k,l,p),u=f(u.language),p=a.extend({},k,u,l,p);m.is(".input-daterange")||p.inputs?(l={inputs:p.inputs||m.find("input").toArray()},m.data("datepicker",l=new d(this,a.extend(p,l)))):m.data("datepicker",l=new e(this,p))}return"string"==typeof b&&"function"==typeof l[b]&&(h=
l[b].apply(l,g),void 0!==h)?!1:void 0}),void 0!==h?h:this},k=a.fn.datepicker.defaults={autoclose:!1,beforeShowDay:a.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},m=a.fn.datepicker.locale_opts=["format","rtl","weekStart"];a.fn.datepicker.Constructor=e;var l=a.fn.datepicker.dates={en:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),
daysShort:"Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),daysMin:"Su Mo Tu We Th Fr Sa Su".split(" "),months:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),today:"Today",clear:"Clear"}},p={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return 0===a%4&&0!==a%
100||0===a%400},getDaysInMonth:function(a,b){return[31,p.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(a){var b=a.replace(this.validParts,"\x00").split("\x00");a=a.match(this.validParts);if(!b||!b.length||!a||0===a.length)throw Error("Invalid date format.");return{separators:b,parts:a}},parseDate:function(c,d,f){if(c instanceof Date)return c;if("string"==typeof d&&(d=p.parseFormat(d)),
/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(c)){var g,h,k=/([\-+]\d+)([dmwy])/,m=c.match(/([\-+]\d+)([dmwy])/g);c=new Date;for(var B=0;B<m.length;B++)switch(g=k.exec(m[B]),h=parseInt(g[1]),g[2]){case "d":c.setUTCDate(c.getUTCDate()+h);break;case "m":c=e.prototype.moveMonth.call(e.prototype,c,h);break;case "w":c.setUTCDate(c.getUTCDate()+7*h);break;case "y":c=e.prototype.moveYear.call(e.prototype,c,h)}return b(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),0,0,0)}var A,m=c&&c.match(this.nonpunctuation)||
[];c=new Date;h={};var D="yyyy yy M MM m mm d dd".split(" "),k={yyyy:function(a,b){return a.setUTCFullYear(b)},yy:function(a,b){return a.setUTCFullYear(2E3+b)},m:function(a,b){for(--b;0>b;)b+=12;b%=12;for(a.setUTCMonth(b);a.getUTCMonth()!=b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)}};k.M=k.MM=k.mm=k.m;k.dd=k.d;c=b(c.getFullYear(),c.getMonth(),c.getDate(),0,0,0);d=d.parts.slice();if(m.length!=d.length&&(d=a(d).filter(function(b,c){return-1!==a.inArray(c,D)}).toArray()),
m.length==d.length){for(var B=0,C=d.length;C>B;B++){if(A=parseInt(m[B],10),g=d[B],isNaN(A))switch(g){case "MM":A=a(l[f].months).filter(function(){var a=this.slice(0,m[B].length),b=m[B].slice(0,a.length);return a==b});A=a.inArray(A[0],l[f].months)+1;break;case "M":A=a(l[f].monthsShort).filter(function(){var a=this.slice(0,m[B].length),b=m[B].slice(0,a.length);return a==b}),A=a.inArray(A[0],l[f].monthsShort)+1}h[g]=A}for(B=0;B<D.length;B++)g=D[B],g in h&&!isNaN(h[g])&&k[g](c,h[g])}return c},formatDate:function(b,
c,d){"string"==typeof c&&(c=p.parseFormat(c));d={d:b.getUTCDate(),D:l[d].daysShort[b.getUTCDay()],DD:l[d].days[b.getUTCDay()],m:b.getUTCMonth()+1,M:l[d].monthsShort[b.getUTCMonth()],MM:l[d].months[b.getUTCMonth()],yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear()};d.dd=(10>d.d?"0":"")+d.d;d.mm=(10>d.m?"0":"")+d.m;b=[];for(var e=a.extend([],c.separators),f=0,g=c.parts.length;g>=f;f++)e.length&&b.push(e.shift()),b.push(d[c.parts[f]]);return b.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',
contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};p.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+p.headTemplate+"<tbody></tbody>"+p.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+p.headTemplate+p.contTemplate+p.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+
p.headTemplate+p.contTemplate+p.footTemplate+"</table></div></div>";a.fn.datepicker.DPGlobal=p;a.fn.datepicker.noConflict=function(){return a.fn.datepicker=g,this};a(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(b){var c=a(this);c.data("datepicker")||(b.preventDefault(),h.call(c,"show"))});a(function(){h.call(a('[data-provide="datepicker-inline"]'))})})(window.jQuery);
(function(a){a.fn.bdatepicker=a.fn.datepicker.noConflict();a.fn.datepicker||(a.fn.datepicker=a.fn.bdatepicker);var b=function(a){this.init("date",a,b.defaults);this.initPicker(a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{initPicker:function(b,f){this.options.viewformat||(this.options.viewformat=this.options.format);b.datepicker=a.fn.editableutils.tryParseJson(b.datepicker,!0);this.options.datepicker=a.extend({},f.datepicker,b.datepicker,{format:this.options.viewformat});
this.options.datepicker.language=this.options.datepicker.language||"en";this.dpg=a.fn.bdatepicker.DPGlobal;this.parsedFormat=this.dpg.parseFormat(this.options.format);this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat)},render:function(){this.$input.bdatepicker(this.options.datepicker);this.options.clear&&(this.$clear=a('<a href="#"></a>').html(this.options.clear).click(a.proxy(function(a){a.preventDefault();a.stopPropagation();this.clear()},this)),this.$tpl.parent().append(a('<div class="editable-clear">').append(this.$clear)))},
value2html:function(a,f){var e=a?this.dpg.formatDate(a,this.parsedViewFormat,this.options.datepicker.language):"";b.superclass.value2html.call(this,e,f)},html2value:function(a){return this.parseDate(a,this.parsedViewFormat)},value2str:function(a){return a?this.dpg.formatDate(a,this.parsedFormat,this.options.datepicker.language):""},str2value:function(a){return this.parseDate(a,this.parsedFormat)},value2submit:function(a){return this.value2str(a)},value2input:function(a){this.$input.bdatepicker("update",
a)},input2value:function(){return this.$input.data("datepicker").date},activate:function(){},clear:function(){this.$input.data("datepicker").date=null;this.$input.find(".active").removeClass("active");this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".day",function(b){if(!a(b.currentTarget).is(".old")&&!a(b.currentTarget).is(".new")){var f=a(this).closest("form");setTimeout(function(){f.submit()},200)}})},parseDate:function(a,b){var e,
d=null;return a&&(d=this.dpg.parseDate(a,b,this.options.datepicker.language),"string"==typeof a&&(e=this.dpg.formatDate(d,b,this.options.datepicker.language),a!==e&&(d=null))),d}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd",viewformat:null,datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!1},clear:"&times; clear"});a.fn.editabletypes.date=b})(window.jQuery);
(function(a){var b=function(a){this.init("datefield",a,b.defaults);this.initPicker(a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.date);a.extend(b.prototype,{render:function(){this.$input=this.$tpl.find("input");this.setClass();this.setAttr("placeholder");this.$tpl.bdatepicker(this.options.datepicker);this.$input.off("focus keydown");this.$input.keyup(a.proxy(function(){this.$tpl.removeData("date");this.$tpl.bdatepicker("update")},this))},value2input:function(a){this.$input.val(a?
this.dpg.formatDate(a,this.parsedViewFormat,this.options.datepicker.language):"");this.$tpl.bdatepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){a.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}});b.defaults=a.extend({},a.fn.editabletypes.date.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-small",datepicker:{weekStart:0,
startView:0,minViewMode:0,autoclose:!0}});a.fn.editabletypes.datefield=b})(window.jQuery);
(function(a){var b=function(a){this.init("datetime",a,b.defaults);this.initPicker(a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{initPicker:function(b,f){this.options.viewformat||(this.options.viewformat=this.options.format);b.datetimepicker=a.fn.editableutils.tryParseJson(b.datetimepicker,!0);this.options.datetimepicker=a.extend({},f.datetimepicker,b.datetimepicker,{format:this.options.viewformat});this.options.datetimepicker.language=this.options.datetimepicker.language||
"en";this.dpg=a.fn.datetimepicker.DPGlobal;this.parsedFormat=this.dpg.parseFormat(this.options.format,this.options.formatType);this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat,this.options.formatType)},render:function(){this.$input.datetimepicker(this.options.datetimepicker);this.$input.on("changeMode",function(){var b=a(this).closest("form").parent();setTimeout(function(){b.triggerHandler("resize")},0)});this.options.clear&&(this.$clear=a('<a href="#"></a>').html(this.options.clear).click(a.proxy(function(a){a.preventDefault();
a.stopPropagation();this.clear()},this)),this.$tpl.parent().append(a('<div class="editable-clear">').append(this.$clear)))},value2html:function(a,f){var e=a?this.dpg.formatDate(this.toUTC(a),this.parsedViewFormat,this.options.datetimepicker.language,this.options.formatType):"";return f?(b.superclass.value2html.call(this,e,f),void 0):e},html2value:function(a){return(a=this.parseDate(a,this.parsedViewFormat))?this.fromUTC(a):null},value2str:function(a){return a?this.dpg.formatDate(this.toUTC(a),this.parsedFormat,
this.options.datetimepicker.language,this.options.formatType):""},str2value:function(a){return(a=this.parseDate(a,this.parsedFormat))?this.fromUTC(a):null},value2submit:function(a){return this.value2str(a)},value2input:function(a){a&&this.$input.data("datetimepicker").setDate(a)},input2value:function(){var a=this.$input.data("datetimepicker");return a.date?a.getDate():null},activate:function(){},clear:function(){this.$input.data("datetimepicker").date=null;this.$input.find(".active").removeClass("active");
this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".minute",function(){var b=a(this).closest("form");setTimeout(function(){b.submit()},200)})},toUTC:function(a){return a?new Date(a.valueOf()-6E4*a.getTimezoneOffset()):a},fromUTC:function(a){return a?new Date(a.valueOf()+6E4*a.getTimezoneOffset()):a},parseDate:function(a,b){var e,d=null;return a&&(d=this.dpg.parseDate(a,b,this.options.datetimepicker.language,this.options.formatType),"string"==
typeof a&&(e=this.dpg.formatDate(d,b,this.options.datetimepicker.language,this.options.formatType),a!==e&&(d=null))),d}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd hh:ii",formatType:"standard",viewformat:null,datetimepicker:{todayHighlight:!1,autoclose:!1},clear:"&times; clear"});a.fn.editabletypes.datetime=b})(window.jQuery);
(function(a){var b=function(a){this.init("datetimefield",a,b.defaults);this.initPicker(a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.datetime);a.extend(b.prototype,{render:function(){this.$input=this.$tpl.find("input");this.setClass();this.setAttr("placeholder");this.$tpl.datetimepicker(this.options.datetimepicker);this.$input.off("focus keydown");this.$input.keyup(a.proxy(function(){this.$tpl.removeData("date");this.$tpl.datetimepicker("update")},this))},value2input:function(a){this.$input.val(this.value2html(a));
this.$tpl.datetimepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){a.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}});b.defaults=a.extend({},a.fn.editabletypes.datetime.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-medium",datetimepicker:{todayHighlight:!1,autoclose:!0}});a.fn.editabletypes.datetimefield=b})(window.jQuery);!function(a){function b(a){return ko.isObservable(a)&&void 0!==a.destroyAll}function c(a,b){for(var c=0;c<a.length;++c)b(a[c])}function f(b,c){this.$select=a(b);this.options=this.mergeOptions(a.extend({},c,this.$select.data()));this.originalOptions=this.$select.clone()[0].options;this.query="";this.searchTimeout=null;this.options.multiple="multiple"===this.$select.attr("multiple");this.options.onChange=a.proxy(this.options.onChange,this);this.options.onDropdownShow=a.proxy(this.options.onDropdownShow,
this);this.options.onDropdownHide=a.proxy(this.options.onDropdownHide,this);this.options.onDropdownShown=a.proxy(this.options.onDropdownShown,this);this.options.onDropdownHidden=a.proxy(this.options.onDropdownHidden,this);this.buildContainer();this.buildButton();this.buildDropdown();this.buildSelectAll();this.buildDropdownOptions();this.buildFilter();this.updateButtonText();this.updateSelectAll();this.options.disableIfEmpty&&0>=a("option",this.$select).length&&this.disable();this.$select.hide().after(this.$container)}
"undefined"!==typeof ko&&ko.bindingHandlers&&!ko.bindingHandlers.multiselect&&(ko.bindingHandlers.multiselect={init:function(e,d,f,h,k){f=f().selectedOptions;d=ko.utils.unwrapObservable(d());a(e).multiselect(d);b(f)&&(a(e).multiselect("select",ko.utils.unwrapObservable(f)),f.subscribe(function(b){var d=[],f=[];c(b,function(a){switch(a.status){case "added":d.push(a.value);break;case "deleted":f.push(a.value)}});0<d.length&&a(e).multiselect("select",d);0<f.length&&a(e).multiselect("deselect",f)},null,
"arrayChange"))},update:function(c,d,f,h,k){f=f().options;h=a(c).data("multiselect");d=ko.utils.unwrapObservable(d());b(f)&&f.subscribe(function(b){a(c).multiselect("rebuild")});h?h.updateOriginalOptions():a(c).multiselect(d)}});f.prototype={defaults:{buttonText:function(b,c){if(0===b.length)return this.nonSelectedText+' <b class="caret"></b>';if(b.length==a("option",a(c)).length)return this.allSelectedText+' <b class="caret"></b>';if(b.length>this.numberDisplayed)return b.length+" "+this.nSelectedText+
' <b class="caret"></b>';var f="";b.each(function(){var b=void 0!==a(this).attr("label")?a(this).attr("label"):a(this).html();f+=b+", "});return f.substr(0,f.length-2)+' <b class="caret"></b>'},buttonTitle:function(b,c){if(0===b.length)return this.nonSelectedText;var f="";b.each(function(){f+=a(this).text()+", "});return f.substr(0,f.length-2)},label:function(b){return a(b).attr("label")||a(b).html()},onChange:function(a,b){},onDropdownShow:function(a){},onDropdownHide:function(a){},onDropdownShown:function(a){},
onDropdownHidden:function(a){},buttonClass:"btn btn-default",buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',dropRight:!1,selectedClass:"active",maxHeight:!1,checkboxName:!1,includeSelectAllOption:!1,includeSelectAllIfMoreThan:0,selectAllText:" Select all",selectAllValue:"multiselect-all",selectAllName:!1,enableFiltering:!1,enableCaseInsensitiveFiltering:!1,enableClickableOptGroups:!1,filterPlaceholder:"Search",filterBehavior:"text",includeFilterClearBtn:!0,preventInputChangeEvent:!1,
nonSelectedText:"None selected",nSelectedText:"selected",allSelectedText:"All selected",numberDisplayed:3,disableIfEmpty:!1,templates:{button:'<button type="button" class="multiselect dropdown-toggle" data-toggle="dropdown"></button>',ul:'<ul class="multiselect-container dropdown-menu"></ul>',filter:'<li class="multiselect-item filter"><div class="input-group"><span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span><input class="form-control multiselect-search" type="text"></div></li>',
filterClearBtn:'<span class="input-group-btn"><button class="btn btn-default multiselect-clear-filter" type="button"><i class="glyphicon glyphicon-remove-circle"></i></button></span>',li:'<li><a href="javascript:void(0);"><label></label></a></li>',divider:'<li class="multiselect-item divider"></li>',liGroup:'<li class="multiselect-item multiselect-group"><label></label></li>'}},constructor:f,buildContainer:function(){this.$container=a(this.options.buttonContainer);this.$container.on("show.bs.dropdown",
this.options.onDropdownShow);this.$container.on("hide.bs.dropdown",this.options.onDropdownHide);this.$container.on("shown.bs.dropdown",this.options.onDropdownShown);this.$container.on("hidden.bs.dropdown",this.options.onDropdownHidden)},buildButton:function(){this.$button=a(this.options.templates.button).addClass(this.options.buttonClass);this.$select.prop("disabled")?this.disable():this.enable();this.options.buttonWidth&&"auto"!==this.options.buttonWidth&&(this.$button.css({width:this.options.buttonWidth}),
this.$container.css({width:this.options.buttonWidth}));var b=this.$select.attr("tabindex");b&&this.$button.attr("tabindex",b);this.$container.prepend(this.$button)},buildDropdown:function(){this.$ul=a(this.options.templates.ul);this.options.dropRight&&this.$ul.addClass("pull-right");this.options.maxHeight&&this.$ul.css({"max-height":this.options.maxHeight+"px","overflow-y":"auto","overflow-x":"hidden"});this.$container.append(this.$ul)},buildDropdownOptions:function(){this.$select.children().each(a.proxy(function(b,
c){var f=a(c),h=f.prop("tagName").toLowerCase();f.prop("value")!==this.options.selectAllValue&&("optgroup"===h?this.createOptgroup(c):"option"===h&&("divider"===f.data("role")?this.createDivider():this.createOptionValue(c)))},this));a("li input",this.$ul).on("change",a.proxy(function(b){var c=a(b.target);b=c.prop("checked")||!1;var f=c.val()===this.options.selectAllValue;this.options.selectedClass&&(b?c.closest("li").addClass(this.options.selectedClass):c.closest("li").removeClass(this.options.selectedClass));
var h=c.val(),h=this.getOptionByValue(h),k=a("option",this.$select).not(h),c=a("input",this.$container).not(c);f&&(b?this.selectAll():this.deselectAll());f||(b?(h.prop("selected",!0),this.options.multiple?h.prop("selected",!0):(this.options.selectedClass&&a(c).closest("li").removeClass(this.options.selectedClass),a(c).prop("checked",!1),k.prop("selected",!1),this.$button.click()),"active"===this.options.selectedClass&&k.closest("a").css("outline","")):h.prop("selected",!1));this.$select.change();
this.updateButtonText();this.updateSelectAll();this.options.onChange(h,b);if(this.options.preventInputChangeEvent)return!1},this));a("li a",this.$ul).on("touchstart click",function(b){b.stopPropagation();var c=a(b.target);if(b.shiftKey&&c.prop("checked")){b=c.closest("li").siblings('li[class="active"]:first');var f=c.closest("li").index(),h=b.index();f>h?c.closest("li").prevUntil(b).each(function(){a(this).find("input:first").prop("checked",!0).trigger("change")}):c.closest("li").nextUntil(b).each(function(){a(this).find("input:first").prop("checked",
!0).trigger("change")})}c.blur()});this.$container.off("keydown.multiselect").on("keydown.multiselect",a.proxy(function(b){if(!a('input[type="text"]',this.$container).is(":focus"))if(9===b.keyCode&&this.$container.hasClass("open"))this.$button.click();else{var c=a(this.$container).find("li:not(.divider):not(.disabled) a").filter(":visible");if(c.length){var f=c.index(c.filter(":focus"));38===b.keyCode&&0<f?f--:40===b.keyCode&&f<c.length-1?f++:~f||(f=0);c=c.eq(f);c.focus();if(32===b.keyCode||13===
b.keyCode)c=c.find("input"),c.prop("checked",!c.prop("checked")),c.change();b.stopPropagation();b.preventDefault()}}},this));if(this.options.enableClickableOptGroups&&this.options.multiple)a("li.multiselect-group",this.$ul).on("click",a.proxy(function(b){b.stopPropagation();var c=!0;b=a(b.target).parent().nextUntil("li.multiselect-group").find("input");b.each(function(){c=c&&a(this).prop("checked")});b.prop("checked",!c).trigger("change")},this))},createOptionValue:function(b){var c=a(b);c.is(":selected")&&
c.prop("selected",!0);b=this.options.label(b);var f=c.val(),h=this.options.multiple?"checkbox":"radio",k=a(this.options.templates.li),m=a("label",k);m.addClass(h);h=a("<input/>").attr("type",h);this.options.checkboxName&&h.attr("name",this.options.checkboxName);m.append(h);var l=c.prop("selected")||!1;h.val(f);f===this.options.selectAllValue&&(k.addClass("multiselect-item multiselect-all"),h.parent().parent().addClass("multiselect-all"));m.append(" "+b);m.attr("title",c.attr("title"));this.$ul.append(k);
c.is(":disabled")&&h.attr("disabled","disabled").prop("disabled",!0).closest("a").attr("tabindex","-1").closest("li").addClass("disabled");h.prop("checked",l);l&&this.options.selectedClass&&h.closest("li").addClass(this.options.selectedClass)},createDivider:function(b){b=a(this.options.templates.divider);this.$ul.append(b)},createOptgroup:function(b){var c=a(b).prop("label"),f=a(this.options.templates.liGroup);a("label",f).text(c);this.options.enableClickableOptGroups&&f.addClass("multiselect-group-clickable");
this.$ul.append(f);a(b).is(":disabled")&&f.addClass("disabled");a("option",b).each(a.proxy(function(a,b){this.createOptionValue(b)},this))},buildSelectAll:function(){"number"===typeof this.options.selectAllValue&&(this.options.selectAllValue=this.options.selectAllValue.toString());if(!this.hasSelectAll()&&this.options.includeSelectAllOption&&this.options.multiple&&a("option",this.$select).length>this.options.includeSelectAllIfMoreThan){this.options.includeSelectAllDivider&&this.$ul.prepend(a(this.options.templates.divider));
var b=a(this.options.templates.li);a("label",b).addClass("checkbox");this.options.selectAllName?a("label",b).append('<input type="checkbox" name="'+this.options.selectAllName+'" />'):a("label",b).append('<input type="checkbox" />');var c=a("input",b);c.val(this.options.selectAllValue);b.addClass("multiselect-item multiselect-all");c.parent().parent().addClass("multiselect-all");a("label",b).append(" "+this.options.selectAllText);this.$ul.prepend(b);c.prop("checked",!1)}},buildFilter:function(){if(this.options.enableFiltering||
this.options.enableCaseInsensitiveFiltering){var b=Math.max(this.options.enableFiltering,this.options.enableCaseInsensitiveFiltering);this.$select.find("option").length>=b&&(this.$filter=a(this.options.templates.filter),a("input",this.$filter).attr("placeholder",this.options.filterPlaceholder),this.options.includeFilterClearBtn&&(b=a(this.options.templates.filterClearBtn),b.on("click",a.proxy(function(b){clearTimeout(this.searchTimeout);this.$filter.find(".multiselect-search").val("");a("li",this.$ul).show().removeClass("filter-hidden");
this.updateSelectAll()},this)),this.$filter.find(".input-group").append(b)),this.$ul.prepend(this.$filter),this.$filter.val(this.query).on("click",function(a){a.stopPropagation()}).on("input keydown",a.proxy(function(b){13===b.which&&b.preventDefault();clearTimeout(this.searchTimeout);this.searchTimeout=this.asyncFunction(a.proxy(function(){if(this.query!==b.target.value){this.query=b.target.value;var c,e;a.each(a("li",this.$ul),a.proxy(function(b,d){var f=a("input",d).val(),p=a("label",d).text(),
n="";"text"===this.options.filterBehavior?n=p:"value"===this.options.filterBehavior?n=f:"both"===this.options.filterBehavior&&(n=p+"\n"+f);f!==this.options.selectAllValue&&p&&(f=!1,this.options.enableCaseInsensitiveFiltering&&-1<n.toLowerCase().indexOf(this.query.toLowerCase())?f=!0:-1<n.indexOf(this.query)&&(f=!0),a(d).toggle(f).toggleClass("filter-hidden",!f),a(this).hasClass("multiselect-group")?(c=d,e=f):(f&&a(c).show().removeClass("filter-hidden"),!f&&e&&a(d).show().removeClass("filter-hidden")))},
this))}this.updateSelectAll()},this),300,this)},this)))}},destroy:function(){this.$container.remove();this.$select.show();this.$select.data("multiselect",null)},refresh:function(){a("option",this.$select).each(a.proxy(function(b,c){var f=a("li input",this.$ul).filter(function(){return a(this).val()===a(c).val()});a(c).is(":selected")?(f.prop("checked",!0),this.options.selectedClass&&f.closest("li").addClass(this.options.selectedClass)):(f.prop("checked",!1),this.options.selectedClass&&f.closest("li").removeClass(this.options.selectedClass));
a(c).is(":disabled")?f.attr("disabled","disabled").prop("disabled",!0).closest("li").addClass("disabled"):f.prop("disabled",!1).closest("li").removeClass("disabled")},this));this.updateButtonText();this.updateSelectAll()},select:function(b,c){a.isArray(b)||(b=[b]);for(var f=0;f<b.length;f++){var h=b[f];if(null!==h&&void 0!==h){var k=this.getOptionByValue(h),h=this.getInputByValue(h);void 0!==k&&void 0!==h&&(this.options.multiple||this.deselectAll(!1),this.options.selectedClass&&h.closest("li").addClass(this.options.selectedClass),
h.prop("checked",!0),k.prop("selected",!0))}}this.updateButtonText();this.updateSelectAll();if(c&&1===b.length)this.options.onChange(k,!0)},clearSelection:function(){this.deselectAll(!1);this.updateButtonText();this.updateSelectAll()},deselect:function(b,c){a.isArray(b)||(b=[b]);for(var f=0;f<b.length;f++){var h=b[f];if(null!==h&&void 0!==h){var k=this.getOptionByValue(h),h=this.getInputByValue(h);void 0!==k&&void 0!==h&&(this.options.selectedClass&&h.closest("li").removeClass(this.options.selectedClass),
h.prop("checked",!1),k.prop("selected",!1))}}this.updateButtonText();this.updateSelectAll();if(c&&1===b.length)this.options.onChange(k,!1)},selectAll:function(b){b="undefined"===typeof b?!0:b;var c=a("li input[type='checkbox']:enabled",this.$ul),f=c.filter(":visible"),h=c.length,k=f.length;b?(f.prop("checked",!0),a("li:not(.divider):not(.disabled)",this.$ul).filter(":visible").addClass(this.options.selectedClass)):(c.prop("checked",!0),a("li:not(.divider):not(.disabled)",this.$ul).addClass(this.options.selectedClass));
if(h===k||!1===b)a("option:enabled",this.$select).prop("selected",!0);else{var m=f.map(function(){return a(this).val()}).get();a("option:enabled",this.$select).filter(function(b){return-1!==a.inArray(a(this).val(),m)}).prop("selected",!0)}},deselectAll:function(b){if("undefined"===typeof b||b){b=a("li input[type='checkbox']:enabled",this.$ul).filter(":visible");b.prop("checked",!1);var c=b.map(function(){return a(this).val()}).get();a("option:enabled",this.$select).filter(function(b){return-1!==a.inArray(a(this).val(),
c)}).prop("selected",!1);this.options.selectedClass&&a("li:not(.divider):not(.disabled)",this.$ul).filter(":visible").removeClass(this.options.selectedClass)}else a("li input[type='checkbox']:enabled",this.$ul).prop("checked",!1),a("option:enabled",this.$select).prop("selected",!1),this.options.selectedClass&&a("li:not(.divider):not(.disabled)",this.$ul).removeClass(this.options.selectedClass)},rebuild:function(){this.$ul.html("");this.options.multiple="multiple"===this.$select.attr("multiple");this.buildSelectAll();
this.buildDropdownOptions();this.buildFilter();this.updateButtonText();this.updateSelectAll();this.options.disableIfEmpty&&0>=a("option",this.$select).length&&this.disable();this.options.dropRight&&this.$ul.addClass("pull-right")},dataprovider:function(b){var d=0,f=a("");a.each(b,function(b,e){var m;a.isArray(e.children)?(d++,m=a("<optgroup/>").attr({label:e.label||"Group "+d}),c(e.children,function(b){m.append(a("<option/>").attr({value:b.value,label:b.label||b.value,title:b.title,selected:!!b.selected}))})):
m=a("<option/>").attr({value:e.value,label:e.label||e.value,title:e.title,selected:!!e.selected});f=f.add(m)});this.$select.empty().append(f);this.rebuild()},enable:function(){this.$select.prop("disabled",!1);this.$button.prop("disabled",!1).removeClass("disabled")},disable:function(){this.$select.prop("disabled",!0);this.$button.prop("disabled",!0).addClass("disabled")},setOptions:function(a){this.options=this.mergeOptions(a)},mergeOptions:function(b){return a.extend(!0,{},this.defaults,b)},hasSelectAll:function(){return 0<
a("li."+this.options.selectAllValue,this.$ul).length},updateSelectAll:function(){if(this.hasSelectAll()){var b=a("li:not(.multiselect-item):not(.filter-hidden) input:enabled",this.$ul),c=b.length,b=b.filter(":checked").length,f=a("li."+this.options.selectAllValue,this.$ul),h=f.find("input");0<b&&b===c?(h.prop("checked",!0),f.addClass(this.options.selectedClass)):(h.prop("checked",!1),f.removeClass(this.options.selectedClass))}},updateButtonText:function(){var b=this.getSelected();a(".multiselect",
this.$container).html(this.options.buttonText(b,this.$select));a(".multiselect",this.$container).attr("title",this.options.buttonTitle(b,this.$select))},getSelected:function(){return a("option",this.$select).filter(":selected")},getOptionByValue:function(b){var c=a("option",this.$select);b=b.toString();for(var f=0;f<c.length;f+=1){var h=c[f];if(h.value===b)return a(h)}},getInputByValue:function(b){var c=a("li input",this.$ul);b=b.toString();for(var f=0;f<c.length;f+=1){var h=c[f];if(h.value===b)return a(h)}},
updateOriginalOptions:function(){this.originalOptions=this.$select.clone()[0].options},asyncFunction:function(a,b,c){var f=Array.prototype.slice.call(arguments,3);return setTimeout(function(){a.apply(c||window,f)},b)}};a.fn.multiselect=function(b,c,g){return this.each(function(){var h=a(this).data("multiselect"),k="object"===typeof b&&b;h||(h=new f(this,k),a(this).data("multiselect",h));"string"===typeof b&&(h[b](c,g),"destroy"===b&&a(this).data("multiselect",!1))})};a.fn.multiselect.Constructor=
f;a(function(){a("select[data-role=multiselect]").multiselect()})}(window.jQuery);!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=global.window&&global.window.$?a(global.window.$):function(b){if(!b.$&&!b.fn)throw Error("Tokenfield requires a window object with jQuery or a jQuery instance");return a(b.$||b)}:a(jQuery,window)}(function(a,b){var c=function(c,d){var f=this;this.$element=a(c);this.textDirection=this.$element.css("direction");this.options=a.extend(!0,{},a.fn.tokenfield.defaults,{tokens:this.$element.val()},
this.$element.data(),d);this._delimiters="string"==typeof this.options.delimiter?[this.options.delimiter]:this.options.delimiter;this._triggerKeys=a.map(this._delimiters,function(a){return a.charCodeAt(0)});this._firstDelimiter=this._delimiters[0];var h=a.inArray(" ",this._delimiters),k=a.inArray("-",this._delimiters);0<=h&&(this._delimiters[h]="\\s");0<=k&&(delete this._delimiters[k],this._delimiters.unshift("-"));var m="\\$[{^.|?*+()".split("");a.each(this._delimiters,function(b,c){0<=a.inArray(c,
m)&&(f._delimiters[b]="\\"+c)});var l,p=b&&"function"==typeof b.getMatchedCSSRules?b.getMatchedCSSRules(c):null,h=c.style.width,k=this.$element.width();p&&a.each(p,function(a,b){b.style.width&&(l=b.style.width)});var p="rtl"===a("body").css("direction")?"right":"left",n={position:this.$element.css("position")};n[p]=this.$element.css(p);this.$element.data("original-styles",n).data("original-tabindex",this.$element.prop("tabindex")).css("position","absolute").css(p,"-10000px").prop("tabindex",-1);this.$wrapper=
a('<div class="tokenfield form-control" />');this.$element.hasClass("input-lg")&&this.$wrapper.addClass("input-lg");this.$element.hasClass("input-sm")&&this.$wrapper.addClass("input-sm");"rtl"===this.textDirection&&this.$wrapper.addClass("rtl");n=this.$element.prop("id")||(new Date).getTime()+""+Math.floor(100*(1+Math.random()));this.$input=a('<input type="'+this.options.inputType+'" class="token-input" autocomplete="off" />').appendTo(this.$wrapper).prop("placeholder",this.$element.prop("placeholder")).prop("id",
n+"-tokenfield").prop("tabindex",this.$element.data("original-tabindex"));n=a('label[for="'+this.$element.prop("id")+'"]');(n.length&&n.prop("for",this.$input.prop("id")),this.$copyHelper=a('<input type="text" />').css("position","absolute").css(p,"-10000px").prop("tabindex",-1).prependTo(this.$wrapper),h?this.$wrapper.css("width",h):l?this.$wrapper.css("width",l):this.$element.parents(".form-inline").length&&this.$wrapper.width(k),(this.$element.prop("disabled")||this.$element.parents("fieldset[disabled]").length)&&
this.disable(),this.$element.prop("readonly")&&this.readonly(),this.$mirror=a('<span style="position:absolute; top:-999px; left:0; white-space:pre;"/>'),this.$input.css("min-width",this.options.minWidth+"px"),a.each("fontFamily fontSize fontWeight fontStyle letterSpacing textTransform wordSpacing textIndent".split(" "),function(a,b){f.$mirror[0].style[b]=f.$input.css(b)}),this.$mirror.appendTo("body"),this.$wrapper.insertBefore(this.$element),this.$element.prependTo(this.$wrapper),this.update(),this.setTokens(this.options.tokens,
!1,!this.$element.val()&&this.options.tokens),this.listen(),a.isEmptyObject(this.options.autocomplete))||(h="rtl"===this.textDirection?"right":"left",h=a.extend({minLength:this.options.showAutocompleteOnFocus?0:null,position:{my:h+" top",at:h+" bottom",of:this.$wrapper}},this.options.autocomplete),this.$input.autocomplete(h));a.isEmptyObject(this.options.typeahead)||(k=this.options.typeahead,h={minLength:this.options.showAutocompleteOnFocus?0:null},k=a.isArray(k)?k:[k,k],k[0]=a.extend({},h,k[0]),
this.$input.typeahead.apply(this.$input,k),this.typeahead=!0)};c.prototype={constructor:c,createToken:function(b,c){var f=this;if(b="string"==typeof b?{value:b,label:b}:a.extend({},b),"undefined"==typeof c&&(c=!0),b.value=a.trim(b.value.toString()),b.label=b.label&&b.label.length?a.trim(b.label):b.value,!(!b.value.length||!b.label.length||b.label.length<=this.options.minLength||this.options.limit&&this.getTokens().length>=this.options.limit)){var h=a.Event("tokenfield:createtoken",{attrs:b});if(this.$element.trigger(h),
h.attrs&&!h.isDefaultPrevented()){var k=a('<div class="token" />').append('<span class="token-label" />').append('<a href="#" class="close" tabindex="-1">&times;</a>').data("attrs",b);this.$input.hasClass("tt-input")?this.$input.parent().before(k):this.$input.before(k);this.$input.css("width",this.options.minWidth+"px");var h=k.find(".token-label"),m=k.find(".close");return this.maxTokenWidth||(this.maxTokenWidth=this.$wrapper.width()-m.outerWidth()-parseInt(m.css("margin-left"),10)-parseInt(m.css("margin-right"),
10)-parseInt(k.css("border-left-width"),10)-parseInt(k.css("border-right-width"),10)-parseInt(k.css("padding-left"),10)-parseInt(k.css("padding-right"),10),parseInt(h.css("border-left-width"),10)-parseInt(h.css("border-right-width"),10)-parseInt(h.css("padding-left"),10)-parseInt(h.css("padding-right"),10),parseInt(h.css("margin-left"),10)-parseInt(h.css("margin-right"),10)),h.text(b.label).css("max-width",this.maxTokenWidth),k.on("mousedown",function(){return f._disabled||f._readonly?!1:(f.preventDeactivation=
!0,void 0)}).on("click",function(a){return f._disabled||f._readonly?!1:(f.preventDeactivation=!1,a.ctrlKey||a.metaKey?(a.preventDefault(),f.toggle(k)):(f.activate(k,a.shiftKey,a.shiftKey),void 0))}).on("dblclick",function(){return f._disabled||f._readonly||!f.options.allowEditing?!1:(f.edit(k),void 0)}),m.on("click",a.proxy(this.remove,this)),this.$element.trigger(a.Event("tokenfield:createdtoken",{attrs:b,relatedTarget:k.get(0)})),c&&this.$element.val(this.getTokensList()).trigger(a.Event("change",
{initiator:"tokenfield"})),this.update(),this.$element.get(0)}}},setTokens:function(b,c,f){if(b){c||this.$wrapper.find(".token").remove();"undefined"==typeof f&&(f=!0);"string"==typeof b&&(b=this._delimiters.length?b.split(new RegExp("["+this._delimiters.join("")+"]")):[b]);var h=this;return a.each(b,function(a,b){h.createToken(b,f)}),this.$element.get(0)}},getTokenData:function(b){b=b.map(function(){return a(this).data("attrs")}).get();return 1==b.length&&(b=b[0]),b},getTokens:function(b){var c=
this,f=[];return this.$wrapper.find(".token"+(b?".active":"")).each(function(){f.push(c.getTokenData(a(this)))}),f},getTokensList:function(b,c,f){b=b||this._firstDelimiter;c="undefined"!=typeof c&&null!==c?c:this.options.beautify;b+=c&&" "!==b?" ":"";return a.map(this.getTokens(f),function(a){return a.value}).join(b)},getInput:function(){return this.$input.val()},listen:function(){var c=this;this.$element.on("change",a.proxy(this.change,this));this.$wrapper.on("mousedown",a.proxy(this.focusInput,
this));this.$input.on("focus",a.proxy(this.focus,this)).on("blur",a.proxy(this.blur,this)).on("paste",a.proxy(this.paste,this)).on("keydown",a.proxy(this.keydown,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this));this.$copyHelper.on("focus",a.proxy(this.focus,this)).on("blur",a.proxy(this.blur,this)).on("keydown",a.proxy(this.keydown,this)).on("keyup",a.proxy(this.keyup,this));this.$input.on("keypress",a.proxy(this.update,this)).on("keyup",a.proxy(this.update,this));
this.$input.on("autocompletecreate",function(){var b=a(this).data("ui-autocomplete").menu.element,f=c.$wrapper.outerWidth()-parseInt(b.css("border-left-width"),10)-parseInt(b.css("border-right-width"),10);b.css("min-width",f+"px")}).on("autocompleteselect",function(a,b){return c.createToken(b.item)&&(c.$input.val(""),c.$input.data("edit")&&c.unedit(!0)),!1}).on("typeahead:selected typeahead:autocompleted",function(a,b){c.createToken(b)&&(c.$input.typeahead("val",""),c.$input.data("edit")&&c.unedit(!0))});
a(b).on("resize",a.proxy(this.update,this))},keydown:function(b){function c(a){h.$input.is(document.activeElement)?0<h.$input.val().length||(a+="All",a=h.$input.hasClass("tt-input")?h.$input.parent()[a](".token:first"):h.$input[a](".token:first"),a.length&&(h.preventInputFocus=!0,h.preventDeactivation=!0,h.activate(a),b.preventDefault())):(h[a](b.shiftKey),b.preventDefault())}function f(c){if(b.shiftKey){if(h.$input.is(document.activeElement)){if(0<h.$input.val().length)return;var d=h.$input.hasClass("tt-input")?
h.$input.parent()[c+"All"](".token:first"):h.$input[c+"All"](".token:first");if(!d.length)return;h.activate(d)}d="prev"===c?"first":"last";h.$firstActiveToken[("prev"===c?"next":"prev")+"All"](".token").each(function(){h.deactivate(a(this))});h.activate(h.$wrapper.find(".token:"+d),!0,!0);b.preventDefault()}}if(this.focused){var h=this;switch(b.keyCode){case 8:if(!this.$input.is(document.activeElement))break;this.lastInputValue=this.$input.val();break;case 37:c("rtl"===this.textDirection?"next":"prev");
break;case 38:f("prev");break;case 39:c("rtl"===this.textDirection?"prev":"next");break;case 40:f("next");break;case 65:if(0<this.$input.val().length||!b.ctrlKey&&!b.metaKey)break;this.activateAll();b.preventDefault();break;case 9:case 13:if(this.$input.data("ui-autocomplete")&&this.$input.data("ui-autocomplete").menu.element.find("li:has(a.ui-state-focus), li.ui-state-focus").length)break;if(this.$input.hasClass("tt-input")&&this.$wrapper.find(".tt-cursor").length)break;if(this.$input.hasClass("tt-input")&&
this.$wrapper.find(".tt-hint").val()&&this.$wrapper.find(".tt-hint").val().length)break;if(this.$input.is(document.activeElement)&&this.$input.val().length||this.$input.data("edit"))return this.createTokensFromInput(b,this.$input.data("edit"));if(13===b.keyCode){if(!this.$copyHelper.is(document.activeElement)||1!==this.$wrapper.find(".token.active").length)break;if(!h.options.allowEditing)break;this.edit(this.$wrapper.find(".token.active"))}}this.lastKeyDown=b.keyCode}},keypress:function(b){return-1!==
a.inArray(b.which,this._triggerKeys)&&this.$input.is(document.activeElement)?(this.$input.val()&&this.createTokensFromInput(b),!1):void 0},keyup:function(a){if(this.preventInputFocus=!1,this.focused){switch(a.keyCode){case 8:if(this.$input.is(document.activeElement)){if(this.$input.val().length||this.lastInputValue.length&&8===this.lastKeyDown)break;this.preventDeactivation=!0;var b=this.$input.hasClass("tt-input")?this.$input.parent().prevAll(".token:first"):this.$input.prevAll(".token:first");if(!b.length)break;
this.activate(b)}else this.remove(a);break;case 46:this.remove(a,"next")}this.lastKeyUp=a.keyCode}},focus:function(){this.focused=!0;this.$wrapper.addClass("focus");this.$input.is(document.activeElement)&&(this.$wrapper.find(".active").removeClass("active"),this.$firstActiveToken=null,this.options.showAutocompleteOnFocus&&this.search())},blur:function(a){this.focused=!1;this.$wrapper.removeClass("focus");this.preventDeactivation||this.$element.is(document.activeElement)||(this.$wrapper.find(".active").removeClass("active"),
this.$firstActiveToken=null);!this.preventCreateTokens&&(this.$input.data("edit")&&!this.$input.is(document.activeElement)||this.options.createTokensOnBlur)&&this.createTokensFromInput(a);this.preventCreateTokens=this.preventDeactivation=!1},paste:function(a){var b=this;b.options.allowPasting&&setTimeout(function(){b.createTokensFromInput(a)},1)},change:function(a){"tokenfield"!==a.initiator&&this.setTokens(this.$element.val())},createTokensFromInput:function(a,b){if(!(this.$input.val().length<this.options.minLength)){var c=
this.getTokensList();return this.setTokens(this.$input.val(),!0),c==this.getTokensList()&&this.$input.val().length?!1:(this.$input.hasClass("tt-input")?this.$input.typeahead("val",""):this.$input.val(""),this.$input.data("edit")&&this.unedit(b),!1)}},next:function(a){if(a){var b=this.$wrapper.find(".active:first");if(b&&this.$firstActiveToken&&b.index()<this.$firstActiveToken.index())return this.deactivate(b)}b=this.$wrapper.find(".active:last").nextAll(".token:first");return b.length?(this.activate(b,
a),void 0):(this.$input.focus(),void 0)},prev:function(a){if(a){var b=this.$wrapper.find(".active:last");if(b&&this.$firstActiveToken&&b.index()>this.$firstActiveToken.index())return this.deactivate(b)}b=this.$wrapper.find(".active:first").prevAll(".token:first");return b.length||(b=this.$wrapper.find(".token:first")),b.length||a?(this.activate(b,a),void 0):(this.$input.focus(),void 0)},activate:function(b,c,f,h){if(b){"undefined"==typeof h&&(h=!0);f&&(c=!0);if(this.$copyHelper.focus(),c||(this.$wrapper.find(".active").removeClass("active"),
h?this.$firstActiveToken=b:delete this.$firstActiveToken),f&&this.$firstActiveToken){c=this.$firstActiveToken.index()-2;f=b.index()-2;var k=this;this.$wrapper.find(".token").slice(Math.min(c,f)+1,Math.max(c,f)).each(function(){k.activate(a(this),!0)})}b.addClass("active");this.$copyHelper.val(this.getTokensList(null,null,!0)).select()}},activateAll:function(){var b=this;this.$wrapper.find(".token").each(function(c){b.activate(a(this),0!==c,!1,!1)})},deactivate:function(a){a&&(a.removeClass("active"),
this.$copyHelper.val(this.getTokensList(null,null,!0)).select())},toggle:function(a){a&&(a.toggleClass("active"),this.$copyHelper.val(this.getTokensList(null,null,!0)).select())},edit:function(b){if(b){var c=b.data("attrs"),f={attrs:c,relatedTarget:b.get(0)},h=a.Event("tokenfield:edittoken",f);if(this.$element.trigger(h),!h.isDefaultPrevented()){b.find(".token-label").text(c.value);var h=b.outerWidth(),k=this.$input.hasClass("tt-input")?this.$input.parent():this.$input;b.replaceWith(k);this.preventCreateTokens=
!0;this.$input.val(c.value).select().data("edit",!0).width(h);this.update();this.$element.trigger(a.Event("tokenfield:editedtoken",f))}}},unedit:function(a){if((this.$input.hasClass("tt-input")?this.$input.parent():this.$input).appendTo(this.$wrapper),this.$input.data("edit",!1),this.$mirror.text(""),this.update(),a){var b=this;setTimeout(function(){b.$input.focus()},1)}},remove:function(b,c){if(!(this.$input.is(document.activeElement)||this._disabled||this._readonly)){var f="click"===b.type?a(b.target).closest(".token"):
this.$wrapper.find(".token.active");if("click"!==b.type&&(c||(c="prev"),this[c](),"prev"===c))var h=0===f.first().prevAll(".token:first").length;var k={attrs:this.getTokenData(f),relatedTarget:f.get(0)},m=a.Event("tokenfield:removetoken",k);(this.$element.trigger(m),m.isDefaultPrevented())||(k=a.Event("tokenfield:removedtoken",k),m=a.Event("change",{initiator:"tokenfield"}),f.remove(),this.$element.val(this.getTokensList()).trigger(k).trigger(m),this.$wrapper.find(".token").length&&"click"!==b.type&&
!h||this.$input.focus(),this.$input.css("width",this.options.minWidth+"px"),this.update(),b.preventDefault(),b.stopPropagation())}},update:function(){var a=this.$input.val(),b=parseInt(this.$input.css("padding-left"),10),c=parseInt(this.$input.css("padding-right"),10),b=b+c;if(this.$input.data("edit")){if(a||(a=this.$input.prop("placeholder")),a!==this.$mirror.text()){this.$mirror.text(a);a=this.$mirror.width()+10;if(a>this.$wrapper.width())return this.$input.width(this.$wrapper.width());this.$input.width(a)}}else a=
"rtl"===this.textDirection?this.$input.offset().left+this.$input.outerWidth()-this.$wrapper.offset().left-parseInt(this.$wrapper.css("padding-left"),10)-b-1:this.$wrapper.offset().left+this.$wrapper.width()+parseInt(this.$wrapper.css("padding-left"),10)-this.$input.offset().left-b,isNaN(a)?this.$input.width("100%"):this.$input.width(a)},focusInput:function(b){if(!(a(b.target).closest(".token").length||a(b.target).closest(".token-input").length||a(b.target).closest(".tt-dropdown-menu").length)){var c=
this;setTimeout(function(){c.$input.focus()},0)}},search:function(){this.$input.data("ui-autocomplete")&&this.$input.autocomplete("search")},disable:function(){this.setProperty("disabled",!0)},enable:function(){this.setProperty("disabled",!1)},readonly:function(){this.setProperty("readonly",!0)},writeable:function(){this.setProperty("readonly",!1)},setProperty:function(a,b){this["_"+a]=b;this.$input.prop(a,b);this.$element.prop(a,b);this.$wrapper[b?"addClass":"removeClass"](a)},destroy:function(){this.$element.val(this.getTokensList());
this.$element.css(this.$element.data("original-styles"));this.$element.prop("tabindex",this.$element.data("original-tabindex"));var b=a('label[for="'+this.$input.prop("id")+'"]');b.length&&b.prop("for",this.$element.prop("id"));this.$element.insertBefore(this.$wrapper);this.$element.removeData("original-styles").removeData("original-tabindex").removeData("bs.tokenfield");this.$wrapper.remove();this.$mirror.remove();return this.$element}};var f=a.fn.tokenfield;return a.fn.tokenfield=function(b,d){var f,
h=[];Array.prototype.push.apply(h,arguments);var k=this.each(function(){var k=a(this),l=k.data("bs.tokenfield"),p="object"==typeof b&&b;"string"==typeof b&&l&&l[b]?(h.shift(),f=l[b].apply(l,h)):l||"string"==typeof b||d||(k.data("bs.tokenfield",new c(this,p)),k.trigger("tokenfield:initialize"))});return"undefined"!=typeof f?f:k},a.fn.tokenfield.defaults={minWidth:60,minLength:0,allowEditing:!0,allowPasting:!0,limit:0,autocomplete:{},typeahead:{},showAutocompleteOnFocus:!1,createTokensOnBlur:!1,delimiter:",",
beautify:!0,inputType:"text"},a.fn.tokenfield.Constructor=c,a.fn.tokenfield.noConflict=function(){return a.fn.tokenfield=f,this},c});(function(a,b,c,f){var e,d,g;e={injectStyle:!0,levels:2,expandIcon:"glyphicon glyphicon-plus",collapseIcon:"glyphicon glyphicon-minus",emptyIcon:"glyphicon",nodeIcon:"",selectedIcon:"",checkedIcon:"glyphicon glyphicon-check",uncheckedIcon:"glyphicon glyphicon-unchecked",color:f,backColor:f,borderColor:f,onhoverColor:"#F5F5F5",selectedColor:"#FFFFFF",selectedBackColor:"#428bca",searchResultColor:"#D9534F",searchResultBackColor:f,enableLinks:!1,highlightSelected:!0,highlightSearchResults:!0,showBorder:!0,
showIcon:!0,showCheckbox:!1,showTags:!1,multiSelect:!1,onNodeChecked:f,onNodeCollapsed:f,onNodeDisabled:f,onNodeEnabled:f,onNodeExpanded:f,onNodeSelected:f,onNodeUnchecked:f,onNodeUnselected:f,onSearchComplete:f,onSearchCleared:f};d={silent:!1,ignoreChildren:!1};g={ignoreCase:!0,exactMatch:!1,revealResults:!0};var h=function(b,c){this.$element=a(b);this.elementId=b.id;this.styleId=this.elementId+"-style";this.init(c);return{options:this.options,init:a.proxy(this.init,this),remove:a.proxy(this.remove,
this),getNode:a.proxy(this.getNode,this),getParent:a.proxy(this.getParent,this),getSiblings:a.proxy(this.getSiblings,this),getSelected:a.proxy(this.getSelected,this),getUnselected:a.proxy(this.getUnselected,this),getExpanded:a.proxy(this.getExpanded,this),getCollapsed:a.proxy(this.getCollapsed,this),getChecked:a.proxy(this.getChecked,this),getUnchecked:a.proxy(this.getUnchecked,this),getDisabled:a.proxy(this.getDisabled,this),getEnabled:a.proxy(this.getEnabled,this),selectNode:a.proxy(this.selectNode,
this),unselectNode:a.proxy(this.unselectNode,this),toggleNodeSelected:a.proxy(this.toggleNodeSelected,this),collapseAll:a.proxy(this.collapseAll,this),collapseNode:a.proxy(this.collapseNode,this),expandAll:a.proxy(this.expandAll,this),expandNode:a.proxy(this.expandNode,this),toggleNodeExpanded:a.proxy(this.toggleNodeExpanded,this),revealNode:a.proxy(this.revealNode,this),checkAll:a.proxy(this.checkAll,this),checkNode:a.proxy(this.checkNode,this),uncheckAll:a.proxy(this.uncheckAll,this),uncheckNode:a.proxy(this.uncheckNode,
this),toggleNodeChecked:a.proxy(this.toggleNodeChecked,this),disableAll:a.proxy(this.disableAll,this),disableNode:a.proxy(this.disableNode,this),enableAll:a.proxy(this.enableAll,this),enableNode:a.proxy(this.enableNode,this),toggleNodeDisabled:a.proxy(this.toggleNodeDisabled,this),search:a.proxy(this.search,this),clearSearch:a.proxy(this.clearSearch,this)}};h.prototype.init=function(b){this.tree=[];this.nodes=[];b.data&&("string"===typeof b.data&&(b.data=a.parseJSON(b.data)),this.tree=a.extend(!0,
[],b.data),delete b.data);this.options=a.extend({},e,b);this.destroy();this.subscribeEvents();this.setInitialStates({nodes:this.tree},0);this.render()};h.prototype.remove=function(){this.destroy();a.removeData(this,"treeview");a("#"+this.styleId).remove()};h.prototype.destroy=function(){this.initialized&&(this.$wrapper.remove(),this.$wrapper=null,this.unsubscribeEvents(),this.initialized=!1)};h.prototype.unsubscribeEvents=function(){this.$element.off("click");this.$element.off("nodeChecked");this.$element.off("nodeCollapsed");
this.$element.off("nodeDisabled");this.$element.off("nodeEnabled");this.$element.off("nodeExpanded");this.$element.off("nodeSelected");this.$element.off("nodeUnchecked");this.$element.off("nodeUnselected");this.$element.off("searchComplete");this.$element.off("searchCleared")};h.prototype.subscribeEvents=function(){this.unsubscribeEvents();this.$element.on("click",a.proxy(this.clickHandler,this));if("function"===typeof this.options.onNodeChecked)this.$element.on("nodeChecked",this.options.onNodeChecked);
if("function"===typeof this.options.onNodeCollapsed)this.$element.on("nodeCollapsed",this.options.onNodeCollapsed);if("function"===typeof this.options.onNodeDisabled)this.$element.on("nodeDisabled",this.options.onNodeDisabled);if("function"===typeof this.options.onNodeEnabled)this.$element.on("nodeEnabled",this.options.onNodeEnabled);if("function"===typeof this.options.onNodeExpanded)this.$element.on("nodeExpanded",this.options.onNodeExpanded);if("function"===typeof this.options.onNodeSelected)this.$element.on("nodeSelected",
this.options.onNodeSelected);if("function"===typeof this.options.onNodeUnchecked)this.$element.on("nodeUnchecked",this.options.onNodeUnchecked);if("function"===typeof this.options.onNodeUnselected)this.$element.on("nodeUnselected",this.options.onNodeUnselected);if("function"===typeof this.options.onSearchComplete)this.$element.on("searchComplete",this.options.onSearchComplete);if("function"===typeof this.options.onSearchCleared)this.$element.on("searchCleared",this.options.onSearchCleared)};h.prototype.setInitialStates=
function(b,c){if(b.nodes){c+=1;var d=this;a.each(b.nodes,function(a,e){e.nodeId=d.nodes.length;e.parentId=b.nodeId;e.hasOwnProperty("selectable")||(e.selectable=!0);e.state=e.state||{};e.state.hasOwnProperty("checked")||(e.state.checked=!1);e.state.hasOwnProperty("disabled")||(e.state.disabled=!1);e.state.hasOwnProperty("expanded")||(e.state.expanded=!e.state.disabled&&c<d.options.levels&&e.nodes&&0<e.nodes.length?!0:!1);e.state.hasOwnProperty("selected")||(e.state.selected=!1);d.nodes.push(e);e.nodes&&
d.setInitialStates(e,c)})}};h.prototype.clickHandler=function(b){this.options.enableLinks||b.preventDefault();var c=a(b.target);(b=this.findNode(c))&&!b.state.disabled&&(c=c.attr("class")?c.attr("class").split(" "):[],-1!==c.indexOf("expand-icon")?this.toggleExpandedState(b,d):-1!==c.indexOf("check-icon")?this.toggleCheckedState(b,d):b.selectable?this.toggleSelectedState(b,d):this.toggleExpandedState(b,d),this.render())};h.prototype.findNode=function(a){a=a.closest("li.list-group-item").attr("data-nodeid");
(a=this.nodes[a])||console.log("Error: node does not exist");return a};h.prototype.toggleExpandedState=function(a,b){a&&this.setExpandedState(a,!a.state.expanded,b)};h.prototype.setExpandedState=function(b,c,d){c!==b.state.expanded&&(c&&b.nodes?(b.state.expanded=!0,d.silent||this.$element.trigger("nodeExpanded",a.extend(!0,{},b))):c||(b.state.expanded=!1,d.silent||this.$element.trigger("nodeCollapsed",a.extend(!0,{},b)),b.nodes&&!d.ignoreChildren&&a.each(b.nodes,a.proxy(function(a,b){this.setExpandedState(b,
!1,d)},this))))};h.prototype.toggleSelectedState=function(a,b){a&&this.setSelectedState(a,!a.state.selected,b)};h.prototype.setSelectedState=function(b,c,d){c!==b.state.selected&&(c?(this.options.multiSelect||a.each(this.findNodes("true","g","state.selected"),a.proxy(function(a,b){this.setSelectedState(b,!1,d)},this)),b.state.selected=!0,d.silent||this.$element.trigger("nodeSelected",a.extend(!0,{},b))):(b.state.selected=!1,d.silent||this.$element.trigger("nodeUnselected",a.extend(!0,{},b))))};h.prototype.toggleCheckedState=
function(a,b){a&&this.setCheckedState(a,!a.state.checked,b)};h.prototype.setCheckedState=function(b,c,d){c!==b.state.checked&&(c?(b.state.checked=!0,d.silent||this.$element.trigger("nodeChecked",a.extend(!0,{},b))):(b.state.checked=!1,d.silent||this.$element.trigger("nodeUnchecked",a.extend(!0,{},b))))};h.prototype.setDisabledState=function(b,c,d){c!==b.state.disabled&&(c?(b.state.disabled=!0,this.setExpandedState(b,!1,d),this.setSelectedState(b,!1,d),this.setCheckedState(b,!1,d),d.silent||this.$element.trigger("nodeDisabled",
a.extend(!0,{},b))):(b.state.disabled=!1,d.silent||this.$element.trigger("nodeEnabled",a.extend(!0,{},b))))};h.prototype.render=function(){this.initialized||(this.$element.addClass("treeview"),this.$wrapper=a(this.template.list),this.injectStyle(),this.initialized=!0);this.$element.empty().append(this.$wrapper.empty());this.buildTree(this.tree,0)};h.prototype.buildTree=function(b,c){if(b){c+=1;var d=this;a.each(b,function(b,e){for(var f=a(d.template.item).addClass("node-"+d.elementId).addClass(e.state.checked?
"node-checked":"").addClass(e.state.disabled?"node-disabled":"").addClass(e.state.selected?"node-selected":"").addClass(e.searchResult?"search-result":"").attr("data-nodeid",e.nodeId).attr("style",d.buildStyleOverride(e)),g=0;g<c-1;g++)f.append(d.template.indent);g=[];e.nodes?(g.push("expand-icon"),e.state.expanded?g.push(d.options.collapseIcon):g.push(d.options.expandIcon)):g.push(d.options.emptyIcon);f.append(a(d.template.icon).addClass(g.join(" ")));d.options.showIcon&&(g=["node-icon"],g.push(e.icon||
d.options.nodeIcon),e.state.selected&&(g.pop(),g.push(e.selectedIcon||d.options.selectedIcon||e.icon||d.options.nodeIcon)),f.append(a(d.template.icon).addClass(g.join(" "))));d.options.showCheckbox&&(g=["check-icon"],e.state.checked?g.push(d.options.checkedIcon):g.push(d.options.uncheckedIcon),f.append(a(d.template.icon).addClass(g.join(" "))));d.options.enableLinks?f.append(a(d.template.link).attr("href",e.href).append(e.text)):f.append(e.text);d.options.showTags&&e.tags&&a.each(e.tags,function(b,
c){f.append(a(d.template.badge).append(c))});d.$wrapper.append(f);if(e.nodes&&e.state.expanded&&!e.state.disabled)return d.buildTree(e.nodes,c)})}};h.prototype.buildStyleOverride=function(a){if(a.state.disabled)return"";var b=a.color,c=a.backColor;this.options.highlightSelected&&a.state.selected&&(this.options.selectedColor&&(b=this.options.selectedColor),this.options.selectedBackColor&&(c=this.options.selectedBackColor));this.options.highlightSearchResults&&a.searchResult&&!a.state.disabled&&(this.options.searchResultColor&&
(b=this.options.searchResultColor),this.options.searchResultBackColor&&(c=this.options.searchResultBackColor));return"color:"+b+";background-color:"+c+";"};h.prototype.injectStyle=function(){this.options.injectStyle&&!c.getElementById(this.styleId)&&a('<style type="text/css" id="'+this.styleId+'"> '+this.buildStyle()+" </style>").appendTo("head")};h.prototype.buildStyle=function(){var a=".node-"+this.elementId+"{";this.options.color&&(a+="color:"+this.options.color+";");this.options.backColor&&(a+=
"background-color:"+this.options.backColor+";");this.options.showBorder?this.options.borderColor&&(a+="border:1px solid "+this.options.borderColor+";"):a+="border:none;";a+="}";this.options.onhoverColor&&(a+=".node-"+this.elementId+":not(.node-disabled):hover{background-color:"+this.options.onhoverColor+";}");return this.css+a};h.prototype.template={list:'<ul class="list-group"></ul>',item:'<li class="list-group-item"></li>',indent:'<span class="indent"></span>',icon:'<span class="icon"></span>',
link:'<a href="#" style="color:inherit;"></a>',badge:'<span class="badge"></span>'};h.prototype.css=".treeview .list-group-item{cursor:pointer}.treeview span.indent{margin-left:10px;margin-right:10px}.treeview span.icon{width:12px;margin-right:5px}.treeview .node-disabled{color:silver;cursor:not-allowed}";h.prototype.getNode=function(a){return this.nodes[a]};h.prototype.getParent=function(a){a=this.identifyNode(a);return this.nodes[a.parentId]};h.prototype.getSiblings=function(a){var b=this.identifyNode(a);
a=this.getParent(b);return(a?a.nodes:this.tree).filter(function(a){return a.nodeId!==b.nodeId})};h.prototype.getSelected=function(){return this.findNodes("true","g","state.selected")};h.prototype.getUnselected=function(){return this.findNodes("false","g","state.selected")};h.prototype.getExpanded=function(){return this.findNodes("true","g","state.expanded")};h.prototype.getCollapsed=function(){return this.findNodes("false","g","state.expanded")};h.prototype.getChecked=function(){return this.findNodes("true",
"g","state.checked")};h.prototype.getUnchecked=function(){return this.findNodes("false","g","state.checked")};h.prototype.getDisabled=function(){return this.findNodes("true","g","state.disabled")};h.prototype.getEnabled=function(){return this.findNodes("false","g","state.disabled")};h.prototype.selectNode=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.setSelectedState(a,!0,b)},this));this.render()};h.prototype.unselectNode=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,
b){this.setSelectedState(a,!1,b)},this));this.render()};h.prototype.toggleNodeSelected=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.toggleSelectedState(a,b)},this));this.render()};h.prototype.collapseAll=function(b){var c=this.findNodes("true","g","state.expanded");this.forEachIdentifier(c,b,a.proxy(function(a,b){this.setExpandedState(a,!1,b)},this));this.render()};h.prototype.collapseNode=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.setExpandedState(a,
!1,b)},this));this.render()};h.prototype.expandAll=function(b){if((b=a.extend({},d,b))&&b.levels)this.expandLevels(this.tree,b.levels,b);else{var c=this.findNodes("false","g","state.expanded");this.forEachIdentifier(c,b,a.proxy(function(a,b){this.setExpandedState(a,!0,b)},this))}this.render()};h.prototype.expandNode=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.setExpandedState(a,!0,b);a.nodes&&b&&b.levels&&this.expandLevels(a.nodes,b.levels-1,b)},this));this.render()};h.prototype.expandLevels=
function(b,c,e){e=a.extend({},d,e);a.each(b,a.proxy(function(a,b){this.setExpandedState(b,0<c?!0:!1,e);b.nodes&&this.expandLevels(b.nodes,c-1,e)},this))};h.prototype.revealNode=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){for(var c=this.getParent(a);c;)this.setExpandedState(c,!0,b),c=this.getParent(c)},this));this.render()};h.prototype.toggleNodeExpanded=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.toggleExpandedState(a,b)},this));this.render()};h.prototype.checkAll=
function(b){var c=this.findNodes("false","g","state.checked");this.forEachIdentifier(c,b,a.proxy(function(a,b){this.setCheckedState(a,!0,b)},this));this.render()};h.prototype.checkNode=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.setCheckedState(a,!0,b)},this));this.render()};h.prototype.uncheckAll=function(b){var c=this.findNodes("true","g","state.checked");this.forEachIdentifier(c,b,a.proxy(function(a,b){this.setCheckedState(a,!1,b)},this));this.render()};h.prototype.uncheckNode=
function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.setCheckedState(a,!1,b)},this));this.render()};h.prototype.toggleNodeChecked=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.toggleCheckedState(a,b)},this));this.render()};h.prototype.disableAll=function(b){var c=this.findNodes("false","g","state.disabled");this.forEachIdentifier(c,b,a.proxy(function(a,b){this.setDisabledState(a,!0,b)},this));this.render()};h.prototype.disableNode=function(b,c){this.forEachIdentifier(b,
c,a.proxy(function(a,b){this.setDisabledState(a,!0,b)},this));this.render()};h.prototype.enableAll=function(b){var c=this.findNodes("true","g","state.disabled");this.forEachIdentifier(c,b,a.proxy(function(a,b){this.setDisabledState(a,!1,b)},this));this.render()};h.prototype.enableNode=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.setDisabledState(a,!1,b)},this));this.render()};h.prototype.toggleNodeDisabled=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.setDisabledState(a,
!a.state.disabled,b)},this));this.render()};h.prototype.forEachIdentifier=function(b,c,e){c=a.extend({},d,c);b instanceof Array||(b=[b]);a.each(b,a.proxy(function(a,b){e(this.identifyNode(b),c)},this))};h.prototype.identifyNode=function(a){return"number"===typeof a?this.nodes[a]:a};h.prototype.search=function(b,c){c=a.extend({},g,c);this.clearSearch({render:!1});var d=[];b&&0<b.length&&(c.exactMatch&&(b="^"+b+"$"),d="g",c.ignoreCase&&(d+="i"),d=this.findNodes(b,d),a.each(d,function(a,b){b.searchResult=
!0}));c.revealResults?this.revealNode(d):this.render();this.$element.trigger("searchComplete",a.extend(!0,{},d));return d};h.prototype.clearSearch=function(b){b=a.extend({},{render:!0},b);var c=a.each(this.findNodes("true","g","searchResult"),function(a,b){b.searchResult=!1});b.render&&this.render();this.$element.trigger("searchCleared",a.extend(!0,{},c))};h.prototype.findNodes=function(b,c,d){c=c||"g";d=d||"text";var e=this;return a.grep(this.nodes,function(a){a=e.getNodeValue(a,d);if("string"===
typeof a)return a.match(new RegExp(b,c))})};h.prototype.getNodeValue=function(a,b){var c=b.indexOf(".");if(0<c){var d=a[b.substring(0,c)],c=b.substring(c+1,b.length);return this.getNodeValue(d,c)}return a.hasOwnProperty(b)?a[b].toString():f};a.fn.treeview=function(c,d){var e;this.each(function(){var f=a.data(this,"treeview");"string"===typeof c?f?a.isFunction(f[c])&&"_"!==c.charAt(0)?(d instanceof Array||(d=[d]),e=f[c].apply(f,d)):b.console&&b.console.error("No such method : "+c):b.console&&b.console.error("Not initialized, can not call method : "+
c):"boolean"===typeof c?e=f:a.data(this,"treeview",new h(this,a.extend(!0,{},c)))});return e||this}})(jQuery,window,document);function change_recurrence_pattern(){jQ(document).ready(function(){document.getElementById("select_event").style.display="";document.getElementById("daily_legend").style.display="none";document.getElementById("weekly_legend").style.display="none";document.getElementById("monthly_legend").style.display="none";document.getElementById("yearly_legend").style.display="none"})}
function toggle_pattern(a,b){var c={daily:document.getElementById("daily_event"),weekly:document.getElementById("weekly_event"),monthly:document.getElementById("monthly_event"),yearly:document.getElementById("yearly_event")};b&&(document.getElementById(b).checked=!0);for(key in c)c[key].style.display="none";c[a].style.display="block"}function calendar_jump(){""!=document.cjfrm.calendarid.options[document.cjfrm.calendarid.selectedIndex].value&&document.cjfrm.submit()}
function check_reminder_selected(a,b){return getTotalChecked()?!0:(1==b?alert("Please select at least one reminder to update."):2==b&&alert("Please select at least one reminder to delete."),!1)}
function jqCalendar(a,b,c,f,e,d){a="#".concat(a);a=jQ(a);b="#".concat(b);b=jQ(b);c="#".concat(c);c=jQ(c);f="#".concat(f);f=jQ(f);jQ(a).datepicker({minDate:e,maxDate:d,showOn:"button",buttonImage:"/images/icons/calendar.gif",buttonImageOnly:!0,buttonText:"Click to show calendar",onSelect:function(){var d=jQ(a).datepicker("getDate");jQ(c).val(d.getDate());jQ(b).val(d.getMonth()+1);jQ(f).val(d.getFullYear())}});var g=jQ(f).add(b).add(c);if(""!=jQ(c).val()&&""!=jQ(b).val()&&""!=jQ(f).val()){var h=new Date(jQ(f).val(),
jQ(b).val()-1,jQ(c).val());jQ(a).datepicker("setDate",h)}jQ(g).change(function(){var g=1,h=new Date(jQ(f).val(),jQ(b).val()-1,jQ(c).val()),l=Date.parse(h),p=Date.parse(e),n=Date.parse(d);if(""!=jQ(c).val()&&""!=jQ(b).val()&&""!=jQ(f).val()){if(""!=p||""!=n)l<p&&(alert("Date validation failed: \nPlease provide a valid date greater than or equal to "+e+"."),g=0),l>n&&(alert("Date validation failed: \nPlease provide a valid date less than or equal to "+d+"."),g=2);1==g?jQ(a).datepicker("setDate",h):
0==g?jQ(a).datepicker("setDate",e):jQ(a).datepicker("setDate",d)}})}
jQ(document).ready(function(){if(0<jQ(".ranged").length){var a=jQ("#empty_span").html(),b=jQ("[id^='weeks_']");jQ.each(b,function(b,c){var e=this.id,f=jQ(c).find("td"),m=[];jQ.each(f,function(b,c){var d=jQ(this).find(".ranged");if(d.length){var e=jQ("<ul/>").addClass("events has_eve"),f=0;if(m.length)for(var g=0;g<m.length;g++)d.filter('[data-eventID="'+m[g]+'"]').length?e.append(d.filter('[data-eventID="'+m[g]+'"]')):(e.append(a),f++);d=jQ(this).find(".ranged");if(f&&d.length){for(var h=e.find('[data-eventID="0"]'),
g=0;g<=f;g++)d[g]&&h[g]&&jQ(h[g]).replaceWith(jQ(d[g]));d=jQ(this).find(".ranged")}e.append(d);jQ(c).find(".has_eve").replaceWith(e);e=jQ(this).find(".ranged");m=[];jQ.each(e,function(a,b){var c=jQ(b).attr("data-eventID");m.push(c)})}else m=[]});var l=0;jQ.each(f,function(a,b){l=Math.max(jQ(this).height(),l)});jQ("#"+e+" .calendar-details").height(l)})}if(0<jQ("#repeatOptions").length)jQ(document).on("click","[id^='rb_event_']",function(){var a,b;jQ("[id^='rec_']").each(function(){jQ(this).addClass("hidden")});
"rb_event_1"==this.id?(a="daily",b="1"):"rb_event_2"==this.id?(a="weekly",b="3"):"rb_event_3"==this.id?(a="monthly",b="4"):"rb_event_4"==this.id&&(a="yearly",b="6");jQ("#rec_"+a).removeClass("hidden");jQ("#rb_pattern_"+b).prop("checked",!0)});0<jQ("#repeatOptions").length&&(""!=jQ("#recurring_type").val()||"0"!=jQ("#recurring_type").val())&&jQ("[id^='rb_event_']",function(){var a,b;jQ("[id^='rec_']").each(function(){jQ(this).addClass("hidden")});jQ("[id^='rb_event_']").each(function(){jQ(this).removeClass("active")});
if(1==jQ("#recurring_type").val()||2==jQ("#recurring_type").val()||!jQ("#recurring_type").val())a="daily",b=eventtype="1";else if(3==jQ("#recurring_type").val())a="weekly",eventtype="2",b="3";else if(4==jQ("#recurring_type").val()||5==jQ("#recurring_type").val())a="monthly",eventtype="3",b="4";else if(6==jQ("#recurring_type").val()||7==jQ("#recurring_type").val())a="yearly",eventtype="4",b="6";jQ("#rec_"+a).removeClass("hidden");jQ("#rb_event_"+eventtype).addClass("active");jQ("#rb_pattern_"+b).prop("checked",
!0)});jQ(document).on("click","#allDay",function(){jQ("#allDay").is(":checked")?(jQ("#from_time").hide(),jQ("#Ends").hide(),jQ("#repeat_block").hide(),jQ("#event_type").val("single")):(jQ("#from_time").show(),jQ("#Ends").show(),jQ("#repeat_block").show(),jQ("#event_type").val("ranged"))});jQ("#allDay").is(":checked")&&(jQ("#from_time").hide(),jQ("#Ends").hide(),jQ("#repeat_block").hide(),jQ("#event_type").val("single"));jQ(document).on("click","#repeat",function(){jQ("#repeat").is(":checked")?(jQ("#all_Day").hide(),
jQ("#repeatOptions").removeClass("hidden"),jQ("#event_type").val("recur")):(jQ("#all_Day").show(),jQ("#repeatOptions").addClass("hidden"),jQ("#event_type").val("ranged"))});jQ(document).on("change","#event_start_date",function(){var a=jQ("#event_start_date").val();jQ("#event_start_date").val(a);var b=a.split("/")[0],c=a.split("/")[1],a=a.split("/")[2];jQ("#from_month_value").val(b);jQ("#from_day_value").val(c);jQ("#from_year_value").val(a)});jQ(document).on("change","#event_end_date",function(){var a=
jQ("#event_end_date").val();jQ("#event_end_date").val(a);var b=a.split("/")[0],c=a.split("/")[1],a=a.split("/")[2];jQ("#to_month_value").val(b);jQ("#to_day_value").val(c);jQ("#to_year_value").val(a)});jQ("#cancelMoveEvent").click(function(){history.back();return!1});if(0<jQ("[id^='reminder_calendar_']").length)jQ(document).on("click","[id^='remind_']",function(){var a=this.id.replace(/[^0-9]/g,""),b=jQ(this).attr("data-epoc"),c=jQ(this).attr("data-time");jQ("#reminder_type_"+a).val(b);jQ("#days_before_event_"+
a).val(c);jQ("#reminderForm_"+a).submit()});0<jQ("#jumpTo").length&&(b={year:jQ("#from_YEAR").val(),month:jQ("#from_MONTH").val(),day:jQ("#from_DAY").val()},jQ("#jumpTo").datepicker({defaultViewDate:b,viewMode:"years",format:"mm-yyyy",minViewMode:"months",startDate:"01-"+jQ("#jyear_start").val(),endDate:"12-"+jQ("#jyear_end").val(),autoclose:!0}).on("show",function(a){jQ(".datepicker").click(function(){return!1})}),jQ("#jumpTo").click(function(a){a.stopPropagation()}));jQ("#jumpTodate").click(function(){var a=
jQ("#jumpTo").val(),b=a.split("-")[0],a=a.split("-")[1];jQ("#from_MONTH").val(b);jQ("#from_YEAR").val(a);document.jumpTo.submit()});jQ(document).on("click","#weeklyView, #monthlyView, #yearlyView",function(){var a=jQ(this).attr("data-view"),b=jQ(this).attr("data-from_month"),c=jQ(this).attr("data-from_year"),e=jQ(this).attr("data-cal_url"),f=jQ(this).attr("data-weekid")||"";window.location.href="/calendar/display?view="+a+"&from_month="+b+"&from_year="+c+"&weekid="+f+e});if(0<jQ("[id^='calendarModeratorAction_']").length)jQ(document).on("click",
"[id^='event_']",function(){var a=this.id,b=a.replace(/[^0-9]/g,"");if(a=="event_edit_"+b)jQ("#moderate_events_"+b).val("editevent");else if(a=="event_delete_"+b)if(confirm("Delete this event?"))jQ("#moderate_events_"+b).val("delevent");else return!1;else a=="event_move_"+b&&jQ("#moderate_events_"+b).val("movevent");jQ("#evfrm"+b).submit()});jQ("#event_type").length&&!jQ("#repeatOptions").length&&("recur"==jQ("#event_type").val()&&(1!=jQ("#recurring_type").val()&&2!=jQ("#recurring_type").val()&&jQ("#recurring_type").val()?
3==jQ("#recurring_type").val()?toggle_pattern("weekly","rb_pattern_3"):4==jQ("#recurring_type").val()||5==jQ("#recurring_type").val()?toggle_pattern("monthly","rb_pattern_"+jQ("#recurring_type").val()):6!=jQ("#recurring_type").val()&&7!=jQ("#recurring_type").val()||toggle_pattern("yearly","rb_pattern_"+jQ("#recurring_type").val()):toggle_pattern("daily","rb_pattern_1"),jQ("#rb_event_1").click(function(){toggle_pattern("daily","rb_pattern_1")}),jQ("#rb_event_2").click(function(){toggle_pattern("weekly",
"rb_pattern_3")}),jQ("#rb_event_3").click(function(){toggle_pattern("monthly","rb_pattern_4")}),jQ("#rb_event_4").click(function(){toggle_pattern("yearly","rb_pattern_6")}),change_recurrence_pattern()),jqCalendar("CalStartDate","month_field1","day_field1","year_field1",min_date,max_date),"single"!=jQ("#event_type").val()&&jqCalendar("CalEndDate","month_field2","day_field2","year_field2",min_date,max_date));0<jQ("input[id ^= 'set_all_']").length&&jQ("input[id ^= 'set_all_']").click(function(){"Validate"==
this.title?jQ("input[id ^= 'val_']").prop("checked",!0):"Delete"==this.title?jQ("input[id ^= 'del_']").prop("checked",!0):jQ("input[id ^= 'ign_']").prop("checked",!0)});0<jQ("[id ^= 'moderate_events']").length&&jQ("[id ^= 'moderate_events']").change(function(){var a=this.value;if(""!=a)switch(a){case "editevent":this.form.submit();break;case "delevent":confirm("Delete this event?")&&this.form.submit();break;case "movevent":this.form.submit()}});if(0<jQ("#cal_time_offset").length){var c,f,b=jQ("#timeoffset").val();
f=jQ("#event_action").val();b&&"edit"==f?f=b:(c=[],c=moment().format("Z").split(":"),b=c[0].charAt(0),f=c[0].substring(1,3),f=Number(f),30==c[1]&&(c=c[1]/60,f=Number(f)+Number(c)),f=b+f);jQ("#cal_time_offset option[value='"+f+"']").attr("selected","selected")}var e=document.PostTopic;jQ("#event_from_time").blur(function(){var a=jQ("#event_from_time").val(),b=a.match(/^([0-1]?[0-9]|2[0-3])(:[0-5][0-9])?\s*(AM|PM)?$/i);if(""!=a&&b)12<a.substring(0,2)&&a.match(/AM|PM/i)&&(a=a.slice(0,-2),a=a.trim(),
jQ("#event_from_time").val(a)),jQ("#event_from_time").removeClass("input-error error-tooltip").removeAttr("title").removeAttr("data-original-title");else return showFieldError(e.event_from_time,"Error: Please enter valid time."),!1});jQ("#to_time").blur(function(){var a=jQ("#to_time").val(),b=a.match(/^([0-1]?[0-9]|2[0-3])(:[0-5][0-9])?\s*(AM|PM)?$/i);if(""!=a&&b)12<a.substring(0,2)&&a.match(/AM|PM/i)&&(b=a.slice(0,-2),a.trim(),jQ("#to_time").val(b)),jQ("#to_time").removeClass("input-error error-tooltip").removeAttr("title").removeAttr("data-original-title");
else return showFieldError(e.to_time,"Error: Please enter valid time."),!1})});jQ(document).ready(function(){if(jQ("#main-feed, #pending_posts ,#topics-menu, #member_listing, #subscribed_forums, #messages-menu, #posts-menu").length){var a,b,c;jQ(".entry-checkbox, #select_allbox").on("change",function(){var f=this.id;b="select_allbox"==this.id?jQ("#select_allbox"):jQ(".entry-checkbox");c=jQ("#"+b.attr("data-related-item"));setTimeout(function(){var e,d;if(jQ("#posts-menu").length)a="post",e='input[name="pid"]',d="pid";else if(jQ("#topics-menu").length)a="topic",e='input[name="id"]',
d="id";else if(jQ("#member_listing").length)a="member",e='input[name="delete_member"]',d="delete_member";else if(jQ("#subscribed_forums").length)a="forum",e='input[name="unsubscribe_forums"]',d="unsubscribe_forums";else if(jQ("#messages-menu").length){a="conversation";e='input[name="conversation_users_id"]:checked';d="conversation_users_id";var g=jQ(e+"[data-pms_new_status='1'], "+e+"[data-pms_new_status='2']").length,h=jQ(e).length-g;g?jQ("#markread_msg_btn").show():jQ("#markread_msg_btn").hide();
h?jQ("#markunread_msg_btn").show():jQ("#markunread_msg_btn").hide();var k=0;jQ(e).each(function(){var a=jQ(this).attr("data-conv_user_id");k+=jQ("#show_pmsg_"+a+"[data-current_user_active='2']").length});e=jQ(e).length;k==e?jQ("#leave_conversation").hide():jQ("#leave_conversation").show()}d=getTotalChecked(d,"select_allbox",f);1<d&&(a+="s");jQ("#messages-menu").length&&jQ("#move_to_saved_btn a").html("Archive "+a);jQ("#checkedBoxes").html(d+" "+a+" selected");!0===b.is(":checked")?c.addClass("open"):
c.removeClass("open");jQ("#messages-menu").length&&("select_allbox"==b.attr("id")&&0<jQ("#pmsg_list").length?(d="",!0===b.is(":checked")&&(d=b.attr("data-all_conversation_ids"))):(d=[],jQ("#all_conversation_ids").val()&&(d=jQ("#all_conversation_ids").val(),d=d.split(",")),e=b.attr("data-conversation_id"),g=d.indexOf(e),!0===b.is(":checked")?0>g&&d.push(e):0<=g&&d.splice(g,1),d=d.join(",")),jQ("#all_conversation_ids").val(d))},100)})}});var is_regexp=window.RegExp?!0:!1;function set_cookie(a,b,c){document.cookie=a+"="+escape(b)+"; path=/"+("undefined"!=typeof c?"; expires="+c.toGMTString():"")}
function fetch_cookie(a){cookie_name=a+"=";cookie_length=document.cookie.length;for(cookie_begin=0;cookie_begin<cookie_length;){value_begin=cookie_begin+cookie_name.length;if(document.cookie.substring(cookie_begin,value_begin)==cookie_name)return a=document.cookie.indexOf(";",value_begin),-1==a&&(a=cookie_length),unescape(document.cookie.substring(value_begin,a));cookie_begin=document.cookie.indexOf(" ",cookie_begin)+1;if(0==cookie_begin)break}return null}
function toggle_collapse(a,b,c){if(!is_regexp)return!1;if(null==jQ("#collapsible_body_"+a))return jQ("#collapsible_img_icon_"+a)&&jQ("#collapsible_img_icon_"+a).css("display","none"),!1;"none"==jQ("#collapsible_body_"+a).css("display")?(jQ("#collapsible_body_"+a).css("display",""),save_collapsed(a,!1),"#collapsible_img_icon_"+a&&(jQ("#collapsible_img_icon_"+a).removeClass("expand"),jQ("#collapsible_img_icon_"+a).addClass("collapse"),jQ("#collapsible_img_icon_"+a).attr("title","Collapse")),jQ("#collapsible_header_"+
a)&&(jQ("#collapsible_header_"+a).removeClass("expandable"),jQ("#collapsible_header_"+a).addClass("collapsible"))):"none"!=jQ("#collapsible_body_"+a).css("display")&&(jQ("#collapsible_body_"+a).css("display","none"),save_collapsed(a,!0),jQ("#collapsible_img_icon_"+a)&&(jQ("#collapsible_img_icon_"+a).addClass("expand"),jQ("#collapsible_img_icon_"+a).removeClass("collapse"),jQ("#collapsible_img_icon_"+a).attr("title","Expand")),jQ("#collapsible_header_"+a)&&(jQ("#collapsible_header_"+a).removeClass("collapsible"),
jQ("#collapsible_header_"+a).addClass("expandable")));return!1}function save_collapsed(a,b){var c=fetch_cookie("mb_collapse"),f=0,e=[];if(null!=c&&""!=c)for(c=c.split("\n"),i=0;i<c.length;i++)c[i]!=a&&""!=c[i]?(e[e.length]=c[i],b=!0):c[i]==a&&""!=c[i]&&(delete e[e.length],b=!1,f=1);else e[e.length]=a;b&&!f&&(e[e.length]=a);expires=new Date;expires.setTime(expires.getTime()+31536E6);set_cookie("mb_collapse",e.join("\n"),expires)}
function hideCollapse(a){a=a.split("\n");for(var b in a)jQ("#collapsible_body_"+a[b])&&(jQ("#collapsible_body_"+a[b]).css("display","none"),jQ("#collapsible_img_icon_"+a[b])&&(jQ("#collapsible_img_icon_"+a[b]).addClass("expand"),jQ("#collapsible_img_icon_"+a[b]).removeClass("collapse"),jQ("#collapsible_img_icon_"+a[b]).attr("title","Expand")),jQ("#collapsible_header_"+a[b])&&(jQ("#collapsible_header_"+a[b]).removeClass("collapsible"),jQ("#collapsible_header_"+a[b]).addClass("expandable")))};function getCookie(a){var b,c,f,e=document.cookie.split(";");for(b=0;b<e.length;b++)if(c=e[b].substr(0,e[b].indexOf("=")),f=e[b].substr(e[b].indexOf("=")+1),c=c.replace(/^\s+|\s+$/g,""),c==a)return unescape(f)}function setCookie(a,b,c,f){var e="";c&&(e=new Date,e.setTime(e.getTime()+864E5*c),e="expires="+e.toUTCString());var d;f&&(d=window.location.host,d=d.replace(/^www./i,""),d="domain=."+d);document.cookie=a+"="+escape(b)+e+"; "+d+"; path=/"};if("undefined"!=typeof is_mobile&&"_mobile"==is_mobile)jQ(document).on("pageshow",function(){dateMomentjs()});else jQ(document).ready(function(){dateMomentjs()});window.wtbx.moment=window.moment;
function dateMomentjs(){var a=(new Date).getFullYear(),b;1==global_hash.date_format?b="MM/DD/YY":2==global_hash.date_format?b="DD/MM/YY":3==global_hash.date_format&&(b="MMM DD, YYYY");var c;c=1==global_hash.display_time?b+", hh:mma":2==global_hash.display_time?b+", HH:mm":b;jQ("time").each(function(f,e){dateFormat(e,b,c,a)})}
function dateFormat(a,b,c,f){var e=b;b=jQ(a).attr("data-timezone");if(30>=wtbx.moment().diff(wtbx.moment(wtbx.moment(parseInt(jQ(a).attr("datetime")),"YYYY-MM-DDTHH:mm:ss","X")),"days")&&"false"!=jQ(a).attr("data-from-now")||"true"==jQ(a).attr("data-relative-date"))"abbreviated"==jQ(a).attr("data-timeFormat")?wtbx.moment.locale("en",{relativeTime:{future:"in %s",past:"%s",s:"%ds",m:"1m",mm:"%dm",h:"1h",hh:"%dh",d:"1d",dd:"%dd",M:"1M",MM:"%dM",y:"1y",yy:"%dy"}}):wtbx.moment.updateLocale("en",{relativeTime:{future:"in %s",
past:"%s ago",s:"%d seconds",m:"1 minute",mm:"%d minutes",h:"1 hour",hh:"%d hours",d:"1 day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"}}),f=wtbx.moment(jQ(a).attr("datetime"),"X").fromNow();else{var d=wtbx.moment(jQ(a).attr("datetime"),"X"),d=b?d.utcOffset(b).format("YYYY"):d.format("YYYY");"true"==jQ(a).attr("data-monthly")?e=f==d?"MMM DD":"MMM YYYY":f==d&&(e=1==global_hash.date_format?"MM/DD":2==global_hash.date_format?"DD/MM":"MMM DD");f=jQ(a).attr("data-time-visible");f=
b&&f?wtbx.moment(jQ(a).attr("datetime"),"X").utcOffset(b).format(c):!b&&f?wtbx.moment(jQ(a).attr("datetime"),"X").format(c):b?wtbx.moment(jQ(a).attr("datetime"),"X").utcOffset(b).format(e):wtbx.moment(jQ(a).attr("datetime"),"X").format(e)}e=wtbx.moment(jQ(a).attr("datetime"),"X");e=b?e.utcOffset(b).format(c):e.format(c);jQ.isNumeric(jQ(a).text())?jQ(a).html(f).attr("title",e):jQ(a).attr("title",e)};function openSpellChecker(a){a=new spellChecker(a);a.openChecker()}jQ(document).ready(function(){0<jQ("#code").length&&jQ("#code").focus();jQ("#spell_chk,#spell_check").click(function(){openSpellChecker(this.form.message)});0<jQ("#comments_0").length&&jQ("#comments_0").hide();0<jQ("#cist").length&&(0<jQ("[name=PostEmail]").length?setCist(document.PostEmail.cist):0<jQ("[name=PostTopic]").length&&setCist(document.PostTopic.cist))});function setCist(a){a&&(a.value=1)};jQ(document).ready(function(){function a(f){var e="";f&&(e=f);if("parentIFrame"in window||!getCookie("embedded")&&!wtbx.thread.getParameterByName("embedded",jQ(location).attr("href"))){f=jQ(location).attr("href");var d=jQ(location).attr("protocol"),g=jQ(location).attr("hostname"),d=d+"//"+g+"/",g=e?document.referrer.replace(d,""):f.replace(d,""),h="",h=wtbx.thread.getParameterByName("authtoken_relogin",f),k="",k=wtbx.thread.getParameterByName("userid",f);wtbx.thread.getParameterByName("authtoken",
g)&&(g=wtbx.thread.removeParamFromURL("authtoken",g));wtbx.thread.getParameterByName("remember",g)&&(g=wtbx.thread.removeParamFromURL("remember",g));if(g&&"/"!=g){var m="",m=getCookie("userid");f=wtbx.thread.getParameterByName("parentRedirected",f);if("/?embedded=1"!=g&&g)return e={action:"updatePath",url:g,post_position:b,backlink:e,forumURLTop:("undefined"==typeof m||""==m||"null"!=k&&m!=k)&&"null"!=h&&h&&1!=f?d+"?authtoken="+h+"&parentRedirected=1&embedded=1":""},window.parentIFrame.sendMessage(e),
!1}else return e={action:"updatePath",url:"homepage",backlink:e},window.parentIFrame.sendMessage(e),!1}else c++,100>c&&setTimeout(a,16)}var b=wtbx.thread.scrollToUnreadPost(),c=0;isPostRequest||!getCookie("embedded")&&!wtbx.thread.getParameterByName("embedded",jQ(location).attr("href"))||a();"/"==window.location.pathname&&window.location.search.match(/^\?authtoken=[^&]+(&remember=1)?$/)&&window.history&&window.history.replaceState&&history.replaceState({},"","/")});var fblogin,userid;
jQ(document).ready(function(){global_hash.AppId&&(window.fbAsyncInit=function(){FB.init({appId:global_hash.AppId,version:"v2.0",status:!0,cookie:!0,oauth:!0,xfbml:!0});fblogin=getCookie("fblogin");userid=getCookie("userid");FB.getLoginStatus(function(a){"connected"==a.status?fblogin?jQ(".fb_logout").attr("href","javascript:void(0);"):jQ.ajax({type:"GET",url:"/register",dataType:"json",data:{fb_userid:a.authResponse.userID,fb_accesstoken:a.authResponse.accessToken,action:"facebook_connect"},success:function(a){"1"==
a.status&&(userid=a.userid,user_navigation(a))}}):"unknown"==a.status&&fblogin&&(window.location="/register/logout?userid="+userid)});jQ(".fb_logout").on("click",function(a){FB.getLoginStatus(function(a){"connected"==a.status&&FB.logout(function(a){window.location="/register/logout?userid="+userid;return!1})})})},function(){var a=document.createElement("script");a.async=!0;a.src=document.location.protocol+"//connect.facebook.net/en_US/sdk.js";document.getElementById("fb-root").appendChild(a)}());
jQ(".fb_login").click(function(){FB.login(function(a){a.authResponse&&(jQ("#user_login").modal("hide"),FB.api("/v2.0/me",function(b){login(a,b)}))},{scope:"email,user_birthday,publish_actions"})})});
function login(a,b){if(a.authResponse){var c;c="facebook_connect&do="+jQ("#Submit").val();c+="&fb_userid="+b.id+"&fb_email="+b.email+"&fb_name="+b.name+"&fb_birthday="+b.birthday;c+="&fb_accesstoken="+a.authResponse.accessToken;jQ.ajax({type:"POST",url:"/register",data:"action="+c,dataType:"json",success:function(a){"1"==a.status&&a.url?window.location=a.url:"1"==a.status&&(userid=a.userid,user_navigation(a),0==isPostRequest&&window.location.reload())}})}}
function user_navigation(a){userid=getCookie("userid");window.location.pathname.match("/register/register")||jQ("#login").length?window.location="/":(jQ("#td_tab_register").html('<a id="anchor_tab_cpanel" href="/register/register?edit=1&amp;userid='+userid+'">Control Panel</a>'),jQ("#fb_profile").attr("href","http://www.facebook.com/profile.php?id="+a.fb_userid),jQ("#fb_img").attr("src","https://graph.facebook.com/v2.0/"+a.fb_userid+"/picture?type=square"),jQ("#reg_link_user").html(a.reglink_user),
jQ("#pm_count").length&&jQ("#pm_count").html(a.unread_message),jQ("#fb_image").show(),jQ("#user_login_nav").show(),jQ("#td_tab_login").html('<a id="anchor_tab_logout" class="fb_logout" href="javascript:void(0);">Logout</a>'))};globalbeta=(host=/^beta([0-9]+)?\./.test(location.hostname))?"beta":"";var uploaderAvatar=[],uploaderProfile,uploader,pluploader=[],uploadInsertImage,forum_uid;wtbx.upload={uploaders:[]};jQ(document).on("pagecreate",function(){start_uploading()});
jQ(document).ready(function(){jQ("#mobile_upload").length||start_uploading();jQ(document).on("click","[id^='add_to_post']",function(){var a=this.id.replace(/add_to_post_pmsg|add_to_post/ig,""),b=jQ(this).attr("data-attach_type"),c=jQ("#"+a).attr("data-uid"),f=jQ("#"+a).attr("data-filename"),e=jQ("#"+a).attr("data-filesize"),d=jQ("#"+a).attr("data-attachment_display"),g=jQ("#"+a).attr("data-file_type_icon");addInlineImage(a,c,f,e,d,g,b)})});
function createUploaderObjects(){jQ(document).on("mouseover","[id^='fancy_attach_'], a[id ^= 'delete_attachment']",function(){jQ("[id^='fancy_attach_']").each(function(a,c){var f=jQ(c),e=f.attr("id");0<f.length&&-1>=wtbx.upload.uploaders.indexOf(e)&&(f=jQ(this).attr("id").replace(/fancy_attach_/g,""),post_attachment(e,f,"attachment",this.id),wtbx.upload.uploaders.push(e))})});var a=[];jQ(document).on("mouseover","[id^='insert_image_dialog_'], [id$='_imagebutton']",function(){jQ("[id^='insertImage_']").each(function(b,
c){var f=jQ(c),e=f.attr("id");0<f.length&&-1>=a.indexOf(e)&&(f=e.replace(/insertImage_/g,""),post_attachment(e,f,"insertPhotos",this.id),a.push(e))})});bindEventHandlersToButtons()}
function bindEventHandlersToButtons(){jQ(document).on("click","[id ^= 'attachCancel_']",function(){var a;a=jQ(this).attr("id").split("_");var c=a[1],f=a[2];a=pluploader[f].getFile(c);pluploader[f].stop();jQ("#upprogress_"+c).remove();pluploader[f].removeFile(a);0<pluploader[f].files.length&&(void 0==pluploader[f].state||pluploader[f].state!=plupload.STARTED)&&pluploader[f].start()});if(0<jQ("[id ^= 'insertimagemodal']").length){var a=jQ("[id ^= 'insertimagemodal']").attr("id").replace(/insertimagemodal/g,
"");jQ(document).on("click","[id ^= 'computer']",function(b){a=jQ(this).attr("id").replace(/computer/g,"");jQ("#upload"+a).show();jQ("#url"+a).hide();0<jQ(".selected_image").length?jQ("#insert_image_btn"+a).removeAttr("disabled"):jQ("#insert_image_btn"+a).attr("disabled","disabled")});jQ(document).on("click","[id ^= 'web']",function(b){a=jQ(this).attr("id").replace(/web/g,"");b=jQ("#web_image_url"+a).val();validateImageURL(b);jQ("#url"+a).show();jQ("#web_image_url"+a).focus();jQ("#upload"+a).hide()});
jQ('input:radio[name="upload_option"]').change(function(){if(jQ(this).is(":checked")&&"computer"==jQ(this).val())jQ("#comp_panel").show(),jQ("#web_panel").hide(),jQ("#insert_image_btn").attr("disabled","disabled"),0<jQ(".selected_image").length&&jQ("#insert_image_btn").removeAttr("disabled");else if(jQ(this).is(":checked")&&"web"==jQ(this).val()){var a=jQ("#web_image_url").val();validateImageURL(a);jQ("#web_panel").show();jQ("#web_image_url").focus();jQ("#comp_panel").hide()}});jQ(document).on("click",
"img",function(b){jQ("#insert_image_btn"+a).removeAttr("disabled");this.id&&jQ("#image_id"+a).val()!=this.id&&(jQ("#image_id"+a).val(this.id),"web_image"!=this.id&&(jQ("#"+this.id).attr("class","post-image selected_image"),(b=getCookie("prev_id"))&&jQ("#"+b).attr("class","post-image unselect_image"),document.cookie="prev_id="+this.id))});jQ(document).on("dblclick","[id ^= 'imagesInserted']",function(b){a=jQ(this).attr("id").replace(/imagesInserted/g,"");insertImageOptions(a)});jQ(document).on("input",
"[id ^= 'web_image_url']",function(b){a=jQ(this).attr("id").replace(/web_image_url/g,"");b=jQ("#web_image_url"+a).val();validateImageURL(b,a)});jQ(document).on("propertychange","[id ^= 'web_image_url']",function(b){a=jQ(this).attr("id").replace(/web_image_url/g,"");b=jQ("#web_image_url"+a).val();validateImageURL(b,a)});jQ("input[type=radio]").click(function(){jQ(".image_upload_types li").attr("class","upload_type_select");jQ(this).is(":checked")?jQ("#"+jQ(this).val()).addClass("options_highlight"):
jQ("#"+jQ(this).val()).removeClass("options_highlight").addClass("upload_type_select")});jQ(document).on("click","[id ^= 'close_dialog']",function(a){jQ("#insertimagemodal").modal("hide");return!1})}}
function start_uploading(){createUploaderObjects();jQ(document).on("click","[id^='insert_image_dialog_']",function(a){a.preventDefault();a=jQ(this).attr("id").split("_");openInsertImageDialog(a[3])});jQ(document).on("click","[id^='insert_image_btn']",function(a){a=jQ(this).attr("id").replace(/insert_image_btn/g,"");insertImageOptions(a)});jQ("label").each(function(){var a=jQ(this).data("events");jQ("label").off();jQ("label").not("a").on(a)});if(0<jQ("#upload_Avatar").length){var a;a=jQ("#mobileuploadAvatar").length?
jQ("gallery").css("display","")?"Change":"Upload an avatar":jQ("gallery").css("display","")?"Change":"Upload an avatar from your computer";jQ("#change_Avatar").length||jQ("attachAvatar").html(a);var b;jQ("#avatar a").hasClass("default-user")||(jQ("#change_Avatar").removeClass("layer-to-front"),jQ("#upload_Avatar").addClass("layer-to-front"));var c=jQ("input[name=attachment_ids]").val(),f=jQ("[name=userid]").val();jQ(document).one("mouseover","#attachAvatar",function(){b="attachAvatar";action_change_avatar=
0;user_avatar(b,f,c,action_change_avatar)});jQ(document).one("mouseover","#attach_new_avatar",function(){b="attach_new_avatar";action_change_avatar=1;user_avatar(b,f,c,action_change_avatar,a)})}0<jQ("#registerEditProfile #attachAvatar, #mobile_upload #attachAvatar").length&&(a=jQ("#mobileuploadAvatar").length?jQ("gallery").css("display","")?"Change":"Upload an avatar":jQ("gallery").css("display","")?"Change":"Upload an avatar from your computer",jQ("attachAvatar").html(a),c=jQ("input[name=attachment_ids]").val(),
f=jQ("[name=userid]").val(),uploaderAvatar=new plupload.Uploader({runtimes:"html5,flash,gears",browse_button:"attachAvatar",container:"uploadAvatar",url:"/upload",multipart_params:{fancy_upload:"1",avatar:"1",action:"doUpload",user_id:f,actionChange:action_change_avatar,id:c},multi_selection:!1,flash_swf_url:"/tools/plupload.flash.swf",silverlight_xap_url:"/tools/plupload.silverlight.xap",filters:[{title:"Image files",extensions:"jpg,gif,jpeg,jpe,png"}],preserve_headers:!1,resize:{width:avatar_width,
height:avatar_height}}),uploaderAvatar.init(),uploaderAvatar.bind("FilesAdded",function(a,b){jQ.each(b,function(a,b){var c=jQ("#progress").html(),c=c.replace(/get_fileid_/g,b.id),c=c.replace(/get_filename/g,b.name),c=c.replace(/get_filesize/g,plupload.formatSize(b.size));jQ("#filesAdd").html(c);0<jQ("#mobileuploadAvatar").length?(c=jQ("#upload_tag_profile_avatar").html(),jQ("#fileProgress").append(c)):jQ("#"+b.id+"progress").attr("aria-valuenow",b.percent).css("width",b.percent+"%");jQ("#cancel"+
b.id).bind("click",function(a){stop_avatarFile(b.id);jQ("#filesAdd").html("");jQ("#avatar").show()})});uploaderAvatar.start();a.refresh();jQ("#filesAdd").show();jQ("#avatar").hide();jQ("#uploadAvatarError").addClass("hidden")}),jQ("#mobileuploadAvatar").length||uploaderAvatar.bind("UploadProgress",function(a,b){jQ("#"+b.id+"progress").attr("aria-valuenow",b.percent).css("width",b.percent+"%")}),uploaderAvatar.bind("Error",function(a,b){var c=b.file,e;if(c&&(e=b.message))if(b.code==plupload.FILE_SIZE_ERROR){if(0<
jQ("#mobileuploadAvatar").length)return jQ("#filesize_error_avatar").show(),!1;alert("The specified file exceeds the maximum file size of Bytes.")}else if(b.code==plupload.FILE_EXTENSION_ERROR){if(0<jQ("#mobileuploadAvatar").length)return jQ("#filetype_error_avatar").show(),jQ("#file_type").html(c.name),!1;alert("There was an error uploading your Avatar."+c.name+" is an invalid file type. Supported file types include "+file_types)}else{if(0<jQ("#mobileuploadAvatar").length)return jQ("#message_error_avatar").show(),
jQ("#uploading_error_message").html(e),!1;alert("There was an error uploading your Avatar. "+e)}a.refresh()}),uploaderAvatar.bind("FileUploaded",function(a,b,c){b=jQ.parseJSON(c.response);"1"==b.status?(setTimeout(function(){jQ("#filesAdd").hide();jQ("#avatar").css("display","")},500),jQ("#attachAvatar").html("Change"),jQ("#addAvatar").css("display","none"),jQ("#viewAvatar").attr("href",b.url_protocol+"s3.amazonaws.com/"+globalbeta+"files.websitetoolbox.com/"+b.uid+"/"+b.fileid),jQ("#gallery").hasClass("hidden")?
jQ("#gallery").removeClass("hidden"):jQ("#gallery").css("display",""),jQ("#deleteAvatar").hasClass("hidden")?jQ("#deleteAvatar").removeClass("hidden"):jQ("#deleteAvatar").css("display",""),jQ("#deleteAvatar").css("display",""),jQ("input[name=attachment_ids]").val(b.fileid),a.settings.multipart_params.actionChange="1",a.settings.multipart_params.id=b.fileid,a.refresh()):"0"==b.status&&(a="",a=b.error.replace(/<\S[^><]*>/g,""),a=a.replace(/\bError(!|:)\b|/,""),a=a.replace(/\[close\]/,""),jQ("#filesAdd").html(""),
jQ("#uploadAvatarError span").html(a),jQ("#uploadAvatarError").removeClass("hidden"));jQ("#avatar").show();jQ("#filesize_error_avatar,#filetype_error_avatar,#message_error_avatar").hide()}));if(0<jQ("#attachProfile").length){var e;e=jQ("#mobileuploadProfile").length?jQ("profile_gallery").css("display","")?"Change":"Upload a profile picture":jQ("profile_gallery").css("display","")?"Change":"Upload a profile picture from your computer";jQ("attachProfile").html(e);e=jQ("input[name=profile_attachment_ids]").val();
f=jQ("[name=userid]").val();e={runtimes:"html5,flash,gears",browse_button:"attachProfile",container:"uploadProfile",url:"/upload",multipart_params:{fancy_upload:"1",profile_picture:"1",action:"doUpload",user_id:f,actionChange:action_change_profile,id:e},multi_selection:!1,flash_swf_url:"/tools/plupload.flash.swf",silverlight_xap_url:"/tools/plupload.silverlight.xap",filters:[{title:"Image files",extensions:"jpg,gif,jpeg,jpe,png"}]};0!=profile_picture_max_size&&(e.max_file_size=1024*profile_picture_max_size);
0!=profile_picture_max_width&&0!=profile_picture_max_height&&(e.resize={width:profile_picture_max_width,height:profile_picture_max_height});uploaderProfile=new plupload.Uploader(e);uploaderProfile.init();uploaderProfile.bind("FilesAdded",function(a,b){jQ.each(b,function(a,b){var c=jQ("#progress").html(),c=c.replace(/get_fileid_/g,b.id),c=c.replace(/get_filename/g,b.name),c=c.replace(/get_filesize/g,plupload.formatSize(b.size));jQ("#profile_filesAdded").html(c);0<jQ("#mobileuploadProfile").length?
(c=jQ("#upload_tag_profile_avatar").html(),jQ("#fileProgress").append(c)):jQ("#"+b.id+"progress").html(b.percent+"%").attr("aria-valuenow",b.percent).css("width",b.percent+"%");jQ("#cancel"+b.id).bind("click",function(a){stop_profileFile(b.id);jQ("#profile_filesAdded").html("");jQ("#profile").show()})});uploaderProfile.start();a.refresh();jQ("#profile_filesAdded").show();jQ("#profile").hide();jQ("#uploadProfileError").addClass("hidden")});jQ("#mobileuploadProfile").length||uploaderProfile.bind("UploadProgress",
function(a,b){jQ("#"+b.id+"progress").html(b.percent+"%").attr("aria-valuenow",b.percent).css("width",b.percent+"%")});uploaderProfile.bind("Error",function(a,b){var c=b.file,e;if(c&&(e=b.message))if(b.code==plupload.FILE_SIZE_ERROR){c=1024<=window.profile_picture_max_size?roundToTwo(window.profile_picture_max_size/1024)+"MB.":window.profile_picture_max_size+"KB.";if(0<jQ("#mobileuploadProfile").length)return jQ("#filesize_error_profile").show(),jQ("#max_file_size").html(c),!1;alert("The specified file exceeds the maximum file size of "+
c)}else if(b.code==plupload.FILE_EXTENSION_ERROR)0<jQ("#mobileuploadProfile").length?(jQ("#filetype_error_profile").show(),jQ("#file_type_profile").html(c.name)):alert("There was an error uploading your Profile. "+c.name+" is an invalid file type. Supported file types include "+file_types);else{if(0<jQ("#mobileuploadProfile").length)return jQ("#message_error_profile").show(),jQ("#uploading_error_message").html(e),!1;alert("There was an error uploading your Profile. "+e)}a.refresh()});uploaderProfile.bind("FileUploaded",
function(a,b,c){b=jQ.parseJSON(c.response);"1"==b.status?(jQ("#profile_filesAdded").css("display","none"),jQ("#profile").css("display",""),jQ("#viewProfile").attr("href",b.url_protocol+"s3.amazonaws.com/"+globalbeta+"files.websitetoolbox.com/"+b.uid+"/"+b.fileid),jQ("#attachProfile").html("Change"),jQ("#addProfile").css("display","none"),jQ("#profile_gallery,#deleteProfile").removeClass("hidden"),jQ("input[name=profile_attachment_ids]").val(b.fileid),a.settings.multipart_params.actionChange="1",a.settings.multipart_params.id=
b.fileid,a.refresh()):"0"==b.status&&(a="",a=b.error.replace(/<\S[^><]*>/g,""),a=a.replace(/\bError(!|:)\b|/,""),a=a.replace(/\[close\]/,""),jQ("#uploadProfileError span").html(a),jQ("#uploadProfileError").removeClass("hidden"));jQ("#profile").show();jQ("#profile_filesAdded,#filesize_error_profile,#filetype_error_profile,#message_error_profile").hide()})}0<jQ("[id^='attachmentCotainer_']").length&&(jQ("#deleting_attachment,#fileids_up,#upload_tag_get_fileid_up,#fileids_after,#thumb_img_get_fileid_after,#thumb_img_ext_get_fileid_after").hide(),
0<jQ("#mobile_upload").length?jQ("#filesize_error,#filetype_error,#message_error").hide():0<jQ("#get_post_elm_id_fileid").length&&jQ("#get_post_elm_id_fileid,#get_pmsg_elm_id_fileid").hide(),jQ("a[id ^= 'delete_attachment']").bind("click",function(a){a=this.id;a=a.replace(/delete_attachment/g,"");delete_attachment(file_upload,a,a)}));jQ("#upload_tag_profile_avatar").hide()}
function deleteAvatarOrProfile(a,b,c){"avatar"==c?(jQ("#UserProfile").length||(jQ("#uploadAvatar").css("display","none"),jQ("#deleteStatus").html("Deleting..."),document.PostTopic.avatar&&(document.PostTopic.avatar.value="")),jQ("input[name=attachment_ids]").val("")):"profile_picture"==c&&(jQ("#uploadProfile").css("display","none"),jQ("#deleteStatus_profile").html("Deleting..."),jQ("input[name=profile_attachment_ids]").val(""),document.PostTopic.profile_picture&&(document.PostTopic.profile_picture.value=
""));jQ.ajax({type:"POST",url:"/upload",dataType:"json",data:"ajax_request=1&action=doDelete&id="+a+"&user_id="+b+"&"+c+"=1",success:function(a){"1"==a.status&&"Avatar"==a.type?(jQ("#deleteStatus").html(""),jQ("#uploadAvatar,#addAvatar").show(),jQ("#uploadAvatarError").addClass("hidden"),jQ("#UserProfile").length||(jQ("#mobileuploadAvatar").length?jQ("#attachAvatar").html("Upload an avatar"):jQ("#attachAvatar").html("Upload an avatar from your computer"),uploaderAvatar.settings.multipart_params.actionChange=
"0",uploaderAvatar.refresh()),jQ("#gallery").css("display","none"),jQ("#deleteAvatar").css("display","none"),jQ("input[name=attachment_ids]").val(""),jQ("#UserProfile").length&&(jQ("#avatar a, #avatar span").removeAttr("style").addClass("default-user"),jQ("#change_Avatar").addClass("layer-to-front"),jQ("#upload_Avatar").removeClass("layer-to-front"))):"1"==a.status&&"Profile"==a.type&&(jQ("#deleteStatus_profile").html(""),jQ("#uploadProfile").css("display",""),jQ("#addProfile").css("display",""),
jQ("#mobileuploadProfile").length?jQ("#attachProfile").html("Upload a profile picture"):jQ("#attachProfile").html("Upload a profile picture from your computer"),jQ("input[name=profile_attachment_ids]").val(""),jQ("#profile_gallery,#deleteProfile,#uploadProfileError").addClass("hidden"),uploaderProfile.settings.multipart_params.actionChange="0",uploaderProfile.refresh())},error:function(){alert("There was a problem with the request.")}})}
function delete_attachment(a,b,c,f){"undefined"===typeof f&&(f="");var e;"undefined"!=typeof tinyMCE&&null!=tinyMCE.activeEditor&&(e=tinyMCE.activeEditor.getContent());var d="id="+c,g="",h=jQ("[id^='uncheck_attachment_ids']"+f).val();attachment_count=parseInt(attachment_count);for(var k=1;k<=a;k++)jQ("#file_id_"+k).val()&&jQ("#file_id_"+k).val()!=c?g=g+","+jQ("#file_id_"+k).val():(e&&e.match(d)?(c=0,h=""):(h=h+","+jQ("#file_id_"+k).val(),jQ("#file_id_"+k).val("")),jQ("#"+b).css("display","none"),
jQ("#deleting_attachment").css("display","block"),jQ.ajax({type:"POST",url:"/post",data:"action=delete_attachment&fileid="+c,success:function(a){jQ("#deleting_attachment").css("display","none")}}));jQ("[id^='attachment_ids']"+f).val(g.replace(/^,/,""));jQ("[id^='uncheck_attachment_ids']"+f).val(h.replace(/^,/,""))}
function stopInsertPhotosUpload(a){var b;b=uploadInsertImage.getFile(a);b.status==plupload.UPLOADING&&uploadInsertImage.stop();jQ("#"+a).css("display","none");uploadInsertImage.removeFile(b);0<uploadInsertImage.files.length&&(void 0==uploadInsertImage.state||uploadInsertImage.state!=plupload.STARTED)&&uploadInsertImage.start()}
function stop_avatarFile(a){var b;b=uploaderAvatar.getFile(a);b.status==plupload.UPLOADING&&uploaderAvatar.stop();jQ("#"+a).css("display","none");uploaderAvatar.removeFile(b)}function stop_profileFile(a){var b;b=uploaderProfile.getFile(a);b.status==plupload.UPLOADING&&uploaderProfile.stop();jQ("#"+a).css("display","none");uploaderProfile.removeFile(b)}
function stopUpload(a){var b;b=uploader.getFile(a);b.status==plupload.UPLOADING&&uploader.stop();jQ("#"+a).css("display","none");uploader.removeFile(b);0<uploader.files.length&&(void 0==uploader.state||uploader.state!=plupload.STARTED)&&uploader.start()}
function addInlineImage(a,b,c,f,e,d,g){var h=c.split(".").pop(),h=h.toLowerCase(),k="";jQ.ajax({type:"POST",url:"/post",data:"action=add_inline_image&addinline=1&fileid="+a+"&type="+g,success:function(f){"jpg"==h||"jpeg"==h||"png"==h||"gif"==h?0<f?"full"==e?k='<img src="/file?id='+a+'" class="bbc_img" alt="'+c+'">&nbsp;':"thumbnails"==e?k='<a rel="lightbox" href="/file?id='+a+'"><img src="https://s3.amazonaws.com/'+globalbeta+"files.websitetoolbox.com/"+b+"/thumb/"+a+'" alt="'+c+'"></a>&nbsp;':"links"==
e&&(k='<a href="/file?id='+a+'">'+c+"</a>&nbsp;"):k='<img src="/file?id='+a+'" class="bbc_img" alt="'+c+'">&nbsp;':k='<a alt="Download attachment" rel="nofollow" href=/file?id='+a+"><img src=/images/icons/file_types/"+d+" alt="+h+' width=16 height=16></a>&nbsp;<a alt="Download attachment" style="font-size:12px;vertical-align:text-bottom;" href=/file?id='+a+"><strong>"+c+'</strong></a>&nbsp;&nbsp;<span class="attach_desc" id="file_size_'+a+'"></span>&nbsp;&nbsp;<span class="download_counter" id="download_'+
a+'"></span>&nbsp;';mceInsertContent(k)}})}
function insertImage(a,b,c,f,e,d){"undefined"===typeof d&&(d="");e||(e=9);c?(jQ("#insert_photos"+d).children("img").attr({src:a}),mceInsertContent(jQ("#insert_photos"+d).html())):jQ.ajax({type:"POST",url:"/post",data:"action=add_inline_image&addinline=1&fileid="+a+"&type="+e,success:function(c){c="https://s3.amazonaws.com/"+globalbeta+"files.websitetoolbox.com/"+f+"/"+a;jQ("#insert_photos"+d).children("img").attr({src:c,alt:b});mceInsertContent(jQ("#insert_photos"+d).html());a&&(c=jQ('input[id="attachment_ids'+
d+'"]').val(),c=c+","+a,jQ('input[id="attachment_ids'+d+'"]').val(c.replace(/^,/,"")),c="",jQ("[id=uncheck_attachment_ids"+d+"]").val()&&(c=jQ("[id=uncheck_attachment_ids"+d+"]").val()),jQ("[id=uncheck_attachment_ids"+d+"]").val(c.replace(a,"")))},error:function(a,b,c){alert("An error occurred while processing your request.\n"+b+": "+c)}})}
function is_image(a,b,c){var f=new Image;f.onerror="function"===typeof c?function(){c()}:function(){return!1};f.onload="function"===typeof b?function(){b()}:function(){return!0};f.src=a}
function validateImageURL(a,b){var c=/^(http[s]?:\/\/){0,1}(www\.){0,1}[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,5}[\.]{0,1}/;a&&c.test(a)?is_image(a,function(){jQ("#preview_text"+b).hide();jQ("#web_image"+b).attr("src",a);jQ("#web_image"+b).hasClass("hidden")?jQ("#web_image"+b).removeClass("hidden"):jQ("#web_image"+b).show();jQ("#insert_image_btn"+b).removeAttr("disabled")},function(){jQ("#insert_image_btn"+b).attr("disabled","disabled");jQ("#web_image"+b).hide();jQ("#preview_text"+b).show()}):(jQ("#insert_image_btn"+
b).attr("disabled","disabled"),jQ("#web_image"+b).hide(),jQ("#preview_text"+b).show())}
function insertImageOptions(a){"undefined"===typeof a&&(a="");if(0<jQ(".container").length&&0<jQ("#insertimagemodal"+a).length){var b=jQ("#image_id"+a).val(),c=jQ("#"+b).attr("alt"),f=jQ("#web_image_url"+a).val(),e,d,g=jQ("#tabs"+a+" .active a").attr("class");b&&"computer"==g?(d=b,e=0):!f||"web"!=g&&jQ("#tabs"+a+" #upload"+a).length||(d=f,e=1);"undefined"===typeof type&&(type="");jQ("#insertimagemodal"+a).modal("hide");insertImage(d,c,e,forum_uid,type,a)}else b=jQ("#image_id").val(),c=jQ("#"+b).attr("alt"),
f=jQ("#web_image_url").val(),g=jQ("input[type='radio'][id='upload_option']:checked").val(),b&&"computer"==g?(d=b,e=0):f&&"web"==g&&(d=f,e=1,jQ('input:radio[id="upload_option"][value="computer"]').attr("checked",!0),jQ(".image_upload_types li").attr("class","upload_type_select"),jQ('[value="computer"]').is(":checked")?(jQ("#computer").addClass("options_highlight"),jQ("#web_image_url").val(""),jQ("#comp_panel").show(),jQ("#web_panel").hide()):jQ("#web").removeClass("options_highlight").addClass("upload_type_select")),
"undefined"===typeof type&&(type=""),jQ("#insertimagemodal").modal("hide"),insertImage(d,c,e,forum_uid,type)}
function openInsertImageDialog(a){"undefined"===typeof a&&(a="");if(0<jQ(".container").length&&0<jQ("#insertimagemodal"+a).length){if(0>=jQ("#computer"+a).length){var b=jQ("#web_image_url"+a).val();validateImageURL(b);jQ("#url"+a).show();jQ("#web_image_url"+a).focus();jQ("#upload"+a).hide()}jQ("#computer"+a).bind("click",function(b){0<jQ(".selected_image").length?jQ("#insert_image_btn"+a).removeAttr("disabled"):jQ("#insert_image_btn"+a).attr("disabled","disabled")});jQ("#web"+a).bind("click",function(b){jQ("#web_image_url"+
a).val()?(jQ("#insert_image_btn"+a).attr("disabled","disabled"),is_image(jQ("#web_image_url"+a).val(),function(){jQ("#insert_image_btn"+a).removeAttr("disabled")},function(){jQ("#insert_image_btn"+a).attr("disabled","disabled")})):jQ("#insert_image_btn"+a).attr("disabled","disabled")});jQ("#insertimagemodal"+a).modal("show");jQ("#web_image_url"+a).focus()}else{0>=jQ("#computer").length&&(jQ("#upload_option").attr("checked","checked"),b=jQ("#web_image_url").val(),validateImageURL(b),jQ("#web_panel").show(),
jQ("#web_image_url").focus(),jQ("#comp_panel").hide());var c=jQ("input[type='radio'][id='upload_option']:checked").val();(b=jQ("#web_image_url").val())||"web"!=c||jQ("#insert_image_btn").attr("disabled","disabled");"computer"==c&&0<jQ(".selected_image").length&&jQ("#insert_image_btn").removeAttr("disabled");jQ("#insertimagemodal").modal("show");jQ("#web_image_url").focus()}}function roundToTwo(a){return+(Math.round(a+"e+2")+"e-2")}
function post_attachment(a,b,c,f){var e=0;f.match(/^insertImage_/)&&(e=1);0==b&&(b="");f=!b&&jQ("#pid").length?jQ("#pid").val():b;var d=c+b,g=jQ("#timestamps"+b).val(),e={fancy_upload:"1",action:"doUpload",user_id:jQ("[name=user_id]").val(),insert_image:e,forum:forum,timestamps:g};0<jQ("#pmid").length?(e.pmid=item_id,e.attach_from="pmessage"):e.pid=f;var g=f="",h;"attachment"==c?(f="attachmentCotainer_"+b,g="Files",h=file_types):"insertPhotos"==c&&(f="insertimagemodal"+b,g="Image files",h="jpg,gif,jpeg,jpe,png");
pluploader[d]=new plupload.Uploader({runtimes:"html5,flash,gears",browse_button:a,container:f,max_file_size:1024*window.max_file_size,url:"/upload",multipart_params:e,multi_selection:!0,flash_swf_url:"/tools/plupload.flash.swf",silverlight_xap_url:"/tools/plupload.silverlight.xap",preserve_headers:!1,filters:[{title:g,extensions:h}],resize:{width:1920,height:1080}});pluploader[d].init();pluploader[d].bind("QueueChanged",function(a,b){0<jQ("[id^='attachmentCotainer_']").length&&jQ("[id^='attachmentCotainer_']").removeClass("hidden");
pluploader[d].start();a.refresh()});var k;pluploader[d].bind("FilesAdded",function(a,e){jQ.each(e,function(a,f){if("insertPhotos"==c){var g=f.name;10<g.length&&(g=g.substr(0,10)+"...");var h=jQ("#insert_image_content"+b).html(),k=jQ("#uploading").html(),h=h.replace(/fileid/g,f.id),k=k.replace(/fileidup/g,f.id),k=k.replace(/uploaderid/g,d),k=k.replace(/filename/g,g);jQ("#imagesInserted"+b).append(h);jQ("#imagesError"+b).html("");jQ("#imagesError"+b).append(k)}else g=jQ("#fileids_up").html(),g=g.replace(/get_fileid_up/g,
f.id),g=g.replace(/get_fileid/g,f.id),g=g.replace(/upfileid/g,f.id),g=g.replace(/uploaderid/g,d),g=g.replace(/get_filename/g,f.name),g=g.replace(/get_filesize/g,plupload.formatSize(f.size)),jQ("#attachment_list"+b).append(g),g=jQ("#upload_tag_get_fileid_up").html(),g=g.replace(/get_fileid_up/g,f.id),0<jQ("#mobile_upload").length?jQ("#"+f.id+"progress").append(g):!jQ("#mobile_upload").length&&jQ("#"+f.id+"progress").length&&jQ("#"+f.id+"progress").progressbar({value:e.percent}).append(g);pluploader[d].start()});
a.refresh()});jQ("#mobile_upload").length||pluploader[d].bind("UploadProgress",function(a,c){jQ("#attachment_list"+b).removeClass("hidden");jQ("#progress"+c.id).html(c.percent+"%").attr("aria-valuenow",c.percent).css("width",c.percent+"%")});pluploader[d].bind("Error",function(a,d){var e=d.file,f;if(e&&(f=d.message))if("insertPhotos"==c)d.code==plupload.FILE_SIZE_ERROR?(e=1024<=window.max_file_size?roundToTwo(window.max_file_size/1024)+"MB.":window.max_file_size+"KB.",alert("The specified file exceeds the maximum file size of "+
e)):d.code==plupload.FILE_EXTENSION_ERROR?(f=jQ("#upload_fail"+b).html(),f=f.replace("filename",e.name),jQ("#"+e.id+"up_progress").remove(),jQ("#imagesError"+b).show(),jQ("#imagesError"+b).append(f)):alert("There was an error uploading your Attachments. "+f);else if(d.code==plupload.FILE_SIZE_ERROR){e=1024<=window.max_file_size?roundToTwo(window.max_file_size/1024)+"MB.":window.max_file_size+"KB.";if(0<jQ("#mobile_upload").length)return jQ("#filesize_error").show(),jQ("#max_file_size").html(e),!1;
alert("The specified file exceeds the maximum file size of "+e)}else if(d.code==plupload.FILE_EXTENSION_ERROR){if(0<jQ("#mobile_upload").length)return jQ("#filetype_error").show(),jQ("#file_type").html(e.name),!1;alert("There was an error uploading your Attachments."+e.name+" is an invalid file type. Supported file types include "+file_types)}else{if(0<jQ("#mobile_upload").length)return jQ("#message_error").show(),jQ("#uploading_error_message").html(f),!1;alert("There was an error uploading your Attachments. "+
f)}a.refresh()});pluploader[d].bind("FileUploaded",function(a,e,f){var g=jQ.parseJSON(f.response);file_upload=parseInt(file_upload)+1;if("1"==g.status){jQ("#mobile_upload").length?jQ("#fancy_attach_").html("Upload another file or photo"):jQ("#main_container #fancy_attach_").html("Attach another file");if("insertPhotos"==c)f=g.url_protocol+"s3.amazonaws.com/"+globalbeta+"files.websitetoolbox.com/"+g.uid+"/"+g.fileid,jQ("#uploaded_image"+b).children("img").attr({alt:e.name,id:g.fileid,src:f}),jQ("#"+
e.id).html(jQ("#uploaded_image"+b).html()),forum_uid=g.uid,f=getCookie("prev_id"),k&&jQ("#"+k).attr("class","post-image unselect_image"),f&&jQ("#"+f).attr("class","post-image unselect_image"),jQ("#"+g.fileid).attr("class","post-image selected_image"),document.cookie="prev_id="+g.fileid,k=g.fileid,jQ("#insert_image_btn"+b).removeAttr("disabled"),jQ("#image_id"+b).val(g.fileid),jQ("#upprogress_"+e.id).remove(),f=jQ("[id=uncheck_attachment_ids"+b+"]").val(),f=f+","+g.fileid,jQ("[id=uncheck_attachment_ids"+
b+"]").val(f.replace(/^,/,""));else{var h,r;"attach"==g.icon_name?(h="unknown.gif",r="check.png"):(h=g.icon_name+".gif",r=g.icon_name+".gif");var v=e.name;f=v.split(".").pop();f=f.toLowerCase();var x=0;"jpg"==f||"jpeg"==f||"png"==f||"gif"==f?(r=0<g.thumb_size?g.url_protocol+"s3.amazonaws.com/"+globalbeta+"files.websitetoolbox.com/"+g.uid+"/thumb/"+g.fileid:"/file?id="+g.fileid,jQ("#thumb_img_get_fileid_after").children("img").attr({src:r}),0<jQ("#thumb_img_get_fileid_after .file-type-icon").length&&
jQ("#thumb_img_get_fileid_after .file-type-icon").remove()):(r="/images/icons/file_types/"+r,jQ("#thumb_img_ext_get_fileid_after").children("img").attr({src:r,alt:f,id:"icon_image"+e.id}),0<jQ("#thumb_img_ext_get_fileid_after .file-type-icon").length&&jQ("#thumb_img_ext_get_fileid_after .file-type-icon").remove(),x=1);r=jQ("#fileids_after").html();r=r.replace(/get_fileid_after/g,e.id);var t,u;0<jQ("#pmid").length?(t=10,u="pmessage"):(t=5,u="addtopost");var v=v.replace(/\s+/g,"&#32;"),B=plupload.formatSize(e.size),
B=B.replace(/\s+/g,"&#32;");r=r.replace(/get_file_upload/,file_upload);r=r.replace(/upfileid/,file_upload);r=r.replace(/uploaderid/,d);r=r.replace(/get_jfileid/g,g.fileid);r=r.replace(/get_filename/g,v);r=r.replace(/get_filesize/g,plupload.formatSize(e.size));r=r.replace(/file_type_icon/g,f);"both"==g.wysiwyg&&g.toolbarCompatible&&(r="addtopost"==u?r.replace("get_post_elm_id_fileid",u+e.id):r.replace("get_pmsg_elm_id_fileid",u+e.id));jQ("#upprogress_"+e.id).replaceWith(r);x?jQ(".container").length?
jQ("#thumb_img_ext_"+e.id).toggleClass("hidden show"):jQ("#thumb_img_ext_"+e.id).show():jQ(".container").length?jQ("#thumb_img_"+e.id).toggleClass("hidden show"):jQ("#thumb_img_"+e.id).show();"both"==g.wysiwyg&&g.toolbarCompatible&&(jQ(".container").length?jQ("#"+u+e.id).toggleClass("hidden show"):jQ("#"+u+e.id).show());jQ("#"+u+e.id).bind("click",function(a){addInlineImage(g.fileid,g.uid,v,B,g.attachment_display,h,t)});jQ("#delete_attachment"+e.id).bind("click",function(a){delete_attachment(file_upload,
e.id,g.fileid)});f=jQ('input[id="attachment_ids'+b+'"]').val();f=f+","+g.fileid;jQ('input[id="attachment_ids'+b+'"]').val(f.replace(/^,/,""))}a.refresh()}else"0"==g.status&&("insertPhotos"==c?(a="",a=g.error.replace(/<\S[^><]*>/g,""),a=a.replace(/\bError(!|:)\b|/,""),a=a.replace(/\[close\]/,""),f=jQ("#upload_error"+b).html(),f=f.replace("strippederror",a),f=f.replace("filename",e.name),jQ("#upprogress_"+e.id).remove(),jQ("#imagesError"+b).show(),jQ("#imagesError"+b).append(f)):(a="",a=g.error.replace(/<\S[^><]*>/g,
""),a=a.replace(/\bError(!|:)\b|/,""),a=a.replace(/\[close\]/,""),jQ("#"+e.id).html("<span class=\"file-invalid\" onclick=\"jQ(this).parents('li:first').css('display','none');\"><span><strong>An error occured:</strong> "+a+"</span></span>")));jQ("#filesize_error,#filetype_error,#message_error").hide()});if(0<jQ("[id^='attachmentCotainer_']").length)jQ(document).on("click","a[id ^= 'delete_attachment']",function(){var a=this.id,a=a.replace(/delete_attachment/g,""),c=jQ("#file_upload"+b).val();c&&delete_attachment(c,
a,a,b)})}
function user_avatar(a,b,c,f,e){uploaderAvatar[a]=new plupload.Uploader({runtimes:"html5,flash,gears",browse_button:a,container:"uploadAvatar",url:"/upload",multipart_params:{fancy_upload:"1",avatar:"1",action:"doUpload",user_id:b,actionChange:f,id:c},multi_selection:!1,flash_swf_url:"/tools/plupload.flash.swf",silverlight_xap_url:"/tools/plupload.silverlight.xap",filters:[{title:"Image files",extensions:"jpg,gif,jpeg,jpe,png"}],preserve_headers:!1,resize:{width:avatar_width,height:avatar_height}});uploaderAvatar[a].init();
uploaderAvatar[a].bind("FilesAdded",function(b,c){jQ("#change_Avatar").removeClass("layer-to-front");jQ("#upload_Avatar").addClass("layer-to-front");jQ.each(c,function(a,b){var c=jQ("#progress").html(),c=c.replace(/get_fileid_/g,b.id),c=c.replace(/get_filename/g,b.name),c=c.replace(/get_filesize/g,plupload.formatSize(b.size));jQ("#change_Avatar").length?(jQ("#files_add #bootstrapProgressBar").remove(),jQ("#files_add").append(c)):jQ("#filesAdd").append(c);0<jQ("#mobileuploadAvatar").length?(c=jQ("#upload_tag_profile_avatar").html(),
jQ("#fileProgress").append(c)):jQ("#"+b.id+"progress").attr("aria-valuenow",b.percent).css("width",b.percent+"%");jQ("#cancel"+b.id).bind("click",function(a){stop_avatarFile(b.id);jQ("#filesAdd").html("");jQ("#avatar").show()})});uploaderAvatar[a].start();b.refresh();jQ("#filesAdd").css("display","");jQ("#files_add").addClass("layer-to-front").show()});jQ("#mobileuploadAvatar").length||uploaderAvatar[a].bind("UploadProgress",function(a,b){jQ("#"+b.id+"progress").attr("aria-valuenow",b.percent).css("width",
b.percent+"%")});uploaderAvatar[a].bind("Error",function(a,b){var c=b.file,e;if(c&&(e=b.message))if(b.code==plupload.FILE_SIZE_ERROR){if(0<jQ("#mobileuploadAvatar").length)return jQ("#filesize_error_avatar").show(),!1;alert("The specified file exceeds the maximum file size of Bytes.")}else if(b.code==plupload.FILE_EXTENSION_ERROR){if(0<jQ("#mobileuploadAvatar").length)return jQ("#filetype_error_avatar").show(),jQ("#file_type").html(c.name),!1;alert("There was an error uploading your Avatar."+c.name+
" is an invalid file type. Supported file types include "+file_types)}else{if(0<jQ("#mobileuploadAvatar").length)return jQ("#message_error_avatar").show(),jQ("#uploading_error_message").html(e),!1;alert("There was an error uploading your Avatar. "+e)}a.refresh()});uploaderAvatar[a].bind("FileUploaded",function(a,b,c){b=jQ.parseJSON(c.response);"1"==b.status?(flagggg=1,jQ("#filesAdd").css("display","none"),jQ("#avatar a, #avatar span").css("background-image","url("+b.url_protocol+"s3.amazonaws.com/"+
globalbeta+"files.websitetoolbox.com/"+b.uid+"/"+b.fileid+")"),setTimeout(function(){jQ("#files_add").hide()},500),jQ("#avatar").css("display",""),jQ("#addAvatar").css("display","none"),jQ("#viewAvatar").attr("href","http://"+globalbeta+"files.websitetoolbox.com/"+b.uid+"/"+b.fileid),jQ("#gallery").css("display",""),jQ("#deleteAvatar").css("display",""),jQ("input[name=attachment_ids]").val(b.fileid),a.settings.multipart_params.actionChange="1",a.settings.multipart_params.id=b.fileid,a.refresh()):
"0"==b.status&&(a="",a=b.error.replace(/<\S[^><]*>/g,""),a=a.replace(/\bError(!|:)\b|/,""),a=a.replace(/\[close\]/,""),jQ("#uploadAvatar").append("<li onclick=\"jQ('.file-invalid').css('display','none'); jQ('#avatar').css('display', '');jQ(this).removeClass('file-invalid')\" class=\"file-invalid\" style=\"margin-left: 0px;\"><span><strong>An error occured:</strong> "+a+"</span></li>"));jQ("#filesAdd").css("display","none");jQ("attachAvatar").html(e)?jQ("#filesAdd").html(""):jQ("#avatar").css("display",
"");jQ("#filesize_error_avatar,#filetype_error_avatar,#message_error_avatar").hide()})};function fixedDivBar(a){this.hasInner="number"==typeof window.innerWidth;this.hasElement=null!=document.documentElement&&document.documentElement.clientWidth;this.menu=document.getElementById?document.getElementById(a):document.all?document.all[a]:document.layers[a];this.init()}
fixedDivBar.prototype.computeShifts=function(){this.shiftX=this.hasInner?pageXOffset:this.hasElement?document.documentElement.scrollLeft:document.body.scrollLeft;this.shiftX=0<this.targetLeft?this.shiftX+this.targetLeft:this.shiftX+((this.hasElement?document.documentElement.clientWidth:this.hasInner?window.innerWidth-20:document.body.clientWidth)-this.targetRight-this.menu.offsetWidth);this.shiftY=this.hasInner?pageYOffset:this.hasElement?document.documentElement.scrollTop:document.body.scrollTop;
this.shiftY=0<this.targetTop?this.shiftY+this.targetTop:this.shiftY+((this.hasElement?document.documentElement.clientHeight:this.hasInner?window.innerHeight-20:document.body.clientHeight)-this.targetBottom-this.menu.offsetHeight)};
fixedDivBar.prototype.moveMenu=function(a){a.computeShifts();if(a.currentX!=a.shiftX||a.currentY!=a.shiftY)a.currentX=a.shiftX,a.currentY=a.shiftY,document.layers?(a.menu.left=a.currentX,a.menu.top=a.currentY):(a.menu.style.left=a.currentX+"px",a.menu.style.top=a.currentY+"px");a.menu.style.right="";a.menu.style.bottom=""};
fixedDivBar.prototype.addEvent=function(a,b,c){if("function"!=typeof a[b]||"undefined"==typeof a[b+"_num"])a[b+"_num"]=0,"function"==typeof a[b]&&(a[b+0]=a[b],a[b+"_num"]++),a[b]=function(c){var d=!0;c=c?c:window.event;for(var f=0;f<a[b+"_num"];f++)!1===a[b+f](c)&&(d=!1);return d};for(var f=0;f<a[b+"_num"];f++)if(a[b+f]==c)return;a[b+a[b+"_num"]]=c;a[b+"_num"]++};
fixedDivBar.prototype.isDoctype=function(){return"undefined"!=typeof document.namespaces?8==document.all[0].nodeType?!0:!1:null!=document.doctype?!0:!1};
fixedDivBar.prototype.init=function(){var a=this,b=navigator.userAgent.toLowerCase();a.isDoctype()||"-1"==b.indexOf("msie")?a.menu.style.position="fixed":(b=document.layers?a.menu:a.menu.style,a.targetLeft=parseInt(b.left),a.targetTop=parseInt(b.top),a.targetRight=parseInt(b.right),a.targetBottom=parseInt(b.bottom),document.layers&&(menu.left=0,menu.top=0),a.addEvent(window,"onscroll",function(){a.moveMenu(a)}))};wtbx.forum={isTouchDevice:function(){return"ontouchstart"in window||navigator.maxTouchPoints?1:0},changeLoginURL:function(){!getCookie("userid")&&global_hash.forum_SSO_login_url&&jQ('a[href="#form-dialog"]').each(function(){jQ(this).attr("href",global_hash.forum_SSO_login_url)})},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?1:0}};
function check_forumSubscriptionsAction(){totalChecked=getTotalChecked();if(""==document.posts.mass_forum_unsubscribe.value)return!1;if(0==totalChecked)return alert("No Categories have been selected."),jQ("#new_mass_forum_unsubscribe").length||(document.posts.mass_forum_unsubscribe.selectedIndex=0),!1;if(("unsubscribe"==document.posts.mass_forum_unsubscribe.value||jQ("#new_mass_forum_unsubscribe").length)&&!confirm("Unsubscribe from "+totalChecked+" "+(1<totalChecked?"categories":"category")+" you have selected?"))return jQ("#new_mass_forum_unsubscribe").length||
(document.posts.mass_forum_unsubscribe.selectedIndex=0),!1;document.posts.submit()}var ajaxRunning=!1;jQ(document).ajaxStart(function(){ajaxRunning=!0;setTimeout(function(){ajaxRunning&&jQ("#loading_msg").removeClass("hidden")},400)});jQ(document).ajaxStop(function(){ajaxRunning=!1;jQ("#loading_msg").addClass("hidden")});
function showAjaxMsg(a){a.match("^Error:")?alert(a):jQ("#ajax-msg-top").hasClass("hidden")?jQ("#ajax-msg-top").html("<p>"+a+"</p>").removeClass("hidden").delay(3E3).fadeOut():jQ("#ajax-msg-top").html("<p>"+a+"</p>").show().delay(3E3).fadeOut()}
function showFieldError(a,b){b=b.replace(/^Error: /,"");b.match(/\b(birthday)\b|This user has been deleted./i)||a.focus();var c;c=a instanceof jQuery?a.get(0):a;jQ(".input-error").not(c).removeAttr("data-original-title data-toggle data-placement").removeClass("input-error error-tooltip");jQ(c).addClass("input-error error-tooltip").attr({"data-original-title":b,"data-toggle":"tooltip","data-placement":"bottom"});jQ(c).tooltip()}window.old_alert=window.alert;
window.alert=function(a){if("undefined"==typeof jQuery.ui)old_alert(a);else{var b;"string"==typeof a&&a.match("^Error:")?(b="Error",a=a.replace(/^Error:/,"")):b="Alert";jQ(document.createElement("div")).html(jQ("#bootstrap-alert-box-modal").html());jQ("#bootstrap-alert-box-modal .modal-header h4").text(b||"");jQ("#bootstrap-alert-box-modal .modal-body p").text(a||"");jQ("#bootstrap-alert-box-modal").modal("show")}};
jQ(document).ready(function(){jQ(".preview_skin a").click(function(){setCookie("skin_preview","",0,1);setCookie("preview_edited_skin","",0,1);window.opener&&window.close()});jQ("a, i").tooltip();0<jQ("#all_forums_dropdown").length&&jQ("#all_forums_dropdown").change(function(){var a=this.value;a&&jQ.ajax({type:"POST",url:"/post",data:{action:"check_permission",forumid:a},success:function(a){a.success&&(a.pinthreads_perm?jQ("#pin_thread").removeClass("hidden"):jQ("#pin_thread").addClass("hidden"),a.lockthreads_perm?
jQ("#lock_thread").removeClass("hidden"):jQ("#lock_thread").addClass("hidden"))},error:function(a,b,c){alert("An error occurred while processing your request.\n"+b+": "+c)}})});jQ(document).on("click","[id^='bootstrap_close_']",function(){jQ("#"+this.id).closest(".modal").modal("hide")});jQ("#links-nav").on("click touchstart",function(){var a=jQ("#slide-panel"),b=jQ("body");0<jQ(".fixed-header").length?a.addClass("fixed-panel"):a.removeClass("fixed-panel");a.hasClass("visible")?(a.removeClass("visible").animate(),
b.removeClass("pushed-right").animate()):(a.addClass("visible").animate(),b.addClass("pushed-right").animate());return!1});jQ(document).on("click touchstart",function(a){var b=jQ("#slide-panel");b.is(a.target)||0!==b.has(a.target).length||(jQ("#slide-panel").removeClass("visible").animate(),jQ("body").removeClass("pushed-right").animate())});if(jQ("#slide-panel").length)if(jQ("#paid_access").length)jQ("#forums_toggle_link .panel-collapse").remove(),jQ("#forums_toggle_link > li > i").remove(),jQ("#calendars_toggle_link > li > i").remove(),
jQ("#forums_toggle_link > li > a").removeClass("active"),jQ("#paid_access_donate_link").addClass("active");else{if(jQ("#members_list_show, #calenders_show, #latest_topics_show").length){-1<window.location.href.indexOf("paid_access")&&jQ("#paid_access_donate_link").addClass("active");var a=window.location.pathname.split("/");"calendar"==a[1]?jQ("#calenders_show").children("a").addClass("active"):"members"==a[2]?(jQ("#searchin").val("Members"),jQ("#members_list_show").children("a").addClass("active")):
"latest"==a[1]?jQ("#latest_topics_show").children("a").addClass("active"):"search"==a[1]&&jQ("#search_link").children("a").addClass("active");jQ(".slide-panel-content li a").on("click",function(a){a=jQ(this).attr("href").split("/").pop();"calendar"==a?(jQ(".slide-panel-content li a").removeClass("active"),jQ("#calenders_show").children("a").addClass("active")):"members"==a?(jQ(".slide-panel-content li a").removeClass("active"),jQ("#members_list_show").children("a").addClass("active")):"latest"==a?
(jQ(".slide-panel-content li a").removeClass("active"),jQ("#latest_topics_show").children("a").addClass("active")):"search"==a&&(jQ(".slide-panel-content li a").removeClass("active"),jQ("#search_link").children("a").addClass("active"))})}jQ("#forums_toggle_link > li > ul").hasClass("panel-collapse")||jQ("#forums_toggle_link").remove();jQ(".toggleable").on("click",function(a){a.preventDefault();jQ(this).toggleClass("icon-down-dir icon-right-dir");jQ("#"+jQ(this).closest("ul").attr("id")+" > li > ul").each(function(){jQ(this).collapse("toggle");
jQ(this).children("li").children("i").toggleClass("icon-down-dir icon-right-dir");jQ(this).children("li").children("ul").hasClass("panel-collapse")||jQ(this).children("li").children("i").remove()})});var b,a=/[?&]forum=([^&]+)/i.exec(window.location.href);null!=a&&(b=a[1]);a=window.location.pathname;a=a.split("/");b||"undefined"==typeof forum||"post"!=a[1]||(b=forum);var c,f=window.location.search;"0"==b&&(b="");b||f||(c=a[1]&&"categories"!=a[1]?"":1);if(b||c)b?(jQ("#forums_toggle_link").removeClass("in"),
jQ("#"+b).parents(".panel-collapse").each(function(){jQ(this).collapse("toggle");jQ(this).children("li").children("i").removeClass("toggleable glyphicon icon-right-dir");jQ(this).children("li").children("i").addClass("toggleable glyphicon icon-down-dir")}),jQ("#"+b).collapse("toggle"),jQ("#"+b).children("li").children("a").addClass("active"),jQ("#"+b).children("li").children("i").removeClass("toggleable glyphicon icon-down-dir"),jQ("#"+b).children("li").children("i").addClass("toggleable glyphicon icon-right-dir"),
jQ("#"+b).children("li").children("ul").hasClass("panel-collapse")||jQ("#"+b).children("li").children("i").remove(),jQ("#forums_toggle_link > li > ul").each(function(){jQ(this).hasClass("panel-collapse collapsing")||(jQ(this).addClass("panel-collapse collapse in"),jQ(this).children("li").children("i").removeClass("toggleable glyphicon icon-down-dir"),jQ(this).children("li").children("i").addClass("toggleable glyphicon icon-right-dir"),jQ(this).children("li").children("ul").hasClass("panel-collapse")||
jQ(this).children("li").children("i").remove())})):(jQ("#forums_toggle_link > li > i").removeClass("toggleable glyphicon icon-right-dir"),jQ("#forums_toggle_link > li > i").addClass("toggleable glyphicon icon-down-dir"),jQ("#forums_toggle_link").children("li").children("a").addClass("active"),jQ("#forums_toggle_link > li > ul").each(function(){jQ(this).addClass("panel-collapse collapse in");jQ(this).children("li").children("i").removeClass("toggleable glyphicon icon-down-dir");jQ(this).children("li").children("i").addClass("toggleable glyphicon icon-right-dir");
jQ(this).children("li").children("ul").hasClass("panel-collapse")||jQ(this).children("li").children("i").remove()}));jQ(".calendar_toggleable").on("click",function(a){a.preventDefault();a=jQ(this);a.closest("ul").find(".panel-collapse").collapse("toggle");a.toggleClass("icon-down-dir icon-right-dir")});if(jQ("#calendars_toggle_link").length){b=/[?&]calendarid=([^&]+)/i.exec(window.location.search);var e;null!=b&&(e=b[1]);var d,a=window.location.pathname;"calendar"==a.split("/")[1]&&(d=1);if(e||d)e||
(jQ("[name= 'calendarid']").length&&jQ("[name= 'calendarid']").val()?jQ("#"+jQ("[name= 'calendarid']").val()).children("li").children("a").addClass("active"):jQ("#calendars_toggle_link").children("li").children("a").addClass("active")),jQ("#calendars_toggle_link").children("li").children("i").removeClass("calendar_toggleable glyphicon icon-right-dir"),jQ("#calendars_toggle_link").children("li").children("i").addClass("calendar_toggleable glyphicon icon-down-dir"),jQ("#calendars_toggle_link .panel-collapse").each(function(){jQ(this).addClass("panel-collapse collapse in");
jQ(this).attr("id")==e&&jQ(this).children("li").children("a").addClass("active")})}}jQ(".fourm_sub_title").click(function(){var a=jQ(this).find("span[id^='collapsible_img_icon_']").attr("id").replace(/collapsible_img_icon_/g,"");return toggle_collapse(a,"collapse","expand")});jQ("#quicknav_dropdown").change(function(){return quicknavigation(this.value)});jQ("#forums .close-row").on("click",function(){var a=jQ(this).attr("data-forumid");jQ("#forum_"+a).hide();0==jQ("#forum_"+a).parent().children(":visible").length&&
jQ("#forum_"+a).parent().prev().closest("div.panel-heading").hide();var b=jQ(this).attr("data-sub-forumid");b&&(a+=","+b);jQ.ajax({type:"POST",url:"/forums",data:{action:"hide_forum",forumids:a},success:function(a){var b=parseInt(jQ("#hidden_forums_count").text())||0,b=b+a.count;jQ("#hidden_forums_count").text(b);var c;c=1<b?" categories are":" category is";jQ("#hidden_forums_text").text(c);jQ("#hidden_forum").removeClass("hidden");0==jQ("#forums .panel:visible").length&&jQ("#startTopic").hide();
a.forum_count==b&&jQ("#forums_toggle_link").remove()},error:function(a,b,c){alert("An error occurred while processing your request.\n"+b+": "+c)}})});if(!jQ("#search_Forums").length)jQ("#apply_forum_filter").on("click",function(){var a,b;jQ("#forum_tree ul li").each(function(c){jQ(this).hasClass("node-selected")||(a=1,b++)});if(a){var c=jQ("#clear_forum_filter").attr("data-hidden-forum-ids"),c=c.split(",");b==c.length&&jQ("#filtered_forumids").val("clear all");0<jQ("#forums").length&&jQ("#jump").val("/categories");
document.filtered.submit()}else jQ("#filter-modal #alertMsg").text("Please deselect at least one category you would like to stop hiding.").addClass("alert-danger")});jQ("#clear_forum_filter").on("click",function(){if(jQ("#unfiltered_forums").length){var a=jQ("#search_Forums").attr("data-forum_data"),b=0;jQ.each(a.split(","),function(a,c){c.match(/forumid/)&&b++});for(a=0;a<b;a++)jQ("#forum_tree").treeview("unselectNode",[a,{silent:!0}]);jQ("#unfiltered_forums").val("")}else{for(var c=jQ("#clear_forum_filter").attr("data-hidden-forum-ids"),
c=c.split(","),a=0;a<c.length;a++)jQ("#forum_tree").treeview("unselectNode",[a,{silent:!0}]);jQ("#filtered_forumids").val(c)}});jQ("#mass_forum_unsubscribe_btn").click(function(){check_forumSubscriptionsAction()});jQ("#modify_forum_filter").on("click",function(){jQ.ajax({type:"POST",url:"/forums",data:{action:"show_hidden_forums"},success:function(a){jQ("#clear_forum_filter").attr("data-hidden-forum-ids",a.forumids);jQ("#filtered_forumids").val("");jQ("#forum_tree").treeview({data:a.data,levels:1,
nodeIcon:"",multiSelect:"true",onNodeSelected:function(a,b){traverse("selectNode",b)},onNodeUnselected:function(a,b){"undefined"==typeof b.parentId?traverse("unselectNode",b):jQ("#forum_tree").treeview("selectNode",[b.nodeId,{silent:!0}])}});jQ("#filter-modal").show()},error:function(a,b,c){alert("An error occurred while processing your request.\n"+b+": "+c)}})});jQ("#search_Forums").on("click",function(){var a=jQ(this).attr("data-forum_data"),b=[],c=[],d=jQ("#unfiltered_forums").val(),e=jQ("#apply_forum_filter").attr("data-showas");
jQ("[name= 'action']").val("doSearch");jQ("#search_in").val("doSearch");jQ("#filter_by_forum").val(1);d&&(d=d.split(","),jQ.each(d,function(a,b){c.push(b)}));e?(jQ("#show_as").val(e),jQ("#do_search").val("findposts")):(jQ("#show_as").remove(),jQ("#do_search").val("findthreads"));jQ("#alertMsg").html("Select the forums you would like to search.");jQ("#apply_forum_filter").removeAttr("id").attr("id","search_forums_filter");jQ("#forum_tree").treeview({data:a,levels:1,collapseIcon:"icon icon-down-dir",
expandIcon:"icon icon-right-dir",emptyIcon:"icon",nodeIcon:"",multiSelect:"true",onNodeSelected:function(a,b){c.push(b.forumid);traverse("selectNode",b);jQ("#unfiltered_forums").val(c)},onNodeUnselected:function(a,d){b.push(d.forumid);jQ.each(d,function(a,b){});"undefined"==typeof d.parentId?traverse("unselectNode",d):jQ("#forum_tree").treeview("selectNode",[d.nodeId,{silent:!0}]);jQ.grep(b,function(a){return-1!==jQ.inArray(a,c)});var e=c.filter(function(a){return-1==b.indexOf(a)});jQ("#unfiltered_forums").val(e)}})});
d=jQ("#forumsDropdown").attr("data-forum_data");var g=[],h=[],k=[];jQ("#forum_tree").treeview({data:d,levels:1,collapseIcon:"icon icon-down-dir",expandIcon:"icon icon-right-dir",emptyIcon:"icon",nodeIcon:"",multiSelect:"true",onNodeSelected:function(a,b){h.push(b.forumid);k.push({forumid:b.forumid,title:b.text});1<h.length?jQ("#forumsDropdown").text("Search "+h.length+" Categories"):jQ("#forumsDropdown").text(b.text);traverse("selectNode",b);jQ("#unfiltered_forums").val(h)},onNodeUnselected:function(a,
b){g.push(b.forumid);var c=h.indexOf(b.forumid);-1<c&&h.splice(c,1);if(1<h.length)jQ("#forumsDropdown").text("Search "+h.length+" Categories");else if(1==h.length)for(i=0;i<k.length;i++)k[i].forumid==h[0]&&jQ("#forumsDropdown").text(k[i].title);else jQ("#forumsDropdown").text("Search All Categories");jQ.each(b,function(a,b){});"undefined"==typeof b.parentId?traverse("unselectNode",b):jQ("#forum_tree").treeview("selectNode",[b.nodeId,{silent:!0}]);jQ.grep(g,function(a){return-1!==jQ.inArray(a,h)});
c=h.filter(function(a){return-1==g.indexOf(a)});jQ("#unfiltered_forums").val(c)}});jQ("#forum_tree").on("click",function(a){a.stopPropagation()});0<jQ("#member").length&&(""==jQ("#member").val()?jQ("#member").focus():jQ("#password").focus());if(0<jQ("#cancelPassword").length)jQ("#cancelPassword").on("click",function(){window.location.href="/register/login"});wtbx.forum.changeLoginURL();0<jQ("#topics").length&&parseInt(jQ("#topics").offset().top);0<jQ("#subscribe_topic").length&&parseInt(jQ("#subscribe_topic").offset().top);
if(0<jQ(".header-wrapper").length){var m,l;0<jQ("#forum_header_fixed").length&&(m=jQ("#forum_header_fixed"));0<jQ("#forum_header").length&&(l=parseInt(jQ("#forum_header").offset().top),m=jQ("#forum_header"));var p=m.height(),n=parseInt(jQ(document).height()),q=parseInt(jQ(window).height()),r=q+p;window.addEventListener("resize",function(){jQ(window).height();jQ(window).width();p=m.height();n=parseInt(jQ(document).height());q=parseInt(jQ(window).height());r=q+p},!0);wtbx.forum.isMobile()&&0==jQ(this).scrollTop()&&
0<jQ(".secondary-header").length&&jQ(".secondary-header").addClass("fixed-header");var v=0;jQ(window).scroll(function(){var a=jQ(this).scrollTop();wtbx.forum.isMobile()?0>=jQ(".editable-buttons").length&&n>r&&0<jQ("#forum_header_fixed").length&&0<=a?(a>v?0<jQ(".secondary-header").length?(jQ(".secondary-header, #forum_header_fixed").addClass("fixed-header"),jQ(".secondary-header, #forum_header_fixed").addClass("hidden"),jQ("#edit_subject").addClass("hide-text")):jQ("#forum_header_fixed").addClass("hidden"):
0==a?0<jQ(".secondary-header").length?(jQ(".secondary-header, #forum_header_fixed").removeClass("fixed-header"),jQ(".secondary-header, #forum_header_fixed").removeClass("hidden"),jQ("#edit_subject").removeClass("hide-text")):jQ("#forum_header_fixed").removeClass("hidden"):0<jQ(".secondary-header").length?(jQ(".secondary-header, #forum_header_fixed").removeClass("hidden"),jQ("#edit_subject").addClass("hide-text")):jQ("#forum_header_fixed").removeClass("hidden"),v=a):0>=jQ(".editable-buttons").length&&
n>r&&0<jQ("#forum_header").length&&(a>l?a>v?jQ("#forum_header, #forum_subheader").addClass("fixed-header").addClass("hidden"):jQ("#forum_header, #forum_subheader").removeClass("hidden"):jQ("#forum_header, #forum_subheader").removeClass("fixed-header").removeClass("hidden"),v=a):0<jQ(".secondary-header").length&&(a>v?(jQ(".secondary-header").addClass("fixed-header"),jQ("#edit_subject").addClass("hide-text")):(0==a&&jQ(".secondary-header").removeClass("fixed-header"),jQ("#edit_subject").removeClass("hide-text")),
v=a)})}jQ("#sub_post_reply").on("click",function(){if(0<jQ("#message").length){var a=jQ("#message").offset().top;wtbx.forum.isMobile()&&(a=parseInt(a)-100);jQ("html,body").animate({scrollTop:a},"slow");startEditor("message");jQ("#reply_options").show();jQ("#message").focus()}0<jQ("#message_ifr").length&&(a=jQ("#message_ifr").offset().top,jQ("html,body").animate({scrollTop:a},"slow"),jQ("#message_ifr").focus())})});
function traverse(a,b){jQ("#forum_tree").treeview(a,[b.nodeId,{silent:!0}]);jQ("#filtered_forumids").val(function(c,f){if("selectNode"==a){var e=f.split(",");for(c=0;c<e.length;c++)e[c]==b.forumid&&e.splice(c,1);return e.join(",")}return f+(f?",":"")+b.forumid});for(i in b.nodes)"object"==typeof b.nodes[i]&&traverse(a,b.nodes[i])};function highlight_login_box(a){var b=document.getElementById(a);if(b)for(b.focus(),b.select(),a=0;1600>a;a+=400)window.setTimeout(function(){b.style.backgroundColor="#F3F781"},a),window.setTimeout(function(){b.style.backgroundColor=""},a+200);return!1}function make_blank(){"Unregistered"==document.PostTopic.name.value&&(document.PostTopic.name.value="")}function box_fill(){""==document.PostTopic.name.value&&(document.PostTopic.name.value="Unregistered")};wtbx.popover={show_popover:function(a,b){var c=jQ("#popover_content").html();jQ(a).popover({html:!0,trigger:"manual",placement:"auto",template:c,viewport:".main-container",content:function(){return b}}).popover("show");dateMomentjs()},hide_popover:function(a){if(jQ(".popover").hasClass("in"))jQ(".popover,.username").on("mouseleave",function(){jQ(".popover:hover").length||jQ(".popover").hide()})}};wtbx.tooltip={show_tooltip:function(a){jQ(a).tooltip({trigger:"manual"}).tooltip("show")},hide_tooltip:function(a){jQ(a).tooltip("hide")}};
function hoverCard(){if(!wtbx.forum.isTouchDevice())if(jQ("#hover_card_content").hide(),"undefined"!=typeof disable_hover_cards&&disable_hover_cards)jQ("a.username").attr("title","View profile");else{var a;jQ(".username").hover(function(){var b,c=this,f=jQ(this).attr("href").split("/")[2];a&&clearTimeout(a);a=setTimeout(function(){jQ("#content_"+f).html()||jQ(c).attr("data-original-title")?jQ(c).attr("data-original-title")?wtbx.tooltip.show_tooltip(c):(b=jQ("#content_"+f).html(),wtbx.popover.show_popover(c,
b)):(jQ(c).attr("href"),ajaxGetURL("/register?action=show_hovercard&userid="+f,function(a){if(a.error_msg){var d,g;"noPermission"==a.error_msg&&(a.error_msg="");jQ("a.username").each(function(){d=jQ(this).attr("href").split("/");g=d[2];g==f&&jQ(this).addClass("error-tooltip").attr({"data-original-title":a.error_msg,"data-toggle":"tooltip","data-placement":"bottom"})});wtbx.tooltip.show_tooltip(c)}else jQ("#hover_card_content").append(a),b=jQ("#content_"+f).html(),wtbx.popover.show_popover(c,b)}))},
1E3)},function(){a&&clearTimeout(a);if(jQ(this).attr("data-original-title"))wtbx.tooltip.hide_tooltip(this);else jQ(".popover,.username").on("mouseleave",function(){setTimeout(function(){jQ(".popover:hover").length||jQ(".popover").hide()},1E3)})})}}
jQ(document).ready(function(){jQ("body").tooltip({selector:"[data-toggle=tooltip]"});jQ(document).on("click","#guest_user_message",function(){jQ("#form-dialog #myModalLabel").text("You need to be logged in to send a message.");jQ("#form-dialog").modal("show");return!1})});(function(a){var b={className:"autosizejs",id:"autosizejs",append:"\n",callback:!1,resizeDelay:10,placeholder:!0},c="fontFamily fontSize fontWeight fontStyle letterSpacing textTransform wordSpacing textIndent".split(" "),f,e=jQ('<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>').data("autosize",
!0)[0];e.style.lineHeight="99px";"99px"===a(e).css("lineHeight")&&c.push("lineHeight");e.style.lineHeight="";a.fn.autosize=function(d){if(!this.length)return this;d=a.extend({},b,d||{});e.parentNode!==document.body&&a(document.body).append(e);return this.each(function(){function b(){var c,d=window.getComputedStyle?window.getComputedStyle(l,null):!1;if(d){c=l.getBoundingClientRect().width;if(0===c||"number"!==typeof c)c=parseInt(d.width,10);a.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],
function(a,b){c-=parseInt(d[b],10)})}else c=p.width();e.style.width=Math.max(c,0)+"px"}function h(){var h={};f=l;e.className=d.className;e.id=d.id;n=parseInt(p.css("maxHeight"),10);a.each(c,function(a,b){h[b]=p.css(b)});a(e).css(h).attr("wrap",p.attr("wrap"));b();if(window.chrome){var k=l.style.width;l.style.width="0px";l.style.width=k}}function k(){var a,c;f!==l?h():b();e.value=!l.value&&d.placeholder?(p.attr("placeholder")||"")+d.append:l.value+d.append;e.style.overflowY=l.style.overflowY;c=parseInt(l.style.height,
10);e.scrollTop=0;e.scrollTop=9E4;a=e.scrollTop;n&&a>n?(l.style.overflowY="scroll",a=n):(l.style.overflowY="hidden",a<q&&(a=q));a+=r;c!==a&&(l.style.height=a+"px",v&&d.callback.call(l,l))}function m(){clearTimeout(t);t=setTimeout(function(){var a=p.width();a!==u&&(u=a,k())},parseInt(d.resizeDelay,10))}var l=this,p=a(l),n,q,r=0,v=a.isFunction(d.callback),x={height:l.style.height,overflow:l.style.overflow,overflowY:l.style.overflowY,wordWrap:l.style.wordWrap,resize:l.style.resize},t,u=p.width(),B=p.css("resize");
if(!p.data("autosize")){p.data("autosize",!0);if("border-box"===p.css("box-sizing")||"border-box"===p.css("-moz-box-sizing")||"border-box"===p.css("-webkit-box-sizing"))r=p.outerHeight()-p.height();q=Math.max(parseInt(p.css("minHeight"),10)-r||0,p.height());p.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word"});"vertical"===B?p.css("resize","none"):"both"===B&&p.css("resize","horizontal");if("onpropertychange"in l)if("oninput"in l)p.on("input.autosize keyup.autosize",k);else p.on("propertychange.autosize",
function(){"value"===event.propertyName&&k()});else p.on("input.autosize",k);if(!1!==d.resizeDelay)a(window).on("resize.autosize",m);p.on("autosize.resize",k);p.on("autosize.resizeIncludeStyle",function(){f=null;k()});p.on("autosize.destroy",function(){f=null;clearTimeout(t);a(window).off("resize",m);p.off("autosize").off(".autosize").css(x).removeData("autosize")});k()}})}})(window.jQuery||window.$);(function(a){function b(a){return String(null===a||void 0===a?"":a).replace(d,function(a){return e[a]})}var c={method:"GET",queryParam:"q",searchDelay:300,minChars:1,propertyToSearch:"name",jsonContainer:null,contentType:"json",excludeCurrent:!1,excludeCurrentParameter:"x",prePopulate:null,processPrePopulate:!1,hintText:"Type in a search term",noResultsText:"No results",searchingText:"Searching...",deleteText:"&#215;",animateDropdown:!0,placeholder:null,theme:null,zindex:999,resultsLimit:null,enableHTML:!1,
resultsFormatter:function(a){a=a[this.propertyToSearch];return"<li>"+(this.enableHTML?a:b(a))+"</li>"},tokenFormatter:function(a){a=a[this.propertyToSearch];return"<li><p>"+(this.enableHTML?a:b(a))+"</p></li>"},tokenLimit:null,tokenDelimiter:",",preventDuplicates:!1,tokenValue:"id",allowFreeTagging:!1,allowTabOut:!1,autoSelectFirstResult:!1,onResult:null,onCachedResult:null,onAdd:null,onFreeTaggingAdd:null,onDelete:null,onReady:null,idPrefix:"token-input-",disabled:!1},f={tokenList:"token-input-list",
token:"token-input-token",tokenReadOnly:"token-input-token-readonly",tokenDelete:"token-input-delete-token",selectedToken:"token-input-selected-token",highlightedToken:"token-input-highlighted-token",dropdown:"token-input-dropdown",dropdownItem:"token-input-dropdown-item",dropdownItem2:"token-input-dropdown-item2",selectedDropdownItem:"token-input-selected-dropdown-item",inputToken:"token-input-input-token",focused:"token-input-focused",disabled:"token-input-disabled"},e={"&":"&amp;","<":"&lt;",">":"&gt;",
'"':"&quot;","'":"&#x27;","/":"&#x2F;"},d=/[&<>"'\/]/g,g={init:function(b,d){var e=a.extend({},c,d||{});return this.each(function(){a(this).data("settings",e);a(this).data("tokenInputObject",new a.TokenList(this,b,e))})},clear:function(){this.data("tokenInputObject").clear();return this},add:function(a){this.data("tokenInputObject").add(a);return this},remove:function(a){this.data("tokenInputObject").remove(a);return this},get:function(){return this.data("tokenInputObject").getTokens()},toggleDisabled:function(a){this.data("tokenInputObject").toggleDisabled(a);
return this},setOptions:function(b){a(this).data("settings",a.extend({},a(this).data("settings"),b||{}));return this},destroy:function(){if(this.data("tokenInputObject")){this.data("tokenInputObject").clear();var a=this.parent();a.empty();this.show();a.append(this);return this}}};a.fn.tokenInput=function(a){return g[a]?g[a].apply(this,Array.prototype.slice.call(arguments,1)):g.init.apply(this,arguments)};a.TokenList=function(c,d,e){function g(d){return a(c).data("settings").enableHTML?d:b(d)}function p(b){"boolean"===
typeof b?a(c).data("settings").disabled=b:a(c).data("settings").disabled=!a(c).data("settings").disabled;M.attr("disabled",a(c).data("settings").disabled);X.toggleClass(a(c).data("settings").classes.disabled,a(c).data("settings").disabled);O&&u(a(O),2);S.attr("disabled",a(c).data("settings").disabled)}function n(){null!==a(c).data("settings").tokenLimit&&P>=a(c).data("settings").tokenLimit&&(M.hide(),D())}function q(){if(J!==(J=M.val())){var a=X.width()-M.offset().left-X.offset().left;W.html(b(J)||
b(e.placeholder));M.width(Math.min(X.width(),Math.max(a,W.width()+30)))}}function r(){var b=a.trim(M.val()).split(a(c).data("settings").tokenDelimiter);a.each(b,function(b,d){if(d){a.isFunction(a(c).data("settings").onFreeTaggingAdd)&&(d=a(c).data("settings").onFreeTaggingAdd.call(S,d));var e={};e[a(c).data("settings").tokenValue]=e[a(c).data("settings").propertyToSearch]=d;x(e)}})}function v(b){var d=a(a(c).data("settings").tokenFormatter(b)),e=!0===b.readonly;e&&d.addClass(a(c).data("settings").classes.tokenReadOnly);
d.addClass(a(c).data("settings").classes.token).insertBefore(ea);e||a("<span>"+a(c).data("settings").deleteText+"</span>").addClass(a(c).data("settings").classes.tokenDelete).appendTo(d).click(function(){if(!a(c).data("settings").disabled)return B(a(this).parent()),S.change(),!1});a.data(d.get(0),"tokeninput",b);N=N.slice(0,V).concat([b]).concat(N.slice(V));V++;A(N,S);P+=1;null!==a(c).data("settings").tokenLimit&&P>=a(c).data("settings").tokenLimit&&(M.hide(),D());return d}function x(b){var d=a(c).data("settings").onAdd;
if(0<P&&a(c).data("settings").preventDuplicates){var f=null;X.children().each(function(){var c=a(this),d=a.data(c.get(0),"tokeninput");if(d&&d[e.tokenValue]===b[e.tokenValue])return f=c,!1});if(f){t(f);ea.insertAfter(f);U(M);return}}M.width(1);if(null==a(c).data("settings").tokenLimit||P<a(c).data("settings").tokenLimit)v(b),M.attr("placeholder",null),n();M.val("");D();a.isFunction(d)&&d.call(S,b)}function t(b){a(c).data("settings").disabled||(b.addClass(a(c).data("settings").classes.selectedToken),
O=b.get(0),M.val(""),D())}function u(b,d){b.removeClass(a(c).data("settings").classes.selectedToken);O=null;0===d?(ea.insertBefore(b),V--):1===d?(ea.insertAfter(b),V++):(ea.appendTo(X),V=P);U(M)}function B(b){var d=a.data(b.get(0),"tokeninput"),f=a(c).data("settings").onDelete,g=b.prevAll().length;g>V&&g--;b.remove();O=null;U(M);N=N.slice(0,g).concat(N.slice(g+1));0==N.length&&M.attr("placeholder",e.placeholder);g<V&&V--;A(N,S);--P;null!==a(c).data("settings").tokenLimit&&(M.show().val(""),U(M));
a.isFunction(f)&&f.call(S,d)}function A(b,d){var e=a.map(b,function(b){return"function"==typeof a(c).data("settings").tokenValue?a(c).data("settings").tokenValue.call(this,b):b[a(c).data("settings").tokenValue]});d.val(e.join(a(c).data("settings").tokenDelimiter))}function D(){ca.hide().empty();H=null}function C(){ca.css({position:"absolute",top:X.offset().top+X.outerHeight(!0),left:X.offset().left,width:X.width(),"z-index":a(c).data("settings").zindex}).show()}function z(a,b){return a.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+
b.replace(na,"\\$&")+")(?![^<>]*>)(?![^&;]+;)","gi"),function(a,b){return"<b>"+g(b)+"</b>"})}function K(b){if(a(c).data("settings").excludeCurrent){var d=a(c).data("tokenInputObject").getTokens(),e=[];d.length&&(a.each(b,function(b,f){var g=!0;a.each(d,function(b,d){if(f[a(c).data("settings").propertyToSearch]==d[a(c).data("settings").propertyToSearch])return g=!1});g&&e.push(f)}),b=e)}return b}function E(b,d){if((d=K(d))&&d.length){ca.empty();var e=a("<ul/>").appendTo(ca).mouseover(function(b){G(a(b.target).closest("li"))}).mousedown(function(b){x(a(b.target).closest("li").data("tokeninput"));
S.change();return!1}).hide();a(c).data("settings").resultsLimit&&d.length>a(c).data("settings").resultsLimit&&(d=d.slice(0,a(c).data("settings").resultsLimit));a.each(d,function(d,f){var g=a(c).data("settings").resultsFormatter(f),k=f[a(c).data("settings").propertyToSearch],g=g.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+k.replace(na,"\\$&")+")(?![^<>]*>)(?![^&;]+;)","g"),z(k,b)),g=a(g).appendTo(e);d%2?g.addClass(a(c).data("settings").classes.dropdownItem):g.addClass(a(c).data("settings").classes.dropdownItem2);
0===d&&a(c).data("settings").autoSelectFirstResult&&G(g);a.data(g.get(0),"tokeninput",f)});C();a(c).data("settings").animateDropdown?e.slideDown("fast"):e.show()}else a(c).data("settings").noResultsText&&(ca.html("<p>"+g(a(c).data("settings").noResultsText)+"</p>"),C())}function G(b){b&&(H&&(a(H).removeClass(a(c).data("settings").classes.selectedDropdownItem),H=null),b.addClass(a(c).data("settings").classes.selectedDropdownItem),H=b.get(0))}function y(){var b=M.val();b&&b.length&&(O&&u(a(O),1),b.length>=
a(c).data("settings").minChars?(a(c).data("settings").searchingText&&(ca.html("<p>"+g(a(c).data("settings").searchingText)+"</p>"),C()),clearTimeout(Q),Q=setTimeout(function(){I(b)},a(c).data("settings").searchDelay)):D())}function I(b){var d=b+L(),f=aa.get(d);if(f)a.isFunction(a(c).data("settings").onCachedResult)&&(f=a(c).data("settings").onCachedResult.call(S,f)),E(b,f);else if(a(c).data("settings").url){var f=L(),g={data:{}};-1<f.indexOf("?")?(f=f.split("?"),g.url=f[0],f=f[1].split("&"),a.each(f,
function(a,b){var c=b.split("=");g.data[c[0]]=c[1]})):g.url=f;g.data[a(c).data("settings").queryParam]=b;g.type=a(c).data("settings").method;g.dataType=a(c).data("settings").contentType;a(c).data("settings").crossDomain&&(g.dataType="jsonp");a(c).data("settings").excludeCurrent&&(f=a(c).data("tokenInputObject").getTokens(),f=a.map(f,function(b){return"function"==typeof a(c).data("settings").tokenValue?a(c).data("settings").tokenValue.call(this,b):b[a(c).data("settings").tokenValue]}),g.data[a(c).data("settings").excludeCurrentParameter]=
f.join(a(c).data("settings").tokenDelimiter));g.success=function(e){aa.add(d,a(c).data("settings").jsonContainer?e[a(c).data("settings").jsonContainer]:e);a.isFunction(a(c).data("settings").onResult)&&(e=a(c).data("settings").onResult.call(S,e));M.val()===b&&E(b,a(c).data("settings").jsonContainer?e[a(c).data("settings").jsonContainer]:e)};if(e.onSend)e.onSend(g);a.ajax(g)}else a(c).data("settings").local_data&&(f=a.grep(a(c).data("settings").local_data,function(d){return-1<d[a(c).data("settings").propertyToSearch].toLowerCase().indexOf(b.toLowerCase())}),
aa.add(d,f),a.isFunction(a(c).data("settings").onResult)&&(f=a(c).data("settings").onResult.call(S,f)),E(b,f))}function L(){var b=a(c).data("settings");return"function"==typeof b.url?b.url.call(b):b.url}function U(a){setTimeout(function(){a.focus()},50)}"string"===typeof d||"function"===typeof d?(a(c).data("settings").url=d,d=L(),void 0===a(c).data("settings").crossDomain&&"string"===typeof d&&(-1===d.indexOf("://")?a(c).data("settings").crossDomain=!1:a(c).data("settings").crossDomain=location.href.split(/\/+/g)[1]!==
d.split(/\/+/g)[1])):"object"===typeof d&&(a(c).data("settings").local_data=d);a(c).data("settings").classes?a(c).data("settings").classes=a.extend({},f,a(c).data("settings").classes):a(c).data("settings").theme?(a(c).data("settings").classes={},a.each(f,function(b,d){a(c).data("settings").classes[b]=d+"-"+a(c).data("settings").theme})):a(c).data("settings").classes=f;var N=[],P=0,aa=new a.TokenList.Cache,Q,J,M=a('<input type="text" autocomplete="off" autocapitalize="off"/>').css({outline:"none"}).attr("id",
a(c).data("settings").idPrefix+c.id).focus(function(){if(a(c).data("settings").disabled)return!1;null!==a(c).data("settings").tokenLimit&&a(c).data("settings").tokenLimit===P||!a(c).data("settings").hintText||(ca.html("<p>"+g(a(c).data("settings").hintText)+"</p>"),C());X.addClass(a(c).data("settings").classes.focused)}).blur(function(){D();a(c).data("settings").allowFreeTagging&&r();a(this).val("");X.removeClass(a(c).data("settings").classes.focused)}).bind("keyup keydown blur update",q).keydown(function(b){var d,
e;switch(b.keyCode){case 37:case 39:case 38:case 40:0===this.value.length?(d=ea.prev(),e=ea.next(),d.length&&d.get(0)===O||e.length&&e.get(0)===O?37===b.keyCode||38===b.keyCode?u(a(O),0):u(a(O),1):37!==b.keyCode&&38!==b.keyCode||!d.length?39!==b.keyCode&&40!==b.keyCode||!e.length||t(a(e.get(0))):t(a(d.get(0)))):(d=null,40===b.keyCode||39===b.keyCode?(d=a(ca).find("li").first(),H&&(d=a(H).next())):(d=a(ca).find("li").last(),H&&(d=a(H).prev())),G(d));break;case 8:d=ea.prev();if(0===this.value.length)return O?
(B(a(O)),S.change()):d.length&&t(a(d.get(0))),!1;1===a(this).val().length?D():setTimeout(function(){y()},5);break;case 9:case 13:case 108:case 188:if(H)x(a(H).data("tokeninput")),S.change();else{if(a(c).data("settings").allowFreeTagging){if(a(c).data("settings").allowTabOut&&""===a(this).val())return!0;r()}else if(a(this).val(""),a(c).data("settings").allowTabOut)return!0;b.stopPropagation();b.preventDefault()}return!1;case 27:return D(),!0;default:String.fromCharCode(b.which)&&setTimeout(function(){y()},
5)}});e.placeholder&&M.attr("placeholder",e.placeholder);var S=a(c).hide().val("").focus(function(){U(M)}).blur(function(){M.blur();return S}),O=null,V=0,H=null,X=a("<ul />").addClass(a(c).data("settings").classes.tokenList).click(function(b){if((b=a(b.target).closest("li"))&&b.get(0)&&a.data(b.get(0),"tokeninput")){var c=O;O&&u(a(O),2);c===b.get(0)?u(b,2):t(b)}else O&&u(a(O),2),U(M)}).mouseover(function(b){(b=a(b.target).closest("li"))&&O!==this&&b.addClass(a(c).data("settings").classes.highlightedToken)}).mouseout(function(b){(b=
a(b.target).closest("li"))&&O!==this&&b.removeClass(a(c).data("settings").classes.highlightedToken)}).insertBefore(S),ea=a("<li />").addClass(a(c).data("settings").classes.inputToken).appendTo(X).append(M),ca=a("<div/>").addClass(a(c).data("settings").classes.dropdown).appendTo("body").hide(),W=a("<tester/>").insertAfter(M).css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:M.css("fontSize"),fontFamily:M.css("fontFamily"),fontWeight:M.css("fontWeight"),letterSpacing:M.css("letterSpacing"),
whiteSpace:"nowrap"});S.val("");d=a(c).data("settings").prePopulate||S.data("pre");a(c).data("settings").processPrePopulate&&a.isFunction(a(c).data("settings").onResult)&&(d=a(c).data("settings").onResult.call(S,d));d&&d.length&&a.each(d,function(a,b){v(b);n();M.attr("placeholder",null)});a(c).data("settings").disabled&&p(!0);"function"===typeof a(c).data("settings").onReady&&a(c).data("settings").onReady.call();this.clear=function(){X.children("li").each(function(){0===a(this).children("input").length&&
B(a(this))})};this.add=function(a){x(a)};this.remove=function(b){X.children("li").each(function(){if(0===a(this).children("input").length){var c=a(this).data("tokeninput"),d=!0,e;for(e in b)if(b[e]!==c[e]){d=!1;break}d&&B(a(this))}})};this.getTokens=function(){return N};this.toggleDisabled=function(a){p(a)};q();var na=RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g")};a.TokenList.Cache=function(b){var c,d={},e=0,f;c=a.extend({max_size:500},b);f=function(){d={};e=0};this.add=function(a,b){e>c.max_size&&
f();d[a]||(e+=1);d[a]=b};this.get=function(a){return d[a]}}})(jQuery);/*
 http://creativecommons.org/licenses/by/2.5/
 - Free for use in both personal and commercial projects
 - Attribution requires leaving author name, author link, and the license info intact
*/
(function(){var a=jQuery,b=function(){function a(){this.fadeDuration=500;this.fitImagesInViewport=!0;this.resizeDuration=700;this.positionFromTop=50;this.wrapAround=this.alwaysShowNavOnTouchDevices=this.showImageNumberLabel=!1}a.prototype.albumLabel=function(a,b){return"Image "+a+" of "+b};return a}(),c=function(){function b(a){this.options=a;this.album=[];this.currentImageIndex=void 0;this.init()}b.prototype.init=function(){this.enable();this.build()};b.prototype.enable=function(){var b=this;a("body").on("click",
"a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(c){b.start(a(c.currentTarget));return!1})};b.prototype.build=function(){var b=this;a("<div id='lightboxOverlay' class='lightboxOverlay'></div><div id='lightbox' class='lightbox'><div class='lb-outerContainer'><div class='lb-container'><img class='lb-image' src='' /><div class='lb-nav'><a class='lb-prev' href='' ></a><a class='lb-next' href='' ></a></div><div class='lb-loader'><a class='lb-cancel'></a></div></div></div><div class='lb-dataContainer'><div class='lb-data'><div class='lb-details'><span class='lb-caption'></span><span class='lb-number'></span></div><div class='lb-closeContainer'><a class='lb-close'></a></div><div class='lb-saveContainer'><a href='/images/lightbox2/image-2.jpg' class='lb-save'></a></div></div></div></div>").appendTo(a("body"));
this.$lightbox=a("#lightbox");this.$overlay=a("#lightboxOverlay");this.$outerContainer=this.$lightbox.find(".lb-outerContainer");this.$container=this.$lightbox.find(".lb-container");this.containerTopPadding=parseInt(this.$container.css("padding-top"),10);this.containerRightPadding=parseInt(this.$container.css("padding-right"),10);this.containerBottomPadding=parseInt(this.$container.css("padding-bottom"),10);this.containerLeftPadding=parseInt(this.$container.css("padding-left"),10);this.$overlay.hide().on("click",
function(){b.end();return!1});this.$lightbox.hide().on("click",function(c){"lightbox"===a(c.target).attr("id")&&b.end();return!1});this.$outerContainer.on("click",function(c){"lightbox"===a(c.target).attr("id")&&b.end();return!1});this.$lightbox.find(".lb-prev").on("click",function(){0===b.currentImageIndex?b.changeImage(b.album.length-1):b.changeImage(b.currentImageIndex-1);return!1});this.$lightbox.find(".lb-next").on("click",function(){b.currentImageIndex===b.album.length-1?b.changeImage(0):b.changeImage(b.currentImageIndex+
1);return!1});this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){b.end();return!1});this.$lightbox.find(".lb-loader, .lb-save").on("click",function(){window.open(a(".lb-image").attr("src"));return!1})};b.prototype.start=function(b){function c(a){f.album.push({link:a.attr("href"),title:a.attr("data-title")||a.attr("title")})}var f=this,h=a(window);h.on("resize",a.proxy(this.sizeOverlay,this));a("select, object, embed").css({visibility:"hidden"});this.sizeOverlay();this.album=[];var k=
0,m=b.attr("data-lightbox");if(m)for(var m=a(b.prop("tagName")+'[data-lightbox="'+m+'"]'),l=0;l<m.length;l=++l)c(a(m[l])),m[l]===b[0]&&(k=l);else if("lightbox"===b.attr("rel"))c(b);else for(m=a(b.prop("tagName")+'[rel="'+b.attr("rel")+'"]'),l=0;l<m.length;l=++l)c(a(m[l])),m[l]===b[0]&&(k=l);b=h.scrollTop()+this.options.positionFromTop;h=h.scrollLeft();this.$lightbox.css({top:b+"px",left:h+"px"}).fadeIn(this.options.fadeDuration);this.changeImage(k)};b.prototype.changeImage=function(b){var c=this;
this.disableKeyboardNav();var f=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration);a(".lb-loader").fadeIn("slow");this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide();this.$outerContainer.addClass("animating");var h=new Image;h.onload=function(){var k,m;f.attr("src",c.album[b].link);a(h);f.width(h.width);f.height(h.height);c.options.fitImagesInViewport&&(k=a(window).width(),m=a(window).height(),k=k-c.containerLeftPadding-
c.containerRightPadding-20,m=m-c.containerTopPadding-c.containerBottomPadding-120,h.width>k||h.height>m)&&(h.width/k>h.height/m?(m=k,k=parseInt(h.height/(h.width/m),10)):(k=m,m=parseInt(h.width/(h.height/k),10)),f.width(m),f.height(k));c.sizeContainer(f.width(),f.height())};h.src=this.album[b].link;this.currentImageIndex=b};b.prototype.sizeOverlay=function(){this.$overlay.width(a(window).width()).height(a(document).height())};b.prototype.sizeContainer=function(a,b){function c(){f.$lightbox.find(".lb-dataContainer").width(l);
f.$lightbox.find(".lb-prevLink").height(p);f.$lightbox.find(".lb-nextLink").height(p);f.showImage()}var f=this,k=this.$outerContainer.outerWidth(),m=this.$outerContainer.outerHeight(),l=a+this.containerLeftPadding+this.containerRightPadding,p=b+this.containerTopPadding+this.containerBottomPadding;k!==l||m!==p?this.$outerContainer.animate({width:l,height:p},this.options.resizeDuration,"swing",function(){c()}):c()};b.prototype.showImage=function(){this.$lightbox.find(".lb-loader").hide();this.$lightbox.find(".lb-image").fadeIn("slow");
this.updateNav();this.updateDetails();this.preloadNeighboringImages();this.enableKeyboardNav()};b.prototype.updateNav=function(){var a=!1;try{document.createEvent("TouchEvent"),a=this.options.alwaysShowNavOnTouchDevices?!0:!1}catch(b){}this.$lightbox.find(".lb-nav").show();1<this.album.length&&(this.options.wrapAround?(a&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(0<this.currentImageIndex&&(this.$lightbox.find(".lb-prev").show(),
a&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),a&&this.$lightbox.find(".lb-next").css("opacity","1"))))};b.prototype.updateDetails=function(){var b=this;if("undefined"!==typeof this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title)this.$lightbox.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast").find("a").on("click",function(b){location.href=
a(this).attr("href")});1<this.album.length&&this.options.showImageNumberLabel?this.$lightbox.find(".lb-number").text(this.options.albumLabel(this.currentImageIndex+1,this.album.length)).fadeIn("fast"):this.$lightbox.find(".lb-number").hide();this.$outerContainer.removeClass("animating");this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return b.sizeOverlay()})};b.prototype.preloadNeighboringImages=function(){this.album.length>this.currentImageIndex+1&&((new Image).src=
this.album[this.currentImageIndex+1].link);0<this.currentImageIndex&&((new Image).src=this.album[this.currentImageIndex-1].link)};b.prototype.enableKeyboardNav=function(){a(document).on("keyup.keyboard",a.proxy(this.keyboardAction,this))};b.prototype.disableKeyboardNav=function(){a(document).off(".keyboard")};b.prototype.keyboardAction=function(a){a=a.keyCode;var b=String.fromCharCode(a).toLowerCase();if(27===a||b.match(/x|o|c/))this.end();else if("p"===b||37===a)0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-
1):this.options.wrapAround&&1<this.album.length&&this.changeImage(this.album.length-1);else if("n"===b||39===a)this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&1<this.album.length&&this.changeImage(0)};b.prototype.end=function(){this.disableKeyboardNav();a(window).off("resize",this.sizeOverlay);this.$lightbox.fadeOut(this.options.fadeDuration);this.$overlay.fadeOut(this.options.fadeDuration);a("select, object, embed").css({visibility:"visible"})};
return b}();a(function(){var a=new b;new c(a)})}).call(this);jQ(document).ready(function(){jQ(".page-numbers").popover({html:!0,trigger:"manual",content:function(){return jQ(".page-numbers-content").html()}}).click(function(a){jQ(this).popover("toggle");a.stopPropagation()});jQ("body").on("click",function(a){jQ('[data-toggle="popover"]').each(function(){jQ(this).is(a.target)||0!==jQ(this).has(a.target).length||0!==jQ(".popover").has(a.target).length||jQ(this).popover("hide")})});jQ(".open-popover").popover();jQ(".open-popover").on("click",function(a){jQ(".open-popover").not(this).popover("hide")});
jQ(document).on("click","#goToPageNumber",function(){var a=jQ(this).closest("div").prev().find("input.page_number");goto_page(a)});jQ(document).on("change keyup",".page_number",function(a){var b=jQ(this).val().replace(/[^0-9]/g,"");jQ(this).val(b);13==a.keyCode&&goto_page(jQ(this))});jQ("#del_mem_btn").on("click",function(){totalChecked=getTotalChecked();var a="";if(0==totalChecked)return alert("No members have been selected."),!1;1<totalChecked&&(a="s");if(confirm("Delete "+totalChecked+" member"+
a+" you have selected?"))jQ("#massaction").val("delete_mem"),ajaxSaveForm(jQ("#memberListFrm"),function(a){if(0==a.passwordValidated)jQ("#pwd_error").hide(),jQ("#confirm_pwd").modal("show"),jQ("#confirm_submit").attr("data-confirm","delete_account");else if(a.passwordValidated||a.success)jQ("#confirm_pwd").modal("hide"),window.location.href="/register/members"});else return!1});0<jQ("#member_list").length&&activateCheckboxes(document.posts.delete_member,-1)});
function goto_page(a){if(a[0].checkValidity()){var b=jQ("#goto_page_link").val(),b=b.replace("temp_trail",a.val()*jQ("#setting_per_page").val());window.open(b,"_self")}else a.val(""),b=a.attr("max"),showFieldError(a,"Please enter a number less than equal to "+b)}
function check_MemberAction(){totalChecked=getTotalChecked();if(""==document.posts.massaction.value)return!1;if(0==totalChecked)return alert("No members have been selected."),document.posts.massaction.selectedIndex=0,!1;if("approve_mem"==document.posts.massaction.value&&!confirm("Approve "+totalChecked+" member(s) you have selected?")||"delete_mem"==document.posts.massaction.value&&!confirm("Delete "+totalChecked+" member(s) you have selected?")||"decline_mem"==document.posts.massaction.value&&!confirm("Delete "+
totalChecked+" member(s) you have selected? Note: An email will also be sent to the member to notify them that their application has been declined."))return document.posts.massaction.selectedIndex=0,!1;document.posts.submit()};jQuery(document).ready(function(){prettyPrint()});window.PR_SHOULD_USE_CONTINUATION=!0;
(function(){function a(a){function b(a){var c=a.charCodeAt(0);if(92!==c)return c;var d=a.charAt(1);return(c=n[d])?c:"0"<=d&&"7">=d?parseInt(a.substring(1),8):"u"===d||"x"===d?parseInt(a.substring(2),16):a.charCodeAt(1)}function c(a){if(32>a)return(16>a?"\\x0":"\\x")+a.toString(16);a=String.fromCharCode(a);if("\\"===a||"-"===a||"["===a||"]"===a)a="\\"+a;return a}function d(a){var e=a.substring(1,a.length-1).match(RegExp("\\\\u[0-9A-Fa-f]{4}|\\\\x[0-9A-Fa-f]{2}|\\\\[0-3][0-7]{0,2}|\\\\[0-7]{1,2}|\\\\[\\s\\S]|-|[^-\\\\]","g"));
a=[];for(var f=[],g="^"===e[0],h=g?1:0,k=e.length;h<k;++h){var m=e[h];if(/\\[bdsw]/i.test(m))a.push(m);else{var m=b(m),l;h+2<k&&"-"===e[h+1]?(l=b(e[h+2]),h+=2):l=m;f.push([m,l]);65>l||122<m||(65>l||90<m||f.push([Math.max(65,m)|32,Math.min(l,90)|32]),97>l||122<m||f.push([Math.max(97,m)&-33,Math.min(l,122)&-33]))}}f.sort(function(a,b){return a[0]-b[0]||b[1]-a[1]});e=[];m=[NaN,NaN];for(h=0;h<f.length;++h)k=f[h],k[0]<=m[1]+1?m[1]=Math.max(m[1],k[1]):e.push(m=k);f=["["];g&&f.push("^");f.push.apply(f,a);
for(h=0;h<e.length;++h)k=e[h],f.push(c(k[0])),k[1]>k[0]&&(k[1]+1>k[0]&&f.push("-"),f.push(c(k[1])));f.push("]");return f.join("")}function e(a){for(var b=a.source.match(RegExp("(?:\\[(?:[^\\x5C\\x5D]|\\\\[\\s\\S])*\\]|\\\\u[A-Fa-f0-9]{4}|\\\\x[A-Fa-f0-9]{2}|\\\\[0-9]+|\\\\[^ux0-9]|\\(\\?[:!=]|[\\(\\)\\^]|[^\\x5B\\x5C\\(\\)\\^]+)","g")),c=b.length,h=[],k=0,m=0;k<c;++k){var l=b[k];"("===l?++m:"\\"===l.charAt(0)&&(l=+l.substring(1))&&l<=m&&(h[l]=-1)}for(k=1;k<h.length;++k)-1===h[k]&&(h[k]=++f);for(m=
k=0;k<c;++k)l=b[k],"("===l?(++m,void 0===h[m]&&(b[k]="(?:")):"\\"===l.charAt(0)&&(l=+l.substring(1))&&l<=m&&(b[k]="\\"+h[m]);for(m=k=0;k<c;++k)"^"===b[k]&&"^"!==b[k+1]&&(b[k]="");if(a.ignoreCase&&g)for(k=0;k<c;++k)l=b[k],a=l.charAt(0),2<=l.length&&"["===a?b[k]=d(l):"\\"!==a&&(b[k]=l.replace(/[a-zA-Z]/g,function(a){a=a.charCodeAt(0);return"["+String.fromCharCode(a&-33,a|32)+"]"}));return b.join("")}for(var f=0,g=!1,h=!1,k=0,m=a.length;k<m;++k){var l=a[k];if(l.ignoreCase)h=!0;else if(/[a-z]/i.test(l.source.replace(/\\u[0-9a-f]{4}|\\x[0-9a-f]{2}|\\[^ux]/gi,
""))){g=!0;h=!1;break}}for(var n={b:8,t:9,n:10,v:11,f:12,r:13},p=[],k=0,m=a.length;k<m;++k){l=a[k];if(l.global||l.multiline)throw Error(""+l);p.push("(?:"+e(l)+")")}return new RegExp(p.join("|"),h?"gi":"g")}function b(a){function b(a){switch(a.nodeType){case 1:if(c.test(a.className))break;for(var h=a.firstChild;h;h=h.nextSibling)b(h);h=a.nodeName;if("BR"===h||"LI"===h)d[g]="\n",f[g<<1]=e++,f[g++<<1|1]=a;break;case 3:case 4:h=a.nodeValue,h.length&&(h=k?h.replace(/\r\n?/g,"\n"):h.replace(/[ \t\r\n]+/g,
" "),d[g]=h,f[g<<1]=e,e+=h.length,f[g++<<1|1]=a)}}var c=/(?:^|\s)nocode(?:\s|$)/,d=[],e=0,f=[],g=0,h;a.currentStyle?h=a.currentStyle.whiteSpace:window.getComputedStyle&&(h=document.defaultView.getComputedStyle(a,null).getPropertyValue("white-space"));var k=h&&"pre"===h.substring(0,3);b(a);return{sourceCode:d.join("").replace(/\n$/,""),spans:f}}function c(a,b,c,d){b&&(a={sourceCode:b,basePos:a},c(a),d.push.apply(d,a.decorations))}function f(b,d){var e={},f;(function(){for(var c=b.concat(d),g=[],h=
{},k=0,m=c.length;k<m;++k){var l=c[k],n=l[3];if(n)for(var p=n.length;0<=--p;)e[n.charAt(p)]=l;l=l[1];n=""+l;h.hasOwnProperty(n)||(g.push(l),h[n]=null)}g.push(/[\0-\uffff]/);f=a(g)})();var g=d.length,k=function(a){for(var b=a.basePos,m=[b,"pln"],l=0,A=a.sourceCode.match(f)||[],n={},p=0,u=A.length;p<u;++p){var x=A[p],t=n[x],q=void 0,B;if("string"===typeof t)B=!1;else{var r=e[x.charAt(0)];if(r)q=x.match(r[1]),t=r[0];else{for(B=0;B<g;++B)if(r=d[B],q=x.match(r[1])){t=r[0];break}q||(t="pln")}!(B=5<=t.length&&
"lang-"===t.substring(0,5))||q&&"string"===typeof q[1]||(B=!1,t="src");B||(n[x]=t)}r=l;l+=x.length;if(B){B=q[1];var v=x.indexOf(B),H=v+B.length;q[2]&&(H=x.length-q[2].length,v=H-B.length);t=t.substring(5);c(b+r,x.substring(0,v),k,m);c(b+r+v,B,h(t,B),m);c(b+r+H,x.substring(H),k,m)}else m.push(b+r,t)}a.decorations=m};return k}function e(a){var b=[],c=[];a.tripleQuotedStrings?b.push(["str",/^(?:\'\'\'(?:[^\'\\]|\\[\s\S]|\'{1,2}(?=[^\']))*(?:\'\'\'|$)|\"\"\"(?:[^\"\\]|\\[\s\S]|\"{1,2}(?=[^\"]))*(?:\"\"\"|$)|\'(?:[^\\\']|\\[\s\S])*(?:\'|$)|\"(?:[^\\\"]|\\[\s\S])*(?:\"|$))/,
null,"'\""]):a.multiLineStrings?b.push(["str",/^(?:\'(?:[^\\\']|\\[\s\S])*(?:\'|$)|\"(?:[^\\\"]|\\[\s\S])*(?:\"|$)|\`(?:[^\\\`]|\\[\s\S])*(?:\`|$))/,null,"'\"`"]):b.push(["str",/^(?:\'(?:[^\\\'\r\n]|\\.)*(?:\'|$)|\"(?:[^\\\"\r\n]|\\.)*(?:\"|$))/,null,"\"'"]);a.verbatimStrings&&c.push(["str",/^@\"(?:[^\"]|\"\")*(?:\"|$)/,null]);var d=a.hashComments;d&&(a.cStyleComments?(1<d?b.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,null,"#"]):b.push(["com",/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\b|[^\r\n]*)/,
null,"#"]),c.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h|[a-z]\w*)>/,null])):b.push(["com",/^#[^\r\n]*/,null,"#"]));a.cStyleComments&&(c.push(["com",/^\/\/[^\r\n]*/,null]),c.push(["com",/^\/\*[\s\S]*?(?:\*\/|$)/,null]));a.regexLiterals&&c.push(["lang-regex",/^(?:^^\.?|[+-]|\!|\!=|\!==|\#|\%|\%=|&|&&|&&=|&=|\(|\*|\*=|\+=|\,|\-=|\->|\/|\/=|:|::|\;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\?|\@|\[|\^|\^=|\^\^|\^\^=|\{|\||\|=|\|\||\|\|=|\~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\s*(\/(?=[^/*])(?:[^/\x5B\x5C]|\x5C[\s\S]|\x5B(?:[^\x5C\x5D]|\x5C[\s\S])*(?:\x5D|$))+\/)/]);
(d=a.types)&&c.push(["typ",d]);a=(""+a.keywords).replace(/^ | $/g,"");a.length&&c.push(["kwd",new RegExp("^(?:"+a.replace(/[\s,]+/g,"|")+")\\b"),null]);b.push(["pln",/^\s+/,null," \r\n\t\u00a0"]);c.push(["lit",/^@[a-z_$][a-z_$@0-9]*/i,null],["typ",/^(?:[@_]?[A-Z]+[a-z][A-Za-z_$@0-9]*|\w+_t\b)/,null],["pln",/^[a-z_$][a-z_$@0-9]*/i,null],["lit",/^(?:0x[a-f0-9]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+\-]?\d+)?)[a-z]*/i,null,"0123456789"],["pln",/^\\[\s\S]?/,null],["pun",/^.[^\s\w\.$@\'\"\`\/\#\\]*/,
null]);return f(b,c)}function d(a,b){function c(a){switch(a.nodeType){case 1:if(e.test(a.className))break;if("BR"===a.nodeName)d(a),a.parentNode&&a.parentNode.removeChild(a);else for(a=a.firstChild;a;a=a.nextSibling)c(a);break;case 3:case 4:if(k){var b=a.nodeValue,h=b.match(f);if(h){var m=b.substring(0,h.index);a.nodeValue=m;(b=b.substring(h.index+h[0].length))&&a.parentNode.insertBefore(g.createTextNode(b),a.nextSibling);d(a);m||a.parentNode.removeChild(a)}}}}function d(a){function b(a,c){var d=
c?a.cloneNode(!1):a,e=a.parentNode;if(e){var e=b(e,1),f=a.nextSibling;e.appendChild(d);for(var g=f;g;g=f)f=g.nextSibling,e.appendChild(g)}return d}for(;!a.nextSibling;)if(a=a.parentNode,!a)return;a=b(a.nextSibling,0);for(var c;(c=a.parentNode)&&1===c.nodeType;)a=c;m.push(a)}var e=/(?:^|\s)nocode(?:\s|$)/,f=/\r\n?|\n/,g=a.ownerDocument,h;a.currentStyle?h=a.currentStyle.whiteSpace:window.getComputedStyle&&(h=g.defaultView.getComputedStyle(a,null).getPropertyValue("white-space"));var k=h&&"pre"===h.substring(0,
3);for(h=g.createElement("LI");a.firstChild;)h.appendChild(a.firstChild);for(var m=[h],l=0;l<m.length;++l)c(m[l]);b===(b|0)&&m[0].setAttribute("value",b);var n=g.createElement("OL");n.className="linenums";for(var p=Math.max(0,b-1|0)||0,l=0,u=m.length;l<u;++l)h=m[l],h.className="L"+(l+p)%10,h.firstChild||h.appendChild(g.createTextNode("\u00a0")),n.appendChild(h);a.appendChild(n)}function g(a,b){for(var c=b.length;0<=--c;){var d=b[c];B.hasOwnProperty(d)?window.console&&console.warn("cannot override language handler %s",
d):B[d]=a}}function h(a,b){a&&B.hasOwnProperty(a)||(a=/^\s*</.test(b)?"default-markup":"default-code");return B[a]}function k(a){var c=a.langExtension;try{var d=b(a.sourceNode),e=d.sourceCode;a.sourceCode=e;a.spans=d.spans;a.basePos=0;h(c,e)(a);var f=/\bMSIE\b/.test(navigator.userAgent),c=/\n/g,g=a.sourceCode,k=g.length,d=0,m=a.spans,l=m.length,e=0,n=a.decorations,p=n.length;a=0;n[p]=k;var u,x;for(x=u=0;x<p;)n[x]!==n[x+2]?(n[u++]=n[x++],n[u++]=n[x++]):x+=2;p=u;for(x=u=0;x<p;){for(var t=n[x],B=n[x+
1],q=x+2;q+2<=p&&n[q+1]===B;)q+=2;n[u++]=t;n[u++]=B;x=q}for(n.length=u;e<l;){var r=m[e+2]||k,v=n[a+2]||k,q=Math.min(r,v),O=m[e+1],V;if(1!==O.nodeType&&(V=g.substring(d,q))){f&&(V=V.replace(c,"\r"));O.nodeValue=V;var H=O.ownerDocument,X=H.createElement("SPAN");X.className=n[a+1];var ea=O.parentNode;ea.replaceChild(X,O);X.appendChild(O);d<r&&(m[e+1]=O=H.createTextNode(g.substring(q,r)),ea.insertBefore(O,X.nextSibling))}d=q;d>=r&&(e+=2);d>=v&&(a+=2)}}catch(ca){"console"in window&&console.log(ca&&ca.stack?
ca.stack:ca)}}var m=["break,continue,do,else,for,if,return,while"],l=[[m,"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],p=[l,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],
n=[l,"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient"],q=[n,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var"],l=[l,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],r=
[m,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],v=[m,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],m=[m,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],x=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)/,
t=/\S/,u=e({keywords:[p,q,l,"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END"+r,v,m],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),B={};g(u,["default-code"]);g(f([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\s\S]*?(?:-\->|$)/],["lang-",/^<\?([\s\S]+?)(?:\?>|$)/],["lang-",/^<%([\s\S]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",
/^<xmp\b[^>]*>([\s\S]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\s\S]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\s\S]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),"default-markup htm html mxml xhtml xml xsl".split(" "));g(f([["pln",/^[\s]+/,null," \t\r\n"],["atv",/^(?:\"[^\"]*\"?|\'[^\']*\'?)/,null,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w.:-]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^>\'\"\s]*(?:[^>\'\"\s\/]|\/(?=\s)))/],
["pun",/^[=<>\/]+/],["lang-js",/^on\w+\s*=\s*\"([^\"]+)\"/i],["lang-js",/^on\w+\s*=\s*\'([^\']+)\'/i],["lang-js",/^on\w+\s*=\s*([^\"\'>\s]+)/i],["lang-css",/^style\s*=\s*\"([^\"]+)\"/i],["lang-css",/^style\s*=\s*\'([^\']+)\'/i],["lang-css",/^style\s*=\s*([^\"\'>\s]+)/i]]),["in.tag"]);g(f([],[["atv",/^[\s\S]+/]]),["uq.val"]);g(e({keywords:p,hashComments:!0,cStyleComments:!0,types:x}),"c cc cpp cxx cyc m".split(" "));g(e({keywords:"null,true,false"}),["json"]);g(e({keywords:q,hashComments:!0,cStyleComments:!0,
verbatimStrings:!0,types:x}),["cs"]);g(e({keywords:n,cStyleComments:!0}),["java"]);g(e({keywords:m,hashComments:!0,multiLineStrings:!0}),["bsh","csh","sh"]);g(e({keywords:r,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py"]);g(e({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["perl",
"pl","pm"]);g(e({keywords:v,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb"]);g(e({keywords:l,cStyleComments:!0,regexLiterals:!0}),["js"]);g(e({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]);g(f([],[["str",/^[\s\S]+/]]),["regex"]);window.prettyPrintOne=function(a,
b,c){var e=document.createElement("PRE");e.innerHTML=a;c&&d(e,c);k({langExtension:b,numberLines:c,sourceNode:e});return e.innerHTML};window.prettyPrint=function(a){function b(){for(var c=window.PR_SHOULD_USE_CONTINUATION?m.now()+250:Infinity;l<e.length&&m.now()<c;l++){var f=e[l],g=f.className;if(0<=g.indexOf("prettyprint")){var g=g.match(p),h,u;if(u=!g){h=f;u=void 0;for(var x=h.firstChild;x;x=x.nextSibling){var C=x.nodeType;u=1===C?u?h:x:3===C?t.test(x.nodeValue)?h:u:u}u=h=u===h?void 0:u}u&&"CODE"===
h.tagName&&(g=h.className.match(p));g&&(g=g[1]);u=!1;for(x=f.parentNode;x;x=x.parentNode)if(("pre"===x.tagName||"code"===x.tagName||"xmp"===x.tagName)&&x.className&&0<=x.className.indexOf("prettyprint")){u=!0;break}u||((u=(u=f.className.match(/\blinenums\b(?::(\d+))?/))?u[1]&&u[1].length?+u[1]:!0:!1)&&d(f,u),n={langExtension:g,sourceNode:f,numberLines:u},k(n))}}l<e.length?setTimeout(b,250):a&&a()}for(var c=[document.getElementsByTagName("pre"),document.getElementsByTagName("code"),document.getElementsByTagName("xmp")],
e=[],f=0;f<c.length;++f)for(var g=0,h=c[f].length;g<h;++g)e.push(c[f][g]);var c=null,m=Date;m.now||(m={now:function(){return+new Date}});var l=0,n,p=/\blang(?:uage)?-([\w.]+)(?!\S)/;b()};window.PR={createSimpleLexer:f,registerLangHandler:g,sourceDecorator:e,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ"}})();jQ(document).ready(function(){var a=jQ("#recipient_id").val();hidePanel();jQ(window).resize(function(){hidePanel()});if(0<jQ("#unread_indicator").length){var b=jQ(".scrollable-area"),a=jQ("#unread_indicator"),a=parseInt(a.offset().top)-parseInt(b.offset().top)+parseInt(b.scrollTop());b.scrollTop(a)}else{if(a)for(b=[],recipient_array=a.split(";"),a=0;a<recipient_array.length;a++)b.push({user:recipient_array[a]});jQ("#recipient_id").tokenInput("/live_member_search?uid="+global_hash.uid+"&format=json",
{theme:"facebook",prePopulate:b,tokenLimit:25,processPrePopulate:!0,queryParam:"search",propertyToSearch:"user",tokenDelimiter:";",tokenValue:"user",preventDuplicates:!0});if(0<jQ("#pm_mass_action").length){var c=0;jQ('[name= "conversation_users_id"]').click(function(){0<jQ(this).attr("data-left_time")&&c++});jQ("#pm_mass_action").change(function(){setTimeout(function(){totalChecked=getTotalChecked();var a="conversation";1<totalChecked&&(a+="s");if(""==document.posts.massaction.value)return!1;if(0==
totalChecked)return alert("No conversations have been selected."),document.posts.massaction.selectedIndex=0,!1;if("delete_conversation"==document.posts.massaction.value&&!confirm("Delete "+totalChecked+" "+a+" you have selected?"))return document.posts.massaction.selectedIndex=0,!1;if("leave_conversation"==document.posts.massaction.value){if(!confirm("Leave "+totalChecked+" "+a+" you have selected?"))return!1;if(c==totalChecked)return alert("You have already left all of the selected conversations."),
!1}document.posts.submit()},100)})}jQ(document).on("click","#load_more_pvt_msg",function(){jQ("#load_more_pvt_msg").hide();jQ("#pmsg_more_loading").removeClass("hidden");jQ("#prev_loading").removeClass("hidden");jQ.ajax({type:"POST",url:jQ("#load_more_pvt_msg").attr("href"),dataType:"html",data:"load_more_messages=1",success:function(a){jQ("#messages_list").length&&jQ("#messages_list").prepend(a);jQ("#prev_loading").addClass("hidden");jQ("#pmsg_more_loading").addClass("hidden");jQ("#load_more_pvt_msg").show();
if(1<ajax_pagination_data.current_page){a=jQ("#load_more_pvt_msg").attr("href");var b=ajax_pagination_data.trail_prev-ajax_pagination_data.perpage;jQ("#load_more_pvt_msg").attr("href",a.replace(/&?trail=\d+/,"&trail="+b))}else jQ("#load_more_msg").hide(),ajax_pagination_data.stop="1";dateMomentjs()},error:function(a,b,c){alert("An error occurred while processing your request.\n"+b+": "+c)}});return!1});jQ("#mark_all_pmread").click(function(){jQ.ajax({type:"POST",url:"/pm",data:{action:"mark_all_pmread",
ajax_req:"1"},success:function(a){a.success&&(jQ("#pmsg_inbox_listing li").removeClass("unread"),jQ("#pmsg_inbox_listing li .badge").remove(),jQ(".unread-indicator").remove(),showAjaxMsg(a.msg))}})});jQ("#delete_curr_conversation").click(function(){if(!confirm("Delete the current conversation?"))return!1;var a=jQ(this).attr("data-conversation_users_id"),b=jQ(this).attr("data-conversation_id");jQ.ajax({type:"POST",url:"/pm",data:{massaction:"delete_conversation",ajax_req:"1",conversation_users_id:a,
conversation_id:b},success:function(b){if(b.Success){var c,d;showAjaxMsg("Deleted...");0<jQ("li#pmsg_list_"+a).next().length?(c=jQ("li#pmsg_list_"+a).next().attr("data-conv_user_id"),d=jQ("li#pmsg_list_"+a).next().attr("data-conversation_id")):0<jQ("li#pmsg_list_"+a).prev().length&&(c=jQ("li#pmsg_list_"+a).prev().attr("data-conv_user_id"),d=jQ("li#pmsg_list_"+a).prev().attr("data-conversation_id"));jQ("#pmsg_list_"+a).remove();c?(window.location.hash&&(window.location.hash="#conv_user_id="+c),jQ("#delete_curr_conversation").attr("data-conversation_users_id",
c),jQ("#delete_curr_conversation").attr("data-conversation_id",d),on_hash_change(c)):window.location.href="/pm/inbox"}}})});0<jQ("#messages-menu").length&&jQ(".perform_massaction_conversation").click(function(){var a=jQ(this).attr("data-massaction");totalChecked=getTotalChecked();var b="conversation";1<totalChecked&&(b+="s");if("delete_conversation"==a&&!confirm("Delete "+totalChecked+" "+b+" you have selected?"))return!1;jQ("#massaction").val(a);if("leave_conversation"==a)if(confirm("Leave "+totalChecked+
" "+b+" you have selected?"))ajaxSaveForm(jQ("#pmsg_list"),function(a){var b=jQ("#leave_conversation_notification").html();jQ("#leave_conversation_notification time").attr("datetime",a.msg_time);var b=b.replace(/msg_time/g,a.msg_time),c=0;jQ.each(a.pmids,function(a,d){jQ("#pmsg_list").find("input[type='checkbox']").attr("checked",!1);jQ("#show_pmsg_"+d).attr("data-current_user_active","0");0<jQ("#current_msg_details #display_subject_"+d).length&&(jQ("#pmsg_reply_panel").addClass("hidden"),c=1);jQ("#show_pmsg_"+
d).append(b)});c&&jQ("#all_conversation_messages").append(b);dateMomentjs();activateCheckboxes(document.getElementsByName("conversation_users_id"),2);jQ("#messages-menu").removeClass("open");showAjaxMsg(1<totalChecked?"You have left the "+totalChecked+" selected conversations.":"You have left the conversation.")});else return!1;else jQ("#pmsg_list").submit()});if(jQ(".ignore-list").length){b=jQ("[id^='ignoreUsers_']");b.length&&activateCheckboxes(b,1);jQ(".entry-checkbox").click(function(){var a=
0,b;jQ("input:checkbox.entry-checkbox").each(function(b,c){jQ(c).is(":checked")&&a++});b=1<a?"s":"";jQ("#unIgnoreCheckbox").html(a+" user"+b+" selected")});var f=jQ(".entry-checkbox"),e=jQ("#"+f.attr("data-related-item"));jQ(f).on("click",function(){f.is(":checked")?e.addClass("open"):e.removeClass("open")});jQ(document).on("click","#unignoreUser",function(){totalChecked=getTotalChecked();if(0==totalChecked)return alert("No user have been selected."),!1;jQ("#unignoreuser").val(1);document.IgnoreUsers.submit()})}0<
jQ("#divFolderList").length&&activateCheckboxes(document.posts.conversation_users_id,2);jQ(document).on("click",".send_new_pmsg, #send_message",function(){jQ(".alert-success").hide();0<jQ("#recipient_name").length&&jQ("#pm_error_msg").html("").hide();var a="",b="";"send_message"==this.id&&(b=jQ(this).attr("data-userid"),a=jQ("#recipient_name_"+b).html(),jQ("#pmessage_modal").html(""));var b=jQ(this).attr("data-wysiwyg"),c=jQ(this).attr("data-toolbarCompatible");showComposeMessageDialog(a,c,b);return!1});
jQ("#private_message_notification").on("click",function(a){jQ("#private_message_dropdown").html()||jQ.ajax({type:"POST",url:"/pm",data:{action:"showPrivateMessageNotification"},success:function(a){jQ("#private_message_dropdown").html(a).removeClass("hidden");dateMomentjs()}})});jQ("[id^='display_subject_']").length&&(b=(b=window.location.hash.slice(1).split("=")[1])?b:pid=jQ("#current_msg_details [id^='display_subject_']").attr("id").replace(/display_subject_/ig,""),on_hash_change(b));var d=!1;jQ(document).on("click",
"#send_pmsg_button, #reply_msg_button",function(){var a="",a=jQ("#PostPrivateMessage [id^='attachmentCotainer_']").attr("id"),b="";a&&(b=a.replace(/attachmentCotainer_/ig,""));jQ("[id^='web_image_display']").show();jQ("[id^='preview_text']").show();jQ("#current_msg #post-body #pms_body_attach_images").html("");var c=jQ(this).attr("data-wysiwyg"),e=jQ(this).attr("data-toolbarCompatible");if(!d){var f="reply_msg_button"==this.id?1:0,p=f?"pmessage_reply":"pmessage_new",n=f?jQ("#pm_reply_error_msg"):
jQ("#pm_error_msg");"undefined"!=typeof tinyMCE&&null!=tinyMCE.activeEditor&&"both"==c&&0<e?(a=tinyMCE.get(p).getContent(),a=cleanEditorHtml(a)):a=jQ("#"+p).val();var a=encodeURIComponent(a),q=f?jQ("#PostPrivateMessageReply").serialize()+"&pm_quick_reply=1":jQ("#PostPrivateMessage").serialize(),q=q+"&pm_ajaxRequest=1&message="+a,r,v;v=jQ("#line_break").length?jQ("#line_break").html():"";jQ.ajax({type:"POST",url:"/pm",data:q,success:function(a){if(a.Error){r=a.Error;r=r.slice(0,-1);var d=r.split(".");
n.html("");jQ.each(d,function(a,b){n.append(b+v)});jQ("#divStatus").hide();n.removeClass("hidden").show()}else a.Success&&(jQ("[id^='web_image_display']").hide(),jQ("[id^='web_image_url']").val(""),jQ("[id^='web_image']").attr("src",""),f?("undefined"!=typeof tinyMCE&&null!=tinyMCE.activeEditor&&"both"==c&&0<e?tinyMCE.get(p).setContent(""):jQ("#"+p).val(""),jQ("#attachment_listreply").html(""),jQ("#attachment_ids, #uncheck_attachment_ids, #attachment_idsreply, #uncheck_attachment_idsreply").val(""),
jQ("#current_msg time").attr("datetime",a.msg_time),a.pmsg_attachments&&(jQ("#list_attachment").html(""),jQ("#list_files").html(""),jQ.each(a.pmsg_attachments,function(b,c){"attach_images"==b?jQ.each(c,function(b,c){var d=jQ("#pms_attach_images").html(),d=d.replace(/attach_id/g,c.fileid),d=d.replace(/filename/g,c.filename),d=d.replace(/filesize/g,c.filesize),d=d.replace(/beta/g,globalbeta),d=d.replace(/uid/g,a.uid);jQ("#list_attachment").append(d)}):"attach_files"==b?jQ.each(c,function(a,b){var c=
jQ("#pms_attach_files").html(),c=c.replace(/attach_id/g,b.fileid),c=c.replace(/filename/g,b.filename),c=c.replace(/filesize/g,b.filesize),c=c.replace(/extension/g,b.extension);jQ("#list_files").append(c)}):"attach_thumbs"==b&&jQ.each(c,function(a,b){var c=jQ("#pms_attach_thumbs").html(),c=c.replace(/attach_id/g,b.fileid),c=c.replace(/filename/g,b.filename),c=c.replace(/filesize/g,b.filesize),c=c.replace(/extension/g,b.extension);jQ("#list_files").append(c)})}),jQ("#current_msg #post-body #pms_body_attach_images").html(jQ("#list_attachment").html()),
jQ("#current_msg #post-body #pms_body_attach_files").html(jQ("#list_files").html())),d=jQ("#current_msg").html(),d=d.replace(/new_message/g,a.msg),d=d.replace(/msg_time/g,a.msg_time),jQ("#all_conversation_messages").append(d),dateMomentjs()):(jQ("#pm_subject").val(""),"undefined"!=typeof tinyMCE&&null!=tinyMCE.activeEditor&&"both"==c&&0<e?tinyMCE.get(p).setContent(""):jQ("#"+p).val(""),jQ(".token").remove(),jQ("#pmessage_modal").modal("hide"),jQ("#attachment_list"+b).html(""),jQ("#imagesInserted"+
b).html(""),showAjaxMsg("Sent...")),n.hide())},complete:function(){d=!1},error:function(a,b,c){alert("An error occurred while processing your request.\n"+b+": "+c)}});d=!0}});jQ(document).on("click","#load_more_pmsg",function(){25>jQ("#pmsg_list_ li").length&&(jQ("#load_more_pmsg").hide(),jQ("#pmsg_more_loading").removeClass("hidden"),jQ.ajax({type:"POST",url:jQ("#load_more_pmsg").attr("href"),dataType:"html",data:"load_more_messages=1",success:function(a){var b;jQ("#pmsg_inbox_listing").length&&
(jQ("#pmsg_inbox_listing").append(a),b="messages");ajax_pagination_data.current_page!=ajax_pagination_data.total_pages&&"0"!=ajax_pagination_data.current_page?(a=jQ("#load_more_pmsg").attr("href"),jQ("#load_more_pmsg").attr("href",a.replace(/&?trail=\d+/,"&trail="+ajax_pagination_data.trail)),jQ("#remaining_message").text(ajax_pagination_data.remaining_posts+" remaining "+b+" of "+ajax_pagination_data.total_posts+" total")):(jQ("#load_more_msg").hide(),ajax_pagination_data.stop="1");jQ("#pmsg_more_loading").addClass("hidden");
jQ("#load_more_pmsg").show();b=jQ("#load_more_msg").clone();jQ("#load_more_msg").remove();jQ("#pmsg_inbox_listing").append(b);ajax_pagination_data.stop||jQ("#load_more_msg").show();isDataAvailable=!0;dateMomentjs()},error:function(a,b,c){alert("An error occurred while processing your request.\n"+b+": "+c)}}));return!1});jQ(document).on("click","#load_prev_pvt_msgs",function(){jQ("#load_prev_pvt_msgs").hide();jQ("#prev_loading").removeClass("hidden");jQ("#all_conversation_messages #load_prev_msgs").hide();
var a=jQ(this).attr("data-conversationid"),b=jQ(this).attr("data-conversation_users_id");jQ.ajax({type:"POST",url:jQ("#load_prev_pvt_msgs").attr("href"),dataType:"html",data:{load_more_messages:"1",conversationid:a},success:function(a){jQ("#all_conversation_messages").length&&jQ("#all_conversation_messages").prepend(a);jQ("#show_pmsg_"+b).prepend(a);jQ("#prev_loading").addClass("hidden");jQ("#load_prev_pvt_msgs").show();if(1<ajax_pagination.current_page){a=jQ("#load_prev_pvt_msgs").attr("href");var c=
ajax_pagination.trail_prev-ajax_pagination.perpage;jQ("#load_prev_pvt_msgs").attr("href",a.replace(/&?trail=\d+/,"&trail="+c))}else jQ("#load_prev_msgs").hide(),ajax_pagination.stop="1";dateMomentjs()},error:function(a,b,c){alert("An error occurred while processing your request.\n"+b+": "+c)}});return!1});if(0<jQ("#message_options").length)jQ("#pmessage_reply").on("focus",function(){jQ(".profile-feed").addClass("visibleEditor");jQ("#message_options").show()});jQ(document).on("click","[id^='pmsg_notification_']",
function(){var a=this.id.replace(/pmsg_notification_/ig,"");jQ("#current_show_id").val(a);jQ("#pm_notification").submit()});jQ(document).on("click","[id^='pmsg_list_']",function(a){var b=this.id.replace(/pmsg_list_/g,"");jQ(this).attr("data-conversation_id");jQ("#conversationid").val();0<jQ("#pm_reply_error_msg, .alert-success").length&&(jQ("#pm_reply_error_msg").html("").hide(),jQ(".alert-success").html("").hide());if("checkbox"!=a.target.type)return"parentIFrame"in window?messageToParent():window.location.hash=
"#conv_user_id="+b,hidePanel(),!1});jQ(window).on("hashchange",function(a){var b=window.location.hash.slice(1).split("=");a=b[1];if(b.length&&""==b[0]||0==b.length)a=jQ(location).attr("href"),a=conversation_user_id(a);a&&(jQ("#all_conversation_messages #load_prev_msgs").show(),on_hash_change(a))});jQ(document).on("click","[id^='pm_notification_list']",function(a){url="/pm/inbox?show_id="+jQ("#"+this.id).attr("data-conversation_id");window.location.href=url;return!1});0<jQ("[id^='pmsg_list_']").length&&
!window.location.hash&&(b=jQ("#all_conversation_messages"),a=jQ("#all_conversation_messages #unread_messages"),0<jQ("#all_conversation_messages #unread_messages").length&&scrollToElement());0<jQ("#pmsg_list #select_allbox").length&&activateCheckboxes(document.getElementsByName("conversation_users_id"),-1)}});
function hidePanel(){var a=-1<window.location.href.indexOf("/pm/inbox#")||-1<window.location.href.indexOf("/pm/inbox?show_id")||-1<window.location.href.indexOf("/pm/inbox?fid=2#"),b=jQ(".messages-list"),c=jQ(".conversation-list"),f=jQ(".push .dropdown");b.removeClass("hidePanel");c.removeClass("hidePanel");jQ(".main-container").removeClass("inbox-page");f.hide();768>jQ(window).width()&&(f.height(),a?(b.addClass("hidePanel"),f.show(),jQ(".main-container").addClass("inbox-page")):c.addClass("hidePanel"))}
function conversation_user_id(a){var b;window.location.hash?(a=a.split("#"),a=a[0].split("=")):a=a.split("=");(a=a[1])?b=jQ("[data-conversation_id="+a+"]").attr("data-conv_user_id"):jQ(".first_msg").length&&(b=jQ(".first_msg").attr("id").replace(/show_pmsg_/ig,""));return b}
function on_hash_change(a){if(0< !jQ("#pmsg_list_"+a).length)return alert("The conversation was not found."),!1;var b=jQ("#show_pmsg_"+a).attr("data-show_id"),c=jQ("#user_"+a+" .badge").text();jQ("[id^='pmsg_list_']").removeClass("active");jQ("#pmsg_list_"+a).removeClass();jQ("#user_"+a+" .badge").remove();jQ("#pmsg_list_"+a).addClass("active");jQ("#multiple_user_"+a).length&&(jQ("#show_profile_"+a).attr("class",jQ("#multiple_user_"+a).attr("class")),jQ("#show_profile_"+a).html(jQ("#multiple_user_"+
a).html()));var f=jQ("#show_pmsg_"+a).html();jQ("#all_conversation_messages").html(f);f=jQ("#conversation_details_"+a).html();jQ("#current_msg_details").html(f);f=jQ("#show_pmsg_"+a).attr("data-all_recipients");jQ("#replying_to_recipient").val(f);f=jQ("#pms_subject_"+a).html();jQ("[id^='display_subject_']").html(f);jQ("#current_subject").val(f);1==jQ("#show_pmsg_"+a).attr("data-current_user_active")?jQ("#pmsg_reply_panel").removeClass("hidden"):jQ("#pmsg_reply_panel").addClass("hidden");jQ("#delete_curr_conversation").attr("data-conversation_users_id",
a);jQ("#delete_curr_conversation").attr("data-conversation_id",b);jQ("#conversationid").val(b);jQ("#all_conversation_messages");jQ("#all_conversation_messages #unread_messages");0<jQ("#all_conversation_messages #unread_messages").length&&scrollToElement();changeTitleByClass();1!=jQ("#pmsg_list_"+a).attr("data-pms_new_status")&&2!=jQ("#pmsg_list_"+a).attr("data-pms_new_status")||jQ.ajax({type:"POST",url:"/pm",data:{action:"ajaxPmsStatusUpdate",conversation_users_id:a,conversation_users_fid:jQ("#current_fid").val(),
unread_count:c},success:function(a){},error:function(a,b,c){alert("An error occurred while processing your request.\n"+b+": "+c)}});"undefined"!=typeof tinyMCE&&null!=tinyMCE.activeEditor&&(a=tinyMCE.activeEditor.getContent(),""==a&&null==a||tinyMCE.activeEditor.setContent(""));return!1}
function showComposeMessageDialog(a,b,c){var f=a&&1!=jQ("#pmessage_modal").attr("data-old_fixed_dialog")||!a&&1==jQ("#pmessage_modal").attr("data-old_fixed_dialog");!jQ("#pmessage_modal").html()||f?jQ.ajax({type:"POST",url:"/pm",data:{action:"compose_pm_dialog"},success:function(e){jQ("#pmessage_modal").html(e);if(0<jQ("#pmessage_new").length){jQ("#pmessage_new").focus();e=jQ("#pmessage_new").attr("data-easycode");var d=jQ("#pmessage_new").attr("data-smilies"),f=jQ("#pmessage_new").attr("data-block_html"),
h=jQ("#pmessage_new").attr("data-spellcheck"),k=jQ("#pmessage_new").attr("data-insert-image-btn");"undefined"!=typeof tinyMCE&&"both"==c&&0<b&&startEditor("pmessage_new",e,d,f,h,k);init_tokenfield(jQ("#pmessage_modal").find("#tokenfield_typeahead"),jQ("#tokenfield_typeahead"),25,jQ("#error_max_recipient"),1);a?(show_singleUser_in_tokenfield(jQ("#pmessage_modal").find("#tokenfield_typeahead"),a),jQ("#pmsg_dialog_heading").html("New Message to '"+a+"'"),jQ("#pmessage_modal").attr("data-old_fixed_dialog",
1)):jQ("#pmessage_modal").attr("data-old_fixed_dialog",0)}jQ("#pmessage_modal").modal({backdrop:!0,keyboard:!0});wtbx.upload.uploaders=[]}}):jQ("#pmessage_modal").modal("show")}
function checkPMAction(){if(""==document.frmActions.massaction.value)return alert("Please select an action."),!1;if("delete_pms"==document.frmActions.massaction.value){if(!confirm("Delete this conversation?"))return!1}else if("leave_conversation"==document.frmActions.massaction.value){if(!confirm("Leave this conversation?"))return!1}else return!0}function scrollToElement(a,b){jQ("html, body").animate({scrollTop:jQ("#all_conversation_messages #unread_messages").offset().top})};jQ(document).ready(function(){jQ("#deleteAccountDialog").click(function(){jQ("#deleteAccount").show();jQ("#confirm_delete").modal("show")});jQ("#send_email").click(function(){jQ("#form-dialog #myModalLabel").text("You need to be logged in to send an email.")});jQ("#send_pm").click(function(){jQ("#form-dialog #myModalLabel").text("You need to be logged in to send message.")});jQ(document).on("click","#emailMember",function(){jQ("#email_error_msg").hide();jQ("#email-modal").modal("show");return!1});
jQ(document).on("click","[id^='emailMember_'],[id='emailUser']",function(){var a=jQ(this).attr("data-forumid"),b=jQ(this).attr("data-threadid");0<jQ("#forumids_id").length&&0<jQ("#email_threadid").length&&(jQ("#forumids_id").val(a),jQ("#email_threadid").val(b));jQ("#email_error_msg").hide();jQ("#email-id, #emailSenderName, #eml_address, #email_subject,#email_message ").val("");jQ("#email-modal").modal("show");return!1});jQ("#doNotDelAccount").click(function(){jQ("#confirm_delete").modal("hide")});
jQ("#send_email_button").click(function(){jQ("#referralURL").val();var a,b,c,f;0<jQ("#sendemail_comments_0").length&&(b="");0<jQ("#forumids_id").length&&0<jQ("#email_threadid").length&&0<jQ("#email_pid").length&&(a=jQ("#forumids_id").val(),c=jQ("#email_threadid").val(),f=jQ("#email_pid").val());jQ.ajax({type:"POST",url:"/email",data:{action:"send_email",message:jQ("#email_message").val(),subject:jQ("#email_subject").val(),userid:jQ("#email_userid").val(),eml:jQ("#eml_address").val(),name:jQ("#emailSenderName").val(),
member:jQ("#email_member").val(),forumid:a,ajax_request:"1",comments_0:b,id:c,pid:f},success:function(a){a.Error?jQ("#email_error_msg").html(a.Error).show():a.Success&&(jQ("#email_error_msg").hide(),jQ("#email-modal").modal("hide"),showAjaxMsg("Sent"))},error:function(a,b,c){alert("An error occurred while processing your request.\n"+b+": "+c)}})});jQ("#send_pm_button").click(function(){var a;"undefined"!=typeof tinyMCE?(a=tinyMCE.get("message").getContent(),a=cleanEditorHtml(a)):a=document.PostTopic.message.value;
jQ("#referralURL").val();jQ.ajax({type:"POST",url:"/pm",data:{action:"pm_send",recipient:jQ("#memberName").html(),message:a,subject:jQ("#pm_subject").val(),pm_ajaxRequest:"1"},success:function(a){a.Error?jQ("#pm_error_msg").html(a.Error).show():a.Success&&(jQ("#pm_subject").val(""),tinyMCE.get("message").setContent(""),jQ("#pm_modal").modal("hide"))},error:function(a,c,f){alert("An error occurred while processing your request.\n"+c+": "+f)}})});jQ("#anchor_tab_ban").click(function(){jQ("#ban-modal").modal("show");
return!1});jQ("#confirmBan").click(function(){document.ban_user.submit()});jQ(document).on("click","#wtb_instant_message",function(){var a=jQ(this).attr("data-user");return wtbInstantMessaging(a)});jQ("#deleteAvatar a").click(function(){var a=jQ(this).attr("data-avatarid"),b=jQ(this).attr("data-userid");deleteAvatarOrProfile(a,b,"avatar")});jQ("#decline_member").click(function(){var a=jQ(this).attr("data-member");return confirm("Are you sure you would like to decline the account "+a+"? Note: An email will also be sent to the member to notify them that their application has been declined.")})});var username_regexp_msg={"/^[a-zA-Z_0-9 ]+$/":"alphanumeric characters including underscores and spaces","/^[a-zA-Z_0-9]+$/":"Alphanumeric characters including underscores","/^[a-zA-Z0-9 ]+$/":"Alphanumeric characters including spaces","/^[a-zA-Z_]+$/":"lower and upper case letters including underscores","/^[a-zA-Z ]+$/":"lower and upper case letters including spaces","/^[a-z ]+$/":"lowercase letters from a-z including spaces","/^[A-Z ]+$/":"uppercase letters from A-Z including spaces","/^[a-zA-Z0-9]+$/":"alphanumeric characters",
"/^[a-zA-Z]+$/":"lower and upper case letters","/^[a-z]+$/":"lowercase letters from a-z","/^[A-Z]+$/":"uppercase letters from A-Z"};
function check_reset_pw_form(){var a=document.reset_pw_form;return a.pw.value?a.pw.value.match(/;/)?(showFieldError(a.pw,"Your username cannot contain semicolons."),!1):a.re_pw.value?a.pw.value!=a.re_pw.value?(showFieldError(a.pw,"Your password and re-typed password do not match."),!1):!0:(showFieldError(a.re_pw,"Please re-type your password."),!1):(showFieldError(a.pw,"Please choose a password."),!1)}
function check_lost_pw_form(){var a=document.lost_pw_form;return a.member.value||a.email.value?!0:(showFieldError(a.member,"Please enter your username or email address."),!1)}function check_fb_connectForm(){return document.fbForm.member.value?document.fbForm.pw.value?!0:(showFieldError(document.fbForm.pw,"Please enter your forum account password."),!1):(showFieldError(document.fbForm.member,"Please enter your forum account username."),!1)}
function check_fb_regForm(){var a=document.fbForm;if(!a.member.value)return showFieldError(a.member,"Please choose a username."),!1;if(/^([\w\d])+([\w\d\])+([\.]{0,1})([\w\d\\])+\@([\w\d\-]+\.)+([\w]{2,15})$/i.test(a.member.value))return showFieldError(a.member,"Please choose a username that is not an email address."),!1;if(a.member.value.match(/;/))return showFieldError(a.member,"Your username cannot contain semicolons."),!1;if(global_hash.username_regexp&&!a.member.value.match(new RegExp(global_hash.username_regexp)))return showFieldError(a.member,
username_regexp_msg[global_hash.username_regexp]?"Error: Your username must contain "+username_regexp_msg[global_hash.username_regexp]:"Your username does not meet the administrator's standards."),!1;if(!a.pw.value)return showFieldError(a.pw,"Please choose a password."),!1;if("undefined"==a.fb_email.value){if(!a.email.value)return showFieldError(a.email,"Please enter your email address."),!1;if(!/^([\w\d])+([\w\d\])+([\.]{0,1})([\w\d\\])+\@([\w\d\-]+\.)+([\w]{2,15})$/i.test(a.email.value)||/^\s+/.test(a.email.value))return showFieldError(a.email,
"You entered an invalid email address."),!1}return!0}
function check_fb_pic_upload(){return!jQ("#av_url").attr("checked")||""!=jQ("input[name=avatar]").val()&&"0"!=jQ("input[name=avatar]").val()?!jQ("#av_upload").attr("checked")||""!=jQ("input[name=attachment_ids]").val()&&"0"!=jQ("input[name=attachment_ids]").val()?!jQ("#profile_pic_url").attr("checked")||""!=jQ("input[name=profile_picture]").val()&&"0"!=jQ("input[name=profile_picture]").val()?!jQ("#profile_pic_upload").attr("checked")||""!=jQ("input[name=profile_attachment_ids]").val()&&"0"!=jQ("input[name=profile_attachment_ids]").val()?
!0:(showFieldError(jQ("input[name=profile_attachment_ids]"),"Please upload a profile picture from your computer."),!1):(showFieldError(jQ("input[name=profile_picture]"),"Please enter a profile picture URL."),!1):(showFieldError(jQ("input[name=attachment_ids]"),"Please upload an avatar from your computer."),!1):(showFieldError(jQ("input[name=avatar]"),"Please enter an avatar URL."),!1)}
function check_UsernameValidity(){var a=document.PostTopic.member;return a?a.value?a.value.match(/;/)?(showFieldError(a,"Your username cannot contain semicolons."),!1):global_hash.username_regexp&&!a.value.match(new RegExp(global_hash.username_regexp))?(showFieldError(a,username_regexp_msg[global_hash.username_regexp]?"Error: Your username must contain "+username_regexp_msg[global_hash.username_regexp]:"Your username does not meet the administrator's standards."),!1):!0:(showFieldError(a,"Please enter a username."),
!1):!0}function checklength(a){for(var b=0;b<a.length;b++){var c=a[b];if("textarea"==c.type&&c.name.match(/^field/)){var f=c.value.split("\\n"),e=f.length;e--;for(var d=0,g=0;g<f.length;g++){var h=f[g];13==h.charCodeAt(h.length-1)&&d++}0!=d&&(e=0);if(65E3<parseInt(c.value.length)+parseInt(e))return a=eval("frm."+c.name.replace("field","title")+".value"),showFieldError(c,"'"+a+"' length is "+(parseInt(c.value.length)+parseInt(e))+" .\\n It can not exceed 65,000 characters."),!1}}return!0}
function check_required_field(a){if(global_hash.required_name&&!a.name.value)return showFieldError(a.name,"Please enter user full name."),!1;if(global_hash.required_imType&&(!a.imType.value||"None"==a.imType.value))return showFieldError(a.imType,"Please enter Instant Messaging agent."),!1;if(a.imID&&(!a.imID.value.replace(/\s+/g,"")||"Your screen name"==a.imID.value)&&"None"!=a.imType.value)return showFieldError(a.imID,"Please enter your screen name."),!1;if(global_hash.required_dob)if(0<jQ("#bd_month").length){if(!a.month.value)return showFieldError(a.month,
"Please enter birth month."),!1;if(!a.day.value)return showFieldError(a.day,"Please enter birth day."),!1;if(!a.year.value)return showFieldError(a.year,"Please enter birth year."),!1}else if(0<jQ("#birthDatepicker").length&&!a.birthDatepicker.value)return showFieldError(a.birthDatepicker,"Please enter birthday."),!1;if(global_hash.required_avatar)if(jQ("#av_upload").length||jQ("#av_url").length||jQ("#av_fb").length){if(!jQ("#av_upload:checked").val()&&!jQ("#av_fb:checked").val()&&!jQ("#av_url:checked").val())return alert("Please select an option for your avatar."),
!1}else{if(a.avatar&&!a.avatar.value&&(""==a.attachment_ids.value||"0"==a.attachment_ids.value))return showFieldError(a.avatar,"Please enter an avatar URL or upload an avatar from your computer."),!1;if(!a.avatar&&(""==a.attachment_ids.value||"0"==a.attachment_ids.value))return alert("Please upload an avatar from your computer."),!1}if(global_hash.required_profile_picture)if(jQ("#profile_pic_upload").length||jQ("#profile_pic_url").length||jQ("#profile_pic_fb").length){if(!jQ("#profile_pic_upload:checked").val()&&
!jQ("#profile_pic_fb:checked").val()&&!jQ("#profile_pic_url:checked").val())return alert("Please select an option for your profile picture"),!1}else{if(a.profile_picture&&!a.profile_picture.value&&(""==a.profile_attachment_ids.value||"0"==a.profile_attachment_ids.value))return showFieldError(a.profile_picture,"Please enter a profile picture URL or upload a profile picture from your computer."),!1;if(!a.profile_picture&&(""==a.profile_attachment_ids.value||"0"==a.profile_attachment_ids.value))return alert("Please upload a profile picture from your computer."),
!1}if(global_hash.required_signature)if("undefined"!=typeof tinyMCE&&null!=tinyMCE.activeEditor){if("undefined"!=typeof tinyMCE.get("signature")&&!tinyMCE.get("signature").getContent())return alert("Please provide a signature."),!1}else if(!a.signature.value)return alert("Please provide a signature."),!1;return!0}
function checkRegisterForm(){var a=document.PostTopic;return!check_UsernameValidity()||0<jQ("#bd_month").length&&!check_dob()?!1:/^([\w\d])+([\w\d\])+([\.]{0,1})([\w\d\\])+\@([\w\d\-]+\.)+([\w]{2,15})$/i.test(a.member.value)?(showFieldError(a.member,"Please choose a username that is not an email address."),!1):a.pw.value?a.email.value?!/^([\w\d])+([\w\d\])+([\.]{0,1})([\w\d\\])+\@([\w\d\-]+\.)+([\w]{2,15})$/i.test(a.email.value)||/^\s+/.test(a.email.value)?(showFieldError(a.email,"You entered an invalid email address."),
!1):check_required_field(a)&&check_fb_pic_upload()?document.getElementById("rules_checkbox")&&0==document.getElementById("rules_checkbox").checked?(showFieldError(document.getElementById("rules_checkbox"),"You must agree to the forum rules."),!1):checklength(a)?!0:!1:!1:(showFieldError(a.email,"Please enter your email address."),!1):(showFieldError(a.pw,"Please enter a password."),!1)}
function checkEditProfileForm(){var a=document.PostTopic;return!check_fb_pic_upload()||0<jQ("#bd_month").length&&!check_dob()||!check_required_field(a)||!checklength(a)?!1:!0}
function customTextBox(){var a=document.getElementById("divChangeTextBox"),b,c;document.getElementById("divChange")?b=document.getElementById("divChange"):(b=document.getElementById("divChangeText"),c=document.getElementById("divChangeAnchor"));"none"==a.style.display?(a.style.display="",b.style.display="none",c&&(c.style.display="none")):(a.style.display="none",b.style.display="",c&&(c.style.display=""));return!1}var selectedOptions=[];
function countSelected(a,b,c,f){var e=0;if("select"==c)for(f=c=0;c<a.options.length;c++)a.options[c].selected&&f++,f>b&&(e=1,a.options[c].selected=!1);else for(checkb=eval("a."+f),f=c=0;c<checkb.length;c++)checkb[c].checked&&f++,f>b&&(e=1,checkb[c].checked=!1);1==e&&alert("You may only choose "+b+" options.")}
function checkUsername(a){jQ.ajax({type:"GET",url:a,success:function(a){var c,f,e=0;a.username&&(f=a.username.bold());if(1==a.availability)c=f+" is available";else if(0==a.availability)c=f+" is already taken";else if(a.availability_Error)c=a.availability_error_msg;else if(a.Error){f=[];var d,g;jQ("#divStatus").html("");jQ("#pm_reply_error_msg, #pm_error_msg").hide();a.error_msg&&jQ("#divStatus").append(a.error_msg+"<br>");a.window_status&&(d="",f=[],f=a.window_status.split(","),g=f.length,jQ.each(f,
function(a,b){a+=1;d=1==g?"<i>"+b+"</i>":1<g&&a==g?d+" and <i>"+b+"</i>":2<g&&1<a?d+", <i>"+b+"</i>":"<i>"+b+"</i>"}),jQ("#divStatus").append(d+" can't receive the message. <br>"));a.member_status&&(d="",f=[],f=a.member_status.split(","),g=f.length,jQ.each(f,function(a,b){a+=1;d=1==g?"<i>"+b+"</i>":1<g&&a==g?d+" and <i>"+b+"</i>":2<g&&1<a?d+", <i>"+b+"</i>":"<i>"+b+"</i>"}),jQ("#divStatus").append(d+" was not found. <br>"));a.inbox_memory_status&&(d="",f=[],f=a.inbox_memory_status.split(","),g=f.length,
jQ.each(f,function(a,b){a+=1;d=1==g?"<i>"+b+"</i>":1<g&&a==g?d+" and <i>"+b+"</i>":2<g&&1<a?d+", <i>"+b+"</i>":"<i>"+b+"</i>"}),jQ("#divStatus").append(d+" can't receive messages because their PM box is currently full. <br>"));a.blocked_status&&(d="",f=[],f=a.blocked_status.split(","),g=f.length,jQ.each(f,function(a,b){a+=1;d=1==g?"<i>"+b+"</i>":1<g&&a==g?d+" and <i>"+b+"</i>":2<g&&1<a?d+", <i>"+b+"</i>":"<i>"+b+"</i>"}),jQ("#divStatus").append(d+" have chosen not to receive private messages. <br>"));
a.pending_approval_status&&(d="",f=[],f=a.pending_approval_status.split(","),g=f.length,jQ.each(f,function(a,b){a+=1;d=1==g?"<i>"+b+"</i>":1<g&&a==g?d+" and <i>"+b+"</i>":2<g&&1<a?d+", <i>"+b+"</i>":"<i>"+b+"</i>"}),jQ("#divStatus").append(d+" can't receive messages because their account is pending approval. <br>"));a.pending_email_status&&(d="",f=[],f=a.pending_email_status.split(","),g=f.length,jQ.each(f,function(a,b){a+=1;d=1==g?"<i>"+b+"</i>":1<g&&a==g?d+" and <i>"+b+"</i>":2<g&&1<a?d+", <i>"+
b+"</i>":"<i>"+b+"</i>"}),jQ("#divStatus").append(d+" can't receive messages because their email address is pending verification. <br>"));e=1;jQ("#divStatus").removeClass("alert-info").addClass("alert-danger");jQ("#notification_msg").removeClass("hidden")}else a.Success&&(jQ("#pm_reply_error_msg, #pm_error_msg").hide(),jQ("#divStatus").html("All specified users are accepting private messages.").removeClass("alert-danger").addClass("alert-info"),jQ("#notification_msg").removeClass("hidden"));a.Success||
e||(jQ("#divStatus").html(c),""!=c?jQ("#divStatus").removeClass("hidden"):jQ("#divStatus").removeClass("alert-danger").addClass("alert-info"),jQ("#notification_msg").removeClass("hidden"))},error:function(){help(a+"&popup=1","340","130")}})}
function check_dob(){var a=jQ("#bd_day").val(),b=jQ("#bd_month").val(),c=jQ("#bd_year").val(),f=parseInt(global_hash.currentyear);return b&&!a||a&&!b?(showFieldError(jQ("#bd_day"),"Please provide a valid Birthday."),!1):c&&(1900>c||c>f)?(showFieldError(jQ("#bd_year"),"Valid years for your Birthday are from 1900 to "+f+"."),!1):!0}
jQ(document).ready(function(){jQ("#inputusername").blur(function(){var a=jQ(this).attr("data-msg_already_shown"),b=jQ(this);if(this.value){var e="/live_member_search?action=availability&uid="+uid+"&s="+this.value;jQ.ajax({type:"GET",url:e,success:function(d){var e,h,k;1==d.availability?(b.attr("data-msg_already_shown",""),e="The username '"+d.username+"' is available.",h="success-tooltip",k="form-control input-success"):0==d.availability?(b.attr("data-msg_already_shown","1"),e="'"+d.username+"' is already taken.",
h="error-tooltip",k="form-control input-error"):e=d;a&&1==d.availability||0==d.availability?(jQ("#userAvailStatus").attr("class",h).attr("data-original-title",e).tooltip("fixTitle").tooltip("show"),jQ("#inputusername").attr("class",k)):1==d.availability&&(jQ("#userAvailStatus").attr("class","").attr("data-original-title","").tooltip("hide"),jQ("#inputusername").attr("class","form-control"))},error:function(){help(e+"&popup=1","340","130")}})}return!1});jQ(".select_multiple").length&&(jQuery(".select_multiple").each(function(){var a=
this.id,b=a.replace(/select_multiple/ig,""),e=jQ("#"+a+" option:selected");(b=jQ("#limit_selection_multiple"+b).val())&&e.length>=b&&jQ("#"+a+" option").filter(":not(:selected)").prop("disabled",!0)}),jQ(".select_multiple").multiselect({includeSelectAllOption:!1,maxHeight:200,onChange:function(a,b){var e=jQ(a).closest("select").attr("id"),d=e.replace(/select_multiple/ig,""),g=jQ("#"+e+" option:selected");(d=jQ("#limit_selection_multiple"+d).val())&&g.length>=d?(g=jQ("#"+e+" option").filter(function(){return!jQ(this).is(":selected")}),
jQ("#"+e).siblings(".multiselect-container"),g.each(function(){var a=jQ('.checkbox input[value="'+jQ(this).val()+'"]');a.prop("disabled",!0);a.parent("li").addClass("disabled")})):(jQ("#"+e).siblings(".multiselect-container"),jQ("#"+e+" option").each(function(){var a=jQ('input[value="'+jQ(this).val()+'"]');a.prop("disabled",!1);a.parent("li").addClass("disabled")}))}}));jQ("#additional-groups").length&&jQ("#additional-groups").multiselect({includeSelectAllOption:!1,maxHeight:150});jQ("#imType").change(function(){if("None"==
jQ("#imType").val())return jQ("#imID").addClass("hidden"),jQ("#imID").val(""),!1;jQ("#imID").removeClass("hidden")});jQ("#cancel_managePrimaryUserGroup").click(function(){window.location.href="/register/members"});jQ("#cancel_manageAdditionalUserGroup").click(function(){window.location.href="/register/members"});if(0<jQ("#rules_box").length)jQ(document).on("click","#rules_dialog",function(){jQ("#rules_box").modal("show");return!1});if(0<jQ("#deleteProfile").length)jQ(document).on("click","#deleteProfile",
function(){var a=jQ("#profile_attachment_ids").val(),b=jQ("#user_id").val();deleteAvatarOrProfile(a,b,"profile_picture");return!1});var a,b;jQ("#usrName, #usrPwd, #usrEmail").on("click",".change-value",function(){a=this.id;b=jQ(this).closest("div").attr("id");var c;c=0<jQ("#UserProfile").length?getCookie("userid"):jQ("#user_ID").val();jQ(this).hide();jQ.ajax({type:"POST",url:"/register",data:{action:"checkLoginRecency",user_ID:c},success:function(a){0==a.login_recency_flag?(jQ("#confirm_delete").modal("hide"),
jQ("#pwd_error").hide(),jQ("#confirm_pwd").modal("show")):jQ("#"+b+" [id^='change_user_']").editable("show")}})});jQ("#confirm_delete").on("click","#deleteAccount, #delUserAccount",function(){a=this.id;b=jQ(this).closest("div").attr("id");var c;0<jQ("#user_ID").length?c=jQ("#user_ID").val():0<jQ("#mem_userid").length&&(c=jQ("#mem_userid").val());jQ(this).hide();jQ.ajax({type:"POST",url:"/register",data:{action:"delete",delete_member:c,delete_acc_ajax_req:"1"},success:function(c){if(c.success)jQ("#confirm_pwd").modal("hide"),
window.location.href="/register/members";else if(0==c.login_recency_flag||0==c.passwordValidated){if(jQ("#pwd_error").hide(),jQ("#confirm_pwd").modal("show"),jQ("#passwrd").val(""),"deleteAccount"==a||"delUserAccount"==a)jQ("#confirm_submit").attr("data-confirm","delete_account"),jQ("#confirm_delete").modal("hide")}else c.login_recency_flag&&"deleteAccount"==a?jQ("#delete_profile").submit():"deleteAccount"!=a&&"delUserAccount"!=a?jQ("#"+b+" [id^='change_user_']").editable("show"):"delUserAccount"==
a&&(jQ("#"+a).attr("data-delete","1"),delete_account(a))}})});jQ("#registerEditProfile").length||jQ("#subscribe_topic").length||(jQ.fn.editable.defaults.mode="inline",jQ("#confirm_submit").click(function(c){var f=jQ("#confirm_submit").attr("data-confirm"),e=jQ('[name= "passwrd"]').val();user_ID=0<jQ("#UserProfile").length?jQ("#email_userid").val():0<jQ("#usrName").length?jQ("#usrName").attr("data-userid"):0<jQ("#member_list").length?jQ("input[name=delete_member]:checked").map(function(){return this.value}).get().join():
jQ("#user_ID").val();var d;"delUserAccount"==a&&(d=jQ("#delUserAccount").attr("data-userid"));"delete_account"==f?jQ.ajax({type:"POST",url:"/register",data:{action:"delete",delete_member:user_ID,admin_user_id:d,delete_acc_ajax_req:"1",password:e},success:function(a){if(a.password_ext)jQ("#pwd_error").html(a.password_ext).show();else if(a.passwordValidated||a.success)jQ("#confirm_pwd").modal("hide"),window.location.href="/register/members"}}):jQ.ajax({type:"POST",url:"/register",data:{action:"validatePassword",
password:e},success:function(a){!e||e&&!a.passwordValidated?jQ("#pwd_error").html(a.password_ext).show():(c.stopPropagation(),"delete_account"!=f&&jQ("#"+b+" [id^='change_user_']").editable("show"),jQ("#confirm_pwd").modal("hide"))}})}),jQ("#usrName").length&&jQ.extend(jQ.fn.editable.defaults,{mode:"inline",toggle:"manual",showbuttons:!0,onblur:"ignore",inputclass:"input-small"}),jQ("#change_user_name,#change_user_pwd,#change_user_email").editable({validate:function(a){a=jQ.trim(a);if(""==a){if("change_user_name"==
jQ(this).attr("id"))return"Username is required.";if("change_user_pwd"==jQ(this).attr("id"))return"Password is required.";if("change_user_email"==jQ(this).attr("id"))return"Email Address is required."}else{if("change_user_email"==jQ(this).attr("id")&&!/^([\w\d])+([\w\d\])+([\.]{0,1})([\w\d\\])+\@([\w\d\-]+\.)+([\w]{2,15})$/i.test(a))return jQ(this).focus(),"You entered an invalid email address.";if("change_user_email"==jQ(this).attr("id")&&a.toLowerCase()==jQ.trim(jQ(this).text().toLowerCase()))return jQ("#change_user_email").editable("hide"),
" "}},url:"/register",ajaxOptions:{type:"POST"},display:function(a,b){return!1},params:function(a){"change_user_name"==jQ(this).attr("id")?(a.action="change_username",a.new_username=jQ.trim(a.value)):"change_user_pwd"==jQ(this).attr("id")?(a.action="change_password",a.new_password=jQ.trim(a.value)):"change_user_email"==jQ(this).attr("id")&&(a.action="change_password",a.email=jQ.trim(a.value));a.ajax_request="1";a.userid=jQ(this).attr("data-userid");return a},success:function(a,b){if(a.Success)showAjaxMsg("Saved..."),
"change_user_name"!=jQ(this).attr("id")&&"change_user_email"!=jQ(this).attr("id")||jQ(this).html(b);else return"change_user_name"==jQ(this).attr("id")?alert(a.error_message):alert(a.error_email_pwd_change),!1},error:function(a,b){alert("An error occurred while processing your request.\n"+a.responseText)}}).on("hidden",function(a,b){wtbx.forum.isMobile()&&jQ(".change-value").show()}));jQ(".show-datepicker").datepicker({autoclose:!0,startDate:global_hash.mindate,endDate:global_hash.maxdate});jQ("#edit_signature").click(function(){var a=
jQ(this).attr("data-objname"),b=jQ(this).attr("data-easycode"),e=jQ(this).attr("data-smilies"),d=jQ(this).attr("data-block_html"),g=jQ(this).attr("data-spellcheck");jQ("#edit_signature, #user_signature").hide();jQ("#userSignature").removeClass("hidden");"undefined"!=typeof tinyMCE&&startEditor(a,b,e,d,g,"")});0<jQ("#custom_user_title").length&&(jQ.fn.editable.defaults.mode="inline",jQ("#change_user_title").editable({type:"text",success:function(a,b){jQ("#user_id").val();var e=jQ("#edit_icon").html(),
d=b.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;");jQ.ajax({type:"POST",url:"/register",data:{action:"member_title_change",userid:userid,user_title:d},success:function(a){jQ("#usertitle").val(d);jQ("#change_user_title").append(e)},error:function(a,b,c){alert("An error occurred while processing your request.\n"+b+": "+c)}})}}))});
function delete_account(a){"delUserAccount"==a&&jQ("#delUserAccount").attr("data-delete")&&(a=jQ("#email_userid").val(),jQ.ajax({type:"POST",url:"/register",data:{action:"delete",mem_userid:a,delUserAcc:"1"},success:function(a){a.success&&(jQ("#confirm_delete").modal("hide"),window.location.href="/register/members")},error:function(a,c,f){alert("An error occurred while processing your request.\n"+c+": "+f)}}))};function check_SearchForm(a){if(global_hash.reqreg){if(""==a.keywords.value&&""==a.member.value)return showFieldError(a.keywords,"Please specify a keyword or username to search for."),!1}else if(""==a.keywords.value)return showFieldError(a.keywords,"Please specify keywords to search for."),!1;if(""!=a.keywords.value){if(isNaN(a.numreplies.value))return showFieldError(a.numreplies,"The replies field can only accept numeric values. "),!1;if("specificdate"==a.daterange.value){if(""==a.custdatefrom.value||
""==a.custdateto.value)return showFieldError(a.custdatefrom,"Please enter the dates."),!1;if(a.custdatefrom.value&&a.custdateto.value){var b=/^(\d{1,2})(\/)(\d{1,2})\2(\d{4})$/;if(b.test(a.custdatefrom.value)&&b.test(a.custdateto.value)){var b=a.custdatefrom.value.split("/")[0],c=a.custdatefrom.value.split("/")[1],f=a.custdatefrom.value.split("/")[2],e=a.custdateto.value.split("/")[0],d=a.custdateto.value.split("/")[1],g=a.custdateto.value.split("/")[2],h=new Date(f,b-1,c),k=new Date(g,e-1,d);if(h.getMonth()+
1!=b||h.getDate()!=c||h.getFullYear()!=f||k.getMonth()+1!=e||k.getDate()!=d||k.getFullYear()!=g)return alert(a.custdatefrom,"Invalid Day, Month, or Year range. Please correct and submit again."),!1;a=document.getElementById("custdatefrom").value;b=document.getElementById("custdateto").value;a=new Date(a);b=new Date(b);c=new Date;c=c.getMonth()+1+"/"+c.getDate()+"/"+c.getFullYear();c=new Date(c);return a>b?(alert('The "From" date should be prior to the "To" date'),!1):a>c||b>c?(showFieldError(document.getElementById("custdatefrom"),
"Dates should be prior to or same as the current date."),!1):!0}showFieldError(a.custdatefrom,"Invalid to or from date. Please correct and submit again.");return!1}}}}wtbx.search={setPostCounterAttributes:function(a){"postsgreater"==a?jQ("#posts_less_greater").attr("name","s_postsgreater"):jQ("#posts_less_greater").attr("name","s_postsless")}};jQ(function(){jQ("#custdatefrom, #custdateto").datepicker({showOn:"button",buttonImage:"/images/icons/calendar.gif",buttonImageOnly:!0})});
jQ(document).ready(function(){jQ("#anchor_tab_search").length&&(jQ(".forum-collapse").on("click",function(a){jQ(".collapse-content").toggle();a.stopPropagation()}),jQ(".input-daterange").datepicker(),jQ(".dropdown-menu").find("select").click(function(a){a.stopPropagation()}));0<jQ(".search-wrapper").length&&0<jQ("#searchin").length&&""!=jQ("#searchin").val()&&("Members"==jQ("#searchin").val()&&changememberSearchForm(),jQ("#searchContent #buttonName").text(jQ("#searchin").val()),"User's Posts"!=jQ("#searchin").val()&&
"Categories"!=jQ("#searchin").val()||changeSearchForm());checkinputbox();global_hash.forum_id&&(document.frmSearch.btnSearch.disabled=!1);jQ("#search-keyword").on("input",function(){""!=this.value?jQ("#inner-search-keyword").removeClass("hidden"):jQ("#inner-search-keyword").addClass("hidden")});0<jQ("#search-keyword").length&&jQ("#search-keyword").val()&&jQ("#inner-search-keyword").removeClass("hidden");jQ("#search-user").length&&jQ("#search-user").val()&&(jQ("#inner-search-user").removeClass("hidden"),
jQ("#Display_Topics_Posts").fadeOut());jQ("#search-user").on("input",function(){""!=this.value?(jQ("#inner-search-user").removeClass("hidden"),jQ("#Display_Topics_Posts").fadeOut()):(jQ("#inner-search-user").addClass("hidden"),jQ("#Display_Topics_Posts").fadeIn())});jQ(document).on("click","#findPosts, #findThreads",function(){var a=this.id;"findThreads"==a?jQ('[name= "radio_showas"]').val("threads"):"findPosts"==a&&jQ('[name= "radio_showas"]').val("posts")});jQ("#member_search").length&&(jqCalendar("reg_date_after",
"aftermonth","afterday","afteryear",global_hash.mindate,global_hash.maxdate),jqCalendar("reg_date_before","beforemonth","beforeday","beforeyear",global_hash.mindate,global_hash.maxdate),jqCalendar("lstpostdateafter","last_post_month_after","last_post_date_after","last_post_year_after",global_hash.mindate,global_hash.maxdate),jqCalendar("lstpostdatebefore","last_post_month_before","last_post_day_before","last_post_year_before",global_hash.mindate,global_hash.maxdate),global_hash.is_moderator&&(jqCalendar("birthdateafter",
"birth_day_after_month","birth_day_after_days","birthday_after_year",global_hash.mindate_dob,global_hash.maxdate_dob),jqCalendar("birthdatebefore","birth_day_before_month","birth_day_before_days","birthday_before_year",global_hash.mindate_dob,global_hash.maxdate_dob),jqCalendar("lastvisit_date_after","lastvisit_month_after","lastvisit_day_after","lastvisit_year_after",global_hash.mindate,global_hash.maxdate),jqCalendar("lastvisit_date_before","lastvisit_month_before","lastvisit_day_before","lastvisit_year_before",
global_hash.mindate,global_hash.maxdate)));jQ("#member_search,#anchor_tab_member_search").length&&(jQ("input:checkbox").change(function(){global_hash[this.name]&&countSelected(this.form,global_hash[this.name],"checkbox",this.name)}),jQ("select").change(function(){"multiple"==jQ(this).attr("multiple")&&global_hash[this.name]&&countSelected(this,global_hash[this.name],"select")}));0<jQ("#massUnsubscribe").length&&jQ("#massUnsubscribe").change(function(){setTimeout(function(){totalChecked=getTotalChecked();
if(""==document.posts.mass_unsubscribe.value)return!1;if(0==totalChecked)return alert("No topics have been selected."),document.posts.mass_unsubscribe.selectedIndex=0,!1;if("unsubscribe"==document.posts.mass_unsubscribe.value&&!confirm("Unsubscribe from "+totalChecked+" topic(s) you have selected?"))return document.posts.mass_unsubscribe.selectedIndex=0,!1;document.posts.submit()},100)});0<jQ("#search_PostSelection").length&&jQ("#search_PostSelection").change(function(){setTimeout(function(){activateCheckboxes(document.PostTopic.pid);
totalChecked=getTotalChecked();if(""==document.PostTopic.action.value)return!1;if(0==totalChecked)return alert("No post have been selected."),document.PostTopic.action.selectedIndex=0,!1;if("moveposts"==document.PostTopic.action.value&&!confirm("Move the "+totalChecked+" posts(s) you have selected?"))return document.PostTopic.action.selectedIndex=0,!1;document.PostTopic.submit()},100)});0<jQ("#check_search_result").length&&jQ("#check_search_result").change(function(){setTimeout(function(){totalChecked=
getTotalChecked();if(""==document.posts.action.value)return alert("No topics have been selected."),!1;if(0==totalChecked)return alert("No topics have been selected."),document.posts.action.selectedIndex=0,!1;if("delete"==document.posts.action.value&&!confirm("Delete "+totalChecked+" topic(s) you have selected?"))return document.posts.action.selectedIndex=0,!1;document.posts.submit()},100)});0<jQ("#move_PostSelection").length&&jQ("#move_PostSelection").click(function(){activateCheckboxes(document.PostTopic.pid);
totalChecked=getTotalChecked();if(0==totalChecked)return alert(" No posts have been selected."),!1;if(!confirm(1==totalChecked?"Move the post?":"Move the "+totalChecked+" selected posts?"))return!1;jQ('input[name="action"]').val("moveposts");document.PostTopic.submit()});jQ(document).on("click","#searchForums, #searchMembers",function(){var a;a=jQ("#"+this.id).text();jQ("#searchContent #buttonName").text(a);jQ("#searchin").val(a);"Categories"==a||"Topics"==a?changeSearchForm():"Members"==a&&changememberSearchForm()});
jQ("#inline_search_box").on("keypress",function(a){13==(a.keyCode?a.keyCode:a.which)&&(a.preventDefault(),a.stopPropagation(),0<jQ("#inlineSearchForm").length?jQ("#inlineSearchForm").submit():0<jQ("#inline_search_form").length&&jQ("#inline_search_form").submit())});jQ(document).on("click","#sort-by-Relevance, #sort-by-Updated, #sort-by-Top",function(){var a,c=this.id,f;"sort-by-Relevance"==c?(a="",f="Relevance"):"sort-by-Updated"==c?(a="lastpost",f="Updated"):"sort-by-Top"==c&&(a="top",f="Top");jQ("[id ^= 'glyphiconFor_']").removeClass("glyphicon glyphicon-ok");
jQ("#glyphiconFor_"+f).addClass("glyphicon glyphicon-ok");jQ("#sort-by-dropdown").val(a);jQ("#search_in").val("doSearch");"filterBy_forum"!=c&&jQ("#forum_filter").remove();document.Form_Search.submit();return!1});jQ("#custdatefrom, #custdateto").datepicker().on("changeDate",function(a){jQ(".datepicker").hide()});jQ(document).on("click","#filter_allTime, #filter_lastVisit, #filter_24hrs, #filter_week, #filter_month, #filter_year, #filterBy_time, #search_forums_filter",function(){var a,c=this.id,f,
e,d;if("filter_allTime"==c)a="0",f="allTime";else if("filter_lastVisit"==c)a="lastvisit",f="lastVisit";else if("filter_24hrs"==c)a="1",f="24hrs";else if("filter_week"==c)a="7",f="week";else if("filter_month"==c)a="30",f="month";else if("filter_year"==c)a="365",f="year";else if("filterBy_time"==c){f="timeperiod";e=jQ("#custdatefrom").val();d=jQ("#custdateto").val();if(""==e||""==d)return jQ("#date-modal #alertMsg").text("Please enter the dates.").removeClass("hidden"),!1;if(e&&d)if(a=/^(\d{1,2})(\/)(\d{1,2})\2(\d{4})$/,
a.test(e)&&a.test(d)){a=e.split("/")[0];var g=e.split("/")[1],h=e.split("/")[2],k=d.split("/")[0],m=d.split("/")[1],l=d.split("/")[2],p=new Date(h,a-1,g),n=new Date(l,k-1,m);if(p.getMonth()+1!=a||p.getDate()!=g||p.getFullYear()!=h||n.getMonth()+1!=k||n.getDate()!=m||n.getFullYear()!=l)return jQ("#date-modal #alertMsg").text("Invalid Day, Month, or Year range detected. Please correct and submit again.").removeClass("hidden"),!1;a=document.getElementById("custdatefrom").value;g=document.getElementById("custdateto").value;
a=new Date(a);g=new Date(g);h=new Date;h=h.getMonth()+1+"/"+h.getDate()+"/"+h.getFullYear();h=new Date(h);if(a>g)return jQ("#date-modal #alertMsg").text('The "From" date should be prior to the "To" date.').removeClass("hidden"),!1;if(a>h||g>h)return jQ("#date-modal #alertMsg").text("Dates should be prior to or same as current date.").removeClass("hidden"),!1;a="specificdate"}else return jQ("#date-modal #alertMsg").text("Invalid Date Format. Please correct and submit again.").removeClass("hidden"),
!1}else"search_forums_filter"==c&&(f="forum",jQ("#search_in").val("doSearch"));jQ("[id ^= 'filterBy_']").removeClass("glyphicon glyphicon-ok");jQ("#filterBy_"+f).addClass("glyphicon glyphicon-ok");"filterBy_time"==c&&(jQ("#custdatefrom").val(e),jQ("#custdateto").val(d));jQ("#filter-by-dropdown").val(a);if(a||"search_forums_filter"==c)jQ("#search_in").val("doSearch"),"filterBy_forum"!=c&&jQ("#forum_filter").remove(),document.Form_Search.submit();return!1});if((jQ("[id^='complete_post_']").length||
jQ("[id^='post_message_']").length)&&(jQ("[id^='show_post_']").length||jQ("[id^='show_approval_post_']").length)){var a;a=jQ("[id^='post_message_']").length?"post_message_":"complete_post_";jQ("[id^='"+a+"']").each(function(){var a=this.id,c=a.replace(/complete_post_|post_message_/ig,"");100<jQ("#"+a).height()&&(jQ(this).addClass("preview-cut"),jQ("[id^='show_approval_post_']").length?jQ("#show_approval_post_"+c).removeClass("hidden"):jQ("[id^='show_post_']").length&&jQ("#show_post_"+c).removeClass("hidden"))})}jQ("[id^='show_post_'],[id^='show_approval_post_']").click(function(){var a=
this.id.replace(/show_post_|show_approval_post_/ig,""),c;c=jQ("#post_message_"+a).length?"post_message_":"complete_post_";jQ("#"+c+a).removeClass("preview-cut");jQ(this).remove()});jQ(document).on("change","#postsLimit",function(){var a=jQ("#postsLimit").val();wtbx.search.setPostCounterAttributes(a)});jQ(document).on("click","#posts_less_greater",function(){var a=jQ("#postsLimit").val();wtbx.search.setPostCounterAttributes(a)});jQ("#search-par").on("submit",function(a){if(jQ("#posts_less_greater").val()){if(!/^\d+$/.test(jQ("#posts_less_greater").val()))return showFieldError(jQ("#posts_less_greater"),
"Please specify a number."),!1;if(0==jQ('input[name="s_postsless"]').val())return showFieldError(jQ("#posts_less_greater"),"Please enter valid number for posts."),!1}});jQ(document).on("change","#lastPostDate",function(){var a=jQ("#lastPostDate").val(),c=a.split("/")[0],f=a.split("/")[1],a=a.split("/")[2],e=jQ("#last_post_date").val();"lstpostdateafter"==e?(jQ("#last_post_month_after").val(c),jQ("#last_post_date_after").val(f),jQ("#last_post_year_after").val(a),jQ("#lastPosted [id$='_before']").val("")):
"lstpostdatebefore"==e&&(jQ("#lastPosted [id$='_after']").val(""),jQ("#last_post_month_before").val(c),jQ("#last_post_day_before").val(f),jQ("#last_post_year_before").val(a))});jQ(document).on("change","#registerationDate",function(){var a=jQ("#registerationDate").val(),c=a.split("/")[0],f=a.split("/")[1],a=a.split("/")[2],e=jQ("#registeredOn").val();"reg_date_after"==e?(jQ("#aftermonth").val(c),jQ("#afterday").val(f),jQ("#afteryear").val(a),jQ("#userRegisteredOn [id^='before']").val("")):"reg_date_before"==
e&&(jQ("#userRegisteredOn [id^='after']").val(""),jQ("#beforemonth").val(c),jQ("#beforeday").val(f),jQ("#beforeyear").val(a))});jQ(document).on("change","#lastVisit_Date",function(){var a=jQ("#lastVisit_Date").val(),c=a.split("/")[0],f=a.split("/")[1],a=a.split("/")[2],e=jQ("#lastvisitDate").val();"lastvisit_date_after"==e?(jQ("#lastvisit_month_after").val(c),jQ("#lastvisit_day_after").val(f),jQ("#lastvisit_year_after").val(a),jQ("#lastVisit [id$='_before']").val("")):"lastvisit_date_before"==e&&
(jQ("#lastVisit [id$='_after']").val(""),jQ("#lastvisit_month_before").val(c),jQ("#lastvisit_day_before").val(f),jQ("#lastvisit_year_before").val(a))});jQ(document).on("change","#showBirthDatepicker",function(){var a=jQ("#showBirthDatepicker").val(),c=a.split("/")[0],f=a.split("/")[1],a=a.split("/")[2],e=jQ("#birth_date").val();"birthdateafter"==e?(jQ("#birth_day_after_month").val(c),jQ("#birth_day_after_days").val(f),jQ("#birthday_after_year").val(a),jQ("#lastVisit [id^='birth_day_before_']").val("")):
"birthdatebefore"==e&&(jQ("#lastVisit [id^='birth_day_after_']").val(""),jQ("#birth_day_before_month").val(c),jQ("#birth_day_before_days").val(f),jQ("#birth_day_before_year").val(a))});jQ("#showBirthDatepicker").datepicker({startDate:global_hash.mindate_dob,endDate:global_hash.maxdate_dob,autoclose:!0});jQ("#lastVisit_Date").datepicker({startDate:global_hash.mindate,endDate:global_hash.maxdate,autoclose:!0});jQ("#daterange").change(function(){checkinputbox()})});
jQ(document).on("click","#advancedSearch",function(){window.location.href.match("/register/members")&&jQ("#advancedSearch").attr("href","/register/search")});function confirmDel(a){return a?confirm("This is the first post of the topic. Deleting the first post will cause the entire topic to be deleted.\n\nAre you sure you would like to continue?"):confirm("Are you sure you want to delete this post?")}
function checkinputbox(){"specificdate"==jQ("#daterange").val()?jQ("#customdates").show():jQ("#customdates").hide()}function countSelected(a,b,c,f){var e=0;if("select"==c)for(f=c=0;c<a.options.length;c++)a.options[c].selected&&f++,f>b&&(e=1,a.options[c].selected=!1);else for(a=jQ('[name="'+f+'"]'),f=c=0;c<a.length;c++)a[c].checked&&f++,f>b&&(e=1,a[c].checked=!1);1==e&&alert("You may only choose "+b+" options!!")}
function changememberSearchForm(){init_typeahead(jQ("#inline_search_box"));jQ("#basicSearch").val("members");jQ("#inlineSearchForm").attr("action","/register");jQ("#inline_search_box").attr("name","s_username")}function changeSearchForm(){destroy_typeahead(jQ("#inline_search_box"));jQ("#basicSearch").val("doSearch");jQ("#inlineSearchForm").attr("action","/search");jQ("#inline_search_box").attr("name","keywords")};wtbx.thread={getPostId:function(){var a={};jQ.each(document.location.search.substr(1).split("&"),function(b,c){var f=c.split("=");f[1]&&(a[f[0].toString()]=f[1].toString())});return a},scrollToUnreadPost:function(){var a=new wtbx.thread.getPostId;if(a.pid&&0<jQ("#post_row_"+a.pid).length){if(window.location!=window.parent.location==1)return jQ("#post_row_"+a.pid).offset().top;var b=parseInt(jQ(".header-wrapper").height())+parseInt(jQ(".secondary-header").height()),b=b+30;clearTimeout(jQ.data(this,
"startTimer"));jQ.data(this,"startTimer",setTimeout(function(){jQ("html, body").animate({scrollTop:jQ("#post_row_"+a.pid).offset().top-=b})},200));return""}},enableButtons:function(){0<jQ("#PostTopic").length?(jQ("#post_submit").removeAttr("disabled"),jQ("#previewpost_sbt").removeAttr("disabled"),0<jQ("#spell_check").length&&jQ("#spell_check").removeAttr("disabled"),jQ("#cancel_post").removeAttr("disabled")):0<jQ("#PostPrivateMessage").length?(jQ("#send_msg_button").removeAttr("disabled"),jQ("#preview_msg_button").removeAttr("disabled")):
0<jQ("#PostCalEvent").length?jQ("#post_event_buttton").removeAttr("disabled"):0<jQ("#PostEmail").length&&(jQ("#send_email_btn").removeAttr("disabled"),0<jQ("#spell_chk").length&&jQ("#spell_chk").removeAttr("disabled"))},checkcomposePost:function(){var a=getCookie("userid");jQ(document).on("click","[type= 'button'],[type= 'submit']",function(){var b=this.id;"previewpost_sbt"!=b&&"pollPreviewSbt"!=b||jQ("#postpreview").val("1");if("save_poll"==b)return validateForm(PostTopic,this);if("cancel_post"==
b){var c=jQ("#referral").val();jQ("#post_submit").attr("disabled",!0);jQ("#previewpost_sbt").attr("disabled",!0);window.location.href=c}if(!a&&("post_submit"==b||"previewpost_sbt"==b))return check_user_email()})},removeParamFromURL:function(a,b){var c=b.split("?")[0],f,e=[];f=-1!==b.indexOf("?")?b.split("?")[1]:"";if(""!==f){for(var e=f.split("&"),d=e.length-1;0<=d;--d)f=e[d].split("=")[0],f===a&&e.splice(d,1);c=c+"?"+e.join("&")}return c},getParameterByName:function(a,b){b||(b=window.location);var c=
RegExp("[?&]"+a+"=([^&]*)").exec(b);return c&&decodeURIComponent(c[1].replace(/\+/g," "))}};var httpRatingReq,httpRequest,postid,previoustrail=0,cssclass="",main_post_table,table_rows,post_rows;
jQ(document).ready(function(){calculate_time_zone();jQ("img").each(function(a,b){if(!jQ(b).parent("a").length){var c=jQ(b).attr("src"),e=jQ(b).attr("rel");if(e){jQ(b).removeAttr("rel");var f=document.createElement("a");f.setAttribute("href",c);f.setAttribute("rel",e);jQ(b).wrap(f)}}});jQ("[name= 'name']").click(function(){"Unregistered"==this.value&&(this.value="")}).blur(function(){""==this.value&&(this.value="Unregistered")});jQ("[name= 'message']").click(function(){"Write a reply..."==jQ(this).attr("placeholder")&&
jQ(this).attr("placeholder","")}).blur(function(){""==jQ(this).attr("placeholder")&&jQ(this).attr("placeholder","Write a reply...")});0<jQ("#forums #select_allbox").length&&activateCheckboxes(document.getElementsByName("unsubscribe_forums"),-1);if(0<jQ("[id^='reload_captcha']").length)jQ(document).on("click","[id^='reload_captcha']",function(){var a=jQ("#quickEditorTop").val();"reload_captcha"==jQ(this).closest("a").attr("id")&&(a="");change_image(a);return!1});if(0<jQ("#dissociate").length)jQ(document).on("click",
"#dissociate",function(){var a=jQ("#userid").val();window.location="/register?action=fb_unlink_account&userid="+a});/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(jQ("[title]").removeAttr("title").removeAttr("data-original-title"),jQ(".modal").on("show.bs.modal",function(){jQ("[title]").removeAttr("title").removeAttr("data-original-title")}));redirectEmbedURL();jQ(".reply-menu a").click(function(a){a.stopPropagation});0<jQ("#delete_poll").length&&jQ("#delete_poll").click(function(){return confirm("Are you sure to delete this poll?")?
!0:!1});if(0<jQ("#edit_post_request, #search_edit_post").length)jQ(document).on("click","#edit_post_request, #search_edit_post",function(){var a=jQ(this).attr("data-pid");jQ("#posttoggle_"+a).dropdown("toggle");return display_editor(jQ(this).attr("data-pid"),jQ(this).attr("data-easycode"),jQ(this).attr("data-smilie"),jQ(this).attr("data-html_filter"),jQ(this).attr("data-spellcheck"),jQ(this).attr("data-wysiwyg"),jQ(this).attr("data-toolbarCompatible"),jQ(this).attr("data-tinymce-focus"),jQ(this).attr("data-threadid"),
jQ(this).attr("data-pending_post"),jQ(this).attr("data-forumid"))});if(0<jQ("#search_delete_post").length)jQ(document).on("click","#search_delete_post",function(){return confirmDel(jQ(this).attr("data-delete-flag"))});if(0<jQ("#approve_request").length)jQ(document).on("click","#approve_request",function(){approve_request(this,jQ(this).attr("data-pid"));return!1});if(0<jQ("#delete_post_request, [id^='delete_pending_'],[id^='delete_first_post_']").length)jQ(document).on("click","#delete_post_request, [id^='delete_pending_'], [id^='delete_first_post_']",
function(){delete_request(jQ(this).attr("data-pid"),jQ(this).attr("data-msg-flag"));return!1});0<jQ("#delete_topic").length&&jQ("#delete_topic").click(function(){return confirm("Are you sure you would like to delete this topic?")?!0:!1});jQ(document).on("click","#guest_user_create_account, #guest_user_reply, #guest_user_vote",function(){var a,b=this.id;"guest_user_create_account"==b?a="Create an account or log in to compose a post.":"guest_user_reply"==b?a="Create an account or log in to start a topic.":
"guest_user_vote"==b&&(a="Create an account or log in to vote.");jQ("#form-dialog #myModalLabel").text(a)});if(0<jQ("#posts-menu").length){var a;jQ(document).on("click","[name= 'pid']",function(){var b=this.id,c=jQ("[name= 'pid']");activateCheckboxes(c,1,"pid");a=getTotalChecked("pid","",b);displayOptionsPopoup(a)});jQ(document).on("click","#moveposts",function(){if(0==a)return alert("No posts have been selected."),!1;if(!confirm(1==a?"Move the post?":"Move the "+a+" selected posts?"))return!1;jQ("#firstpid").is(":checked")&&
jQ("#firstpid_move").val(jQ("#firstpid").val());a&&jQ('input[name="action"]').val("moveposts");document.posts.submit()});jQ(document).on("click","#deleteposts",function(){if(0==a)return alert("No posts have been selected."),!1;if(jQ("#firstpid").is(":checked")){var b="Deleting the first post will cause the entire topic to be deleted.\n\nAre you sure you would like to continue?";jQ("#firstPid").val(jQ("#firstpid").val())}else b=1==a?"Delete the post?":"Delete "+a+" selected posts?";if(!confirm(b))return jQ("#firstPid").val(""),
!1;jQ("#post_delete_action").val("delete");document.posts.submit()})}0<jQ("#topics-menu").length&&jQ("#lock, #unlock, #pin, #unpin, #move, #delete, #unsubscribe").click(function(){a=getTotalChecked();if(0==a)return alert("No threads have been selected."),!1;var b=jQ(this).attr("id");if("delete"==b&&!confirm(1==a?"Delete the topic?":"Delete "+a+" selected topics?"))return!1;"unsubscribe"==b?jQ('input[name="mass_unsubscribe"]').val(b):jQ('input[name="action"]').val(b);document.posts.submit()});jQ("#follow_forum,#follow_daily,#follow_weekly,#submenu_follow_forum").click(function(){"follow_weekly"==
jQ(this).attr("id")?(subscribe_request(2),jQ("#follow_daily i").addClass("hidden"),jQ("#follow_weekly i").removeClass("hidden")):(subscribe_request(1),jQ("#follow_daily i").removeClass("hidden"),jQ("#follow_weekly i").addClass("hidden"));jQ("#follow_forum").addClass("hidden");jQ(".follow-tools").removeClass("hidden");jQ("#submenu_follow_forum").addClass("hidden");jQ("#submenu_unfollow_forum").removeClass("hidden")});jQ("#unfollow_forum, #submenu_unfollow_forum").click(function(){unsubscribe_request();
jQ(".follow-tools").addClass("hidden");jQ("#follow_forum").removeClass("hidden");jQ("#submenu_unfollow_forum").addClass("hidden");jQ("#submenu_follow_forum").removeClass("hidden")});0<jQ("#move_delete_posts").length&&jQ("#move_delete_posts").change(function(){setTimeout(function(){a=getTotalChecked();if(""==document.posts.action.value)return!1;if(0==a)return alert("No posts have been selected."),document.posts.action.selectedIndex=0,!1;if("moveposts"==document.posts.action.value){var b=1==a?"Move the post?":
"Move the "+a+" selected posts?";if(!confirm(b))return document.posts.action.selectedIndex=0,!1}if("delete"==document.posts.action.value&&(b=jQ("#firstpid").is(":checked")?"Deleting the first post will cause the entire topic to be deleted.\n\nAre you sure you would like to continue?":1==a?"Delete the post?":"Delete "+a+" selected posts?",!confirm(b)))return document.posts.action.selectedIndex=0,!1;document.posts.submit()},100)});0<jQ("#move_delete_threads").length&&jQ("#move_delete_threads").change(function(){setTimeout(function(){a=
getTotalChecked();if(""==document.posts.action.value)return!1;if(0==a)return alert("No topics have been selected."),document.posts.action.selectedIndex=0,!1;if("delete"==document.posts.action.value&&!confirm(1==a?"Delete the topic?":"Delete "+a+" selected topics?"))return document.posts.action.selectedIndex=0,!1;document.posts.submit()},100)});if(global_hash.sso_disabled)jQ(document).on("click",".login_dialog",function(){jQ("#user_login").modal("show");return!1});jQ(document).on("click","[id^='first_post_vote_']",
function(){var a=getCookie("userid"),b;b=this.id.replace(/first_post_vote_/ig,"");var c=jQ(this).attr("data-thread-userid"),e=jQ(this).attr("data-toggle");if(a)c==a?alert("Sorry! You can\u2019t like your own topic."):jQ.ajax({type:"POST",url:"/post",data:{action:"vote_post",vote:"up",pid:b,thread_userid:c,post_userid:c,ajax_request:1,type:"json"},success:function(a){"undefined"!=typeof a.message?alert(a.message):jQ("#first_post_vote_"+b).hasClass("voted-yes")?(jQ("#first_post_vote_"+b).removeClass("voted-yes"),
jQ("#first_post_vote_"+b+" span").text(parseInt(jQ("#first_post_vote_"+b+" span").text())-1)):(jQ("#first_post_vote_"+b).addClass("voted-yes"),jQ("#first_post_vote_"+b+" span").text(parseInt(jQ("#first_post_vote_"+b+" span").text())+1))},error:function(a,b,c){alert("An error occurred while processing your request.\n"+b+": "+c)}});else{if("modal"!=e)return jQ("#user_login").modal("show"),!1;jQ("#form-dialog #myModalLabel").text("Create an account or log in to like a post.")}});jQ(document).on("click",
"[id^='post_vote_']",function(){var a=getCookie("userid"),b,c,e=this.id;b=e.replace(/post_vote_up_|post_vote_down_/ig,"");var f=jQ(this).attr("data-thread-userid"),l=jQ(this).attr("data-post-userid"),p=jQ(this).attr("data-vote-userid");e.match(/post_vote_up/)?c="up":e.match(/post_vote_down/)&&(c="down");if(a)l==a?"down"==c?alert("Sorry! You can\u2019t dislike your own post."):alert("Sorry! You can\u2019t like your own post."):jQ.ajax({type:"POST",url:"/post",data:{action:"vote_post",vote:c,pid:b,
thread_userid:f,ajax_request:1,type:"json"},success:function(a){if("undefined"!=typeof a.message)alert(a.message);else{var d;p?(a=parseInt(jQ("#"+p+"_"+b+" #total_vote_up_count_"+b).text()),d=parseInt(jQ("#"+p+"_"+b+" #total_vote_down_count_"+b).text())):(a=parseInt(jQ("#total_vote_up_count_"+b).text()),d=parseInt(jQ("#total_vote_down_count_"+b).text()));if(0<jQ("[id^='like']").length){var f=parseInt(jQ("#span_total_vote_up_count_"+b).html());"down"==c?jQ("#dislike_"+b).hasClass("voted")?(--d,jQ("#total_vote_down_count_"+
b).html(d),jQ("#dislike_"+b).removeClass("voted")):(jQ("#like_"+b).hasClass("voted")&&(--a?(jQ("#total_vote_up_count_"+b).html(a).removeClass("hidden"),jQ("#span_total_vote_up_count_"+b).addClass("hidden")):(jQ("#span_total_vote_up_count_"+b).html(a).removeClass("hidden"),jQ("#total_vote_up_count_"+b).addClass("hidden"))),d+=1,jQ("#total_vote_down_count_"+b).html(d),jQ("#dislike_"+b).addClass("voted"),jQ("#like_"+b).removeClass("voted")):"up"==c&&(jQ("#like_"+b).hasClass("voted")?(--a?(jQ("#total_vote_up_count_"+
b).html(a).removeClass("hidden"),jQ("#span_total_vote_up_count_"+b).addClass("hidden")):(jQ("#span_total_vote_up_count_"+b).html(a).removeClass("hidden"),jQ("#total_vote_up_count_"+b).addClass("hidden")),jQ("#like_"+b).removeClass("voted")):(0<d&&jQ("#dislike_"+b).hasClass("voted")&&(--d,jQ("#total_vote_down_count_"+b).html(d)),a=jQ("#total_vote_up_count_"+b).hasClass("hidden")?f+1:a+1,jQ("#total_vote_up_count_"+b).html(a).removeClass("hidden"),jQ("#span_total_vote_up_count_"+b).addClass("hidden"),
jQ("#like_"+b).addClass("voted"),jQ("#dislike_"+b).removeClass("voted")))}else{var l,m,n,q,C,f="up"==c?"down":"up";p?(l=jQ("#"+p+"_"+b+" #"+e),l.html(),m=jQ("#"+p+"_"+b+" #total_vote_down_count_"+b),n=jQ("#"+p+"_"+b+" #total_vote_up_count_"+b),q=jQ("#"+p+"_"+b+" #post_vote_"+f+"_"+b),C=jQ("#"+p+"_"+b+" #span_total_vote_up_count_"+b)):(l=jQ("#"+e),m=jQ("#total_vote_down_count_"+b),n=jQ("#total_vote_up_count_"+b),q=jQ("#post_vote_"+f+"_"+b),C=jQ("#span_total_vote_up_count_"+b));f=parseInt(C.html());
"down"==c?l.hasClass("voted-no")?(m.text(d-1),l.removeClass("voted-no")):(q.hasClass("voted-yes")&&(--a?(n.text(a).removeClass("hidden"),C.addClass("hidden")):(C.html(a).removeClass("hidden"),n.addClass("hidden")),q.removeClass("voted-yes")),d+=1,m.text(d),l.addClass("voted-no")):"up"==c&&(l.hasClass("voted-yes")?(--a,n.text(a),l.removeClass("voted-yes"),0==a&&(n.addClass("hidden"),C.html(a).removeClass("hidden"))):(0<d&&q.hasClass("voted-no")&&(--d,m.text(d),q.removeClass("voted-no")),a=n.hasClass("hidden")?
f+1:a+1,n.text(a).removeClass("hidden"),C.addClass("hidden"),l.addClass("voted-yes")))}}},error:function(a,b,c){alert("An error occurred while processing your request.\n"+b+": "+c)}});else{var n,q,r;"down"==c?(n="down_",q="Dislike this post?",r="Create an account or log in to dislike a post."):"up"==c&&(n="up_",q="Like this post?",r="Create an account or log in to like a post.");0<jQ("#user_vote_"+n+b).length?(0==jQ("#user_vote_"+n+b).find(".dropdown-menu").length&&jQ("#user_vote_"+n+b).append(jQ("#dropdown_content").html()),
jQ("#user_vote_"+n+b+" #vote_text").text(q),jQ("#post_vote_"+n+b).addClass("dropdown-toggle"),jQ(".dropdown-toggle").dropdown()):jQ("#form-dialog #myModalLabel").text(r)}});0<jQ("[id^='total_vote_up_count_']").length&&jQ("[id^='total_vote_up_count_']").click(function(){var a;a=this.id.replace(/total_vote_up_count_/ig,"");jQ("#who_liked_dialog").load("/post?action=votedUsersList&pid="+a,function(){var b=jQ("#who_liked_dialog li").length;jQ("#total_vote_up_count_"+a).html(b);changeTitleByClass();jQ("#who_liked_dialog").modal("show")});
return!1});jQ("#form-dialog").on("hidden.bs.modal",function(){jQ("#form-dialog #myModalLabel").text("You need to be logged in to reply to a topic.")});if(0<jQ("[id^='reply_with_quote_']").length)jQ(document).on("click","[id^='reply_with_quote_']",function(){var a=jQ(this).attr("data-pid"),b=jQ('input[name ="threadid"]').val();if("modal"==jQ(this).attr("data-toggle"))return jQ("#form-dialog").modal("show"),jQ("#form-dialog #myModalLabel").text("Create an account or log in to reply with quote."),!1;
jQ.ajax({type:"POST",url:"/post",data:{action:"printadd",pid:a,id:b,ajax_quote_reply:"1"},success:function(a){"undefined"!=typeof tinyMCE&&("undefined"==typeof tinyMCE.get("message")?(startEditor("message"),jQ("#reply_options").show(),jQ("#message").val(a.message).focus(),jQ("html,body").animate({scrollTop:jQ("#message").offset().top+"px"})):(tinyMCE.get("message").setContent(tinyMCE.get("message").getContent()+a.message),jQ("html,body").animate({scrollTop:jQ("#message_tbl").offset().top+"px"})))},
error:function(a,b,c){alert("An error occurred while processing your request.\n"+b+": "+c)}})});jQ("#PostPrivateMessage,#PostCalEvent,#PostTopic,#PostEmail").on("submit",function(a){a=jQ(this);if(!0===a.data("submitted"))return!1;a.data("submitted",!0);"PostTopic"==a.attr("id")?(jQ("#post_submit").attr("disabled",!0),jQ("#previewpost_sbt").attr("disabled",!0),0<jQ("#spell_check").length&&jQ("#spell_check").attr("disabled",!0),jQ("#cancel_post").attr("disabled",!0),""!=jQ("#poll_question").val()&&
jQ("#pollSaveFromComposeThread").val("1")):"PostPrivateMessage"==a.attr("id")?(jQ("#send_msg_button").attr("disabled",!0),jQ("#preview_msg_button").attr("disabled",!0)):"PostCalEvent"==a.attr("id")?jQ("#post_event_buttton").attr("disabled",!0):"PostEmail"==a.attr("id")&&(jQ("#send_email_btn").attr("disabled",!0),0<jQ("#spell_chk").length&&jQ("#spell_chk").attr("disabled",!0))});0<jQ("#formEditPoll").length&&jQ("#pollPreviewSbt").click(function(){jQ("#formEditPoll").attr("action","/poll/pollpreview");
jQ("#formEditPoll").removeAttr("onsubmit")});document.getElementById("main_posts_table")&&(main_post_table=document.getElementById("main_posts_table"),table_rows=main_post_table.rows.length,jQ("#first_post_ad").length&&table_rows--);jQ("#main_posts_container").length&&(post_rows=jQ("[id^='post_row_']").length);""!=jQ("#poll_timeout_date").val()&&jQ('[name= "timeout_days"]').val("");jQ('input[name ="pollvotesave"]').click(function(){if(jQ(this).attr("data-locked"))return showFieldError(jQ('input[name ="pollvotesave"]'),
"You cannot vote on a locked topic."),jQ(this).tooltip("show"),!1;var a=jQ("input:radio[name='vote_option']").length,b=jQ("input:checkbox[name='vote_option']").length;if(a=a?a:b){for(b=0;b<a;b++)if(1==document.getElementById(b).checked)return!0;alert("Please select at least one poll option.");return!1}});changeTitleByClass();0<jQ("[id^='reply_count_']").length&&jQ("[id^='reply_count_']").click(function(){var a=jQ(this).attr("data-threadid"),b=jQ(this).attr("data-forum");jQ("#who_posted_dialog").load("/?action=who_posted&id="+
a+"&forum="+b,function(){changeTitleByClass();jQ("#who_posted_dialog").modal("show")})});(0<jQ("#showAllForumsTopics").length||0<jQ("#topics").length)&&activateCheckboxes(document.posts.id,-1);if(0<jQ("#posts").length){var b=jQ("[name= 'pid']");activateCheckboxes(b,2,"pid")}0<jQ("#threadsResult").length&&0<jQ(".entry-checkbox").length&&activateCheckboxes(document.posts.id,-1);wtbx.thread.enableButtons();jQ("form#PostTopic").length&&wtbx.thread.checkcomposePost();jQ("#add_new_poll").click(function(){var a=
jQ("#poll_option_container input[name=options]").length+1;jQ("#poll_options .input-group-addon").text(a);jQ("#poll_options a").attr("id","delete_poll_option_"+a).attr("data-opt-num",a);jQ("#poll_options .poll-option").attr("id","poll_option_"+a);jQ("#poll_option_container").append(jQ("#poll_options").html())});jQ(document).on("click","[id^='delete_poll_option_']",function(){add_event_delete_poll(this)});jQ("#collapse-post").addClass("collapsed");jQ("#collapse-post").on("click",function(){jQ(this).hasClass("collapsed")?
jQ(this).find("i").html("Hide full post &raquo;"):(jQ(this).find("i").html("Show full post &raquo;"),jQ("#collapse-post").addClass("collapsed"))});jQ("[id^='message']").on("focus",function(){var a=jQ(this).attr("id").substring(7);jQ("#reply_options"+a).show();jQ(".notify-me").show()});jQ(".reply-menu a").click(function(a){a.stopPropagation});0<jQ("#subscribe_topic").length&&(jQ("#follow_topic, #submenu_follow_topic").click(function(){getCookie("userid")?(subscribe_request(),jQ("#follow_topic").addClass("hidden"),
jQ("#unfollow_topic,#topic_following").removeClass("hidden"),jQ("#submenu_follow_topic").addClass("hidden"),jQ("#submenu_unfollow_topic").removeClass("hidden"),jQ("input[name^='subscribe']").each(function(){jQ(this).prop("checked","checked")})):jQ("#form-dialog #myModalLabel").text("You need to be logged in to follow a topic.")}),jQ("#unfollow_topic, #submenu_unfollow_topic").click(function(){unsubscribe_request();jQ("#topic_following,#unfollow_topic").addClass("hidden");jQ("#follow_topic").removeClass("hidden");
jQ("#submenu_unfollow_topic").addClass("hidden");jQ("#submenu_follow_topic").removeClass("hidden");jQ("input[name^='subscribe']").each(function(){jQ(this).prop("checked","")})}));0<jQ("#subscribe_topic").length&&(jQ.fn.editable.defaults.mode="inline",jQ("#editable_subjuct").editable({type:"text",toggle:"manual",showbuttons:!0,onblur:"ignore",success:function(a,b){var c=jQ("#topic_id").val(),e=jQ("#post_id").val(),f=jQ("#lastpostid").val(),l=jQ("#subscribe_topic").attr("data-forum"),p=b.replace(/&/g,
"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;");if(!p)return alert("You must enter a subject for your message."),!1;jQ.ajax({type:"POST",url:"/post/inline_topic_edit",data:{ajax_request:"1",pid:e,topic_id:c,subject:p,lastpostid:f,forum:l},success:function(a){history.pushState({},"",a.url)},error:function(a,b,c){alert("An error occurred while processing your request.\n"+b+": "+c)}})}}));0<jQ("#editable_subjuct").length&&jQ("#editable_subjuct").click(function(a){a.preventDefault();
jQ("html, body").animate({scrollTop:0},"fast");return!1});0<jQ("#editTopic").length&&jQ("#editTopic").click(function(a){a.preventDefault();jQ("#editable_subjuct").editable("toggle");jQ(".input-sm").attr("maxlength","150")});jQ(document).on("click","input[name^='subscribe']",function(){var a=jQ(this).is(":checked");jQ("input[name^='subscribe']").each(function(){jQ(this).prop("checked",a)})});jQ(".openShareDialog").click(function(){var a=this.id,b,c;b=jQ("#construct_url").val()||"/"+jQ(this).attr("data-thread-url");
c=jQ("#post_message_"+a).html().replace(/\<[^\>]*\>/gi,"").substr(0,200);a=window.location.protocol+"//"+window.location.hostname+"/post"+b+"?pid="+a;jQ("#fb_share").attr("href","https://www.facebook.com/sharer/sharer.php?u="+a+"&description="+c+"...");jQ("#link_to_post").val(a);jQ("#twitter_share").attr("href","https://twitter.com/share?url="+a);jQ("#share-modal").modal("show")});if(0<jQ("#topic_fb_share").length)jQ(document).on("click","#topic_fb_share",function(){var a=jQ("#construct_url").val(),
b=jQ("#topic_fb_share").attr("data-pid"),a=window.location.protocol+"//"+window.location.hostname+"/post"+a,b=jQ("#post_message_"+b).html().replace(/\<[^\>]*\>/gi,"").substr(0,200);FB.ui({method:"share",display:"popup",mobile_iframe:!0,href:a,description:b},function(a){})});jQ(document).on("click","#moveSelectedPosts, #move_posts",function(a){0==check_moveposts("title")&&a.preventDefault()});if(0<jQ("#forum_header").length&&!wtbx.forum.isMobile()){var c=jQ("#slide-panel"),f=parseInt(jQ("#forum_header").offset().top),
e=0;jQ(window).scroll(function(){var a=jQ(window).scrollTop();a>f?(jQ("#forum_header").addClass("fixed-header"),jQ("#forum_subheader").addClass("fixed-header")):(jQ("#forum_header").removeClass("fixed-header"),jQ("#forum_subheader").removeClass("fixed-header"),c.removeClass("fixed-panel"));0<jQ(".fixed-header").length&&a>e&&c.addClass("fixed-panel");e=a;return!1})}if(0<jQ("#forum-title").length)jQ("#forum-title").on("click",function(){jQ("html, body").animate({scrollTop:0},"fast");return!1});if(0<
jQ("#back_arrow_topic").length)jQ("#back_arrow_topic").on("click",function(){history.back()});if(0<jQ("#backArrowPost").length)jQ("#backArrowPost").on("click",function(){var a=jQ("#refURL").val(),b=jQ("#topic_id").val();if("undefined"!=typeof a&&a){var c=getCookie("referralThreads");c&&"undefined"!=typeof c?(c=JSON.parse(c),c[b]?(delete c[b],setCookie("referralThreads",JSON.stringify(c),0,1),window.location=a):window.location="/categories"):history.back()}else history.back()});jQ("#cancelMove").on("click",
function(){"parentIFrame"in window?messageToParent(1):history.back()})});function displayOptionsPopoup(a){var b=jQ(".entry-checkbox"),c=jQ("#"+b.attr("data-related-item"));jQ("#checkedBoxes").html(a+" "+(1<a?"posts":"post")+" selected");b.is(":checked")||a?c.addClass("open"):c.removeClass("open")}
function add_event_delete_poll(a){a=jQ(a).attr("data-opt-num");jQ("#poll_option_"+a).remove();var b=1;jQ("#poll_option_container .poll-option").each(function(){var a=this.id,f=a.replace(/poll_option_/ig,"");jQ("#"+a+" .input-group-addon").text(b);jQ("#delete_poll_option_"+f).attr("id","delete_poll_option_"+b).attr("data-opt-num",b);a!="poll_option_"+b&&jQ("#"+a).attr("id","poll_option_"+b);b+=1})}
function subscribe_topic(){jQ(".subscribe").is(":checked")?jQ(".subscribe").val()||(jQ("#follow_topic").addClass("hidden"),jQ("#unfollow_topic").removeClass("hidden"),jQ("#topic_following").removeClass("hidden"),subscribe_request()):jQ(".subscribe").val()&&(jQ("#topic_following").addClass("hidden"),jQ("#unfollow_topic").addClass("hidden"),jQ("#follow_topic").removeClass("hidden"),unsubscribe_request())}
function changeTitleByClass(){jQ(".deleted_username").length&&jQ(".deleted_username").each(function(){jQ(this).addClass("error-tooltip").attr({"data-original-title":"This user has been deleted.","data-toggle":"tooltip","data-placement":"bottom"});jQ(this).tooltip()});hoverCard();jQ("a.email_user").attr("title","Email user")}var deleted_hash;
function redirectEmbedURL(){var a=window.location!=window.parent.location,b="",b=getCookie("less_variables_colors"),c;c=wtbx.thread.getParameterByName("updateTheme",window.document.location.href);if(!a&&global_hash.forum_embed_url&&!b&&!c&&(a=jQ(location).attr("href"),b=jQ(location).attr("protocol"),c=jQ(location).attr("hostname"),a=a.replace(b+"//"+c,""))){b=global_hash.forum_embed_url;if("/"!=a||-1<a.indexOf("?p=")||-1<a.indexOf("&p="))b=b+"?p="+encodeURIComponent(a);window.top.location=b;return!1}}
function confirmDelete(a){return parseInt(a)?confirm("Deleting the first post will cause the entire topic to be deleted.\n\nAre you sure you would like to continue?"):confirm("Delete this post?")}
function delete_request(a,b){if(confirmDelete(b)){postid=a;var c="";jQ("#postDelete_"+postid).attr("data-post-delete")&&(c=jQ("#postDelete_"+postid).attr("data-post-delete"),id=jQ("#postDelete_"+postid).attr("data-threadid"),trail=jQ("#postDelete_"+postid).attr("data-trail"),forum=jQ("#postDelete_"+postid).attr("data-forumid"),query="");jQ.ajax({type:"POST",url:"/post/ajaxdeletePost",data:"id="+id+"&trail="+trail+"&pid="+postid+"&forum="+forum+"&ajax_request=1"+query+"&post_deletion="+c,success:function(a){a.success?
(a=jQ("[name= 'pid']"),"1"==a.length?jQ("#posts_list").remove():(jQ("#"+postid).remove(),jQ("#totalpending_post").html(--a.length)),wtbx.approvalQueue.updatePendingCount(1)):_postdeleteHandler(a)},error:function(a,b,c){alert("An error occurred while processing your request.\n"+b+": "+c)}})}}
function _postdeleteHandler(a){if(a.getElementsByTagName("error")[0])return a.getElementsByTagName("error")[0].firstChild.nodeValue&&alert(a.getElementsByTagName("error")[0].firstChild.nodeValue.replace(/<\S[^><]*>/g,"")),a.getElementsByTagName("redirect_url")[0]&&(window.location=a.getElementsByTagName("redirect_url")[0].firstChild.nodeValue),!1;jQ("#tr_"+postid).length&&(jQ("#tr_"+postid).delay(1E3).fadeOut(800),_remove_post());jQ("#post_row_"+postid).length&&(jQ("#post_row_"+postid).delay(1E3).fadeOut(800),
post_rows--);previoustrail=trail-replies_perpage;var b=a.getElementsByTagName("pagination")[0].firstChild.nodeValue;if(b)if(jQ("#main_posts_container").length){if(a.getElementsByTagName("postid")[0]){var c=a.getElementsByTagName("postid")[0].firstChild.nodeValue,f=a.getElementsByTagName("data_coloumn_1")[0].firstChild.nodeValue;a.getElementsByTagName("data_coloumn_2");a.getElementsByTagName("first_coloumn_id");a.getElementsByTagName("second_coloumn_id");var e=document.createElement("div"),d=c.split("_");
e.id=c;e.style.display="none";e.innerHTML=f;jQ("#main_posts_container").append(e);jQ("#"+c).delay({duration:1,from:0,to:2}).fadeIn(800);0<jQ("#post_list_pending_"+d[2]).length&&(e.className="pending-post");dateMomentjs();jQ("[id^='pagination']").html(b);1>post_rows&&(window.location="/post?id="+id+"&trail="+previoustrail+query)}}else{if(a.getElementsByTagName("postid")[0]){c=a.getElementsByTagName("postid")[0].firstChild.nodeValue;e=a.getElementsByTagName("data_td_1")[0].firstChild.nodeValue;f=a.getElementsByTagName("data_td_2")[0].firstChild.nodeValue;
d=a.getElementsByTagName("td1_id")[0].firstChild.nodeValue;a=a.getElementsByTagName("td2_id")[0].firstChild.nodeValue;var g=document.createElement("tr");g.id=c;g.style.display="none";var h=document.createElement("td");h.innerHTML=e;h.id=d;h.setAttribute("vAlign","top");h.setAttribute("width","19%");e=document.createElement("td");e.innerHTML=f;e.id=a;e.setAttribute("vAlign","top");e.style.height="100%";g.appendChild(h);g.appendChild(e);main_post_table.appendChild(g);_css_walk();jQ("#"+c).delay({duration:1,
from:0,to:2}).fadeIn(800);setTimeout("_css_walk()",2E3);document.getElementById("pagination").innerHTML=b;1>table_rows&&(window.location="/post?id="+id+"&trail="+previoustrail+query)}}else window.location="/?forum="+forum}function _switchclass(){return cssclass="table_row"==cssclass?"alternate_table_row":"table_row"}function remove_row(){var a=document.getElementById("tr_"+postid);main_post_table.removeChild(a)}
function _remove_post(){deleted_hash=document.getElementById("tr_"+postid).getElementsByTagName("td")[0].id.split("_");table_rows--;setTimeout("remove_row()",2E3);cssclass="";var a=0,a=main_post_table.rows.length,b=trail-replies_perpage+1,a=parseInt(a)+parseInt(b);document.getElementById("td1_"+deleted_hash[1]).id="";document.getElementById("td2_"+deleted_hash[1]).id="";for(document.getElementById("postcount_"+deleted_hash[1]).id="";b<=a;b++)if(document.getElementById("td1_"+b)){var c=Array(2);c[0]=
"postcount";c[1]=parseInt(b);var f=document.getElementById("postcount_"+c[1]);if(f&&parseInt(deleted_hash[1])<parseInt(c[1])){f.id=c[0]+"_"+(parseInt(c[1])-1);var f=document.getElementById("td1_"+c[1]),e=document.getElementById("td2_"+c[1]);f.id="td1_"+(parseInt(c[1])-1);e.id="td2_"+(parseInt(c[1])-1);document.getElementById(c[0]+"_"+(parseInt(c[1])-1)).firstChild.data="#"+(parseInt(c[1])-1);f=document.getElementById(c[0]+"_"+(parseInt(c[1])-1)).getAttribute("href").split("postcount=");document.getElementById(c[0]+
"_"+(parseInt(c[1])-1)).setAttribute("href",f[0]+"postcount="+(parseInt(c[1])-1))}}}function _css_walk(){var a=0;cssclass="";a=main_post_table.rows.length;for(i=0;i<a;i++)main_post_table.rows[i]&&(main_post_table.rows[i].className=_switchclass())}var httpReq,httpImgReq,clicked;
function add_request(a){a||(a="");jQ("#reply_submit").length&&(jQ(this).attr("disabled",!0),"Post"==jQ("#reply_submit").val()&&(clicked="Post"));jQ("#quick_postprev").length&&jQ("#quick_postprev").attr("disabled",!0);if(jQ("#main_posts_container").length&&!is_last_page)return jQ("#quick_reply_action").val("addmessage"),!0;if(is_last_page&&clicked==document.PostTopic.submitbutton.value){var b,c=0;"undefined"!=typeof tinyMCE?(b=tinyMCE.get("message"+a).getContent(),b=cleanEditorHtml(b),c=1):b=jQ("#message"+
a).val();if(!b)return alert("You must enter a message to post."),!1;jQ("#attachment_list_"+a).html("");var f=document.PostTopic.id.value,e=document.PostTopic.trail.value,d=document.PostTopic.forum.value,g=document.PostTopic.done.value,h=document.PostTopic.thread_userid.value,k=document.PostTopic.threadid.value,m=jQ("#attachment_ids"+a).val(),l=jQ("#uncheck_attachment_ids"+a).val(),p=jQ('input[name="timestamps"]').val(),n=jQ("#publish_to_fb").prop("checked")?"checked":"",q=jQ('textarea[name="comments_0"]').val();
b=encodeURIComponent(b);b="id="+f+"&adv_toolbar="+c+"&trail="+e+"&reply=1&forum="+d+"&ajax_request=1&message="+b+"&done="+g+"&thread_userid="+h+"&threadid="+k+"&attachment_ids="+m+"&uncheck_attachment_ids="+l+"&timestamps="+p+"&publish_to_fb="+n+"&comments_0="+q;jQ("#guestName"+a).length&&(b+="&name="+jQ("#guestName"+a).val());document.PostTopic.code&&(c=jQ("#captchaCode"+a).val()||document.PostTopic.code.value,f=jQ("#captcha_md5sum"+a).val()||document.PostTopic.md5sum.value,b=b+"&code="+c+"&md5sum="+
f,document.PostTopic.code.value="",document.PostTopic.md5sum.value="");jQ.ajax({type:"POST",url:"/post/ajaxReply",data:b,success:function(b){_postHandler(b,a);jQ("#attachment_list"+a).html("");prettyPrint()},error:function(a,b,c){alert("An error occurred while processing your request.\n"+b+": "+c)}});return!1}if(!jQ("#main_posts_container").length)return clicked==document.PostTopic.sbtpreview.value&&jQ("#more_reply_opt").val("1"),!0}
function _postHandler(a,b){jQ("#reply_submit").length&&jQ(this).attr("disabled",!1);jQ("#quick_postprev").length&&jQ("#quick_postprev").attr("disabled",!1);if(a){if(a.getElementsByTagName("error")[0]){var c=a.getElementsByTagName("error")[0].firstChild.nodeValue;if(c){c.match("Thank you for your post! Your post is currently being reviewed and will be displayed on the forum once it is approved.")&&("undefined"!=typeof tinyMCE?tinyMCE.activeEditor.setContent(""):jQ("textarea#message"+b).val(""));if(c.match("Please complete the image verification below.")||
c.match("Incorrect verification code."))change_image(b),jQ("#showCaptcha"+b).removeClass("hidden"),jQ("#captchaCode"+b).focus();alert(c.replace(/<\S[^><]*>/g,""))}return!1}"undefined"!=typeof tinyMCE?tinyMCE.activeEditor.setContent(""):jQ("textarea#message"+b).val("");if(jQ("#main_posts_container").length){if(a.getElementsByTagName("postid")[0]){var c=a.getElementsByTagName("postid")[0].firstChild.nodeValue,f=a.getElementsByTagName("data_coloumn_1")[0].firstChild.nodeValue,e=document.createElement("div");
e.id=c;e.style.display="none";e.innerHTML=f;post_rows++;jQ("#main_posts_container").append(e);jQ("#"+c).delay({duration:1,from:0,to:2}).fadeIn(800);0<jQ("#showCaptcha"+b).length&&jQ("#showCaptcha"+b).addClass("hidden")}}else if(a.getElementsByTagName("postid")[0]){var c=a.getElementsByTagName("postid")[0].firstChild.nodeValue,d=a.getElementsByTagName("data_td_1")[0].firstChild.nodeValue,f=a.getElementsByTagName("data_td_2")[0].firstChild.nodeValue,g=a.getElementsByTagName("td1_id")[0].firstChild.nodeValue,
e=a.getElementsByTagName("td2_id")[0].firstChild.nodeValue,h=document.createElement("tr");h.id=c;h.style.display="none";var k=document.createElement("td");k.innerHTML=d;k.id=g;k.setAttribute("vAlign","top");k.setAttribute("width","19%");d=document.createElement("td");d.innerHTML=f;d.id=e;d.setAttribute("vAlign","top");d.style.height="100%";h.appendChild(k);h.appendChild(d);h.className="table_row";table_rows++;main_post_table.appendChild(h);_css_walk();jQ("#"+c).delay({duration:1,from:0,to:2}).fadeIn(800)}}dateMomentjs()}
function change_image(a){jQ.ajax({type:"GET",url:"/post/generate_captcha?ajax_request=1",success:function(b){changeImageHandler(b,a)},error:function(a,c,f){alert("An error occurred while processing your request.\n"+c+": "+f)}})}function changeImageHandler(a,b){a&&(document.getElementById("img_captcha"+b).src="/images/captcha/"+a+".png",document.PostTopic.md5sum.value=a)}
var httpEditorRequest,httpEditReq,rowID,previous_rowId,original_html,previous_html,textarea_counter=1,easycode,smilies,block_html,spellcheck,wysiwyg,toolbarCompatible;
function display_editor(a,b,c,f,e,d,g,h,k,m,l){rowID=a;easycode=b;smilies=c;block_html=f;spellcheck=e;wysiwyg=d;toolbarCompatible=g;jQ("#attached_images_"+rowID).length&&(jQ("#attached_images_"+rowID).attr("class","hide"),jQ("#attached_files_"+rowID).attr("class","hide"));if(rowID==previous_rowId)return!0;a={ajax_request:1,pid:rowID,edit:1,counter:textarea_counter,type:"json"};jQ("#pending_posts").length||jQ("#select_all_pending_posts").length?(k&&(id=k),a.id=id,a.trail=trail,k="/search/",a.action=
"textEditor",1==m&&(a.dopending="findpending")):(k="/post/textEditor",a.id=id);original_html=document.getElementById("post_message_"+rowID).innerHTML;jQ.ajax({type:"POST",url:k,data:a,success:function(a){_showEditorHandler(a,l);wtbx.upload.uploaders=[]},error:function(a,b,c){alert("An error occurred while processing your request.\n"+b+": "+c)}});return!1}
function _showEditorHandler(a,b){if(a){hide_editor();"undefined"!=typeof a.message?alert(a.message):document.getElementById("post_message_"+rowID).innerHTML=a;var c="message"+textarea_counter;jQ("#"+c).focus();"both"==wysiwyg&&0<toolbarCompatible&&startEditor(c,easycode,smilies,block_html,spellcheck,rowID);previous_rowId=rowID;previous_html=original_html;textarea_counter++;0<jQ("#save_"+rowID).length&&jQ("#save_"+rowID).click(function(){return edit_request(rowID,b)});0<jQ("#goAdvanced_"+rowID).length&&
jQ("#goAdvanced_"+rowID).click(function(){jQ("#posts").attr("action","/post");jQ("#quick_edit").val("1")});0<jQ("#cancel_"+rowID).length&&jQ("#cancel_"+rowID).click(function(){hide_editor();jQ("#attached_images_"+rowID).length&&(jQ("#attached_images_"+rowID).attr("class","post-body-image show"),jQ("#attached_files_"+rowID).attr("class","post-attachments show"))})}}
function hide_editor(){document.getElementById("message"+parseInt(textarea_counter-1))&&(document.getElementById("post_message_"+previous_rowId).innerHTML=previous_html,previous_rowId="")}
function edit_request(a,b){jQ("save_"+a).attr("disabled","disabled");jQ("cancel_"+a).attr("disabled","disabled");jQ("#goAdvanced_"+a).length&&jQ("goAdvanced_"+a).attr("disabled","disabled");b&&(forum=b);var c,f=0;"undefined"!=typeof tinyMCE&&null!=tinyMCE.activeEditor?(c=tinyMCE.get("message"+parseInt(textarea_counter-1)).getContent(),c=cleanEditorHtml(c),f=1):c=document.getElementById("message"+parseInt(textarea_counter-1)).value;var e=document.getElementById("done"+parseInt(textarea_counter-1)).value,
d=jQ("#attachment_ids"+a).val(),g=jQ("#uncheck_attachment_ids"+a).val();c=encodeURIComponent(c);jQ.ajax({type:"POST",url:"/post/ajaxReply",data:"edit=1&id="+id+"&pid="+a+"&adv_toolbar="+f+"&trail="+trail+"&forum="+forum+"&ajax_edit_request=1&ajax_request=1&done="+e+"&message="+c+"&attachment_ids="+d+"&uncheck_attachment_ids="+g,success:function(a){_editHandler(a,forum);prettyPrint()},error:function(a,b,c){alert("An error occurred while processing your request.\n"+b+": "+c)}})}
function _editHandler(a,b){jQ("#save_"+rowID).removeAttr("disabled");jQ("#cancel_"+rowID).removeAttr("disabled");jQ("#goAdvanced_"+rowID).length&&jQ("#goAdvanced_"+rowID).removeAttr("disabled");jQ("#attached_images_"+rowID).html("");jQ("#attached_files_"+rowID).html("");if(a&&a.message){jQ.each(a.edited_attachment,function(b,c){"attach_images"==b?jQ.each(c,function(b,c){var d=document.createElement("a");d.setAttribute("href","/file?id="+c.fileid);d.setAttribute("target","_blank");d.setAttribute("rel",
"lightbox["+rowID+"]");var e=document.createElement("span");e.setAttribute("class","post-image");e.setAttribute("style","background:url("+a.url_protocol+"s3.amazonaws.com/"+a.globalbeta+"files.websitetoolbox.com/"+a.uid+"/thumb/"+c.fileid+")");d.appendChild(e);jQ("#attached_images_"+rowID).append(d)}):"attach_files"==b&&jQ.each(c,function(a,b){var c=document.createElement("li"),d=document.createElement("span");d.setAttribute("class","file-type-icon "+b.extension);c.appendChild(d);d=document.createElement("a");
d.setAttribute("href","/file?id="+b.fileid);d.innerHTML=b.filename;c.appendChild(d);d=document.createElement("span");d.setAttribute("class","file-size");d.innerHTML=b.filesize+" &middot; "+b.downloads+" views";c.appendChild(d);jQ("#attached_files_"+rowID).append(c)})});jQ("#post_message_"+rowID).html(a.message);jQ("#attached_images_"+rowID).attr("class","post-body-image show");jQ("#attached_files_"+rowID).attr("class","post-attachments show");var c=document.createElement("time");c.setAttribute("datetime",
a.editdate);c.setAttribute("is","time-ago");c.innerHTML="&middot; Edited";jQ("#edited_post_date_"+rowID).html(c);previous_rowId=""}else if(a&&!a.message){if(a.getElementsByTagName("error")[0]){if(c=a.getElementsByTagName("error")[0].firstChild.nodeValue){if(c.match("Thank you for your post! Your post is currently being reviewed and will be displayed on the forum once it is approved."))if(jQ("#pending_posts").length){var f=jQ(location).attr("href").split("?");jQ("#pending_post_"+rowID).delay(1E3).fadeOut(800);
previoustrail=trail-replies_perpage;var e=jQ("#total_pending").html(),d=e%replies_perpage;e--;jQ("#total_pending").html(e);if(1>e||trail!=replies_perpage&&1==d)1<f[1].indexOf("trail=")&&(e=parseInt(f[1].length)-parseInt(f[1].indexOf("trail=")+6),f=f[1].slice(0,"-"+e)+previoustrail),window.location="/search?"+f}else f="",0<jQ("[id^='tr_']").length&&(f=document.getElementById("tr_"+rowID),main_post_table.removeChild(f),1>main_post_table.rows.length&&(previoustrail=trail-replies_perpage,window.location=
0<previoustrail?"/post?id="+id+"&trail="+previoustrail+query:"/?forum="+b)),0<jQ("[id^='post_row_']").length&&(f=document.getElementById("post_row_"+rowID),f.remove());alert(c.replace(/<\S[^><]*>/g,""))}return!1}a.getElementsByTagName("message")[0]&&(document.getElementById("post_message_"+rowID).innerHTML=a.getElementsByTagName("message")[0].firstChild.nodeValue,f=jQ(a).find("editdate").text(),c=document.createElement("time"),c.setAttribute("datetime",f),c.setAttribute("is","time-ago"),c.innerHTML=
"&middot; Edited",jQ("#edited_post_date_"+rowID).html(c));previous_rowId=""}dateMomentjs()}
function _ajaxRatingHandler(a){if(a)if(a.getElementsByTagName("error")[0])alert(a.getElementsByTagName("error")[0].firstChild.nodeValue.replace(/<\S[^><]*>/g,""));else if(a.getElementsByTagName("rating")[0]){var b=a.getElementsByTagName("rating")[0].firstChild.nodeValue,c=a.getElementsByTagName("remainrating")[0].firstChild.nodeValue,f=a.getElementsByTagName("threadid")[0].firstChild.nodeValue;a=a.getElementsByTagName("forumid")[0].firstChild.nodeValue;for(var e=" ",d=0,d=1;d<=b;d++)e+='<a  onmouseover="increase_rating_stars('+
d+","+b+');"  onmouseout="decrease_rating_stars('+b+');" href="javascript:void(0);" onclick="return add_rating('+d+","+f+","+a+');" title=" '+d+' / 5 "><div id="star'+d+'"  class="rating_starred"></div></a>';for(d=1;d<=c;d++)e+='<a  onmouseover="increase_rating_stars('+(parseInt(d)+parseInt(b))+","+b+');"  onmouseout="decrease_rating_stars('+b+');" href="javascript:void(0);" onclick="return add_rating('+(parseInt(d)+parseInt(b))+","+f+","+a+');" title=" '+(parseInt(d)+parseInt(b))+' / 5" ><div id="star'+
(parseInt(d)+parseInt(b))+'" class="rating_unstarred "></div></a>';document.getElementById("thread_rating")&&(document.getElementById("thread_rating").innerHTML=e);showAjaxMsg("Vote Added...")}}function add_rating(a,b,c){if(httpRatingReq)return!1;jQ.ajax({type:"GET",url:"/post/ajaxrating?"+("id="+b+"&rating="+a+"&ajax_request=1&forumid="+c),success:function(a){_ajaxRatingHandler(a)},error:function(a,b,c){alert("An error occurred while processing your request.\n"+b+": "+c)}})}
function calculate_time_zone(){var a=new Date,b=new Date(a.getFullYear(),0,1,0,0,0,0),a=new Date(a.getFullYear(),6,1,0,0,0,0),c=b.toGMTString(),f=new Date(c.substring(0,c.lastIndexOf(" ")-1)),c=a.toGMTString(),c=new Date(c.substring(0,c.lastIndexOf(" ")-1)),b=(b-f)/36E5,a=(a-c)/36E5;b!=a&&0<=b-a&&(b=a);jQ("#hidden_timezone").html('<input type="hidden" name="timeoffset" id="timeoffset" value="">');jQ("#timeoffset").val(convertTimeToDecimal(b))}
function convertTimeToDecimal(a){var b=parseInt(a);a-=parseInt(a);a*=60;var c=parseInt(a);a-=parseInt(a);parseInt(60*a);a=b;a=0==b?"00":0<b?"+"+b:-10<b?"-"+Math.abs(b):b;c=10>c?"0"+c:c;return a+("00"==c?"":"45"==c?".7":".5")}function confirmDeleteFirst(){return confirm("Deleting the first post will cause the entire topic to be deleted.\n\n Are you sure you would like to continue?")}function quicknavigation(a){window.location.href="/?forum="+a}
function add_placeholder(a,b){var c=document.getElementById(a);c&&(c.placeholder=b,c.onfocus=function(){this.value==this.placeholder&&(this.value="",c.style.cssText="")},c.onblur=function(){0==this.value.length&&(this.value=this.placeholder,c.style.cssText="color:#A9A9A9;")},c.onblur())}function validateForm(a,b){if(1==a.timeout2.checked)return isValidDate(a.timeout_timestamp);if(1==a.timeout1.checked)return checkIntValue()}function trim(a){return a.replace(/^\s+|\s+$/,"")}
function validateForm(a,b){if(""==jQ("#poll_question").val())return showFieldError(jQ("#poll_question"),"Please enter a poll question. "),!1;var c=0;jQ(".form-group").find("input[name=options]").each(function(){""!=jQ(this).val()&&(c+=1)});if(2>c)return alert("Please select at least two poll option. "),!1;if(1==a.timeout2.checked)return isValidDate(a.timeout_timestamp);if(1==a.timeout1.checked)return checkIntValue()}function trim(a){return a.replace(/^\s+|\s+$/,"")}
function checkIntValue(a){var b=a.value;a.value=trim(a.value);if(isNaN(a.value)||0>a.value&&a.value)return alert('Value "'+b+'" is not a valid positive integer.'),a.value=0,a.focus(),!1}
function isValidDate(a){var b=new Date,c=a.value.match(/^(\d{1,2})(\/)(\d{1,2})\2(\d{4})$/);if(null==c)return showFieldError(a,"Please enter a valid date."),!1;month=c[1];day=c[3];year=c[4];if(1>month||12<month||1>day||31<day)return showFieldError(a,"Please enter a valid date."),!1;if((4==month||6==month||9==month||11==month)&&31==day)return alert("Please enter a valid date."),a.focus(),!1;if(2==month&&(c=0==year%4&&(0!=year%100||0==year%400),29<day||29==day&&!c))return showFieldError(a,"Please enter a valid date."),
!1;if(b.getFullYear()>year)return showFieldError(a,"Invalid Date: The Poll close date can not fall before the current year."),!1;if(b.getFullYear()==year){if(b.getMonth()+1>month)return showFieldError(a,"Invalid Date: The Poll close date can not fall before the current month."),!1;if(b.getMonth()+1==month&&b.getDate()>day)return showFieldError(a,"Invalid Date: The Poll close date can not fall before the current day."),!1}return!0}
function addField(a,b){var c=document.getElementById(a),f=c.getElementsByTagName("input").length/2+1;if(f>global_hash.maximum_poll_options)alert("Sorry! You can't add more than "+global_hash.maximum_poll_options+" options.");else{input_option=document.createElement("input");input_option.name="options";input_option.type="text";input_option.value="";input_option.className="txtBox";input_option.size="40";input_vote=document.createElement("input");input_vote.name="votes";input_vote.type="hidden";input_vote.value=
"0";input_vote.className="txtBox";input_vote.maxLength="10";input_vote.onBlur="checkIntValue(this);";input_vote.size="3";label=document.createElement("label");var e=document.createElement("tr");e.setAttribute("height","30");var d=document.createElement("td");d.setAttribute("width","0");var g=document.createElement("span");g.appendChild(document.createTextNode("Option "+f+": "));d.appendChild(g);e.appendChild(d);d=document.createElement("td");d.appendChild(input_option);d.appendChild(input_vote);e.appendChild(d);
c.appendChild(e);f==global_hash.maximum_poll_options&&(document.getElementById(b).style.display="none")}}function add_placeholder(a,b){var c=document.getElementById(a);c&&(c.placeholder=b,c.onfocus=function(){this.value==this.placeholder&&(this.value="",c.style.cssText="")},c.onblur=function(){0==this.value.length&&(this.value=this.placeholder,c.style.cssText="color:#A9A9A9;")},c.onblur())}
function increase_rating_stars(a,b){for(var c=0,f=0,c=1;c<=a;c++)document.getElementById("star"+c).className="rating_starred";f=5-parseInt(a);for(c=1;c<=f;c++)document.getElementById("star"+(parseInt(c)+parseInt(a))).className="rating_unstarred "}function decrease_rating_stars(a){for(var b=0,c=0,b=1;b<=a;b++)document.getElementById("star"+b).className="rating_starred";c=5-parseInt(a);for(b=1;b<=c;b++)document.getElementById("star"+(parseInt(b)+parseInt(a))).className="rating_unstarred "}
function check_user_email(){var a=jQ("#email").val(),b=/^([\w\d\-\.])+\@([\w\d\-]+\.)+([\w]{2,15})$/i;if(1==document.getElementsByName("e_reply").checked){if(""==a)return showFieldError(document.PostTopic.email,"Error: You must specify an email address if you would like to subscribe to this topic."),!1;if(!b.test(a))return showFieldError(document.PostTopic.email,"You entered an invalid email address."),!1}else if(""!=a&&!b.test(a))return showFieldError(document.PostTopic.email,"You entered an invalid email address."),
!1;return!0}
function check_moveposts(a){var b="subject";a&&(b=a);if(jQ("#new_thread").is(":checked")){if(""==jQ("[name = 'thread_title']").val())return showFieldError(jQ("[name = 'thread_title']"),"Please complete the "+b+" field for this topic."),!1}else if(jQ("#exist_thread").is(":checked")&&""==jQ("[name = 'mergethreadurl']").val())return showFieldError(jQ("[name = 'mergethreadurl']"),'You have not specified a valid URL for the topic that you want to merge. Please check that the URL includes a valid topicid, "id=xxx" or "topic-subject-xxx" (where id is a number).'),!1;
return!0}
function approve_request(a,b){var c=jQ(a).attr("href").split("?"),f=jQ("#total_pendings").html(),e;jQ(a).attr("data-post-approval")&&(e=jQ(a).attr("data-post-approval"));if(jQ(a).attr("data-postListing"))var d=jQ(a).attr("data-postListing");jQ.ajax({type:"POST",url:"/search/approve",data:c[1]+"&ajax_request=1&do=approve_pendingpost&total_pending="+f+"&post_approval="+e,success:function(c){c.success?d?(jQ(a).remove(),jQ("#posts-list .first-post,#post_row_"+b).removeClass("pending-post"),jQ("#post_list_pending_"+b).remove(),
jQ("#delete_pending_"+b).remove(),0<jQ("#folow_unfolow_"+b).length&&jQ("#folow_unfolow_"+b).removeClass("hidden")):(c=jQ("[name= 'pid']"),"1"==c.length?jQ("#posts_list").remove():(jQ("#"+b).remove(),jQ("#totalpending_post").html(--c.length)),wtbx.approvalQueue.updatePendingCount(1)):approve_pending_post(c,b)},error:function(a,b,c){alert("An error occurred while processing your request.\n"+b+": "+c)}})}
function approve_pending_post(a,b){if(jQ(a).find("error").text())return jQ(a).find("error :first").text()&&alert(jQ(a).find("error :first").text().replace(/<\S[^><]*>/g,"")),jQ(a).find("redirect_url").text()&&(window.location=jQ(a).find("redirect_url :first").text()),!1;jQ("#pending_post_"+b).delay(1E3).fadeOut(800);previoustrail=trail-replies_perpage;var c=jQ("#total_pending").html(),f=c%replies_perpage;if(c>replies_perpage&&jQ(a).find("pagination").text()){jQ(a).find("pagination").text();var e=
jQ(a).find("post_content :first").text();jQ("#pending_posts").append(e)}c--;jQ("#total_pending").html(c);1>c||trail!=replies_perpage&&1==f?window.location="/search?action=doSearch&do=findpending&trail="+previoustrail:history.pushState&&(c=window.location.protocol+"//"+window.location.host+window.location.pathname+"?action=doSearch&do=findpending&trail="+trail,window.history.pushState({path:c},"",c))};(function(a){var b={isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"===typeof a},isNumber:function(a){return"number"===typeof a},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(a){return"undefined"===
typeof a},bind:a.proxy,each:function(b,c){a.each(b,function(a,b){return c(b,a)})},map:a.map,filter:a.grep,every:function(b,c){var d=!0;if(!b)return d;a.each(b,function(a,e){if(!(d=c.call(null,e,a,b)))return!1});return!!d},some:function(b,c){var d=!1;if(!b)return d;a.each(b,function(a,e){if(d=c.call(null,e,a,b))return!1});return!!d},mixin:a.extend,getUniqueId:function(){var a=0;return function(){return a++}}(),templatify:function(b){function c(){return String(b)}return a.isFunction(b)?b:c},defer:function(a){setTimeout(a,
0)},debounce:function(a,b,c){var d,e;return function(){var f=this,g=arguments,h;h=c&&!d;clearTimeout(d);d=setTimeout(function(){d=null;c||(e=a.apply(f,g))},b);h&&(e=a.apply(f,g));return e}},throttle:function(a,b){var c,d,e,f,g,h;g=0;h=function(){g=new Date;e=null;f=a.apply(c,d)};return function(){var k=new Date,l=b-(k-g);c=this;d=arguments;0>=l?(clearTimeout(e),e=null,g=k,f=a.apply(c,d)):e||(e=setTimeout(h,l));return f}},noop:function(){}},c=function(a,c){function d(a){this.maxSize=a||100;this.size=
0;this.hash={};this.list=new e}function e(){this.head=this.tail=null}function f(a,b){this.key=a;this.val=b;this.prev=this.next=null}b.mixin(d.prototype,{set:function(a,b){var c=this.list.tail;this.size>=this.maxSize&&(this.list.remove(c),delete this.hash[c.key]);(c=this.hash[a])?(c.val=b,this.list.moveToFront(c)):(c=new f(a,b),this.list.add(c),this.hash[a]=c,this.size++)},get:function(a){if(a=this.hash[a])return this.list.moveToFront(a),a.val}});b.mixin(e.prototype,{add:function(a){this.head&&(a.next=
this.head,this.head.prev=a);this.head=a;this.tail=this.tail||a},remove:function(a){a.prev?a.prev.next=a.next:this.head=a.next;a.next?a.next.prev=a.prev:this.tail=a.prev},moveToFront:function(a){this.remove(a);this.add(a)}});return d}(this),f=function(){function a(b){this.prefix=["__",b,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+this.prefix)}function c(a){return JSON.stringify(b.isUndefined(a)?null:a)}var d;try{d=window.localStorage,d.setItem("~~~","!"),d.removeItem("~~~")}catch(e){d=
null}b.mixin(a.prototype,d&&window.JSON?{_prefix:function(a){return this.prefix+a},_ttlKey:function(a){return this._prefix(a)+this.ttlKey},get:function(a){this.isExpired(a)&&this.remove(a);a=d.getItem(this._prefix(a));return JSON.parse(a)},set:function(a,e,f){b.isNumber(f)?d.setItem(this._ttlKey(a),c((new Date).getTime()+f)):d.removeItem(this._ttlKey(a));return d.setItem(this._prefix(a),c(e))},remove:function(a){d.removeItem(this._ttlKey(a));d.removeItem(this._prefix(a));return this},clear:function(){var a,
b,c=[],e=d.length;for(a=0;a<e;a++)(b=d.key(a)).match(this.keyMatcher)&&c.push(b.replace(this.keyMatcher,""));for(a=c.length;a--;)this.remove(c[a]);return this},isExpired:function(a){a=d.getItem(this._ttlKey(a));a=JSON.parse(a);return b.isNumber(a)&&(new Date).getTime()>a?!0:!1}}:{get:b.noop,set:b.noop,remove:b.noop,clear:b.noop,isExpired:b.noop});return a}(),e=function(){function d(b){b=b||{};this._send=b.transport?e(b.transport):a.ajax;this._get=b.rateLimiter?b.rateLimiter(this._get):this._get}function e(c){return function(d,
e){var f=a.Deferred();c(d,e,function(a){b.defer(function(){f.resolve(a)})},function(a){b.defer(function(){f.reject(a)})});return f}}var f=0,g={},h=6,k=new c(10);d.setMaxPendingRequests=function(a){h=a};d.resetCache=function(){k=new c(10)};b.mixin(d.prototype,{_get:function(a,b,c){function d(b){c&&c(b);k.set(a,b)}function e(){f--;delete g[a];l.onDeckRequestArgs&&(l._get.apply(l,l.onDeckRequestArgs),l.onDeckRequestArgs=null)}var l=this,m;(m=g[a])?m.done(d):f<h?(f++,g[a]=this._send(a,b).done(d).always(e)):
this.onDeckRequestArgs=[].slice.call(arguments,0)},get:function(a,c,d){var e;b.isFunction(c)&&(d=c,c={});(e=k.get(a))?b.defer(function(){d&&d(e)}):this._get(a,c,d);return!!e}});return d}(),d=function(){function c(b){b=b||{};b.datumTokenizer&&b.queryTokenizer||a.error("datumTokenizer and queryTokenizer are both required");this.datumTokenizer=b.datumTokenizer;this.queryTokenizer=b.queryTokenizer;this.datums=[];this.trie={ids:[],children:{}}}function d(a){a=b.filter(a,function(a){return!!a});return a=
b.map(a,function(a){return a.toLowerCase()})}function e(a){for(var b={},c=[],d=0;d<a.length;d++)b[a[d]]||(b[a[d]]=!0,c.push(a[d]));return c}function f(a,b){function c(a,b){return a-b}var d=0,e=0,g=[];a=a.sort(c);for(b=b.sort(c);d<a.length&&e<b.length;)a[d]<b[e]?d++:(a[d]>b[e]||(g.push(a[d]),d++),e++);return g}b.mixin(c.prototype,{bootstrap:function(a){this.datums=a.datums;this.trie=a.trie},add:function(a){var c=this;a=b.isArray(a)?a:[a];b.each(a,function(a){var e;e=c.datums.push(a)-1;a=d(c.datumTokenizer(a));
b.each(a,function(a){var b,d;b=c.trie;for(a=a.split("");d=a.shift();)b=b.children[d]||(b.children[d]={ids:[],children:{}}),b.ids.push(e)})})},get:function(a){var c=this,g;a=d(this.queryTokenizer(a));b.each(a,function(a){var b,d;if(g&&0===g.length)return!1;b=c.trie;for(a=a.split("");b&&(d=a.shift());)b=b.children[d];if(b&&0===a.length)b=b.ids.slice(0),g=g?f(g,b):b;else return g=[],!1});return g?b.map(e(g),function(a){return c.datums[a]}):[]},serialize:function(){return{datums:this.datums,trie:this.trie}}});
return c}(),g=function(){return{local:function(a){a=a.local||null;b.isFunction(a)&&(a=a.call(null));return a},prefetch:function(c){var d;d={url:null,thumbprint:"",ttl:864E5,filter:null,ajax:{}};if(c=c.prefetch||null)c=b.isString(c)?{url:c}:c,c=b.mixin(d,c),c.thumbprint="0.10.1"+c.thumbprint,c.ajax.type=c.ajax.type||"GET",c.ajax.dataType=c.ajax.dataType||"json",!c.url&&a.error("prefetch requires url to be set");return c},remote:function(c){function d(a){return function(c){return b.debounce(c,a)}}function e(a){return function(c){return b.throttle(c,
a)}}var f;f={url:null,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}};if(c=c.remote||null)c=b.isString(c)?{url:c}:c,c=b.mixin(f,c),c.rateLimiter=/^throttle$/i.test(c.rateLimitBy)?e(c.rateLimitWait):d(c.rateLimitWait),c.ajax.type=c.ajax.type||"GET",c.ajax.dataType=c.ajax.dataType||"json",delete c.rateLimitBy,delete c.rateLimitWait,!c.url&&a.error("remote requires url to be set");return c}}}();window.Bloodhound=function(){function c(b){b&&(b.local||
b.prefetch||b.remote)||a.error("one of local, prefetch, or remote is required");this.limit=b.limit||5;this.sorter=h(b.sorter);this.dupDetector=b.dupDetector||k;this.local=g.local(b);this.prefetch=g.prefetch(b);this.remote=g.remote(b);this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null;this.index=new d({datumTokenizer:b.datumTokenizer,queryTokenizer:b.queryTokenizer});this.storage=this.cacheKey?new f(this.cacheKey):null}function h(a){function c(b){return b.sort(a)}function d(a){return a}
return b.isFunction(a)?c:d}function k(){return!1}c.tokenizers={whitespace:function(a){return a.split(/\s+/)},nonword:function(a){return a.split(/\W+/)}};b.mixin(c.prototype,{_loadPrefetch:function(b){function c(a){a=b.filter?b.filter(a):a;d.add(a);d._saveToStorage(d.index.serialize(),b.thumbprint,b.ttl)}var d=this,e;(e=this._readFromStorage(b.thumbprint))?(this.index.bootstrap(e),e=a.Deferred().resolve()):e=a.ajax(b.url,b.ajax).done(c);return e},_getFromRemote:function(a,b){var c=this,d;a=a||"";d=
encodeURIComponent(a);d=this.remote.replace?this.remote.replace(this.remote.url,a):this.remote.url.replace(this.remote.wildcard,d);return this.transport.get(d,this.remote.ajax,function(a){a=c.remote.filter?c.remote.filter(a):a;b(a)})},_saveToStorage:function(a,b,c){this.storage&&(this.storage.set("data",a,c),this.storage.set("protocol",location.protocol,c),this.storage.set("thumbprint",b,c))},_readFromStorage:function(a){var b,c,d;this.storage&&(b=this.storage.get("data"),c=this.storage.get("protocol"),
d=this.storage.get("thumbprint"));a=d!==a||c!==location.protocol;return b&&!a?b:null},initialize:function(){function b(){c.add(c.local)}var c=this,d;d=this.prefetch?this._loadPrefetch(this.prefetch):a.Deferred().resolve();this.local&&d.done(b);this.transport=this.remote?new e(this.remote):null;this.initialize=function(){return d.promise()};return d.promise()},add:function(a){this.index.add(a)},get:function(a,c){function d(a){var g=f.slice(0);b.each(a,function(a){!b.some(g,function(b){return e.dupDetector(a,
b)})&&g.push(a);return g.length<e.limit});c&&c(e.sorter(g))}var e=this,f,g=!1;f=this.index.get(a);f=this.sorter(f).slice(0,this.limit);f.length<this.limit&&this.transport&&(g=this._getFromRemote(a,d));!g&&c&&c(f)},ttAdapter:function(){return b.bind(this.get,this)}});return c}();var h={position:"relative",display:"inline-block"},k={position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},m={position:"relative",verticalAlign:"top",backgroundColor:"transparent"},l={position:"relative",
verticalAlign:"top"},p={position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},n={display:"block"},q={whiteSpace:"normal"},r={left:"0",right:"auto"},v={left:"auto",right:" 0"};b.isMsie()&&b.mixin(m,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"});b.isMsie()&&7>=b.isMsie()&&b.mixin(m,{marginTop:"-1px"});var x=function(){function c(b){b&&b.el||a.error("EventBus initialized without el");this.$el=a(b.el)}b.mixin(c.prototype,{trigger:function(a){var b=
[].slice.call(arguments,1);this.$el.trigger("typeahead:"+a,b)}});return c}(),t=function(){function a(b,e,f,g){if(!f)return this;e=e.split(d);f=g?c(f,g):f;for(this._callbacks=this._callbacks||{};g=e.shift();)this._callbacks[g]=this._callbacks[g]||{sync:[],async:[]},this._callbacks[g][b].push(f);return this}function b(a,c,d){return function(){for(var b,e=0;!b&&e<a.length;e+=1)b=!1===a[e].apply(c,d);return!b}}function c(a,b){return a.bind?a.bind(b):function(){a.apply(b,[].slice.call(arguments,0))}}var d=
/\s+/,e=function(){return window.setImmediate?function(a){setImmediate(function(){a()})}:function(a){setTimeout(function(){a()},0)}}();return{onSync:function(b,c,d){return a.call(this,"sync",b,c,d)},onAsync:function(b,c,d){return a.call(this,"async",b,c,d)},off:function(a){var b;if(!this._callbacks)return this;for(a=a.split(d);b=a.shift();)delete this._callbacks[b];return this},trigger:function(a){var c,f,g,h,k;if(!this._callbacks)return this;a=a.split(d);for(g=[].slice.call(arguments,1);(c=a.shift())&&
(f=this._callbacks[c]);)h=b(f.sync,this,[c].concat(g)),k=b(f.async,this,[c].concat(g)),h()&&e(k);return this}}}(),u=function(a){function c(a,d,e){for(var f=[],g=0;g<a.length;g++)f.push(b.escapeRegExChars(a[g]));a=e?"\\b("+f.join("|")+")\\b":"("+f.join("|")+")";return d?new RegExp(a):new RegExp(a,"i")}var d={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(e){function f(b){var c,d;if(c=h.exec(b.data))wrapperNode=a.createElement(e.tagName),e.className&&
(wrapperNode.className=e.className),d=b.splitText(c.index),d.splitText(c[0].length),wrapperNode.appendChild(d.cloneNode(!0)),b.parentNode.replaceChild(wrapperNode,d);return!!c}function g(a,b){for(var c,d=0;d<a.childNodes.length;d++)c=a.childNodes[d],3===c.nodeType?d+=b(c)?1:0:g(c,b)}var h;e=b.mixin({},d,e);e.node&&e.pattern&&(e.pattern=b.isArray(e.pattern)?e.pattern:[e.pattern],h=c(e.pattern,e.caseSensitive,e.wordsOnly),g(e.node,f))}}(window.document),B=function(){function c(e){var g=this,h,k,l,m;
e=e||{};e.input||a.error("input is missing");h=b.bind(this._onBlur,this);k=b.bind(this._onFocus,this);l=b.bind(this._onKeydown,this);m=b.bind(this._onInput,this);this.$hint=a(e.hint);this.$input=a(e.input).on("blur.tt",h).on("focus.tt",k).on("keydown.tt",l);0===this.$hint.length&&(this.setHintValue=this.getHintValue=this.clearHint=b.noop);if(b.isMsie())this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(a){f[a.which||a.keyCode]||b.defer(b.bind(g._onInput,g,a))});else this.$input.on("input.tt",
m);this.query=this.$input.val();this.$overflowHelper=d(this.$input)}function d(b){return a('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"nowrap",fontFamily:b.css("font-family"),fontSize:b.css("font-size"),fontStyle:b.css("font-style"),fontVariant:b.css("font-variant"),fontWeight:b.css("font-weight"),wordSpacing:b.css("word-spacing"),letterSpacing:b.css("letter-spacing"),textIndent:b.css("text-indent"),textRendering:b.css("text-rendering"),textTransform:b.css("text-transform")}).insertAfter(b)}
function e(a){return a.altKey||a.ctrlKey||a.metaKey||a.shiftKey}var f;f={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};c.normalizeQuery=function(a){return(a||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")};b.mixin(c.prototype,t,{_onBlur:function(a){this.resetInputValue();this.trigger("blurred")},_onFocus:function(a){this.trigger("focused")},_onKeydown:function(a){var b=f[a.which||a.keyCode];this._managePreventDefault(b,a);b&&this._shouldTrigger(b,a)&&this.trigger(b+"Keyed",a)},
_onInput:function(a){this._checkInputValue()},_managePreventDefault:function(a,b){var c,d;switch(a){case "tab":c=this.getHintValue();d=this.getInputValue();c=c&&c!==d&&!e(b);break;case "up":case "down":c=!e(b);break;default:c=!1}c&&b.preventDefault()},_shouldTrigger:function(a,b){var c;switch(a){case "tab":c=!e(b);break;default:c=!0}return c},_checkInputValue:function(){var a,b,d;a=this.getInputValue();b=this.query;d=(b=c.normalizeQuery(a)===c.normalizeQuery(b))?this.query.length!==a.length:!1;b?
d&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query=a)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(a){this.query=a},getInputValue:function(){return this.$input.val()},setInputValue:function(a,b){this.$input.val(a);!b&&this._checkInputValue()},getHintValue:function(){return this.$hint.val()},setHintValue:function(a){this.$hint.val(a)},resetInputValue:function(){this.$input.val(this.query)},
clearHint:function(){this.$hint.val("")},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var a=this.$input.width()-2;this.$overflowHelper.text(this.getInputValue());return this.$overflowHelper.width()>=a},isCursorAtEnd:function(){var a,c;a=this.$input.val().length;c=this.$input[0].selectionStart;return b.isNumber(c)?c===a:document.selection?(c=document.selection.createRange(),c.moveStart("character",-a),a===c.text.length):!0},destroy:function(){this.$hint.off(".tt");
this.$input.off(".tt");this.$hint=this.$input=this.$overflowHelper=null}});return c}(),A=function(){function c(f){f=f||{};f.templates=f.templates||{};f.source||a.error("missing source");f.name&&!/^[_a-zA-Z0-9-]+$/.test(f.name)&&a.error("invalid dataset name: "+f.name);this.query=null;this.highlight=!!f.highlight;this.name=f.name||b.getUniqueId();this.source=f.source;this.displayFn=d(f.display||f.displayKey);this.templates=e(f.templates,this.displayFn);this.$el=a('<div class="tt-dataset-%CLASS%"></div>'.replace("%CLASS%",
this.name))}function d(a){function c(b){return b[a]}a=a||"value";return b.isFunction(a)?a:c}function e(a,c){function d(a){return"<p>"+c(a)+"</p>"}return{empty:a.empty&&b.templatify(a.empty),header:a.header&&b.templatify(a.header),footer:a.footer&&b.templatify(a.footer),suggestion:a.suggestion||d}}c.extractDatasetName=function(b){return a(b).data("ttDataset")};c.extractValue=function(b){return a(b).data("ttValue")};c.extractDatum=function(b){return a(b).data("ttDatum")};b.mixin(c.prototype,t,{_render:function(c,
d){function e(){var f,g;f=a('<span class="tt-suggestions"></span>').css(n);g=b.map(d,function(b){var c;c=h.templates.suggestion(b);c='<div class="tt-suggestion">%BODY%</div>'.replace("%BODY%",c);b=a(c).data("ttDataset",h.name).data("ttValue",h.displayFn(b)).data("ttDatum",b);b.children().each(function(){a(this).css(q)});return b});f.append.apply(f,g);h.highlight&&u({node:f[0],pattern:c});return f}function f(){return h.templates.header({query:c,isEmpty:!k})}function g(){return h.templates.footer({query:c,
isEmpty:!k})}if(this.$el){var h=this,k;this.$el.empty();k=d&&d.length;!k&&this.templates.empty?this.$el.html(h.templates.empty({query:c,isEmpty:!0})).prepend(h.templates.header?f():null).append(h.templates.footer?g():null):k&&this.$el.html(e()).prepend(h.templates.header?f():null).append(h.templates.footer?g():null);this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(a){var b=this;this.query=a;this.source(a,function(c){a===b.query&&b._render(a,c)})},clear:function(){this._render(this.query||
"")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}});return c}(),D=function(){function c(e){var f=this,g,h,k;e=e||{};e.menu||a.error("menu is required");this.isOpen=!1;this.isEmpty=!0;this.datasets=b.map(e.datasets,d);g=b.bind(this._onSuggestionClick,this);h=b.bind(this._onSuggestionMouseEnter,this);k=b.bind(this._onSuggestionMouseLeave,this);this.$menu=a(e.menu).on("click.tt",".tt-suggestion",g).on("mouseenter.tt",".tt-suggestion",h).on("mouseleave.tt",".tt-suggestion",
k);b.each(this.datasets,function(a){f.$menu.append(a.getRoot());a.onSync("rendered",f._onRendered,f)})}function d(a){return new A(a)}b.mixin(c.prototype,t,{_onSuggestionClick:function(b){this.trigger("suggestionClicked",a(b.currentTarget))},_onSuggestionMouseEnter:function(b){this._removeCursor();this._setCursor(a(b.currentTarget),!0)},_onSuggestionMouseLeave:function(a){this._removeCursor()},_onRendered:function(){(this.isEmpty=b.every(this.datasets,function(a){return a.isEmpty()}))?this._hide():
this.isOpen&&this._show();this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(a,b){a.first().addClass("tt-cursor");!b&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(a){var b,c;this.isOpen&&(c=this._getCursor(),
b=this._getSuggestions(),this._removeCursor(),a=b.index(c)+a,a=(a+1)%(b.length+1)-1,-1===a?this.trigger("cursorRemoved"):(-1>a&&(a=b.length-1),this._setCursor(b=b.eq(a)),this._ensureVisible(b)))},_ensureVisible:function(a){var b,c,d;b=a.position().top;a=b+a.outerHeight(!0);c=this.$menu.scrollTop();d=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10);0>b?this.$menu.scrollTop(c+b):d<a&&this.$menu.scrollTop(c+(a-d))},close:function(){this.isOpen&&
(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(a){this.$menu.css("ltr"===a?r:v)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(a){var b=null;a.length&&(b={raw:A.extractDatum(a),value:A.extractValue(a),datasetName:A.extractDatasetName(a)});return b},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},
getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(a){b.each(this.datasets,function(b){b.update(a)})},empty:function(){b.each(this.datasets,function(a){a.clear()});this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){this.$menu.off(".tt");this.$menu=null;b.each(this.datasets,function(a){a.destroy()})}});return c}(),C=function(){function c(e){var f,g,h;e=e||{};e.input||a.error("missing input");
this.autoselect=!!e.autoselect;this.minLength=b.isNumber(e.minLength)?e.minLength:1;this.$node=d(e.input,e.withHint);f=this.$node.find(".tt-dropdown-menu");g=this.$node.find(".tt-input");h=this.$node.find(".tt-hint");this.eventBus=e.eventBus||new x({el:g});this.dropdown=(new D({menu:f,datasets:e.datasets})).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",
this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this);this.input=(new B({input:g,hint:h})).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",
this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this);f.on("mousedown.tt",function(a){b.isMsie()&&9>b.isMsie()&&(g[0].onbeforedeactivate=function(){window.event.returnValue=!1;g[0].onbeforedeactivate=null});a.preventDefault()})}function d(b,c){var f,g,n,A;f=a(b);g=a('<span class="twitter-typeahead"></span>').css(h);n=a('<span class="tt-dropdown-menu"></span>').css(p);A=f.clone().css(k).css(e(f));A.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder").prop("disabled",
!0).attr({autocomplete:"off",spellcheck:"false"});f.data("ttAttrs",{dir:f.attr("dir"),autocomplete:f.attr("autocomplete"),spellcheck:f.attr("spellcheck"),style:f.attr("style")});f.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(c?m:l);try{!f.attr("dir")&&f.attr("dir","auto")}catch(u){}return f.wrap(g).parent().prepend(c?A:null).append(n)}function e(a){return{backgroundAttachment:a.css("background-attachment"),backgroundClip:a.css("background-clip"),backgroundColor:a.css("background-color"),
backgroundImage:a.css("background-image"),backgroundOrigin:a.css("background-origin"),backgroundPosition:a.css("background-position"),backgroundRepeat:a.css("background-repeat"),backgroundSize:a.css("background-size")}}function f(a){var c=a.find(".tt-input");b.each(c.data("ttAttrs"),function(a,d){b.isUndefined(a)?c.removeAttr(d):c.attr(d,a)});c.detach().removeData("ttAttrs").removeClass("tt-input").insertAfter(a);a.remove()}b.mixin(c.prototype,{_onSuggestionClicked:function(a,b){var c;(c=this.dropdown.getDatumForSuggestion(b))&&
this._select(c)},_onCursorMoved:function(){var a=this.dropdown.getDatumForCursor();this.input.clearHint();this.input.setInputValue(a.value,!0);this.eventBus.trigger("cursorchanged",a.raw,a.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue();this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint();this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint();this.eventBus.trigger("closed")},_onFocused:function(){this.dropdown.empty();
this.dropdown.open()},_onBlurred:function(){this.dropdown.close()},_onEnterKeyed:function(a,b){var c,d;c=this.dropdown.getDatumForCursor();d=this.dropdown.getDatumForTopSuggestion();c?(this._select(c),b.preventDefault()):this.autoselect&&d&&(this._select(d),b.preventDefault())},_onTabKeyed:function(a,b){var c;(c=this.dropdown.getDatumForCursor())?(this._select(c),b.preventDefault()):this._autocomplete()},_onEscKeyed:function(){this.dropdown.close();this.input.resetInputValue()},_onUpKeyed:function(){var a=
this.input.getQuery();!this.dropdown.isOpen&&a.length>=this.minLength&&this.dropdown.update(a);this.dropdown.open();this.dropdown.moveCursorUp()},_onDownKeyed:function(){var a=this.input.getQuery();!this.dropdown.isOpen&&a.length>=this.minLength&&this.dropdown.update(a);this.dropdown.open();this.dropdown.moveCursorDown()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(a,b){this.input.clearHint();
this.dropdown.empty();b.length>=this.minLength&&this.dropdown.update(b);this.dropdown.open();this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint();this.dropdown.open()},_setLanguageDirection:function(){var a;this.dir!==(a=this.input.getLanguageDirection())&&(this.dir=a,this.$node.css("direction",a),this.dropdown.setLanguageDirection(a))},_updateHint:function(){var a,c,d;(a=this.dropdown.getDatumForTopSuggestion())&&this.dropdown.isVisible()&&!this.input.hasOverflow()&&(c=
this.input.getInputValue(),d=B.normalizeQuery(c),d=b.escapeRegExChars(d),d=new RegExp("^(?:"+d+")(.*$)","i"),a=d.exec(a.value),this.input.setHintValue(c+(a?a[1]:"")))},_autocomplete:function(){var a,b;a=this.input.getHintValue();b=this.input.getQuery();a&&b!==a&&this.input.isCursorAtEnd()&&((a=this.dropdown.getDatumForTopSuggestion())&&this.input.setInputValue(a.value),this.eventBus.trigger("autocompleted",a.raw,a.datasetName))},_select:function(a){this.input.clearHint();this.input.setQuery(a.value);
this.input.setInputValue(a.value,!0);this._setLanguageDirection();this.eventBus.trigger("selected",a.raw,a.datasetName);this.dropdown.close();b.defer(b.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},getQuery:function(){return this.input.getQuery()},setQuery:function(a){this.input.setInputValue(a)},destroy:function(){this.input.destroy();this.dropdown.destroy();f(this.$node);this.$node=null}});return c}();(function(){var c,d;
c=a.fn.typeahead;d={initialize:function(c,d){d=b.isArray(d)?d:[].slice.call(arguments,1);c=c||{};return this.each(function(){var e=a(this),f;b.each(d,function(a){a.highlight=!!c.highlight});f=new C({input:e,eventBus:new x({el:e}),withHint:b.isUndefined(c.hint)?!0:!!c.hint,minLength:c.minLength,autoselect:c.autoselect,datasets:d});e.data("ttTypeahead",f)})},open:function(){return this.each(function(){var b;(b=a(this).data("ttTypeahead"))&&b.open()})},close:function(){return this.each(function(){var b;
(b=a(this).data("ttTypeahead"))&&b.close()})},val:function(b){function c(){var d;(d=a(this).data("ttTypeahead"))&&d.setQuery(b)}function d(a){var b;if(a=a.data("ttTypeahead"))b=a.getQuery();return b}return arguments.length?this.each(c):d(this.first())},destroy:function(){return this.each(function(){var b=a(this),c;if(c=b.data("ttTypeahead"))c.destroy(),b.removeData("ttTypeahead")})}};a.fn.typeahead=function(a){return d[a]?d[a].apply(this,[].slice.call(arguments,1)):d.initialize.apply(this,arguments)};
a.fn.typeahead.noConflict=function(){a.fn.typeahead=c;return this}})()})(window.jQuery);(function(a){var b=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"===typeof a},isNumber:function(a){return"number"===typeof a},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(a){return"undefined"===
typeof a},toStr:function(a){return b.isUndefined(a)||null===a?"":a+""},bind:a.proxy,each:function(b,c){a.each(b,function(a,b){return c(b,a)})},map:a.map,filter:a.grep,every:function(b,c){var d=!0;if(!b)return d;a.each(b,function(a,e){if(!(d=c.call(null,e,a,b)))return!1});return!!d},some:function(b,c){var d=!1;if(!b)return d;a.each(b,function(a,e){if(d=c.call(null,e,a,b))return!1});return!!d},mixin:a.extend,getUniqueId:function(){var a=0;return function(){return a++}}(),templatify:function(b){function c(){return String(b)}
return a.isFunction(b)?b:c},defer:function(a){setTimeout(a,0)},debounce:function(a,b,c){var d,e;return function(){var f=this,g=arguments,h;h=c&&!d;clearTimeout(d);d=setTimeout(function(){d=null;c||(e=a.apply(f,g))},b);h&&(e=a.apply(f,g));return e}},throttle:function(a,b){var c,d,e,f,g,h;g=0;h=function(){g=new Date;e=null;f=a.apply(c,d)};return function(){var k=new Date,l=b-(k-g);c=this;d=arguments;0>=l?(clearTimeout(e),e=null,g=k,f=a.apply(c,d)):e||(e=setTimeout(h,l));return f}},noop:function(){}}}(),
c=function(){function a(c){return(c=b.toStr(c))?c.split(/\s+/):[]}function c(a){return(a=b.toStr(a))?a.split(/\W+/):[]}function d(a){return function(){var c=[].slice.call(arguments,0);return function(d){var e=[];b.each(c,function(c){e=e.concat(a(b.toStr(d[c])))});return e}}}return{nonword:c,whitespace:a,obj:{nonword:d(c),whitespace:d(a)}}}(),f=function(){function c(d){this.maxSize=b.isNumber(d)?d:100;this.reset();0>=this.maxSize&&(this.set=this.get=a.noop)}function d(){this.head=this.tail=null}function e(a,
b){this.key=a;this.val=b;this.prev=this.next=null}b.mixin(c.prototype,{set:function(a,b){var c=this.list.tail;this.size>=this.maxSize&&(this.list.remove(c),delete this.hash[c.key]);(c=this.hash[a])?(c.val=b,this.list.moveToFront(c)):(c=new e(a,b),this.list.add(c),this.hash[a]=c,this.size++)},get:function(a){if(a=this.hash[a])return this.list.moveToFront(a),a.val},reset:function(){this.size=0;this.hash={};this.list=new d}});b.mixin(d.prototype,{add:function(a){this.head&&(a.next=this.head,this.head.prev=
a);this.head=a;this.tail=this.tail||a},remove:function(a){a.prev?a.prev.next=a.next:this.head=a.next;a.next?a.next.prev=a.prev:this.tail=a.prev},moveToFront:function(a){this.remove(a);this.add(a)}});return c}(),e=function(){function a(c){this.prefix=["__",c,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+b.escapeRegExChars(this.prefix))}function c(a){return JSON.stringify(b.isUndefined(a)?null:a)}var d;try{d=window.localStorage,d.setItem("~~~","!"),d.removeItem("~~~")}catch(e){d=
null}b.mixin(a.prototype,d&&window.JSON?{_prefix:function(a){return this.prefix+a},_ttlKey:function(a){return this._prefix(a)+this.ttlKey},get:function(a){this.isExpired(a)&&this.remove(a);a=d.getItem(this._prefix(a));return JSON.parse(a)},set:function(a,e,f){b.isNumber(f)?d.setItem(this._ttlKey(a),c((new Date).getTime()+f)):d.removeItem(this._ttlKey(a));return d.setItem(this._prefix(a),c(e))},remove:function(a){d.removeItem(this._ttlKey(a));d.removeItem(this._prefix(a));return this},clear:function(){var a,
b,c=[],e=d.length;for(a=0;a<e;a++)(b=d.key(a)).match(this.keyMatcher)&&c.push(b.replace(this.keyMatcher,""));for(a=c.length;a--;)this.remove(c[a]);return this},isExpired:function(a){a=d.getItem(this._ttlKey(a));a=JSON.parse(a);return b.isNumber(a)&&(new Date).getTime()>a?!0:!1}}:{get:b.noop,set:b.noop,remove:b.noop,clear:b.noop,isExpired:b.noop});return a}(),d=function(){function c(b){b=b||{};this.cancelled=!1;this.lastUrl=null;this._send=b.transport?d(b.transport):a.ajax;this._get=b.rateLimiter?
b.rateLimiter(this._get):this._get;this._cache=!1===b.cache?new f(0):k}function d(c){return function(d,e){var f=a.Deferred();c(d,e,function(a){b.defer(function(){f.resolve(a)})},function(a){b.defer(function(){f.reject(a)})});return f}}var e=0,g={},h=6,k=new f(10);c.setMaxPendingRequests=function(a){h=a};c.resetCache=function(){k.reset()};b.mixin(c.prototype,{_get:function(a,b,c){function d(b){c&&c(null,b);l._cache.set(a,b)}function f(){c&&c(!0)}function k(){e--;delete g[a];l.onDeckRequestArgs&&(l._get.apply(l,
l.onDeckRequestArgs),l.onDeckRequestArgs=null)}var l=this,m;this.cancelled||a!==this.lastUrl||((m=g[a])?m.done(d).fail(f):e<h?(e++,g[a]=this._send(a,b).done(d).fail(f).always(k)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(a,c,d){var e;b.isFunction(c)&&(d=c,c={});this.cancelled=!1;this.lastUrl=a;(e=this._cache.get(a))?b.defer(function(){d&&d(null,e)}):this._get(a,c,d);return!!e},cancel:function(){this.cancelled=!0}});return c}(),g=function(){function c(b){b=b||{};b.datumTokenizer&&
b.queryTokenizer||a.error("datumTokenizer and queryTokenizer are both required");this.datumTokenizer=b.datumTokenizer;this.queryTokenizer=b.queryTokenizer;this.reset()}function d(a){a=b.filter(a,function(a){return!!a});return a=b.map(a,function(a){return a.toLowerCase()})}function e(a){for(var b={},c=[],d=0,f=a.length;d<f;d++)b[a[d]]||(b[a[d]]=!0,c.push(a[d]));return c}function f(a,b){function c(a,b){return a-b}var d=0,e=0,g=[];a=a.sort(c);b=b.sort(c);for(var h=a.length,k=b.length;d<h&&e<k;)a[d]<
b[e]?d++:(a[d]>b[e]||(g.push(a[d]),d++),e++);return g}b.mixin(c.prototype,{bootstrap:function(a){this.datums=a.datums;this.trie=a.trie},add:function(a){var c=this;a=b.isArray(a)?a:[a];b.each(a,function(a){var e;e=c.datums.push(a)-1;a=d(c.datumTokenizer(a));b.each(a,function(a){var b,d;b=c.trie;for(a=a.split("");d=a.shift();)b=b.children[d]||(b.children[d]={ids:[],children:{}}),b.ids.push(e)})})},get:function(a){var c=this,g;a=d(this.queryTokenizer(a));b.each(a,function(a){var b,d;if(g&&0===g.length)return!1;
b=c.trie;for(a=a.split("");b&&(d=a.shift());)b=b.children[d];if(b&&0===a.length)b=b.ids.slice(0),g=g?f(g,b):b;else return g=[],!1});return g?b.map(e(g),function(a){return c.datums[a]}):[]},reset:function(){this.datums=[];this.trie={ids:[],children:{}}},serialize:function(){return{datums:this.datums,trie:this.trie}}});return c}(),h=function(){return{local:function(a){return a.local||null},prefetch:function(c){var d;d={url:null,thumbprint:"",ttl:864E5,filter:null,ajax:{}};if(c=c.prefetch||null)c=b.isString(c)?
{url:c}:c,c=b.mixin(d,c),c.thumbprint="0.10.5"+c.thumbprint,c.ajax.type=c.ajax.type||"GET",c.ajax.dataType=c.ajax.dataType||"json",!c.url&&a.error("prefetch requires url to be set");return c},remote:function(c){function d(a){return function(c){return b.debounce(c,a)}}function e(a){return function(c){return b.throttle(c,a)}}var f;f={url:null,cache:!0,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}};if(c=c.remote||null)c=b.isString(c)?{url:c}:c,
c=b.mixin(f,c),c.rateLimiter=/^throttle$/i.test(c.rateLimitBy)?e(c.rateLimitWait):d(c.rateLimitWait),c.ajax.type=c.ajax.type||"GET",c.ajax.dataType=c.ajax.dataType||"json",delete c.rateLimitBy,delete c.rateLimitWait,!c.url&&a.error("remote requires url to be set");return c}}}();(function(f){function k(b){b&&(b.local||b.prefetch||b.remote)||a.error("one of local, prefetch, or remote is required");this.limit=b.limit||5;this.sorter=l(b.sorter);this.dupDetector=b.dupDetector||m;this.local=h.local(b);
this.prefetch=h.prefetch(b);this.remote=h.remote(b);this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null;this.index=new g({datumTokenizer:b.datumTokenizer,queryTokenizer:b.queryTokenizer});this.storage=this.cacheKey?new e(this.cacheKey):null}function l(a){function c(b){return b.sort(a)}function d(a){return a}return b.isFunction(a)?c:d}function m(){return!1}var n;n=f.Bloodhound;f.Bloodhound=k;k.noConflict=function(){f.Bloodhound=n;return k};k.tokenizers=c;b.mixin(k.prototype,
{_loadPrefetch:function(b){function c(a){d.clear();d.add(b.filter?b.filter(a):a);d._saveToStorage(d.index.serialize(),b.thumbprint,b.ttl)}var d=this,e;(e=this._readFromStorage(b.thumbprint))?(this.index.bootstrap(e),e=a.Deferred().resolve()):e=a.ajax(b.url,b.ajax).done(c);return e},_getFromRemote:function(a,b){function c(a,e){a?b([]):b(d.remote.filter?d.remote.filter(e):e)}var d=this,e;if(this.transport)return a=a||"",e=encodeURIComponent(a),e=this.remote.replace?this.remote.replace(this.remote.url,
a):this.remote.url.replace(this.remote.wildcard,e),this.transport.get(e,this.remote.ajax,c)},_cancelLastRemoteRequest:function(){this.transport&&this.transport.cancel()},_saveToStorage:function(a,b,c){this.storage&&(this.storage.set("data",a,c),this.storage.set("protocol",location.protocol,c),this.storage.set("thumbprint",b,c))},_readFromStorage:function(a){var b,c,d;this.storage&&(b=this.storage.get("data"),c=this.storage.get("protocol"),d=this.storage.get("thumbprint"));a=d!==a||c!==location.protocol;
return b&&!a?b:null},_initialize:function(){function c(){e.add(b.isFunction(f)?f():f)}var e=this,f=this.local,g;g=this.prefetch?this._loadPrefetch(this.prefetch):a.Deferred().resolve();f&&g.done(c);this.transport=this.remote?new d(this.remote):null;return this.initPromise=g.promise()},initialize:function(a){return!this.initPromise||a?this._initialize():this.initPromise},add:function(a){this.index.add(a)},get:function(a,c){function d(a){var g=f.slice(0);b.each(a,function(a){!b.some(g,function(b){return e.dupDetector(a,
b)})&&g.push(a);return g.length<e.limit});c&&c(e.sorter(g))}var e=this,f=[],g=!1,f=this.index.get(a),f=this.sorter(f).slice(0,this.limit);f.length<this.limit?g=this._getFromRemote(a,d):this._cancelLastRemoteRequest();g||(0<f.length||!this.transport)&&c&&c(f)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear()},clearRemoteCache:function(){this.transport&&d.resetCache()},ttAdapter:function(){return b.bind(this.get,this)}});return k})(this);var k=function(){var a=
{wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},
rtl:{left:"auto",right:" 0"}};b.isMsie()&&b.mixin(a.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"});b.isMsie()&&7>=b.isMsie()&&b.mixin(a.input,{marginTop:"-1px"});return a}(),m=function(){function c(b){b&&b.el||a.error("EventBus initialized without el");this.$el=a(b.el)}b.mixin(c.prototype,{trigger:function(a){var b=[].slice.call(arguments,1);this.$el.trigger("typeahead:"+a,b)}});return c}(),l=function(){function a(b,e,f,g){if(!f)return this;
e=e.split(d);f=g?c(f,g):f;for(this._callbacks=this._callbacks||{};g=e.shift();)this._callbacks[g]=this._callbacks[g]||{sync:[],async:[]},this._callbacks[g][b].push(f);return this}function b(a,c,d){return function(){for(var b,e=0,f=a.length;!b&&e<f;e+=1)b=!1===a[e].apply(c,d);return!b}}function c(a,b){return a.bind?a.bind(b):function(){a.apply(b,[].slice.call(arguments,0))}}var d=/\s+/,e=function(){return window.setImmediate?function(a){setImmediate(function(){a()})}:function(a){setTimeout(function(){a()},
0)}}();return{onSync:function(b,c,d){return a.call(this,"sync",b,c,d)},onAsync:function(b,c,d){return a.call(this,"async",b,c,d)},off:function(a){var b;if(!this._callbacks)return this;for(a=a.split(d);b=a.shift();)delete this._callbacks[b];return this},trigger:function(a){var c,f,g,h,k;if(!this._callbacks)return this;a=a.split(d);for(g=[].slice.call(arguments,1);(c=a.shift())&&(f=this._callbacks[c]);)h=b(f.sync,this,[c].concat(g)),k=b(f.async,this,[c].concat(g)),h()&&e(k);return this}}}(),p=function(a){function c(a,
d,e){for(var f=[],g=0,h=a.length;g<h;g++)f.push(b.escapeRegExChars(a[g]));a=e?"\\b("+f.join("|")+")\\b":"("+f.join("|")+")";return d?new RegExp(a):new RegExp(a,"i")}var d={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(e){function f(b){var c,d,g;if(c=h.exec(b.data))g=a.createElement(e.tagName),e.className&&(g.className=e.className),d=b.splitText(c.index),d.splitText(c[0].length),g.appendChild(d.cloneNode(!0)),b.parentNode.replaceChild(g,d);return!!c}
function g(a,b){for(var c,d=0;d<a.childNodes.length;d++)c=a.childNodes[d],3===c.nodeType?d+=b(c)?1:0:g(c,b)}var h;e=b.mixin({},d,e);e.node&&e.pattern&&(e.pattern=b.isArray(e.pattern)?e.pattern:[e.pattern],h=c(e.pattern,e.caseSensitive,e.wordsOnly),g(e.node,f))}}(window.document),n=function(){function c(e){var g=this,h,k,l,m;e=e||{};e.input||a.error("input is missing");h=b.bind(this._onBlur,this);k=b.bind(this._onFocus,this);l=b.bind(this._onKeydown,this);m=b.bind(this._onInput,this);this.$hint=a(e.hint);
this.$input=a(e.input).on("blur.tt",h).on("focus.tt",k).on("keydown.tt",l);0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=b.noop);if(b.isMsie())this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(a){f[a.which||a.keyCode]||b.defer(b.bind(g._onInput,g,a))});else this.$input.on("input.tt",m);this.query=this.$input.val();this.$overflowHelper=d(this.$input)}function d(b){return a('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",
whiteSpace:"pre",fontFamily:b.css("font-family"),fontSize:b.css("font-size"),fontStyle:b.css("font-style"),fontVariant:b.css("font-variant"),fontWeight:b.css("font-weight"),wordSpacing:b.css("word-spacing"),letterSpacing:b.css("letter-spacing"),textIndent:b.css("text-indent"),textRendering:b.css("text-rendering"),textTransform:b.css("text-transform")}).insertAfter(b)}function e(a){return a.altKey||a.ctrlKey||a.metaKey||a.shiftKey}var f;f={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};
c.normalizeQuery=function(a){return(a||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")};b.mixin(c.prototype,l,{_onBlur:function(){this.resetInputValue();this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(a){var b=f[a.which||a.keyCode];this._managePreventDefault(b,a);b&&this._shouldTrigger(b,a)&&this.trigger(b+"Keyed",a)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(a,b){var c,d;switch(a){case "tab":c=this.getHint();d=this.getInputValue();
c=c&&c!==d&&!e(b);break;case "up":case "down":c=!e(b);break;default:c=!1}c&&b.preventDefault()},_shouldTrigger:function(a,b){var c;switch(a){case "tab":c=!e(b);break;default:c=!0}return c},_checkInputValue:function(){var a,b,d;a=this.getInputValue();b=this.query;d=(b=c.normalizeQuery(a)===c.normalizeQuery(b))?this.query.length!==a.length:!1;this.query=a;b?d&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},
getQuery:function(){return this.query},setQuery:function(a){this.query=a},getInputValue:function(){return this.$input.val()},setInputValue:function(a,b){this.$input.val(a);b?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(a){this.$hint.val(a)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var a,b;a=this.getInputValue();b=this.getHint();b=a!==b&&0===b.indexOf(a);
""!==a&&b&&!this.hasOverflow()||this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var a=this.$input.width()-2;this.$overflowHelper.text(this.getInputValue());return this.$overflowHelper.width()>=a},isCursorAtEnd:function(){var a,c;a=this.$input.val().length;c=this.$input[0].selectionStart;return b.isNumber(c)?c===a:document.selection?(c=document.selection.createRange(),c.moveStart("character",-a),a===c.text.length):
!0},destroy:function(){this.$hint.off(".tt");this.$input.off(".tt");this.$hint=this.$input=this.$overflowHelper=null}});return c}(),q=function(){function c(f){f=f||{};f.templates=f.templates||{};f.source||a.error("missing source");f.name&&!/^[_a-zA-Z0-9-]+$/.test(f.name)&&a.error("invalid dataset name: "+f.name);this.query=null;this.highlight=!!f.highlight;this.name=f.name||b.getUniqueId();this.source=f.source;this.displayFn=d(f.display||f.displayKey);this.templates=e(f.templates,this.displayFn);
this.$el=a('<div class="tt-dataset-%CLASS%"></div>'.replace("%CLASS%",this.name))}function d(a){function c(b){return b[a]}a=a||"value";return b.isFunction(a)?a:c}function e(a,c){function d(a){return"<p>"+c(a)+"</p>"}return{empty:a.empty&&b.templatify(a.empty),header:a.header&&b.templatify(a.header),footer:a.footer&&b.templatify(a.footer),suggestion:a.suggestion||d}}c.extractDatasetName=function(b){return a(b).data("ttDataset")};c.extractValue=function(b){return a(b).data("ttValue")};c.extractDatum=
function(b){return a(b).data("ttDatum")};b.mixin(c.prototype,l,{_render:function(c,d){function e(){var f,g;f=a('<span class="tt-suggestions"></span>').css(k.suggestions);g=b.map(d,function(b){b=a('<div class="tt-suggestion"></div>').append(h.templates.suggestion(b)).data("ttDataset",h.name).data("ttValue",h.displayFn(b)).data("ttDatum",b);b.children().each(function(){a(this).css(k.suggestionChild)});return b});f.append.apply(f,g);h.highlight&&p({className:"tt-highlight",node:f[0],pattern:c});return f}
function f(){return h.templates.header({query:c,isEmpty:!l})}function g(){return h.templates.footer({query:c,isEmpty:!l})}if(this.$el){var h=this,l;this.$el.empty();l=d&&d.length;!l&&this.templates.empty?this.$el.html(h.templates.empty({query:c,isEmpty:!0})).prepend(h.templates.header?f():null).append(h.templates.footer?g():null):l&&this.$el.html(e()).prepend(h.templates.header?f():null).append(h.templates.footer?g():null);this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(a){var b=
this;this.query=a;this.canceled=!1;this.source(a,function(c){b.canceled||a!==b.query||b._render(a,c)})},cancel:function(){this.canceled=!0},clear:function(){this.cancel();this.$el.empty();this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}});return c}(),r=function(){function c(e){var f=this,g,h,k;e=e||{};e.menu||a.error("menu is required");this.isOpen=!1;this.isEmpty=!0;this.datasets=b.map(e.datasets,d);g=b.bind(this._onSuggestionClick,this);
h=b.bind(this._onSuggestionMouseEnter,this);k=b.bind(this._onSuggestionMouseLeave,this);this.$menu=a(e.menu).on("click.tt",".tt-suggestion",g).on("mouseenter.tt",".tt-suggestion",h).on("mouseleave.tt",".tt-suggestion",k);b.each(this.datasets,function(a){f.$menu.append(a.getRoot());a.onSync("rendered",f._onRendered,f)})}function d(a){return new q(a)}b.mixin(c.prototype,l,{_onSuggestionClick:function(b){this.trigger("suggestionClicked",a(b.currentTarget))},_onSuggestionMouseEnter:function(b){this._removeCursor();
this._setCursor(a(b.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){(this.isEmpty=b.every(this.datasets,function(a){return a.isEmpty()}))?this._hide():this.isOpen&&this._show();this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(a,
b){a.first().addClass("tt-cursor");!b&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(a){var b,c;this.isOpen&&(c=this._getCursor(),b=this._getSuggestions(),this._removeCursor(),a=b.index(c)+a,a=(a+1)%(b.length+1)-1,-1===a?this.trigger("cursorRemoved"):(-1>a&&(a=b.length-1),this._setCursor(b=b.eq(a)),this._ensureVisible(b)))},_ensureVisible:function(a){var b,c,d;b=a.position().top;a=b+a.outerHeight(!0);c=this.$menu.scrollTop();
d=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10);0>b?this.$menu.scrollTop(c+b):d<a&&this.$menu.scrollTop(c+(a-d))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(a){this.$menu.css("ltr"===a?k.ltr:k.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},
getDatumForSuggestion:function(a){var b=null;a.length&&(b={raw:q.extractDatum(a),value:q.extractValue(a),datasetName:q.extractDatasetName(a)});return b},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(a){b.each(this.datasets,function(b){b.update(a)})},empty:function(){b.each(this.datasets,function(a){a.clear()});this.isEmpty=!0},isVisible:function(){return this.isOpen&&
!this.isEmpty},destroy:function(){this.$menu.off(".tt");this.$menu=null;b.each(this.datasets,function(a){a.destroy()})}});return c}(),v=function(){function c(e){var f,g,h;e=e||{};e.input||a.error("missing input");this.isActivated=!1;this.autoselect=!!e.autoselect;this.minLength=b.isNumber(e.minLength)?e.minLength:1;this.$node=d(e.input,e.withHint);f=this.$node.find(".tt-dropdown-menu");g=this.$node.find(".tt-input");h=this.$node.find(".tt-hint");g.on("blur.tt",function(a){var c,d;c=document.activeElement;
d=f.is(c);c=0<f.has(c).length;b.isMsie()&&(d||c)&&(a.preventDefault(),a.stopImmediatePropagation(),b.defer(function(){g.focus()}))});f.on("mousedown.tt",function(a){a.preventDefault()});this.eventBus=e.eventBus||new m({el:g});this.dropdown=(new r({menu:f,datasets:e.datasets})).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,
this).onAsync("datasetRendered",this._onDatasetRendered,this);this.input=(new n({input:g,hint:h})).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,
this).onSync("whitespaceChanged",this._onWhitespaceChanged,this);this._setLanguageDirection()}function d(b,c){var f,g,h,l;f=a(b);g=a('<span class="twitter-typeahead"></span>').css(k.wrapper);h=a('<span class="tt-dropdown-menu"></span>').css(k.dropdown);l=f.clone().css(k.hint).css(e(f));l.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder required").prop("readonly",!0).attr({autocomplete:"off",spellcheck:"false",tabindex:-1});f.data("ttAttrs",{dir:f.attr("dir"),autocomplete:f.attr("autocomplete"),
spellcheck:f.attr("spellcheck"),style:f.attr("style")});f.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(c?k.input:k.inputWithNoHint);try{!f.attr("dir")&&f.attr("dir","auto")}catch(m){}return f.wrap(g).parent().prepend(c?l:null).append(h)}function e(a){return{backgroundAttachment:a.css("background-attachment"),backgroundClip:a.css("background-clip"),backgroundColor:a.css("background-color"),backgroundImage:a.css("background-image"),backgroundOrigin:a.css("background-origin"),backgroundPosition:a.css("background-position"),
backgroundRepeat:a.css("background-repeat"),backgroundSize:a.css("background-size")}}function f(a){var c=a.find(".tt-input");b.each(c.data("ttAttrs"),function(a,d){b.isUndefined(a)?c.removeAttr(d):c.attr(d,a)});c.detach().removeData("ttAttrs").removeClass("tt-input").insertAfter(a);a.remove()}b.mixin(c.prototype,{_onSuggestionClicked:function(a,b){var c;(c=this.dropdown.getDatumForSuggestion(b))&&this._select(c)},_onCursorMoved:function(){var a=this.dropdown.getDatumForCursor();this.input.setInputValue(a.value,
!0);this.eventBus.trigger("cursorchanged",a.raw,a.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue();this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint();this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint();this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0;this.dropdown.open()},_onBlurred:function(){this.isActivated=!1;this.dropdown.empty();this.dropdown.close()},_onEnterKeyed:function(a,
b){var c,d;c=this.dropdown.getDatumForCursor();d=this.dropdown.getDatumForTopSuggestion();c?(this._select(c),b.preventDefault()):this.autoselect&&d&&(this._select(d),b.preventDefault())},_onTabKeyed:function(a,b){var c;(c=this.dropdown.getDatumForCursor())?(this._select(c),b.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close();this.input.resetInputValue()},_onUpKeyed:function(){var a=this.input.getQuery();this.dropdown.isEmpty&&a.length>=this.minLength?this.dropdown.update(a):
this.dropdown.moveCursorUp();this.dropdown.open()},_onDownKeyed:function(){var a=this.input.getQuery();this.dropdown.isEmpty&&a.length>=this.minLength?this.dropdown.update(a):this.dropdown.moveCursorDown();this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(a,b){this.input.clearHintIfInvalid();b.length>=this.minLength?this.dropdown.update(b):this.dropdown.empty();this.dropdown.open();
this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint();this.dropdown.open()},_setLanguageDirection:function(){var a;this.dir!==(a=this.input.getLanguageDirection())&&(this.dir=a,this.$node.css("direction",a),this.dropdown.setLanguageDirection(a))},_updateHint:function(){var a,c,d;(a=this.dropdown.getDatumForTopSuggestion())&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(c=this.input.getInputValue(),d=n.normalizeQuery(c),d=b.escapeRegExChars(d),d=new RegExp("^(?:"+
d+")(.+$)","i"),(a=d.exec(a.value))?this.input.setHint(c+a[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(a){var b,c;b=this.input.getHint();c=this.input.getQuery();a=a||this.input.isCursorAtEnd();b&&c!==b&&a&&((b=this.dropdown.getDatumForTopSuggestion())&&this.input.setInputValue(b.value),this.eventBus.trigger("autocompleted",b.raw,b.datasetName))},_select:function(a){this.input.setQuery(a.value);this.input.setInputValue(a.value,!0);this._setLanguageDirection();this.eventBus.trigger("selected",
a.raw,a.datasetName);this.dropdown.close();b.defer(b.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(a){a=b.toStr(a);this.isActivated?this.input.setInputValue(a):(this.input.setQuery(a),this.input.setInputValue(a,!0));this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy();this.dropdown.destroy();f(this.$node);this.$node=null}});return c}();(function(){var c,
d;c=a.fn.typeahead;d={initialize:function(c,d){d=b.isArray(d)?d:[].slice.call(arguments,1);c=c||{};return this.each(function(){var e=a(this),f;b.each(d,function(a){a.highlight=!!c.highlight});f=new v({input:e,eventBus:new m({el:e}),withHint:b.isUndefined(c.hint)?!0:!!c.hint,minLength:c.minLength,autoselect:c.autoselect,datasets:d});e.data("ttTypeahead",f)})},open:function(){return this.each(function(){var b;(b=a(this).data("ttTypeahead"))&&b.open()})},close:function(){return this.each(function(){var b;
(b=a(this).data("ttTypeahead"))&&b.close()})},val:function(b){function c(){var d;(d=a(this).data("ttTypeahead"))&&d.setVal(b)}function d(a){var b;if(a=a.data("ttTypeahead"))b=a.getVal();return b}return arguments.length?this.each(c):d(this.first())},destroy:function(){return this.each(function(){var b=a(this),c;if(c=b.data("ttTypeahead"))c.destroy(),b.removeData("ttTypeahead")})}};a.fn.typeahead=function(b){var c;return d[b]&&"initialize"!==b?(c=this.filter(function(){return!!a(this).data("ttTypeahead")}),
d[b].apply(c,[].slice.call(arguments,1))):d.initialize.apply(this,arguments)};a.fn.typeahead.noConflict=function(){a.fn.typeahead=c;return this}})()})(window.jQuery);
